var Yv=e=>{throw TypeError(e)};var Bf=(e,t,r)=>t.has(e)||Yv("Cannot "+r);var $=(e,t,r)=>(Bf(e,t,"read from private field"),r?r.call(e):t.get(e)),Re=(e,t,r)=>t.has(e)?Yv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),_e=(e,t,r,n)=>(Bf(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Fe=(e,t,r)=>(Bf(e,t,"access private method"),r);var Bc=(e,t,r,n)=>({set _(a){_e(e,t,a,r)},get _(){return $(e,t,n)}});function sk(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ak(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Jb={exports:{}},Au={},Zb={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lc=Symbol.for("react.element"),ik=Symbol.for("react.portal"),ok=Symbol.for("react.fragment"),lk=Symbol.for("react.strict_mode"),ck=Symbol.for("react.profiler"),dk=Symbol.for("react.provider"),uk=Symbol.for("react.context"),fk=Symbol.for("react.forward_ref"),hk=Symbol.for("react.suspense"),mk=Symbol.for("react.memo"),pk=Symbol.for("react.lazy"),Xv=Symbol.iterator;function gk(e){return e===null||typeof e!="object"?null:(e=Xv&&e[Xv]||e["@@iterator"],typeof e=="function"?e:null)}var e0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},t0=Object.assign,r0={};function Io(e,t,r){this.props=e,this.context=t,this.refs=r0,this.updater=r||e0}Io.prototype.isReactComponent={};Io.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Io.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function n0(){}n0.prototype=Io.prototype;function Up(e,t,r){this.props=e,this.context=t,this.refs=r0,this.updater=r||e0}var Bp=Up.prototype=new n0;Bp.constructor=Up;t0(Bp,Io.prototype);Bp.isPureReactComponent=!0;var Jv=Array.isArray,s0=Object.prototype.hasOwnProperty,qp={current:null},a0={key:!0,ref:!0,__self:!0,__source:!0};function i0(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)s0.call(t,n)&&!a0.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:lc,type:e,key:i,ref:o,props:a,_owner:qp.current}}function vk(e,t){return{$$typeof:lc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zp(e){return typeof e=="object"&&e!==null&&e.$$typeof===lc}function yk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Zv=/\/+/g;function qf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yk(""+e.key):t.toString(36)}function jd(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case lc:case ik:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+qf(o,0):n,Jv(a)?(r="",e!=null&&(r=e.replace(Zv,"$&/")+"/"),jd(a,t,r,"",function(d){return d})):a!=null&&(zp(a)&&(a=vk(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Zv,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Jv(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+qf(i,l);o+=jd(i,t,r,c,a)}else if(c=gk(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+qf(i,l++),o+=jd(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function qc(e,t,r){if(e==null)return e;var n=[],a=0;return jd(e,n,"","",function(i){return t.call(r,i,a++)}),n}function xk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ir={current:null},Nd={transition:null},bk={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:Nd,ReactCurrentOwner:qp};function o0(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:qc,forEach:function(e,t,r){qc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return qc(e,function(){t++}),t},toArray:function(e){return qc(e,function(t){return t})||[]},only:function(e){if(!zp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ze.Component=Io;ze.Fragment=ok;ze.Profiler=ck;ze.PureComponent=Up;ze.StrictMode=lk;ze.Suspense=hk;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bk;ze.act=o0;ze.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=t0({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=qp.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)s0.call(t,c)&&!a0.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:lc,type:e.type,key:a,ref:i,props:n,_owner:o}};ze.createContext=function(e){return e={$$typeof:uk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dk,_context:e},e.Consumer=e};ze.createElement=i0;ze.createFactory=function(e){var t=i0.bind(null,e);return t.type=e,t};ze.createRef=function(){return{current:null}};ze.forwardRef=function(e){return{$$typeof:fk,render:e}};ze.isValidElement=zp;ze.lazy=function(e){return{$$typeof:pk,_payload:{_status:-1,_result:e},_init:xk}};ze.memo=function(e,t){return{$$typeof:mk,type:e,compare:t===void 0?null:t}};ze.startTransition=function(e){var t=Nd.transition;Nd.transition={};try{e()}finally{Nd.transition=t}};ze.unstable_act=o0;ze.useCallback=function(e,t){return ir.current.useCallback(e,t)};ze.useContext=function(e){return ir.current.useContext(e)};ze.useDebugValue=function(){};ze.useDeferredValue=function(e){return ir.current.useDeferredValue(e)};ze.useEffect=function(e,t){return ir.current.useEffect(e,t)};ze.useId=function(){return ir.current.useId()};ze.useImperativeHandle=function(e,t,r){return ir.current.useImperativeHandle(e,t,r)};ze.useInsertionEffect=function(e,t){return ir.current.useInsertionEffect(e,t)};ze.useLayoutEffect=function(e,t){return ir.current.useLayoutEffect(e,t)};ze.useMemo=function(e,t){return ir.current.useMemo(e,t)};ze.useReducer=function(e,t,r){return ir.current.useReducer(e,t,r)};ze.useRef=function(e){return ir.current.useRef(e)};ze.useState=function(e){return ir.current.useState(e)};ze.useSyncExternalStore=function(e,t,r){return ir.current.useSyncExternalStore(e,t,r)};ze.useTransition=function(){return ir.current.useTransition()};ze.version="18.3.1";Zb.exports=ze;var h=Zb.exports;const ye=Fp(h),Vp=sk({__proto__:null,default:ye},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wk=h,jk=Symbol.for("react.element"),Nk=Symbol.for("react.fragment"),_k=Object.prototype.hasOwnProperty,Sk=wk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ck={key:!0,ref:!0,__self:!0,__source:!0};function l0(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)_k.call(t,n)&&!Ck.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:jk,type:e,key:i,ref:o,props:a,_owner:Sk.current}}Au.Fragment=Nk;Au.jsx=l0;Au.jsxs=l0;Jb.exports=Au;var s=Jb.exports,c0={exports:{}},Lr={},d0={exports:{}},u0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,L){var J=F.length;F.push(L);e:for(;0<J;){var ce=J-1>>>1,B=F[ce];if(0<a(B,L))F[ce]=L,F[J]=B,J=ce;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var L=F[0],J=F.pop();if(J!==L){F[0]=J;e:for(var ce=0,B=F.length,I=B>>>1;ce<I;){var V=2*(ce+1)-1,Q=F[V],se=V+1,Z=F[se];if(0>a(Q,J))se<B&&0>a(Z,Q)?(F[ce]=Z,F[se]=J,ce=se):(F[ce]=Q,F[V]=J,ce=V);else if(se<B&&0>a(Z,J))F[ce]=Z,F[se]=J,ce=se;else break e}}return L}function a(F,L){var J=F.sortIndex-L.sortIndex;return J!==0?J:F.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,m=3,p=!1,x=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var L=r(d);L!==null;){if(L.callback===null)n(d);else if(L.startTime<=F)n(d),L.sortIndex=L.expirationTime,t(c,L);else break;L=r(d)}}function N(F){if(g=!1,b(F),!x)if(r(c)!==null)x=!0,A(j);else{var L=r(d);L!==null&&O(N,L.startTime-F)}}function j(F,L){x=!1,g&&(g=!1,v(M),M=-1),p=!0;var J=m;try{for(b(L),f=r(c);f!==null&&(!(f.expirationTime>L)||F&&!P());){var ce=f.callback;if(typeof ce=="function"){f.callback=null,m=f.priorityLevel;var B=ce(f.expirationTime<=L);L=e.unstable_now(),typeof B=="function"?f.callback=B:f===r(c)&&n(c),b(L)}else n(c);f=r(c)}if(f!==null)var I=!0;else{var V=r(d);V!==null&&O(N,V.startTime-L),I=!1}return I}finally{f=null,m=J,p=!1}}var C=!1,E=null,M=-1,H=5,q=-1;function P(){return!(e.unstable_now()-q<H)}function K(){if(E!==null){var F=e.unstable_now();q=F;var L=!0;try{L=E(!0,F)}finally{L?ee():(C=!1,E=null)}}else C=!1}var ee;if(typeof y=="function")ee=function(){y(K)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,S=D.port2;D.port1.onmessage=K,ee=function(){S.postMessage(null)}}else ee=function(){w(K,0)};function A(F){E=F,C||(C=!0,ee())}function O(F,L){M=w(function(){F(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){x||p||(x=!0,A(j))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(F){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var J=m;m=L;try{return F()}finally{m=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,L){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var J=m;m=F;try{return L()}finally{m=J}},e.unstable_scheduleCallback=function(F,L,J){var ce=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ce+J:ce):J=ce,F){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=J+B,F={id:u++,callback:L,priorityLevel:F,startTime:J,expirationTime:B,sortIndex:-1},J>ce?(F.sortIndex=J,t(d,F),r(c)===null&&F===r(d)&&(g?(v(M),M=-1):g=!0,O(N,J-ce))):(F.sortIndex=B,t(c,F),x||p||(x=!0,A(j))),F},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(F){var L=m;return function(){var J=m;m=L;try{return F.apply(this,arguments)}finally{m=J}}}})(u0);d0.exports=u0;var Ek=d0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kk=h,Dr=Ek;function fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f0=new Set,Pl={};function ci(e,t){yo(e,t),yo(e+"Capture",t)}function yo(e,t){for(Pl[e]=t,e=0;e<t.length;e++)f0.add(t[e])}var ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hh=Object.prototype.hasOwnProperty,Pk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ey={},ty={};function Tk(e){return Hh.call(ty,e)?!0:Hh.call(ey,e)?!1:Pk.test(e)?ty[e]=!0:(ey[e]=!0,!1)}function Rk(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ik(e,t,r,n){if(t===null||typeof t>"u"||Rk(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function or(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qt[e]=new or(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qt[t]=new or(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qt[e]=new or(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qt[e]=new or(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qt[e]=new or(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qt[e]=new or(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qt[e]=new or(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qt[e]=new or(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qt[e]=new or(e,5,!1,e.toLowerCase(),null,!1,!1)});var Wp=/[\-:]([a-z])/g;function Hp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Wp,Hp);qt[t]=new or(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Wp,Hp);qt[t]=new or(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Wp,Hp);qt[t]=new or(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qt[e]=new or(e,1,!1,e.toLowerCase(),null,!1,!1)});qt.xlinkHref=new or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qt[e]=new or(e,1,!1,e.toLowerCase(),null,!0,!0)});function Kp(e,t,r,n){var a=qt.hasOwnProperty(t)?qt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ik(t,r,a,n)&&(r=null),n||a===null?Tk(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ys=kk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zc=Symbol.for("react.element"),Di=Symbol.for("react.portal"),Mi=Symbol.for("react.fragment"),Qp=Symbol.for("react.strict_mode"),Kh=Symbol.for("react.profiler"),h0=Symbol.for("react.provider"),m0=Symbol.for("react.context"),Gp=Symbol.for("react.forward_ref"),Qh=Symbol.for("react.suspense"),Gh=Symbol.for("react.suspense_list"),Yp=Symbol.for("react.memo"),Rs=Symbol.for("react.lazy"),p0=Symbol.for("react.offscreen"),ry=Symbol.iterator;function Qo(e){return e===null||typeof e!="object"?null:(e=ry&&e[ry]||e["@@iterator"],typeof e=="function"?e:null)}var mt=Object.assign,zf;function ll(e){if(zf===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);zf=t&&t[1]||""}return`
`+zf+e}var Vf=!1;function Wf(e,t){if(!e||Vf)return"";Vf=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Vf=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ll(e):""}function Ak(e){switch(e.tag){case 5:return ll(e.type);case 16:return ll("Lazy");case 13:return ll("Suspense");case 19:return ll("SuspenseList");case 0:case 2:case 15:return e=Wf(e.type,!1),e;case 11:return e=Wf(e.type.render,!1),e;case 1:return e=Wf(e.type,!0),e;default:return""}}function Yh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mi:return"Fragment";case Di:return"Portal";case Kh:return"Profiler";case Qp:return"StrictMode";case Qh:return"Suspense";case Gh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case m0:return(e.displayName||"Context")+".Consumer";case h0:return(e._context.displayName||"Context")+".Provider";case Gp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Yp:return t=e.displayName||null,t!==null?t:Yh(e.type)||"Memo";case Rs:t=e._payload,e=e._init;try{return Yh(e(t))}catch{}}return null}function Ok(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yh(t);case 8:return t===Qp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ia(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function g0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Dk(e){var t=g0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vc(e){e._valueTracker||(e._valueTracker=Dk(e))}function v0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=g0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Vd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xh(e,t){var r=t.checked;return mt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ny(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ia(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function y0(e,t){t=t.checked,t!=null&&Kp(e,"checked",t,!1)}function Jh(e,t){y0(e,t);var r=ia(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Zh(e,t.type,r):t.hasOwnProperty("defaultValue")&&Zh(e,t.type,ia(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sy(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Zh(e,t,r){(t!=="number"||Vd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var cl=Array.isArray;function Qi(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ia(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function em(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(fe(91));return mt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ay(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(fe(92));if(cl(r)){if(1<r.length)throw Error(fe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ia(r)}}function x0(e,t){var r=ia(t.value),n=ia(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function iy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function b0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?b0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Wc,w0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Wc=Wc||document.createElement("div"),Wc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Wc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Tl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var gl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mk=["Webkit","ms","Moz","O"];Object.keys(gl).forEach(function(e){Mk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gl[t]=gl[e]})});function j0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||gl.hasOwnProperty(e)&&gl[e]?(""+t).trim():t+"px"}function N0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=j0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Lk=mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rm(e,t){if(t){if(Lk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(fe(62))}}function nm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sm=null;function Xp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var am=null,Gi=null,Yi=null;function oy(e){if(e=uc(e)){if(typeof am!="function")throw Error(fe(280));var t=e.stateNode;t&&(t=$u(t),am(e.stateNode,e.type,t))}}function _0(e){Gi?Yi?Yi.push(e):Yi=[e]:Gi=e}function S0(){if(Gi){var e=Gi,t=Yi;if(Yi=Gi=null,oy(e),t)for(e=0;e<t.length;e++)oy(t[e])}}function C0(e,t){return e(t)}function E0(){}var Hf=!1;function k0(e,t,r){if(Hf)return e(t,r);Hf=!0;try{return C0(e,t,r)}finally{Hf=!1,(Gi!==null||Yi!==null)&&(E0(),S0())}}function Rl(e,t){var r=e.stateNode;if(r===null)return null;var n=$u(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(fe(231,t,typeof r));return r}var im=!1;if(ds)try{var Go={};Object.defineProperty(Go,"passive",{get:function(){im=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{im=!1}function $k(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var vl=!1,Wd=null,Hd=!1,om=null,Fk={onError:function(e){vl=!0,Wd=e}};function Uk(e,t,r,n,a,i,o,l,c){vl=!1,Wd=null,$k.apply(Fk,arguments)}function Bk(e,t,r,n,a,i,o,l,c){if(Uk.apply(this,arguments),vl){if(vl){var d=Wd;vl=!1,Wd=null}else throw Error(fe(198));Hd||(Hd=!0,om=d)}}function di(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function P0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ly(e){if(di(e)!==e)throw Error(fe(188))}function qk(e){var t=e.alternate;if(!t){if(t=di(e),t===null)throw Error(fe(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return ly(a),e;if(i===n)return ly(a),t;i=i.sibling}throw Error(fe(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(fe(189))}}if(r.alternate!==n)throw Error(fe(190))}if(r.tag!==3)throw Error(fe(188));return r.stateNode.current===r?e:t}function T0(e){return e=qk(e),e!==null?R0(e):null}function R0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=R0(e);if(t!==null)return t;e=e.sibling}return null}var I0=Dr.unstable_scheduleCallback,cy=Dr.unstable_cancelCallback,zk=Dr.unstable_shouldYield,Vk=Dr.unstable_requestPaint,xt=Dr.unstable_now,Wk=Dr.unstable_getCurrentPriorityLevel,Jp=Dr.unstable_ImmediatePriority,A0=Dr.unstable_UserBlockingPriority,Kd=Dr.unstable_NormalPriority,Hk=Dr.unstable_LowPriority,O0=Dr.unstable_IdlePriority,Ou=null,Mn=null;function Kk(e){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(Ou,e,void 0,(e.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:Yk,Qk=Math.log,Gk=Math.LN2;function Yk(e){return e>>>=0,e===0?32:31-(Qk(e)/Gk|0)|0}var Hc=64,Kc=4194304;function dl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qd(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=dl(l):(i&=o,i!==0&&(n=dl(i)))}else o=r&~a,o!==0?n=dl(o):i!==0&&(n=dl(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-mn(t),a=1<<r,n|=e[r],t&=~a;return n}function Xk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jk(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-mn(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=Xk(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function lm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function D0(){var e=Hc;return Hc<<=1,!(Hc&4194240)&&(Hc=64),e}function Kf(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function cc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-mn(t),e[t]=r}function Zk(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-mn(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Zp(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-mn(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ze=0;function M0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var L0,eg,$0,F0,U0,cm=!1,Qc=[],Qs=null,Gs=null,Ys=null,Il=new Map,Al=new Map,As=[],eP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dy(e,t){switch(e){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":Il.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(t.pointerId)}}function Yo(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=uc(t),t!==null&&eg(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function tP(e,t,r,n,a){switch(t){case"focusin":return Qs=Yo(Qs,e,t,r,n,a),!0;case"dragenter":return Gs=Yo(Gs,e,t,r,n,a),!0;case"mouseover":return Ys=Yo(Ys,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Il.set(i,Yo(Il.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Al.set(i,Yo(Al.get(i)||null,e,t,r,n,a)),!0}return!1}function B0(e){var t=Ta(e.target);if(t!==null){var r=di(t);if(r!==null){if(t=r.tag,t===13){if(t=P0(r),t!==null){e.blockedOn=t,U0(e.priority,function(){$0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _d(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=dm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);sm=n,r.target.dispatchEvent(n),sm=null}else return t=uc(r),t!==null&&eg(t),e.blockedOn=r,!1;t.shift()}return!0}function uy(e,t,r){_d(e)&&r.delete(t)}function rP(){cm=!1,Qs!==null&&_d(Qs)&&(Qs=null),Gs!==null&&_d(Gs)&&(Gs=null),Ys!==null&&_d(Ys)&&(Ys=null),Il.forEach(uy),Al.forEach(uy)}function Xo(e,t){e.blockedOn===t&&(e.blockedOn=null,cm||(cm=!0,Dr.unstable_scheduleCallback(Dr.unstable_NormalPriority,rP)))}function Ol(e){function t(a){return Xo(a,e)}if(0<Qc.length){Xo(Qc[0],e);for(var r=1;r<Qc.length;r++){var n=Qc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Qs!==null&&Xo(Qs,e),Gs!==null&&Xo(Gs,e),Ys!==null&&Xo(Ys,e),Il.forEach(t),Al.forEach(t),r=0;r<As.length;r++)n=As[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<As.length&&(r=As[0],r.blockedOn===null);)B0(r),r.blockedOn===null&&As.shift()}var Xi=ys.ReactCurrentBatchConfig,Gd=!0;function nP(e,t,r,n){var a=Ze,i=Xi.transition;Xi.transition=null;try{Ze=1,tg(e,t,r,n)}finally{Ze=a,Xi.transition=i}}function sP(e,t,r,n){var a=Ze,i=Xi.transition;Xi.transition=null;try{Ze=4,tg(e,t,r,n)}finally{Ze=a,Xi.transition=i}}function tg(e,t,r,n){if(Gd){var a=dm(e,t,r,n);if(a===null)nh(e,t,n,Yd,r),dy(e,n);else if(tP(a,e,t,r,n))n.stopPropagation();else if(dy(e,n),t&4&&-1<eP.indexOf(e)){for(;a!==null;){var i=uc(a);if(i!==null&&L0(i),i=dm(e,t,r,n),i===null&&nh(e,t,n,Yd,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else nh(e,t,n,null,r)}}var Yd=null;function dm(e,t,r,n){if(Yd=null,e=Xp(n),e=Ta(e),e!==null)if(t=di(e),t===null)e=null;else if(r=t.tag,r===13){if(e=P0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yd=e,null}function q0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wk()){case Jp:return 1;case A0:return 4;case Kd:case Hk:return 16;case O0:return 536870912;default:return 16}default:return 16}}var Ws=null,rg=null,Sd=null;function z0(){if(Sd)return Sd;var e,t=rg,r=t.length,n,a="value"in Ws?Ws.value:Ws.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return Sd=a.slice(e,1<n?1-n:void 0)}function Cd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gc(){return!0}function fy(){return!1}function $r(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Gc:fy,this.isPropagationStopped=fy,this}return mt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Gc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Gc)},persist:function(){},isPersistent:Gc}),t}var Ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ng=$r(Ao),dc=mt({},Ao,{view:0,detail:0}),aP=$r(dc),Qf,Gf,Jo,Du=mt({},dc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jo&&(Jo&&e.type==="mousemove"?(Qf=e.screenX-Jo.screenX,Gf=e.screenY-Jo.screenY):Gf=Qf=0,Jo=e),Qf)},movementY:function(e){return"movementY"in e?e.movementY:Gf}}),hy=$r(Du),iP=mt({},Du,{dataTransfer:0}),oP=$r(iP),lP=mt({},dc,{relatedTarget:0}),Yf=$r(lP),cP=mt({},Ao,{animationName:0,elapsedTime:0,pseudoElement:0}),dP=$r(cP),uP=mt({},Ao,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fP=$r(uP),hP=mt({},Ao,{data:0}),my=$r(hP),mP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gP[e])?!!t[e]:!1}function sg(){return vP}var yP=mt({},dc,{key:function(e){if(e.key){var t=mP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sg,charCode:function(e){return e.type==="keypress"?Cd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xP=$r(yP),bP=mt({},Du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),py=$r(bP),wP=mt({},dc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sg}),jP=$r(wP),NP=mt({},Ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),_P=$r(NP),SP=mt({},Du,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),CP=$r(SP),EP=[9,13,27,32],ag=ds&&"CompositionEvent"in window,yl=null;ds&&"documentMode"in document&&(yl=document.documentMode);var kP=ds&&"TextEvent"in window&&!yl,V0=ds&&(!ag||yl&&8<yl&&11>=yl),gy=" ",vy=!1;function W0(e,t){switch(e){case"keyup":return EP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function H0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Li=!1;function PP(e,t){switch(e){case"compositionend":return H0(t);case"keypress":return t.which!==32?null:(vy=!0,gy);case"textInput":return e=t.data,e===gy&&vy?null:e;default:return null}}function TP(e,t){if(Li)return e==="compositionend"||!ag&&W0(e,t)?(e=z0(),Sd=rg=Ws=null,Li=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return V0&&t.locale!=="ko"?null:t.data;default:return null}}var RP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RP[e.type]:t==="textarea"}function K0(e,t,r,n){_0(n),t=Xd(t,"onChange"),0<t.length&&(r=new ng("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var xl=null,Dl=null;function IP(e){sw(e,0)}function Mu(e){var t=Ui(e);if(v0(t))return e}function AP(e,t){if(e==="change")return t}var Q0=!1;if(ds){var Xf;if(ds){var Jf="oninput"in document;if(!Jf){var xy=document.createElement("div");xy.setAttribute("oninput","return;"),Jf=typeof xy.oninput=="function"}Xf=Jf}else Xf=!1;Q0=Xf&&(!document.documentMode||9<document.documentMode)}function by(){xl&&(xl.detachEvent("onpropertychange",G0),Dl=xl=null)}function G0(e){if(e.propertyName==="value"&&Mu(Dl)){var t=[];K0(t,Dl,e,Xp(e)),k0(IP,t)}}function OP(e,t,r){e==="focusin"?(by(),xl=t,Dl=r,xl.attachEvent("onpropertychange",G0)):e==="focusout"&&by()}function DP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mu(Dl)}function MP(e,t){if(e==="click")return Mu(t)}function LP(e,t){if(e==="input"||e==="change")return Mu(t)}function $P(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gn=typeof Object.is=="function"?Object.is:$P;function Ml(e,t){if(gn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Hh.call(t,a)||!gn(e[a],t[a]))return!1}return!0}function wy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jy(e,t){var r=wy(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wy(r)}}function Y0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Y0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function X0(){for(var e=window,t=Vd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Vd(e.document)}return t}function ig(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function FP(e){var t=X0(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Y0(r.ownerDocument.documentElement,r)){if(n!==null&&ig(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=jy(r,i);var o=jy(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var UP=ds&&"documentMode"in document&&11>=document.documentMode,$i=null,um=null,bl=null,fm=!1;function Ny(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;fm||$i==null||$i!==Vd(n)||(n=$i,"selectionStart"in n&&ig(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),bl&&Ml(bl,n)||(bl=n,n=Xd(um,"onSelect"),0<n.length&&(t=new ng("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=$i)))}function Yc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Fi={animationend:Yc("Animation","AnimationEnd"),animationiteration:Yc("Animation","AnimationIteration"),animationstart:Yc("Animation","AnimationStart"),transitionend:Yc("Transition","TransitionEnd")},Zf={},J0={};ds&&(J0=document.createElement("div").style,"AnimationEvent"in window||(delete Fi.animationend.animation,delete Fi.animationiteration.animation,delete Fi.animationstart.animation),"TransitionEvent"in window||delete Fi.transitionend.transition);function Lu(e){if(Zf[e])return Zf[e];if(!Fi[e])return e;var t=Fi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in J0)return Zf[e]=t[r];return e}var Z0=Lu("animationend"),ew=Lu("animationiteration"),tw=Lu("animationstart"),rw=Lu("transitionend"),nw=new Map,_y="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fa(e,t){nw.set(e,t),ci(t,[e])}for(var eh=0;eh<_y.length;eh++){var th=_y[eh],BP=th.toLowerCase(),qP=th[0].toUpperCase()+th.slice(1);fa(BP,"on"+qP)}fa(Z0,"onAnimationEnd");fa(ew,"onAnimationIteration");fa(tw,"onAnimationStart");fa("dblclick","onDoubleClick");fa("focusin","onFocus");fa("focusout","onBlur");fa(rw,"onTransitionEnd");yo("onMouseEnter",["mouseout","mouseover"]);yo("onMouseLeave",["mouseout","mouseover"]);yo("onPointerEnter",["pointerout","pointerover"]);yo("onPointerLeave",["pointerout","pointerover"]);ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zP=new Set("cancel close invalid load scroll toggle".split(" ").concat(ul));function Sy(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Bk(n,t,void 0,e),e.currentTarget=null}function sw(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Sy(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Sy(a,l,d),i=c}}}if(Hd)throw e=om,Hd=!1,om=null,e}function st(e,t){var r=t[vm];r===void 0&&(r=t[vm]=new Set);var n=e+"__bubble";r.has(n)||(aw(t,e,2,!1),r.add(n))}function rh(e,t,r){var n=0;t&&(n|=4),aw(r,e,n,t)}var Xc="_reactListening"+Math.random().toString(36).slice(2);function Ll(e){if(!e[Xc]){e[Xc]=!0,f0.forEach(function(r){r!=="selectionchange"&&(zP.has(r)||rh(r,!1,e),rh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xc]||(t[Xc]=!0,rh("selectionchange",!1,t))}}function aw(e,t,r,n){switch(q0(t)){case 1:var a=nP;break;case 4:a=sP;break;default:a=tg}r=a.bind(null,t,r,e),a=void 0,!im||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function nh(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Ta(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}k0(function(){var d=i,u=Xp(r),f=[];e:{var m=nw.get(e);if(m!==void 0){var p=ng,x=e;switch(e){case"keypress":if(Cd(r)===0)break e;case"keydown":case"keyup":p=xP;break;case"focusin":x="focus",p=Yf;break;case"focusout":x="blur",p=Yf;break;case"beforeblur":case"afterblur":p=Yf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=hy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=oP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=jP;break;case Z0:case ew:case tw:p=dP;break;case rw:p=_P;break;case"scroll":p=aP;break;case"wheel":p=CP;break;case"copy":case"cut":case"paste":p=fP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=py}var g=(t&4)!==0,w=!g&&e==="scroll",v=g?m!==null?m+"Capture":null:m;g=[];for(var y=d,b;y!==null;){b=y;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,v!==null&&(N=Rl(y,v),N!=null&&g.push($l(y,N,b)))),w)break;y=y.return}0<g.length&&(m=new p(m,x,null,r,u),f.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&r!==sm&&(x=r.relatedTarget||r.fromElement)&&(Ta(x)||x[us]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(x=r.relatedTarget||r.toElement,p=d,x=x?Ta(x):null,x!==null&&(w=di(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=d),p!==x)){if(g=hy,N="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=py,N="onPointerLeave",v="onPointerEnter",y="pointer"),w=p==null?m:Ui(p),b=x==null?m:Ui(x),m=new g(N,y+"leave",p,r,u),m.target=w,m.relatedTarget=b,N=null,Ta(u)===d&&(g=new g(v,y+"enter",x,r,u),g.target=b,g.relatedTarget=w,N=g),w=N,p&&x)t:{for(g=p,v=x,y=0,b=g;b;b=wi(b))y++;for(b=0,N=v;N;N=wi(N))b++;for(;0<y-b;)g=wi(g),y--;for(;0<b-y;)v=wi(v),b--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=wi(g),v=wi(v)}g=null}else g=null;p!==null&&Cy(f,m,p,g,!1),x!==null&&w!==null&&Cy(f,w,x,g,!0)}}e:{if(m=d?Ui(d):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var j=AP;else if(yy(m))if(Q0)j=LP;else{j=DP;var C=OP}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=MP);if(j&&(j=j(e,d))){K0(f,j,r,u);break e}C&&C(e,m,d),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&Zh(m,"number",m.value)}switch(C=d?Ui(d):window,e){case"focusin":(yy(C)||C.contentEditable==="true")&&($i=C,um=d,bl=null);break;case"focusout":bl=um=$i=null;break;case"mousedown":fm=!0;break;case"contextmenu":case"mouseup":case"dragend":fm=!1,Ny(f,r,u);break;case"selectionchange":if(UP)break;case"keydown":case"keyup":Ny(f,r,u)}var E;if(ag)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Li?W0(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(V0&&r.locale!=="ko"&&(Li||M!=="onCompositionStart"?M==="onCompositionEnd"&&Li&&(E=z0()):(Ws=u,rg="value"in Ws?Ws.value:Ws.textContent,Li=!0)),C=Xd(d,M),0<C.length&&(M=new my(M,e,null,r,u),f.push({event:M,listeners:C}),E?M.data=E:(E=H0(r),E!==null&&(M.data=E)))),(E=kP?PP(e,r):TP(e,r))&&(d=Xd(d,"onBeforeInput"),0<d.length&&(u=new my("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:d}),u.data=E))}sw(f,t)})}function $l(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Xd(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Rl(e,r),i!=null&&n.unshift($l(e,i,a)),i=Rl(e,t),i!=null&&n.push($l(e,i,a))),e=e.return}return n}function wi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cy(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=Rl(r,i),c!=null&&o.unshift($l(r,c,l))):a||(c=Rl(r,i),c!=null&&o.push($l(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var VP=/\r\n?/g,WP=/\u0000|\uFFFD/g;function Ey(e){return(typeof e=="string"?e:""+e).replace(VP,`
`).replace(WP,"")}function Jc(e,t,r){if(t=Ey(t),Ey(e)!==t&&r)throw Error(fe(425))}function Jd(){}var hm=null,mm=null;function pm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gm=typeof setTimeout=="function"?setTimeout:void 0,HP=typeof clearTimeout=="function"?clearTimeout:void 0,ky=typeof Promise=="function"?Promise:void 0,KP=typeof queueMicrotask=="function"?queueMicrotask:typeof ky<"u"?function(e){return ky.resolve(null).then(e).catch(QP)}:gm;function QP(e){setTimeout(function(){throw e})}function sh(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Ol(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Ol(t)}function Xs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Py(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Oo=Math.random().toString(36).slice(2),In="__reactFiber$"+Oo,Fl="__reactProps$"+Oo,us="__reactContainer$"+Oo,vm="__reactEvents$"+Oo,GP="__reactListeners$"+Oo,YP="__reactHandles$"+Oo;function Ta(e){var t=e[In];if(t)return t;for(var r=e.parentNode;r;){if(t=r[us]||r[In]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Py(e);e!==null;){if(r=e[In])return r;e=Py(e)}return t}e=r,r=e.parentNode}return null}function uc(e){return e=e[In]||e[us],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ui(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(fe(33))}function $u(e){return e[Fl]||null}var ym=[],Bi=-1;function ha(e){return{current:e}}function ot(e){0>Bi||(e.current=ym[Bi],ym[Bi]=null,Bi--)}function rt(e,t){Bi++,ym[Bi]=e.current,e.current=t}var oa={},Yt=ha(oa),yr=ha(!1),Ga=oa;function xo(e,t){var r=e.type.contextTypes;if(!r)return oa;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function xr(e){return e=e.childContextTypes,e!=null}function Zd(){ot(yr),ot(Yt)}function Ty(e,t,r){if(Yt.current!==oa)throw Error(fe(168));rt(Yt,t),rt(yr,r)}function iw(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(fe(108,Ok(e)||"Unknown",a));return mt({},r,n)}function eu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||oa,Ga=Yt.current,rt(Yt,e),rt(yr,yr.current),!0}function Ry(e,t,r){var n=e.stateNode;if(!n)throw Error(fe(169));r?(e=iw(e,t,Ga),n.__reactInternalMemoizedMergedChildContext=e,ot(yr),ot(Yt),rt(Yt,e)):ot(yr),rt(yr,r)}var Jn=null,Fu=!1,ah=!1;function ow(e){Jn===null?Jn=[e]:Jn.push(e)}function XP(e){Fu=!0,ow(e)}function ma(){if(!ah&&Jn!==null){ah=!0;var e=0,t=Ze;try{var r=Jn;for(Ze=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Jn=null,Fu=!1}catch(a){throw Jn!==null&&(Jn=Jn.slice(e+1)),I0(Jp,ma),a}finally{Ze=t,ah=!1}}return null}var qi=[],zi=0,tu=null,ru=0,Vr=[],Wr=0,Ya=null,as=1,is="";function _a(e,t){qi[zi++]=ru,qi[zi++]=tu,tu=e,ru=t}function lw(e,t,r){Vr[Wr++]=as,Vr[Wr++]=is,Vr[Wr++]=Ya,Ya=e;var n=as;e=is;var a=32-mn(n)-1;n&=~(1<<a),r+=1;var i=32-mn(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,as=1<<32-mn(t)+a|r<<a|n,is=i+e}else as=1<<i|r<<a|n,is=e}function og(e){e.return!==null&&(_a(e,1),lw(e,1,0))}function lg(e){for(;e===tu;)tu=qi[--zi],qi[zi]=null,ru=qi[--zi],qi[zi]=null;for(;e===Ya;)Ya=Vr[--Wr],Vr[Wr]=null,is=Vr[--Wr],Vr[Wr]=null,as=Vr[--Wr],Vr[Wr]=null}var Rr=null,kr=null,lt=!1,hn=null;function cw(e,t){var r=Qr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Iy(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rr=e,kr=Xs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rr=e,kr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ya!==null?{id:as,overflow:is}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Rr=e,kr=null,!0):!1;default:return!1}}function xm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bm(e){if(lt){var t=kr;if(t){var r=t;if(!Iy(e,t)){if(xm(e))throw Error(fe(418));t=Xs(r.nextSibling);var n=Rr;t&&Iy(e,t)?cw(n,r):(e.flags=e.flags&-4097|2,lt=!1,Rr=e)}}else{if(xm(e))throw Error(fe(418));e.flags=e.flags&-4097|2,lt=!1,Rr=e}}}function Ay(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rr=e}function Zc(e){if(e!==Rr)return!1;if(!lt)return Ay(e),lt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!pm(e.type,e.memoizedProps)),t&&(t=kr)){if(xm(e))throw dw(),Error(fe(418));for(;t;)cw(e,t),t=Xs(t.nextSibling)}if(Ay(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){kr=Xs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}kr=null}}else kr=Rr?Xs(e.stateNode.nextSibling):null;return!0}function dw(){for(var e=kr;e;)e=Xs(e.nextSibling)}function bo(){kr=Rr=null,lt=!1}function cg(e){hn===null?hn=[e]:hn.push(e)}var JP=ys.ReactCurrentBatchConfig;function Zo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(fe(309));var n=r.stateNode}if(!n)throw Error(fe(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(fe(284));if(!r._owner)throw Error(fe(290,e))}return e}function ed(e,t){throw e=Object.prototype.toString.call(t),Error(fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Oy(e){var t=e._init;return t(e._payload)}function uw(e){function t(v,y){if(e){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function r(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function a(v,y){return v=ta(v,y),v.index=0,v.sibling=null,v}function i(v,y,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,y,b,N){return y===null||y.tag!==6?(y=fh(b,v.mode,N),y.return=v,y):(y=a(y,b),y.return=v,y)}function c(v,y,b,N){var j=b.type;return j===Mi?u(v,y,b.props.children,N,b.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Rs&&Oy(j)===y.type)?(N=a(y,b.props),N.ref=Zo(v,y,b),N.return=v,N):(N=Ad(b.type,b.key,b.props,null,v.mode,N),N.ref=Zo(v,y,b),N.return=v,N)}function d(v,y,b,N){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=hh(b,v.mode,N),y.return=v,y):(y=a(y,b.children||[]),y.return=v,y)}function u(v,y,b,N,j){return y===null||y.tag!==7?(y=Va(b,v.mode,N,j),y.return=v,y):(y=a(y,b),y.return=v,y)}function f(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=fh(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case zc:return b=Ad(y.type,y.key,y.props,null,v.mode,b),b.ref=Zo(v,null,y),b.return=v,b;case Di:return y=hh(y,v.mode,b),y.return=v,y;case Rs:var N=y._init;return f(v,N(y._payload),b)}if(cl(y)||Qo(y))return y=Va(y,v.mode,b,null),y.return=v,y;ed(v,y)}return null}function m(v,y,b,N){var j=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(v,y,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case zc:return b.key===j?c(v,y,b,N):null;case Di:return b.key===j?d(v,y,b,N):null;case Rs:return j=b._init,m(v,y,j(b._payload),N)}if(cl(b)||Qo(b))return j!==null?null:u(v,y,b,N,null);ed(v,b)}return null}function p(v,y,b,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(b)||null,l(y,v,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case zc:return v=v.get(N.key===null?b:N.key)||null,c(y,v,N,j);case Di:return v=v.get(N.key===null?b:N.key)||null,d(y,v,N,j);case Rs:var C=N._init;return p(v,y,b,C(N._payload),j)}if(cl(N)||Qo(N))return v=v.get(b)||null,u(y,v,N,j,null);ed(y,N)}return null}function x(v,y,b,N){for(var j=null,C=null,E=y,M=y=0,H=null;E!==null&&M<b.length;M++){E.index>M?(H=E,E=null):H=E.sibling;var q=m(v,E,b[M],N);if(q===null){E===null&&(E=H);break}e&&E&&q.alternate===null&&t(v,E),y=i(q,y,M),C===null?j=q:C.sibling=q,C=q,E=H}if(M===b.length)return r(v,E),lt&&_a(v,M),j;if(E===null){for(;M<b.length;M++)E=f(v,b[M],N),E!==null&&(y=i(E,y,M),C===null?j=E:C.sibling=E,C=E);return lt&&_a(v,M),j}for(E=n(v,E);M<b.length;M++)H=p(E,v,M,b[M],N),H!==null&&(e&&H.alternate!==null&&E.delete(H.key===null?M:H.key),y=i(H,y,M),C===null?j=H:C.sibling=H,C=H);return e&&E.forEach(function(P){return t(v,P)}),lt&&_a(v,M),j}function g(v,y,b,N){var j=Qo(b);if(typeof j!="function")throw Error(fe(150));if(b=j.call(b),b==null)throw Error(fe(151));for(var C=j=null,E=y,M=y=0,H=null,q=b.next();E!==null&&!q.done;M++,q=b.next()){E.index>M?(H=E,E=null):H=E.sibling;var P=m(v,E,q.value,N);if(P===null){E===null&&(E=H);break}e&&E&&P.alternate===null&&t(v,E),y=i(P,y,M),C===null?j=P:C.sibling=P,C=P,E=H}if(q.done)return r(v,E),lt&&_a(v,M),j;if(E===null){for(;!q.done;M++,q=b.next())q=f(v,q.value,N),q!==null&&(y=i(q,y,M),C===null?j=q:C.sibling=q,C=q);return lt&&_a(v,M),j}for(E=n(v,E);!q.done;M++,q=b.next())q=p(E,v,M,q.value,N),q!==null&&(e&&q.alternate!==null&&E.delete(q.key===null?M:q.key),y=i(q,y,M),C===null?j=q:C.sibling=q,C=q);return e&&E.forEach(function(K){return t(v,K)}),lt&&_a(v,M),j}function w(v,y,b,N){if(typeof b=="object"&&b!==null&&b.type===Mi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case zc:e:{for(var j=b.key,C=y;C!==null;){if(C.key===j){if(j=b.type,j===Mi){if(C.tag===7){r(v,C.sibling),y=a(C,b.props.children),y.return=v,v=y;break e}}else if(C.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Rs&&Oy(j)===C.type){r(v,C.sibling),y=a(C,b.props),y.ref=Zo(v,C,b),y.return=v,v=y;break e}r(v,C);break}else t(v,C);C=C.sibling}b.type===Mi?(y=Va(b.props.children,v.mode,N,b.key),y.return=v,v=y):(N=Ad(b.type,b.key,b.props,null,v.mode,N),N.ref=Zo(v,y,b),N.return=v,v=N)}return o(v);case Di:e:{for(C=b.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(v,y.sibling),y=a(y,b.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else t(v,y);y=y.sibling}y=hh(b,v.mode,N),y.return=v,v=y}return o(v);case Rs:return C=b._init,w(v,y,C(b._payload),N)}if(cl(b))return x(v,y,b,N);if(Qo(b))return g(v,y,b,N);ed(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(v,y.sibling),y=a(y,b),y.return=v,v=y):(r(v,y),y=fh(b,v.mode,N),y.return=v,v=y),o(v)):r(v,y)}return w}var wo=uw(!0),fw=uw(!1),nu=ha(null),su=null,Vi=null,dg=null;function ug(){dg=Vi=su=null}function fg(e){var t=nu.current;ot(nu),e._currentValue=t}function wm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ji(e,t){su=e,dg=Vi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gr=!0),e.firstContext=null)}function Jr(e){var t=e._currentValue;if(dg!==e)if(e={context:e,memoizedValue:t,next:null},Vi===null){if(su===null)throw Error(fe(308));Vi=e,su.dependencies={lanes:0,firstContext:e}}else Vi=Vi.next=e;return t}var Ra=null;function hg(e){Ra===null?Ra=[e]:Ra.push(e)}function hw(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,hg(t)):(r.next=a.next,a.next=r),t.interleaved=r,fs(e,n)}function fs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Is=!1;function mg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Js(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,He&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,fs(e,r)}return a=n.interleaved,a===null?(t.next=t,hg(n)):(t.next=a.next,a.next=t),n.interleaved=t,fs(e,r)}function Ed(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Zp(e,r)}}function Dy(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function au(e,t,r,n){var a=e.updateQueue;Is=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,u=d=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,g=l;switch(m=t,p=r,g.tag){case 1:if(x=g.payload,typeof x=="function"){f=x.call(p,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,m=typeof x=="function"?x.call(p,f,m):x,m==null)break e;f=mt({},f,m);break e;case 2:Is=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=f):u=u.next=p,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(c=f),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Ja|=o,e.lanes=o,e.memoizedState=f}}function My(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(fe(191,a));a.call(n)}}}var fc={},Ln=ha(fc),Ul=ha(fc),Bl=ha(fc);function Ia(e){if(e===fc)throw Error(fe(174));return e}function pg(e,t){switch(rt(Bl,t),rt(Ul,e),rt(Ln,fc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=tm(t,e)}ot(Ln),rt(Ln,t)}function jo(){ot(Ln),ot(Ul),ot(Bl)}function pw(e){Ia(Bl.current);var t=Ia(Ln.current),r=tm(t,e.type);t!==r&&(rt(Ul,e),rt(Ln,r))}function gg(e){Ul.current===e&&(ot(Ln),ot(Ul))}var ft=ha(0);function iu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ih=[];function vg(){for(var e=0;e<ih.length;e++)ih[e]._workInProgressVersionPrimary=null;ih.length=0}var kd=ys.ReactCurrentDispatcher,oh=ys.ReactCurrentBatchConfig,Xa=0,ht=null,kt=null,It=null,ou=!1,wl=!1,ql=0,ZP=0;function Vt(){throw Error(fe(321))}function yg(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!gn(e[r],t[r]))return!1;return!0}function xg(e,t,r,n,a,i){if(Xa=i,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kd.current=e===null||e.memoizedState===null?nT:sT,e=r(n,a),wl){i=0;do{if(wl=!1,ql=0,25<=i)throw Error(fe(301));i+=1,It=kt=null,t.updateQueue=null,kd.current=aT,e=r(n,a)}while(wl)}if(kd.current=lu,t=kt!==null&&kt.next!==null,Xa=0,It=kt=ht=null,ou=!1,t)throw Error(fe(300));return e}function bg(){var e=ql!==0;return ql=0,e}function En(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?ht.memoizedState=It=e:It=It.next=e,It}function Zr(){if(kt===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=kt.next;var t=It===null?ht.memoizedState:It.next;if(t!==null)It=t,kt=e;else{if(e===null)throw Error(fe(310));kt=e,e={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},It===null?ht.memoizedState=It=e:It=It.next=e}return It}function zl(e,t){return typeof t=="function"?t(e):t}function lh(e){var t=Zr(),r=t.queue;if(r===null)throw Error(fe(311));r.lastRenderedReducer=e;var n=kt,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Xa&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,ht.lanes|=u,Ja|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,gn(n,t.memoizedState)||(gr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,ht.lanes|=i,Ja|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ch(e){var t=Zr(),r=t.queue;if(r===null)throw Error(fe(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);gn(i,t.memoizedState)||(gr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function gw(){}function vw(e,t){var r=ht,n=Zr(),a=t(),i=!gn(n.memoizedState,a);if(i&&(n.memoizedState=a,gr=!0),n=n.queue,wg(bw.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||It!==null&&It.memoizedState.tag&1){if(r.flags|=2048,Vl(9,xw.bind(null,r,n,a,t),void 0,null),At===null)throw Error(fe(349));Xa&30||yw(r,t,a)}return a}function yw(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function xw(e,t,r,n){t.value=r,t.getSnapshot=n,ww(t)&&jw(e)}function bw(e,t,r){return r(function(){ww(t)&&jw(e)})}function ww(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!gn(e,r)}catch{return!0}}function jw(e){var t=fs(e,1);t!==null&&pn(t,e,1,-1)}function Ly(e){var t=En();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zl,lastRenderedState:e},t.queue=e,e=e.dispatch=rT.bind(null,ht,e),[t.memoizedState,e]}function Vl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Nw(){return Zr().memoizedState}function Pd(e,t,r,n){var a=En();ht.flags|=e,a.memoizedState=Vl(1|t,r,void 0,n===void 0?null:n)}function Uu(e,t,r,n){var a=Zr();n=n===void 0?null:n;var i=void 0;if(kt!==null){var o=kt.memoizedState;if(i=o.destroy,n!==null&&yg(n,o.deps)){a.memoizedState=Vl(t,r,i,n);return}}ht.flags|=e,a.memoizedState=Vl(1|t,r,i,n)}function $y(e,t){return Pd(8390656,8,e,t)}function wg(e,t){return Uu(2048,8,e,t)}function _w(e,t){return Uu(4,2,e,t)}function Sw(e,t){return Uu(4,4,e,t)}function Cw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ew(e,t,r){return r=r!=null?r.concat([e]):null,Uu(4,4,Cw.bind(null,t,e),r)}function jg(){}function kw(e,t){var r=Zr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&yg(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Pw(e,t){var r=Zr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&yg(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Tw(e,t,r){return Xa&21?(gn(r,t)||(r=D0(),ht.lanes|=r,Ja|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gr=!0),e.memoizedState=r)}function eT(e,t){var r=Ze;Ze=r!==0&&4>r?r:4,e(!0);var n=oh.transition;oh.transition={};try{e(!1),t()}finally{Ze=r,oh.transition=n}}function Rw(){return Zr().memoizedState}function tT(e,t,r){var n=ea(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Iw(e))Aw(t,r);else if(r=hw(e,t,r,n),r!==null){var a=nr();pn(r,e,n,a),Ow(r,t,n)}}function rT(e,t,r){var n=ea(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Iw(e))Aw(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,gn(l,o)){var c=t.interleaved;c===null?(a.next=a,hg(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=hw(e,t,a,n),r!==null&&(a=nr(),pn(r,e,n,a),Ow(r,t,n))}}function Iw(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function Aw(e,t){wl=ou=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ow(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Zp(e,r)}}var lu={readContext:Jr,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},nT={readContext:Jr,useCallback:function(e,t){return En().memoizedState=[e,t===void 0?null:t],e},useContext:Jr,useEffect:$y,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Pd(4194308,4,Cw.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Pd(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pd(4,2,e,t)},useMemo:function(e,t){var r=En();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=En();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=tT.bind(null,ht,e),[n.memoizedState,e]},useRef:function(e){var t=En();return e={current:e},t.memoizedState=e},useState:Ly,useDebugValue:jg,useDeferredValue:function(e){return En().memoizedState=e},useTransition:function(){var e=Ly(!1),t=e[0];return e=eT.bind(null,e[1]),En().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ht,a=En();if(lt){if(r===void 0)throw Error(fe(407));r=r()}else{if(r=t(),At===null)throw Error(fe(349));Xa&30||yw(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,$y(bw.bind(null,n,i,e),[e]),n.flags|=2048,Vl(9,xw.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=En(),t=At.identifierPrefix;if(lt){var r=is,n=as;r=(n&~(1<<32-mn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ql++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ZP++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sT={readContext:Jr,useCallback:kw,useContext:Jr,useEffect:wg,useImperativeHandle:Ew,useInsertionEffect:_w,useLayoutEffect:Sw,useMemo:Pw,useReducer:lh,useRef:Nw,useState:function(){return lh(zl)},useDebugValue:jg,useDeferredValue:function(e){var t=Zr();return Tw(t,kt.memoizedState,e)},useTransition:function(){var e=lh(zl)[0],t=Zr().memoizedState;return[e,t]},useMutableSource:gw,useSyncExternalStore:vw,useId:Rw,unstable_isNewReconciler:!1},aT={readContext:Jr,useCallback:kw,useContext:Jr,useEffect:wg,useImperativeHandle:Ew,useInsertionEffect:_w,useLayoutEffect:Sw,useMemo:Pw,useReducer:ch,useRef:Nw,useState:function(){return ch(zl)},useDebugValue:jg,useDeferredValue:function(e){var t=Zr();return kt===null?t.memoizedState=e:Tw(t,kt.memoizedState,e)},useTransition:function(){var e=ch(zl)[0],t=Zr().memoizedState;return[e,t]},useMutableSource:gw,useSyncExternalStore:vw,useId:Rw,unstable_isNewReconciler:!1};function ln(e,t){if(e&&e.defaultProps){t=mt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function jm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:mt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Bu={isMounted:function(e){return(e=e._reactInternals)?di(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=nr(),a=ea(e),i=os(n,a);i.payload=t,r!=null&&(i.callback=r),t=Js(e,i,a),t!==null&&(pn(t,e,a,n),Ed(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=nr(),a=ea(e),i=os(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Js(e,i,a),t!==null&&(pn(t,e,a,n),Ed(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=nr(),n=ea(e),a=os(r,n);a.tag=2,t!=null&&(a.callback=t),t=Js(e,a,n),t!==null&&(pn(t,e,n,r),Ed(t,e,n))}};function Fy(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ml(r,n)||!Ml(a,i):!0}function Dw(e,t,r){var n=!1,a=oa,i=t.contextType;return typeof i=="object"&&i!==null?i=Jr(i):(a=xr(t)?Ga:Yt.current,n=t.contextTypes,i=(n=n!=null)?xo(e,a):oa),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Bu,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Uy(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Bu.enqueueReplaceState(t,t.state,null)}function Nm(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},mg(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Jr(i):(i=xr(t)?Ga:Yt.current,a.context=xo(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(jm(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Bu.enqueueReplaceState(a,a.state,null),au(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function No(e,t){try{var r="",n=t;do r+=Ak(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function dh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function _m(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var iT=typeof WeakMap=="function"?WeakMap:Map;function Mw(e,t,r){r=os(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){du||(du=!0,Om=n),_m(e,t)},r}function Lw(e,t,r){r=os(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){_m(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){_m(e,t),typeof n!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function By(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new iT;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=bT.bind(null,e,t,r),t.then(e,e))}function qy(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zy(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=os(-1,1),t.tag=2,Js(r,t,1))),r.lanes|=1),e)}var oT=ys.ReactCurrentOwner,gr=!1;function tr(e,t,r,n){t.child=e===null?fw(t,null,r,n):wo(t,e.child,r,n)}function Vy(e,t,r,n,a){r=r.render;var i=t.ref;return Ji(t,a),n=xg(e,t,r,n,i,a),r=bg(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,hs(e,t,a)):(lt&&r&&og(t),t.flags|=1,tr(e,t,n,a),t.child)}function Wy(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Tg(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,$w(e,t,i,n,a)):(e=Ad(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ml,r(o,n)&&e.ref===t.ref)return hs(e,t,a)}return t.flags|=1,e=ta(i,n),e.ref=t.ref,e.return=t,t.child=e}function $w(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Ml(i,n)&&e.ref===t.ref)if(gr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(gr=!0);else return t.lanes=e.lanes,hs(e,t,a)}return Sm(e,t,r,n,a)}function Fw(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Hi,Cr),Cr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rt(Hi,Cr),Cr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,rt(Hi,Cr),Cr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,rt(Hi,Cr),Cr|=n;return tr(e,t,a,r),t.child}function Uw(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Sm(e,t,r,n,a){var i=xr(r)?Ga:Yt.current;return i=xo(t,i),Ji(t,a),r=xg(e,t,r,n,i,a),n=bg(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,hs(e,t,a)):(lt&&n&&og(t),t.flags|=1,tr(e,t,r,a),t.child)}function Hy(e,t,r,n,a){if(xr(r)){var i=!0;eu(t)}else i=!1;if(Ji(t,a),t.stateNode===null)Td(e,t),Dw(t,r,n),Nm(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Jr(d):(d=xr(r)?Ga:Yt.current,d=xo(t,d));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Uy(t,o,n,d),Is=!1;var m=t.memoizedState;o.state=m,au(t,n,o,a),c=t.memoizedState,l!==n||m!==c||yr.current||Is?(typeof u=="function"&&(jm(t,r,u,n),c=t.memoizedState),(l=Is||Fy(t,r,l,n,m,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,mw(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:ln(t.type,l),o.props=d,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Jr(c):(c=xr(r)?Ga:Yt.current,c=xo(t,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Uy(t,o,n,c),Is=!1,m=t.memoizedState,o.state=m,au(t,n,o,a);var x=t.memoizedState;l!==f||m!==x||yr.current||Is?(typeof p=="function"&&(jm(t,r,p,n),x=t.memoizedState),(d=Is||Fy(t,r,d,n,m,x,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Cm(e,t,r,n,i,a)}function Cm(e,t,r,n,a,i){Uw(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Ry(t,r,!1),hs(e,t,i);n=t.stateNode,oT.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=wo(t,e.child,null,i),t.child=wo(t,null,l,i)):tr(e,t,l,i),t.memoizedState=n.state,a&&Ry(t,r,!0),t.child}function Bw(e){var t=e.stateNode;t.pendingContext?Ty(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ty(e,t.context,!1),pg(e,t.containerInfo)}function Ky(e,t,r,n,a){return bo(),cg(a),t.flags|=256,tr(e,t,r,n),t.child}var Em={dehydrated:null,treeContext:null,retryLane:0};function km(e){return{baseLanes:e,cachePool:null,transitions:null}}function qw(e,t,r){var n=t.pendingProps,a=ft.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),rt(ft,a&1),e===null)return bm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Vu(o,n,0,null),e=Va(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=km(r),t.memoizedState=Em,e):Ng(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return lT(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ta(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=ta(l,i):(i=Va(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?km(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Em,n}return i=e.child,e=i.sibling,n=ta(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ng(e,t){return t=Vu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function td(e,t,r,n){return n!==null&&cg(n),wo(t,e.child,null,r),e=Ng(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lT(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=dh(Error(fe(422))),td(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Vu({mode:"visible",children:n.children},a,0,null),i=Va(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&wo(t,e.child,null,o),t.child.memoizedState=km(o),t.memoizedState=Em,i);if(!(t.mode&1))return td(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(fe(419)),n=dh(i,n,void 0),td(e,t,o,n)}if(l=(o&e.childLanes)!==0,gr||l){if(n=At,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,fs(e,a),pn(n,e,a,-1))}return Pg(),n=dh(Error(fe(421))),td(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=wT.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,kr=Xs(a.nextSibling),Rr=t,lt=!0,hn=null,e!==null&&(Vr[Wr++]=as,Vr[Wr++]=is,Vr[Wr++]=Ya,as=e.id,is=e.overflow,Ya=t),t=Ng(t,n.children),t.flags|=4096,t)}function Qy(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),wm(e.return,t,r)}function uh(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function zw(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(tr(e,t,n.children,r),n=ft.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qy(e,r,t);else if(e.tag===19)Qy(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(rt(ft,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&iu(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),uh(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&iu(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}uh(t,!0,r,null,i);break;case"together":uh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Td(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ja|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(fe(153));if(t.child!==null){for(e=t.child,r=ta(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ta(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function cT(e,t,r){switch(t.tag){case 3:Bw(t),bo();break;case 5:pw(t);break;case 1:xr(t.type)&&eu(t);break;case 4:pg(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;rt(nu,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(rt(ft,ft.current&1),t.flags|=128,null):r&t.child.childLanes?qw(e,t,r):(rt(ft,ft.current&1),e=hs(e,t,r),e!==null?e.sibling:null);rt(ft,ft.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return zw(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),rt(ft,ft.current),n)break;return null;case 22:case 23:return t.lanes=0,Fw(e,t,r)}return hs(e,t,r)}var Vw,Pm,Ww,Hw;Vw=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Pm=function(){};Ww=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ia(Ln.current);var i=null;switch(r){case"input":a=Xh(e,a),n=Xh(e,n),i=[];break;case"select":a=mt({},a,{value:void 0}),n=mt({},n,{value:void 0}),i=[];break;case"textarea":a=em(e,a),n=em(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Jd)}rm(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Pl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Pl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&st("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Hw=function(e,t,r,n){r!==n&&(t.flags|=4)};function el(e,t){if(!lt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function dT(e,t,r){var n=t.pendingProps;switch(lg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(t),null;case 1:return xr(t.type)&&Zd(),Wt(t),null;case 3:return n=t.stateNode,jo(),ot(yr),ot(Yt),vg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Zc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hn!==null&&(Lm(hn),hn=null))),Pm(e,t),Wt(t),null;case 5:gg(t);var a=Ia(Bl.current);if(r=t.type,e!==null&&t.stateNode!=null)Ww(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(fe(166));return Wt(t),null}if(e=Ia(Ln.current),Zc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[In]=t,n[Fl]=i,e=(t.mode&1)!==0,r){case"dialog":st("cancel",n),st("close",n);break;case"iframe":case"object":case"embed":st("load",n);break;case"video":case"audio":for(a=0;a<ul.length;a++)st(ul[a],n);break;case"source":st("error",n);break;case"img":case"image":case"link":st("error",n),st("load",n);break;case"details":st("toggle",n);break;case"input":ny(n,i),st("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},st("invalid",n);break;case"textarea":ay(n,i),st("invalid",n)}rm(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Jc(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Jc(n.textContent,l,e),a=["children",""+l]):Pl.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&st("scroll",n)}switch(r){case"input":Vc(n),sy(n,i,!0);break;case"textarea":Vc(n),iy(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Jd)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=b0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[In]=t,e[Fl]=n,Vw(e,t,!1,!1),t.stateNode=e;e:{switch(o=nm(r,n),r){case"dialog":st("cancel",e),st("close",e),a=n;break;case"iframe":case"object":case"embed":st("load",e),a=n;break;case"video":case"audio":for(a=0;a<ul.length;a++)st(ul[a],e);a=n;break;case"source":st("error",e),a=n;break;case"img":case"image":case"link":st("error",e),st("load",e),a=n;break;case"details":st("toggle",e),a=n;break;case"input":ny(e,n),a=Xh(e,n),st("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=mt({},n,{value:void 0}),st("invalid",e);break;case"textarea":ay(e,n),a=em(e,n),st("invalid",e);break;default:a=n}rm(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?N0(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&w0(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Tl(e,c):typeof c=="number"&&Tl(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&st("scroll",e):c!=null&&Kp(e,i,c,o))}switch(r){case"input":Vc(e),sy(e,n,!1);break;case"textarea":Vc(e),iy(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ia(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Qi(e,!!n.multiple,i,!1):n.defaultValue!=null&&Qi(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Jd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Wt(t),null;case 6:if(e&&t.stateNode!=null)Hw(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(fe(166));if(r=Ia(Bl.current),Ia(Ln.current),Zc(t)){if(n=t.stateNode,r=t.memoizedProps,n[In]=t,(i=n.nodeValue!==r)&&(e=Rr,e!==null))switch(e.tag){case 3:Jc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Jc(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[In]=t,t.stateNode=n}return Wt(t),null;case 13:if(ot(ft),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(lt&&kr!==null&&t.mode&1&&!(t.flags&128))dw(),bo(),t.flags|=98560,i=!1;else if(i=Zc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(fe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[In]=t}else bo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Wt(t),i=!1}else hn!==null&&(Lm(hn),hn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ft.current&1?Tt===0&&(Tt=3):Pg())),t.updateQueue!==null&&(t.flags|=4),Wt(t),null);case 4:return jo(),Pm(e,t),e===null&&Ll(t.stateNode.containerInfo),Wt(t),null;case 10:return fg(t.type._context),Wt(t),null;case 17:return xr(t.type)&&Zd(),Wt(t),null;case 19:if(ot(ft),i=t.memoizedState,i===null)return Wt(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)el(i,!1);else{if(Tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=iu(e),o!==null){for(t.flags|=128,el(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return rt(ft,ft.current&1|2),t.child}e=e.sibling}i.tail!==null&&xt()>_o&&(t.flags|=128,n=!0,el(i,!1),t.lanes=4194304)}else{if(!n)if(e=iu(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),el(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!lt)return Wt(t),null}else 2*xt()-i.renderingStartTime>_o&&r!==1073741824&&(t.flags|=128,n=!0,el(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=xt(),t.sibling=null,r=ft.current,rt(ft,n?r&1|2:r&1),t):(Wt(t),null);case 22:case 23:return kg(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Cr&1073741824&&(Wt(t),t.subtreeFlags&6&&(t.flags|=8192)):Wt(t),null;case 24:return null;case 25:return null}throw Error(fe(156,t.tag))}function uT(e,t){switch(lg(t),t.tag){case 1:return xr(t.type)&&Zd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jo(),ot(yr),ot(Yt),vg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gg(t),null;case 13:if(ot(ft),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(fe(340));bo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ot(ft),null;case 4:return jo(),null;case 10:return fg(t.type._context),null;case 22:case 23:return kg(),null;case 24:return null;default:return null}}var rd=!1,Kt=!1,fT=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Wi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){gt(e,t,n)}else r.current=null}function Tm(e,t,r){try{r()}catch(n){gt(e,t,n)}}var Gy=!1;function hT(e,t){if(hm=Gd,e=X0(),ig(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,f=e,m=null;t:for(;;){for(var p;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===e)break t;if(m===r&&++d===a&&(l=o),m===i&&++u===n&&(c=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(mm={focusedElem:e,selectionRange:r},Gd=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,w=x.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ln(t.type,g),w);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(N){gt(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return x=Gy,Gy=!1,x}function jl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Tm(t,r,i)}a=a.next}while(a!==n)}}function qu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Rm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Kw(e){var t=e.alternate;t!==null&&(e.alternate=null,Kw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[In],delete t[Fl],delete t[vm],delete t[GP],delete t[YP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Qw(e){return e.tag===5||e.tag===3||e.tag===4}function Yy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Qw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Im(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Jd));else if(n!==4&&(e=e.child,e!==null))for(Im(e,t,r),e=e.sibling;e!==null;)Im(e,t,r),e=e.sibling}function Am(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Am(e,t,r),e=e.sibling;e!==null;)Am(e,t,r),e=e.sibling}var Mt=null,un=!1;function Ns(e,t,r){for(r=r.child;r!==null;)Gw(e,t,r),r=r.sibling}function Gw(e,t,r){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(Ou,r)}catch{}switch(r.tag){case 5:Kt||Wi(r,t);case 6:var n=Mt,a=un;Mt=null,Ns(e,t,r),Mt=n,un=a,Mt!==null&&(un?(e=Mt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Mt.removeChild(r.stateNode));break;case 18:Mt!==null&&(un?(e=Mt,r=r.stateNode,e.nodeType===8?sh(e.parentNode,r):e.nodeType===1&&sh(e,r),Ol(e)):sh(Mt,r.stateNode));break;case 4:n=Mt,a=un,Mt=r.stateNode.containerInfo,un=!0,Ns(e,t,r),Mt=n,un=a;break;case 0:case 11:case 14:case 15:if(!Kt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Tm(r,t,o),a=a.next}while(a!==n)}Ns(e,t,r);break;case 1:if(!Kt&&(Wi(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){gt(r,t,l)}Ns(e,t,r);break;case 21:Ns(e,t,r);break;case 22:r.mode&1?(Kt=(n=Kt)||r.memoizedState!==null,Ns(e,t,r),Kt=n):Ns(e,t,r);break;default:Ns(e,t,r)}}function Xy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new fT),t.forEach(function(n){var a=jT.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function nn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Mt=l.stateNode,un=!1;break e;case 3:Mt=l.stateNode.containerInfo,un=!0;break e;case 4:Mt=l.stateNode.containerInfo,un=!0;break e}l=l.return}if(Mt===null)throw Error(fe(160));Gw(i,o,a),Mt=null,un=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){gt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Yw(t,e),t=t.sibling}function Yw(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nn(t,e),Cn(e),n&4){try{jl(3,e,e.return),qu(3,e)}catch(g){gt(e,e.return,g)}try{jl(5,e,e.return)}catch(g){gt(e,e.return,g)}}break;case 1:nn(t,e),Cn(e),n&512&&r!==null&&Wi(r,r.return);break;case 5:if(nn(t,e),Cn(e),n&512&&r!==null&&Wi(r,r.return),e.flags&32){var a=e.stateNode;try{Tl(a,"")}catch(g){gt(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&y0(a,i),nm(l,o);var d=nm(l,i);for(o=0;o<c.length;o+=2){var u=c[o],f=c[o+1];u==="style"?N0(a,f):u==="dangerouslySetInnerHTML"?w0(a,f):u==="children"?Tl(a,f):Kp(a,u,f,d)}switch(l){case"input":Jh(a,i);break;case"textarea":x0(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Qi(a,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?Qi(a,!!i.multiple,i.defaultValue,!0):Qi(a,!!i.multiple,i.multiple?[]:"",!1))}a[Fl]=i}catch(g){gt(e,e.return,g)}}break;case 6:if(nn(t,e),Cn(e),n&4){if(e.stateNode===null)throw Error(fe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){gt(e,e.return,g)}}break;case 3:if(nn(t,e),Cn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ol(t.containerInfo)}catch(g){gt(e,e.return,g)}break;case 4:nn(t,e),Cn(e);break;case 13:nn(t,e),Cn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Cg=xt())),n&4&&Xy(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Kt=(d=Kt)||u,nn(t,e),Kt=d):nn(t,e),Cn(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Ce=e,u=e.child;u!==null;){for(f=Ce=u;Ce!==null;){switch(m=Ce,p=m.child,m.tag){case 0:case 11:case 14:case 15:jl(4,m,m.return);break;case 1:Wi(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){gt(n,r,g)}}break;case 5:Wi(m,m.return);break;case 22:if(m.memoizedState!==null){Zy(f);continue}}p!==null?(p.return=m,Ce=p):Zy(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{a=f.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=j0("display",o))}catch(g){gt(e,e.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(g){gt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:nn(t,e),Cn(e),n&4&&Xy(e);break;case 21:break;default:nn(t,e),Cn(e)}}function Cn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Qw(r)){var n=r;break e}r=r.return}throw Error(fe(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Tl(a,""),n.flags&=-33);var i=Yy(e);Am(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Yy(e);Im(e,l,o);break;default:throw Error(fe(161))}}catch(c){gt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mT(e,t,r){Ce=e,Xw(e)}function Xw(e,t,r){for(var n=(e.mode&1)!==0;Ce!==null;){var a=Ce,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||rd;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Kt;l=rd;var d=Kt;if(rd=o,(Kt=c)&&!d)for(Ce=a;Ce!==null;)o=Ce,c=o.child,o.tag===22&&o.memoizedState!==null?ex(a):c!==null?(c.return=o,Ce=c):ex(a);for(;i!==null;)Ce=i,Xw(i),i=i.sibling;Ce=a,rd=l,Kt=d}Jy(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ce=i):Jy(e)}}function Jy(e){for(;Ce!==null;){var t=Ce;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Kt||qu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Kt)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ln(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&My(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}My(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Ol(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Kt||t.flags&512&&Rm(t)}catch(m){gt(t,t.return,m)}}if(t===e){Ce=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ce=r;break}Ce=t.return}}function Zy(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ce=r;break}Ce=t.return}}function ex(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{qu(4,t)}catch(c){gt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){gt(t,a,c)}}var i=t.return;try{Rm(t)}catch(c){gt(t,i,c)}break;case 5:var o=t.return;try{Rm(t)}catch(c){gt(t,o,c)}}}catch(c){gt(t,t.return,c)}if(t===e){Ce=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ce=l;break}Ce=t.return}}var pT=Math.ceil,cu=ys.ReactCurrentDispatcher,_g=ys.ReactCurrentOwner,Yr=ys.ReactCurrentBatchConfig,He=0,At=null,jt=null,Ut=0,Cr=0,Hi=ha(0),Tt=0,Wl=null,Ja=0,zu=0,Sg=0,Nl=null,mr=null,Cg=0,_o=1/0,Yn=null,du=!1,Om=null,Zs=null,nd=!1,Hs=null,uu=0,_l=0,Dm=null,Rd=-1,Id=0;function nr(){return He&6?xt():Rd!==-1?Rd:Rd=xt()}function ea(e){return e.mode&1?He&2&&Ut!==0?Ut&-Ut:JP.transition!==null?(Id===0&&(Id=D0()),Id):(e=Ze,e!==0||(e=window.event,e=e===void 0?16:q0(e.type)),e):1}function pn(e,t,r,n){if(50<_l)throw _l=0,Dm=null,Error(fe(185));cc(e,r,n),(!(He&2)||e!==At)&&(e===At&&(!(He&2)&&(zu|=r),Tt===4&&Os(e,Ut)),br(e,n),r===1&&He===0&&!(t.mode&1)&&(_o=xt()+500,Fu&&ma()))}function br(e,t){var r=e.callbackNode;Jk(e,t);var n=Qd(e,e===At?Ut:0);if(n===0)r!==null&&cy(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&cy(r),t===1)e.tag===0?XP(tx.bind(null,e)):ow(tx.bind(null,e)),KP(function(){!(He&6)&&ma()}),r=null;else{switch(M0(n)){case 1:r=Jp;break;case 4:r=A0;break;case 16:r=Kd;break;case 536870912:r=O0;break;default:r=Kd}r=aj(r,Jw.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Jw(e,t){if(Rd=-1,Id=0,He&6)throw Error(fe(327));var r=e.callbackNode;if(Zi()&&e.callbackNode!==r)return null;var n=Qd(e,e===At?Ut:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=fu(e,n);else{t=n;var a=He;He|=2;var i=ej();(At!==e||Ut!==t)&&(Yn=null,_o=xt()+500,za(e,t));do try{yT();break}catch(l){Zw(e,l)}while(!0);ug(),cu.current=i,He=a,jt!==null?t=0:(At=null,Ut=0,t=Tt)}if(t!==0){if(t===2&&(a=lm(e),a!==0&&(n=a,t=Mm(e,a))),t===1)throw r=Wl,za(e,0),Os(e,n),br(e,xt()),r;if(t===6)Os(e,n);else{if(a=e.current.alternate,!(n&30)&&!gT(a)&&(t=fu(e,n),t===2&&(i=lm(e),i!==0&&(n=i,t=Mm(e,i))),t===1))throw r=Wl,za(e,0),Os(e,n),br(e,xt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(fe(345));case 2:Sa(e,mr,Yn);break;case 3:if(Os(e,n),(n&130023424)===n&&(t=Cg+500-xt(),10<t)){if(Qd(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){nr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=gm(Sa.bind(null,e,mr,Yn),t);break}Sa(e,mr,Yn);break;case 4:if(Os(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-mn(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=xt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*pT(n/1960))-n,10<n){e.timeoutHandle=gm(Sa.bind(null,e,mr,Yn),n);break}Sa(e,mr,Yn);break;case 5:Sa(e,mr,Yn);break;default:throw Error(fe(329))}}}return br(e,xt()),e.callbackNode===r?Jw.bind(null,e):null}function Mm(e,t){var r=Nl;return e.current.memoizedState.isDehydrated&&(za(e,t).flags|=256),e=fu(e,t),e!==2&&(t=mr,mr=r,t!==null&&Lm(t)),e}function Lm(e){mr===null?mr=e:mr.push.apply(mr,e)}function gT(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!gn(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Os(e,t){for(t&=~Sg,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-mn(t),n=1<<r;e[r]=-1,t&=~n}}function tx(e){if(He&6)throw Error(fe(327));Zi();var t=Qd(e,0);if(!(t&1))return br(e,xt()),null;var r=fu(e,t);if(e.tag!==0&&r===2){var n=lm(e);n!==0&&(t=n,r=Mm(e,n))}if(r===1)throw r=Wl,za(e,0),Os(e,t),br(e,xt()),r;if(r===6)throw Error(fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sa(e,mr,Yn),br(e,xt()),null}function Eg(e,t){var r=He;He|=1;try{return e(t)}finally{He=r,He===0&&(_o=xt()+500,Fu&&ma())}}function Za(e){Hs!==null&&Hs.tag===0&&!(He&6)&&Zi();var t=He;He|=1;var r=Yr.transition,n=Ze;try{if(Yr.transition=null,Ze=1,e)return e()}finally{Ze=n,Yr.transition=r,He=t,!(He&6)&&ma()}}function kg(){Cr=Hi.current,ot(Hi)}function za(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,HP(r)),jt!==null)for(r=jt.return;r!==null;){var n=r;switch(lg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Zd();break;case 3:jo(),ot(yr),ot(Yt),vg();break;case 5:gg(n);break;case 4:jo();break;case 13:ot(ft);break;case 19:ot(ft);break;case 10:fg(n.type._context);break;case 22:case 23:kg()}r=r.return}if(At=e,jt=e=ta(e.current,null),Ut=Cr=t,Tt=0,Wl=null,Sg=zu=Ja=0,mr=Nl=null,Ra!==null){for(t=0;t<Ra.length;t++)if(r=Ra[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Ra=null}return e}function Zw(e,t){do{var r=jt;try{if(ug(),kd.current=lu,ou){for(var n=ht.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ou=!1}if(Xa=0,It=kt=ht=null,wl=!1,ql=0,_g.current=null,r===null||r.return===null){Tt=1,Wl=t,jt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Ut,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=qy(o);if(p!==null){p.flags&=-257,zy(p,o,l,i,t),p.mode&1&&By(i,d,t),t=p,c=d;var x=t.updateQueue;if(x===null){var g=new Set;g.add(c),t.updateQueue=g}else x.add(c);break e}else{if(!(t&1)){By(i,d,t),Pg();break e}c=Error(fe(426))}}else if(lt&&l.mode&1){var w=qy(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),zy(w,o,l,i,t),cg(No(c,l));break e}}i=c=No(c,l),Tt!==4&&(Tt=2),Nl===null?Nl=[i]:Nl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=Mw(i,c,t);Dy(i,v);break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Zs===null||!Zs.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=Lw(i,l,t);Dy(i,N);break e}}i=i.return}while(i!==null)}rj(r)}catch(j){t=j,jt===r&&r!==null&&(jt=r=r.return);continue}break}while(!0)}function ej(){var e=cu.current;return cu.current=lu,e===null?lu:e}function Pg(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),At===null||!(Ja&268435455)&&!(zu&268435455)||Os(At,Ut)}function fu(e,t){var r=He;He|=2;var n=ej();(At!==e||Ut!==t)&&(Yn=null,za(e,t));do try{vT();break}catch(a){Zw(e,a)}while(!0);if(ug(),He=r,cu.current=n,jt!==null)throw Error(fe(261));return At=null,Ut=0,Tt}function vT(){for(;jt!==null;)tj(jt)}function yT(){for(;jt!==null&&!zk();)tj(jt)}function tj(e){var t=sj(e.alternate,e,Cr);e.memoizedProps=e.pendingProps,t===null?rj(e):jt=t,_g.current=null}function rj(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=uT(r,t),r!==null){r.flags&=32767,jt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Tt=6,jt=null;return}}else if(r=dT(r,t,Cr),r!==null){jt=r;return}if(t=t.sibling,t!==null){jt=t;return}jt=t=e}while(t!==null);Tt===0&&(Tt=5)}function Sa(e,t,r){var n=Ze,a=Yr.transition;try{Yr.transition=null,Ze=1,xT(e,t,r,n)}finally{Yr.transition=a,Ze=n}return null}function xT(e,t,r,n){do Zi();while(Hs!==null);if(He&6)throw Error(fe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(fe(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Zk(e,i),e===At&&(jt=At=null,Ut=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||nd||(nd=!0,aj(Kd,function(){return Zi(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Yr.transition,Yr.transition=null;var o=Ze;Ze=1;var l=He;He|=4,_g.current=null,hT(e,r),Yw(r,e),FP(mm),Gd=!!hm,mm=hm=null,e.current=r,mT(r),Vk(),He=l,Ze=o,Yr.transition=i}else e.current=r;if(nd&&(nd=!1,Hs=e,uu=a),i=e.pendingLanes,i===0&&(Zs=null),Kk(r.stateNode),br(e,xt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(du)throw du=!1,e=Om,Om=null,e;return uu&1&&e.tag!==0&&Zi(),i=e.pendingLanes,i&1?e===Dm?_l++:(_l=0,Dm=e):_l=0,ma(),null}function Zi(){if(Hs!==null){var e=M0(uu),t=Yr.transition,r=Ze;try{if(Yr.transition=null,Ze=16>e?16:e,Hs===null)var n=!1;else{if(e=Hs,Hs=null,uu=0,He&6)throw Error(fe(331));var a=He;for(He|=4,Ce=e.current;Ce!==null;){var i=Ce,o=i.child;if(Ce.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ce=d;Ce!==null;){var u=Ce;switch(u.tag){case 0:case 11:case 15:jl(8,u,i)}var f=u.child;if(f!==null)f.return=u,Ce=f;else for(;Ce!==null;){u=Ce;var m=u.sibling,p=u.return;if(Kw(u),u===d){Ce=null;break}if(m!==null){m.return=p,Ce=m;break}Ce=p}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Ce=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ce=o;else e:for(;Ce!==null;){if(i=Ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:jl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ce=v;break e}Ce=i.return}}var y=e.current;for(Ce=y;Ce!==null;){o=Ce;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ce=b;else e:for(o=y;Ce!==null;){if(l=Ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qu(9,l)}}catch(j){gt(l,l.return,j)}if(l===o){Ce=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Ce=N;break e}Ce=l.return}}if(He=a,ma(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(Ou,e)}catch{}n=!0}return n}finally{Ze=r,Yr.transition=t}}return!1}function rx(e,t,r){t=No(r,t),t=Mw(e,t,1),e=Js(e,t,1),t=nr(),e!==null&&(cc(e,1,t),br(e,t))}function gt(e,t,r){if(e.tag===3)rx(e,e,r);else for(;t!==null;){if(t.tag===3){rx(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zs===null||!Zs.has(n))){e=No(r,e),e=Lw(t,e,1),t=Js(t,e,1),e=nr(),t!==null&&(cc(t,1,e),br(t,e));break}}t=t.return}}function bT(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=nr(),e.pingedLanes|=e.suspendedLanes&r,At===e&&(Ut&r)===r&&(Tt===4||Tt===3&&(Ut&130023424)===Ut&&500>xt()-Cg?za(e,0):Sg|=r),br(e,t)}function nj(e,t){t===0&&(e.mode&1?(t=Kc,Kc<<=1,!(Kc&130023424)&&(Kc=4194304)):t=1);var r=nr();e=fs(e,t),e!==null&&(cc(e,t,r),br(e,r))}function wT(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),nj(e,r)}function jT(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(fe(314))}n!==null&&n.delete(t),nj(e,r)}var sj;sj=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||yr.current)gr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return gr=!1,cT(e,t,r);gr=!!(e.flags&131072)}else gr=!1,lt&&t.flags&1048576&&lw(t,ru,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Td(e,t),e=t.pendingProps;var a=xo(t,Yt.current);Ji(t,r),a=xg(null,t,n,e,a,r);var i=bg();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xr(n)?(i=!0,eu(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,mg(t),a.updater=Bu,t.stateNode=a,a._reactInternals=t,Nm(t,n,e,r),t=Cm(null,t,n,!0,i,r)):(t.tag=0,lt&&i&&og(t),tr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Td(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=_T(n),e=ln(n,e),a){case 0:t=Sm(null,t,n,e,r);break e;case 1:t=Hy(null,t,n,e,r);break e;case 11:t=Vy(null,t,n,e,r);break e;case 14:t=Wy(null,t,n,ln(n.type,e),r);break e}throw Error(fe(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ln(n,a),Sm(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ln(n,a),Hy(e,t,n,a,r);case 3:e:{if(Bw(t),e===null)throw Error(fe(387));n=t.pendingProps,i=t.memoizedState,a=i.element,mw(e,t),au(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=No(Error(fe(423)),t),t=Ky(e,t,n,r,a);break e}else if(n!==a){a=No(Error(fe(424)),t),t=Ky(e,t,n,r,a);break e}else for(kr=Xs(t.stateNode.containerInfo.firstChild),Rr=t,lt=!0,hn=null,r=fw(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(bo(),n===a){t=hs(e,t,r);break e}tr(e,t,n,r)}t=t.child}return t;case 5:return pw(t),e===null&&bm(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,pm(n,a)?o=null:i!==null&&pm(n,i)&&(t.flags|=32),Uw(e,t),tr(e,t,o,r),t.child;case 6:return e===null&&bm(t),null;case 13:return qw(e,t,r);case 4:return pg(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=wo(t,null,n,r):tr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ln(n,a),Vy(e,t,n,a,r);case 7:return tr(e,t,t.pendingProps,r),t.child;case 8:return tr(e,t,t.pendingProps.children,r),t.child;case 12:return tr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,rt(nu,n._currentValue),n._currentValue=o,i!==null)if(gn(i.value,o)){if(i.children===a.children&&!yr.current){t=hs(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=os(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),wm(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(fe(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),wm(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}tr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ji(t,r),a=Jr(a),n=n(a),t.flags|=1,tr(e,t,n,r),t.child;case 14:return n=t.type,a=ln(n,t.pendingProps),a=ln(n.type,a),Wy(e,t,n,a,r);case 15:return $w(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ln(n,a),Td(e,t),t.tag=1,xr(n)?(e=!0,eu(t)):e=!1,Ji(t,r),Dw(t,n,a),Nm(t,n,a,r),Cm(null,t,n,!0,e,r);case 19:return zw(e,t,r);case 22:return Fw(e,t,r)}throw Error(fe(156,t.tag))};function aj(e,t){return I0(e,t)}function NT(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(e,t,r,n){return new NT(e,t,r,n)}function Tg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _T(e){if(typeof e=="function")return Tg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Gp)return 11;if(e===Yp)return 14}return 2}function ta(e,t){var r=e.alternate;return r===null?(r=Qr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ad(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Tg(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Mi:return Va(r.children,a,i,t);case Qp:o=8,a|=8;break;case Kh:return e=Qr(12,r,t,a|2),e.elementType=Kh,e.lanes=i,e;case Qh:return e=Qr(13,r,t,a),e.elementType=Qh,e.lanes=i,e;case Gh:return e=Qr(19,r,t,a),e.elementType=Gh,e.lanes=i,e;case p0:return Vu(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case h0:o=10;break e;case m0:o=9;break e;case Gp:o=11;break e;case Yp:o=14;break e;case Rs:o=16,n=null;break e}throw Error(fe(130,e==null?e:typeof e,""))}return t=Qr(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Va(e,t,r,n){return e=Qr(7,e,n,t),e.lanes=r,e}function Vu(e,t,r,n){return e=Qr(22,e,n,t),e.elementType=p0,e.lanes=r,e.stateNode={isHidden:!1},e}function fh(e,t,r){return e=Qr(6,e,null,t),e.lanes=r,e}function hh(e,t,r){return t=Qr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ST(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kf(0),this.expirationTimes=Kf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kf(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Rg(e,t,r,n,a,i,o,l,c){return e=new ST(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Qr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},mg(i),e}function CT(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function ij(e){if(!e)return oa;e=e._reactInternals;e:{if(di(e)!==e||e.tag!==1)throw Error(fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(fe(171))}if(e.tag===1){var r=e.type;if(xr(r))return iw(e,r,t)}return t}function oj(e,t,r,n,a,i,o,l,c){return e=Rg(r,n,!0,e,a,i,o,l,c),e.context=ij(null),r=e.current,n=nr(),a=ea(r),i=os(n,a),i.callback=t??null,Js(r,i,a),e.current.lanes=a,cc(e,a,n),br(e,n),e}function Wu(e,t,r,n){var a=t.current,i=nr(),o=ea(a);return r=ij(r),t.context===null?t.context=r:t.pendingContext=r,t=os(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Js(a,t,o),e!==null&&(pn(e,a,o,i),Ed(e,a,o)),o}function hu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ig(e,t){nx(e,t),(e=e.alternate)&&nx(e,t)}function ET(){return null}var lj=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ag(e){this._internalRoot=e}Hu.prototype.render=Ag.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(fe(409));Wu(e,t,null,null)};Hu.prototype.unmount=Ag.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Za(function(){Wu(null,e,null,null)}),t[us]=null}};function Hu(e){this._internalRoot=e}Hu.prototype.unstable_scheduleHydration=function(e){if(e){var t=F0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<As.length&&t!==0&&t<As[r].priority;r++);As.splice(r,0,e),r===0&&B0(e)}};function Og(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ku(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sx(){}function kT(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=hu(o);i.call(d)}}var o=oj(t,n,e,0,null,!1,!1,"",sx);return e._reactRootContainer=o,e[us]=o.current,Ll(e.nodeType===8?e.parentNode:e),Za(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=hu(c);l.call(d)}}var c=Rg(e,0,!1,null,null,!1,!1,"",sx);return e._reactRootContainer=c,e[us]=c.current,Ll(e.nodeType===8?e.parentNode:e),Za(function(){Wu(t,c,r,n)}),c}function Qu(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=hu(o);l.call(c)}}Wu(t,o,e,a)}else o=kT(r,t,e,a,n);return hu(o)}L0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dl(t.pendingLanes);r!==0&&(Zp(t,r|1),br(t,xt()),!(He&6)&&(_o=xt()+500,ma()))}break;case 13:Za(function(){var n=fs(e,1);if(n!==null){var a=nr();pn(n,e,1,a)}}),Ig(e,1)}};eg=function(e){if(e.tag===13){var t=fs(e,134217728);if(t!==null){var r=nr();pn(t,e,134217728,r)}Ig(e,134217728)}};$0=function(e){if(e.tag===13){var t=ea(e),r=fs(e,t);if(r!==null){var n=nr();pn(r,e,t,n)}Ig(e,t)}};F0=function(){return Ze};U0=function(e,t){var r=Ze;try{return Ze=e,t()}finally{Ze=r}};am=function(e,t,r){switch(t){case"input":if(Jh(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=$u(n);if(!a)throw Error(fe(90));v0(n),Jh(n,a)}}}break;case"textarea":x0(e,r);break;case"select":t=r.value,t!=null&&Qi(e,!!r.multiple,t,!1)}};C0=Eg;E0=Za;var PT={usingClientEntryPoint:!1,Events:[uc,Ui,$u,_0,S0,Eg]},tl={findFiberByHostInstance:Ta,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TT={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=T0(e),e===null?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||ET,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{Ou=sd.inject(TT),Mn=sd}catch{}}Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PT;Lr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Og(t))throw Error(fe(200));return CT(e,t,null,r)};Lr.createRoot=function(e,t){if(!Og(e))throw Error(fe(299));var r=!1,n="",a=lj;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Rg(e,1,!1,null,null,r,!1,n,a),e[us]=t.current,Ll(e.nodeType===8?e.parentNode:e),new Ag(t)};Lr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(fe(188)):(e=Object.keys(e).join(","),Error(fe(268,e)));return e=T0(t),e=e===null?null:e.stateNode,e};Lr.flushSync=function(e){return Za(e)};Lr.hydrate=function(e,t,r){if(!Ku(t))throw Error(fe(200));return Qu(null,e,t,!0,r)};Lr.hydrateRoot=function(e,t,r){if(!Og(e))throw Error(fe(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=lj;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=oj(t,null,e,1,r??null,a,!1,i,o),e[us]=t.current,Ll(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Hu(t)};Lr.render=function(e,t,r){if(!Ku(t))throw Error(fe(200));return Qu(null,e,t,!1,r)};Lr.unmountComponentAtNode=function(e){if(!Ku(e))throw Error(fe(40));return e._reactRootContainer?(Za(function(){Qu(null,null,e,!1,function(){e._reactRootContainer=null,e[us]=null})}),!0):!1};Lr.unstable_batchedUpdates=Eg;Lr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ku(r))throw Error(fe(200));if(e==null||e._reactInternals===void 0)throw Error(fe(38));return Qu(e,t,r,!1,n)};Lr.version="18.3.1-next-f1338f8080-20240426";function cj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cj)}catch(e){console.error(e)}}cj(),c0.exports=Lr;var ui=c0.exports;const dj=Fp(ui);var uj,ax=ui;uj=ax.createRoot,ax.hydrateRoot;const RT=1,IT=1e6;let mh=0;function AT(){return mh=(mh+1)%Number.MAX_SAFE_INTEGER,mh.toString()}const ph=new Map,ix=e=>{if(ph.has(e))return;const t=setTimeout(()=>{ph.delete(e),Sl({type:"REMOVE_TOAST",toastId:e})},IT);ph.set(e,t)},OT=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,RT)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?ix(r):e.toasts.forEach(n=>{ix(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Od=[];let Dd={toasts:[]};function Sl(e){Dd=OT(Dd,e),Od.forEach(t=>{t(Dd)})}function DT({...e}){const t=AT(),r=a=>Sl({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>Sl({type:"DISMISS_TOAST",toastId:t});return Sl({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function Fr(){const[e,t]=h.useState(Dd);return h.useEffect(()=>(Od.push(t),()=>{const r=Od.indexOf(t);r>-1&&Od.splice(r,1)}),[e]),{...e,toast:DT,dismiss:r=>Sl({type:"DISMISS_TOAST",toastId:r})}}function ge(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function ox(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ms(...e){return t=>{let r=!1;const n=e.map(a=>{const i=ox(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():ox(e[a],null)}}}}function De(...e){return h.useCallback(ms(...e),e)}function MT(e,t){const r=h.createContext(t),n=i=>{const{children:o,...l}=i,c=h.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=h.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function lr(e,t=[]){let r=[];function n(i,o){const l=h.createContext(o),c=r.length;r=[...r,o];const d=f=>{var v;const{scope:m,children:p,...x}=f,g=((v=m==null?void 0:m[e])==null?void 0:v[c])||l,w=h.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:w,children:p})};d.displayName=i+"Provider";function u(f,m){var g;const p=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,x=h.useContext(p);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>h.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,LT(a,...t)]}function LT(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function la(e){const t=FT(e),r=h.forwardRef((n,a)=>{const{children:i,...o}=n,l=h.Children.toArray(i),c=l.find(UT);if(c){const d=c.props.children,u=l.map(f=>f===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:f);return s.jsx(t,{...o,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var $T=la("Slot");function FT(e){const t=h.forwardRef((r,n)=>{const{children:a,...i}=r;if(h.isValidElement(a)){const o=qT(a),l=BT(i,a.props);return a.type!==h.Fragment&&(l.ref=n?ms(n,o):o),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var fj=Symbol("radix.slottable");function hj(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=fj,t}function UT(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===fj}function BT(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function qT(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Gu(e){const t=e+"CollectionProvider",[r,n]=lr(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:w,children:v}=g,y=ye.useRef(null),b=ye.useRef(new Map).current;return s.jsx(a,{scope:w,itemMap:b,collectionRef:y,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=la(l),d=ye.forwardRef((g,w)=>{const{scope:v,children:y}=g,b=i(l,v),N=De(w,b.collectionRef);return s.jsx(c,{ref:N,children:y})});d.displayName=l;const u=e+"CollectionItemSlot",f="data-radix-collection-item",m=la(u),p=ye.forwardRef((g,w)=>{const{scope:v,children:y,...b}=g,N=ye.useRef(null),j=De(w,N),C=i(u,v);return ye.useEffect(()=>(C.itemMap.set(N,{ref:N,...b}),()=>void C.itemMap.delete(N))),s.jsx(m,{[f]:"",ref:j,children:y})});p.displayName=u;function x(g){const w=i(e+"CollectionConsumer",g);return ye.useCallback(()=>{const y=w.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((C,E)=>b.indexOf(C.ref.current)-b.indexOf(E.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:d,ItemSlot:p},x,n]}var zT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ee=zT.reduce((e,t)=>{const r=la(`Primitive.${t}`),n=h.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Dg(e,t){e&&ui.flushSync(()=>e.dispatchEvent(t))}function bt(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function VT(e,t=globalThis==null?void 0:globalThis.document){const r=bt(e);h.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var WT="DismissableLayer",$m="dismissableLayer.update",HT="dismissableLayer.pointerDownOutside",KT="dismissableLayer.focusOutside",lx,mj=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fi=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=h.useContext(mj),[u,f]=h.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=h.useState({}),x=De(t,E=>f(E)),g=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(w),y=u?g.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,N=y>=v,j=GT(E=>{const M=E.target,H=[...d.branches].some(q=>q.contains(M));!N||H||(a==null||a(E),o==null||o(E),E.defaultPrevented||l==null||l())},m),C=YT(E=>{const M=E.target;[...d.branches].some(q=>q.contains(M))||(i==null||i(E),o==null||o(E),E.defaultPrevented||l==null||l())},m);return VT(E=>{y===d.layers.size-1&&(n==null||n(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},m),h.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(lx=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),cx(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=lx)}},[u,m,r,d]),h.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),cx())},[u,d]),h.useEffect(()=>{const E=()=>p({});return document.addEventListener($m,E),()=>document.removeEventListener($m,E)},[]),s.jsx(Ee.div,{...c,ref:x,style:{pointerEvents:b?N?"auto":"none":void 0,...e.style},onFocusCapture:ge(e.onFocusCapture,C.onFocusCapture),onBlurCapture:ge(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ge(e.onPointerDownCapture,j.onPointerDownCapture)})});fi.displayName=WT;var QT="DismissableLayerBranch",pj=h.forwardRef((e,t)=>{const r=h.useContext(mj),n=h.useRef(null),a=De(t,n);return h.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Ee.div,{...e,ref:a})});pj.displayName=QT;function GT(e,t=globalThis==null?void 0:globalThis.document){const r=bt(e),n=h.useRef(!1),a=h.useRef(()=>{});return h.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){gj(HT,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function YT(e,t=globalThis==null?void 0:globalThis.document){const r=bt(e),n=h.useRef(!1);return h.useEffect(()=>{const a=i=>{i.target&&!n.current&&gj(KT,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function cx(){const e=new CustomEvent($m);document.dispatchEvent(e)}function gj(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?Dg(a,i):a.dispatchEvent(i)}var XT=fi,JT=pj,Ot=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},ZT="Portal",Do=h.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=h.useState(!1);Ot(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?dj.createPortal(s.jsx(Ee.div,{...n,ref:t}),o):null});Do.displayName=ZT;function e2(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var Dt=e=>{const{present:t,children:r}=e,n=t2(t),a=typeof r=="function"?r({present:n.isPresent}):h.Children.only(r),i=De(n.ref,r2(a));return typeof r=="function"||n.isPresent?h.cloneElement(a,{ref:i}):null};Dt.displayName="Presence";function t2(e){const[t,r]=h.useState(),n=h.useRef(null),a=h.useRef(e),i=h.useRef("none"),o=e?"mounted":"unmounted",[l,c]=e2(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const d=ad(n.current);i.current=l==="mounted"?d:"none"},[l]),Ot(()=>{const d=n.current,u=a.current;if(u!==e){const m=i.current,p=ad(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&m!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Ot(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,f=p=>{const g=ad(n.current).includes(p.animationName);if(p.target===t&&g&&(c("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=p=>{p.target===t&&(i.current=ad(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function ad(e){return(e==null?void 0:e.animationName)||"none"}function r2(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var n2=Vp[" useInsertionEffect ".trim().toString()]||Ot;function ps({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=s2({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const u=h.useRef(e!==void 0);h.useEffect(()=>{const f=u.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=h.useCallback(u=>{var f;if(l){const m=a2(u)?u(e):u;m!==e&&((f=o.current)==null||f.call(o,m))}else i(u)},[l,e,i,o]);return[c,d]}function s2({defaultProp:e,onChange:t}){const[r,n]=h.useState(e),a=h.useRef(r),i=h.useRef(t);return n2(()=>{i.current=t},[t]),h.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function a2(e){return typeof e=="function"}var vj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),i2="VisuallyHidden",Yu=h.forwardRef((e,t)=>s.jsx(Ee.span,{...e,ref:t,style:{...vj,...e.style}}));Yu.displayName=i2;var o2=Yu,Mg="ToastProvider",[Lg,l2,c2]=Gu("Toast"),[yj,DB]=lr("Toast",[c2]),[d2,Xu]=yj(Mg),xj=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=h.useState(null),[d,u]=h.useState(0),f=h.useRef(!1),m=h.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Mg}\`. Expected non-empty \`string\`.`),s.jsx(Lg.Provider,{scope:t,children:s.jsx(d2,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:h.useCallback(()=>u(p=>p+1),[]),onToastRemove:h.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};xj.displayName=Mg;var bj="ToastViewport",u2=["F8"],Fm="toast.viewportPause",Um="toast.viewportResume",wj=h.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=u2,label:a="Notifications ({hotkey})",...i}=e,o=Xu(bj,r),l=l2(r),c=h.useRef(null),d=h.useRef(null),u=h.useRef(null),f=h.useRef(null),m=De(t,f,o.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;h.useEffect(()=>{const w=v=>{var b;n.length!==0&&n.every(N=>v[N]||v.code===N)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n]),h.useEffect(()=>{const w=c.current,v=f.current;if(x&&w&&v){const y=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(Fm);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(Um);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},N=C=>{!w.contains(C.relatedTarget)&&b()},j=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",y),w.addEventListener("focusout",N),w.addEventListener("pointermove",y),w.addEventListener("pointerleave",j),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",y),w.removeEventListener("focusout",N),w.removeEventListener("pointermove",y),w.removeEventListener("pointerleave",j),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[x,o.isClosePausedRef]);const g=h.useCallback(({tabbingDirection:w})=>{const y=l().map(b=>{const N=b.ref.current,j=[N,..._2(N)];return w==="forwards"?j:j.reverse()});return(w==="forwards"?y.reverse():y).flat()},[l]);return h.useEffect(()=>{const w=f.current;if(w){const v=y=>{var j,C,E;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const M=document.activeElement,H=y.shiftKey;if(y.target===w&&H){(j=d.current)==null||j.focus();return}const K=g({tabbingDirection:H?"backwards":"forwards"}),ee=K.findIndex(D=>D===M);gh(K.slice(ee+1))?y.preventDefault():H?(C=d.current)==null||C.focus():(E=u.current)==null||E.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[l,g]),s.jsxs(JT,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&s.jsx(Bm,{ref:d,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});gh(w)}}),s.jsx(Lg.Slot,{scope:r,children:s.jsx(Ee.ol,{tabIndex:-1,...i,ref:m})}),x&&s.jsx(Bm,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});gh(w)}})]})});wj.displayName=bj;var jj="ToastFocusProxy",Bm=h.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=Xu(jj,r);return s.jsx(Yu,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});Bm.displayName=jj;var hc="Toast",f2="toast.swipeStart",h2="toast.swipeMove",m2="toast.swipeCancel",p2="toast.swipeEnd",Nj=h.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=ps({prop:n,defaultProp:a??!0,onChange:i,caller:hc});return s.jsx(Dt,{present:r||l,children:s.jsx(y2,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:bt(e.onPause),onResume:bt(e.onResume),onSwipeStart:ge(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ge(e.onSwipeMove,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ge(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ge(e.onSwipeEnd,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});Nj.displayName=hc;var[g2,v2]=yj(hc,{onClose(){}}),y2=h.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...x}=e,g=Xu(hc,r),[w,v]=h.useState(null),y=De(t,D=>v(D)),b=h.useRef(null),N=h.useRef(null),j=a||g.duration,C=h.useRef(0),E=h.useRef(j),M=h.useRef(0),{onToastAdd:H,onToastRemove:q}=g,P=bt(()=>{var S;(w==null?void 0:w.contains(document.activeElement))&&((S=g.viewport)==null||S.focus()),o()}),K=h.useCallback(D=>{!D||D===1/0||(window.clearTimeout(M.current),C.current=new Date().getTime(),M.current=window.setTimeout(P,D))},[P]);h.useEffect(()=>{const D=g.viewport;if(D){const S=()=>{K(E.current),d==null||d()},A=()=>{const O=new Date().getTime()-C.current;E.current=E.current-O,window.clearTimeout(M.current),c==null||c()};return D.addEventListener(Fm,A),D.addEventListener(Um,S),()=>{D.removeEventListener(Fm,A),D.removeEventListener(Um,S)}}},[g.viewport,j,c,d,K]),h.useEffect(()=>{i&&!g.isClosePausedRef.current&&K(j)},[i,j,g.isClosePausedRef,K]),h.useEffect(()=>(H(),()=>q()),[H,q]);const ee=h.useMemo(()=>w?Tj(w):null,[w]);return g.viewport?s.jsxs(s.Fragment,{children:[ee&&s.jsx(x2,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:ee}),s.jsx(g2,{scope:r,onClose:P,children:ui.createPortal(s.jsx(Lg.ItemSlot,{scope:r,children:s.jsx(XT,{asChild:!0,onEscapeKeyDown:ge(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||P(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Ee.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ge(e.onKeyDown,D=>{D.key==="Escape"&&(l==null||l(D.nativeEvent),D.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:ge(e.onPointerDown,D=>{D.button===0&&(b.current={x:D.clientX,y:D.clientY})}),onPointerMove:ge(e.onPointerMove,D=>{if(!b.current)return;const S=D.clientX-b.current.x,A=D.clientY-b.current.y,O=!!N.current,F=["left","right"].includes(g.swipeDirection),L=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,J=F?L(0,S):0,ce=F?0:L(0,A),B=D.pointerType==="touch"?10:2,I={x:J,y:ce},V={originalEvent:D,delta:I};O?(N.current=I,id(h2,f,V,{discrete:!1})):dx(I,g.swipeDirection,B)?(N.current=I,id(f2,u,V,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(S)>B||Math.abs(A)>B)&&(b.current=null)}),onPointerUp:ge(e.onPointerUp,D=>{const S=N.current,A=D.target;if(A.hasPointerCapture(D.pointerId)&&A.releasePointerCapture(D.pointerId),N.current=null,b.current=null,S){const O=D.currentTarget,F={originalEvent:D,delta:S};dx(S,g.swipeDirection,g.swipeThreshold)?id(p2,p,F,{discrete:!0}):id(m2,m,F,{discrete:!0}),O.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),x2=e=>{const{__scopeToast:t,children:r,...n}=e,a=Xu(hc,t),[i,o]=h.useState(!1),[l,c]=h.useState(!1);return j2(()=>o(!0)),h.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(Do,{asChild:!0,children:s.jsx(Yu,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},b2="ToastTitle",_j=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Ee.div,{...n,ref:t})});_j.displayName=b2;var w2="ToastDescription",Sj=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Ee.div,{...n,ref:t})});Sj.displayName=w2;var Cj="ToastAction",Ej=h.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(Pj,{altText:r,asChild:!0,children:s.jsx($g,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Cj}\`. Expected non-empty \`string\`.`),null)});Ej.displayName=Cj;var kj="ToastClose",$g=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=v2(kj,r);return s.jsx(Pj,{asChild:!0,children:s.jsx(Ee.button,{type:"button",...n,ref:t,onClick:ge(e.onClick,a.onClose)})})});$g.displayName=kj;var Pj=h.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Ee.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function Tj(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),N2(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...Tj(n))}}),t}function id(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?Dg(a,i):a.dispatchEvent(i)}var dx=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function j2(e=()=>{}){const t=bt(e);Ot(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function N2(e){return e.nodeType===e.ELEMENT_NODE}function _2(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function gh(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var S2=xj,Rj=wj,Ij=Nj,Aj=_j,Oj=Sj,Dj=Ej,Mj=$g;function Lj(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Lj(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function $j(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Lj(e))&&(n&&(n+=" "),n+=t);return n}const ux=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,fx=$j,mc=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return fx(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],f=i==null?void 0:i[d];if(u===null)return null;const m=ux(u)||ux(f);return a[d][m]}),l=r&&Object.entries(r).reduce((d,u)=>{let[f,m]=u;return m===void 0||(d[f]=m),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:f,className:m,...p}=u;return Object.entries(p).every(x=>{let[g,w]=x;return Array.isArray(w)?w.includes({...i,...l}[g]):{...i,...l}[g]===w})?[...d,f,m]:d},[]);return fx(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fj=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var E2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>h.createElement("svg",{ref:c,...E2,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Fj("lucide",a),...l},[...o.map(([d,u])=>h.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(e,t)=>{const r=h.forwardRef(({className:n,...a},i)=>h.createElement(k2,{ref:i,iconNode:t,className:Fj(`lucide-${C2(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=$e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=$e("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=$e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=$e("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=$e("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=$e("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=$e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=$e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=$e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=$e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=$e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=$e("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=$e("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=$e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=$e("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=$e("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=$e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=$e("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=$e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=$e("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=$e("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=$e("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=$e("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=$e("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=$e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=$e("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=$e("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=$e("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=$e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=$e("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=$e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=$e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=$e("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=$e("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=$e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=$e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=$e("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=$e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=$e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=$e("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=$e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Bg="-",L2=e=>{const t=F2(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(Bg);return l[0]===""&&l.length!==1&&l.shift(),Wj(l,t)||$2(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},Wj=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?Wj(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Bg);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},yx=/^\[(.+)\]$/,$2=e=>{if(yx.test(e)){const t=yx.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},F2=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return B2(Object.entries(e.classGroups),r).forEach(([i,o])=>{Vm(o,n,i,t)}),n},Vm=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:xx(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(U2(a)){Vm(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{Vm(o,xx(t,i),r,n)})})},xx=(e,t)=>{let r=e;return t.split(Bg).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},U2=e=>e.isThemeGetter,B2=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,q2=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},Hj="!",z2=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,f;for(let w=0;w<l.length;w++){let v=l[w];if(d===0){if(v===a&&(n||l.slice(w,w+i)===t)){c.push(l.slice(u,w)),u=w+i;continue}if(v==="/"){f=w;continue}}v==="["?d++:v==="]"&&d--}const m=c.length===0?l:l.substring(u),p=m.startsWith(Hj),x=p?m.substring(1):m,g=f&&f>u?f-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},V2=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},W2=e=>({cache:q2(e.cacheSize),parseClassName:z2(e),...L2(e)}),H2=/\s+/,K2=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(H2);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=r(d);let x=!!p,g=n(x?m.substring(0,p):m);if(!g){if(!x){l=d+(l.length>0?" "+l:l);continue}if(g=n(m),!g){l=d+(l.length>0?" "+l:l);continue}x=!1}const w=V2(u).join(":"),v=f?w+Hj:w,y=v+g;if(i.includes(y))continue;i.push(y);const b=a(g,x);for(let N=0;N<b.length;++N){const j=b[N];i.push(v+j)}l=d+(l.length>0?" "+l:l)}return l};function Q2(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Kj(t))&&(n&&(n+=" "),n+=r);return n}const Kj=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Kj(e[n]))&&(r&&(r+=" "),r+=t);return r};function G2(e,...t){let r,n,a,i=o;function o(c){const d=t.reduce((u,f)=>f(u),e());return r=W2(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=K2(c,r);return a(c,u),u}return function(){return i(Q2.apply(null,arguments))}}const nt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Qj=/^\[(?:([a-z-]+):)?(.+)\]$/i,Y2=/^\d+\/\d+$/,X2=new Set(["px","full","screen"]),J2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Z2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,tR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kn=e=>eo(e)||X2.has(e)||Y2.test(e),_s=e=>Mo(e,"length",dR),eo=e=>!!e&&!Number.isNaN(Number(e)),vh=e=>Mo(e,"number",eo),rl=e=>!!e&&Number.isInteger(Number(e)),nR=e=>e.endsWith("%")&&eo(e.slice(0,-1)),Le=e=>Qj.test(e),Ss=e=>J2.test(e),sR=new Set(["length","size","percentage"]),aR=e=>Mo(e,sR,Gj),iR=e=>Mo(e,"position",Gj),oR=new Set(["image","url"]),lR=e=>Mo(e,oR,fR),cR=e=>Mo(e,"",uR),nl=()=>!0,Mo=(e,t,r)=>{const n=Qj.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},dR=e=>Z2.test(e)&&!eR.test(e),Gj=()=>!1,uR=e=>tR.test(e),fR=e=>rR.test(e),hR=()=>{const e=nt("colors"),t=nt("spacing"),r=nt("blur"),n=nt("brightness"),a=nt("borderColor"),i=nt("borderRadius"),o=nt("borderSpacing"),l=nt("borderWidth"),c=nt("contrast"),d=nt("grayscale"),u=nt("hueRotate"),f=nt("invert"),m=nt("gap"),p=nt("gradientColorStops"),x=nt("gradientColorStopPositions"),g=nt("inset"),w=nt("margin"),v=nt("opacity"),y=nt("padding"),b=nt("saturate"),N=nt("scale"),j=nt("sepia"),C=nt("skew"),E=nt("space"),M=nt("translate"),H=()=>["auto","contain","none"],q=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",Le,t],K=()=>[Le,t],ee=()=>["",Kn,_s],D=()=>["auto",eo,Le],S=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],A=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",Le],J=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ce=()=>[eo,Le];return{cacheSize:500,separator:":",theme:{colors:[nl],spacing:[Kn,_s],blur:["none","",Ss,Le],brightness:ce(),borderColor:[e],borderRadius:["none","","full",Ss,Le],borderSpacing:K(),borderWidth:ee(),contrast:ce(),grayscale:L(),hueRotate:ce(),invert:L(),gap:K(),gradientColorStops:[e],gradientColorStopPositions:[nR,_s],inset:P(),margin:P(),opacity:ce(),padding:K(),saturate:ce(),scale:ce(),sepia:L(),skew:ce(),space:K(),translate:K()},classGroups:{aspect:[{aspect:["auto","square","video",Le]}],container:["container"],columns:[{columns:[Ss]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...S(),Le]}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:H()}],"overscroll-x":[{"overscroll-x":H()}],"overscroll-y":[{"overscroll-y":H()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",rl,Le]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Le]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",rl,Le]}],"grid-cols":[{"grid-cols":[nl]}],"col-start-end":[{col:["auto",{span:["full",rl,Le]},Le]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[nl]}],"row-start-end":[{row:["auto",{span:[rl,Le]},Le]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Le]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Le,t]}],"min-w":[{"min-w":[Le,t,"min","max","fit"]}],"max-w":[{"max-w":[Le,t,"none","full","min","max","fit","prose",{screen:[Ss]},Ss]}],h:[{h:[Le,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Le,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Le,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Le,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ss,_s]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",vh]}],"font-family":[{font:[nl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Le]}],"line-clamp":[{"line-clamp":["none",eo,vh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kn,Le]}],"list-image":[{"list-image":["none",Le]}],"list-style-type":[{list:["none","disc","decimal",Le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...A(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Kn,_s]}],"underline-offset":[{"underline-offset":["auto",Kn,Le]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...S(),iR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",aR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},lR]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...A(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:A()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...A()]}],"outline-offset":[{"outline-offset":[Kn,Le]}],"outline-w":[{outline:[Kn,_s]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Kn,_s]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ss,cR]}],"shadow-color":[{shadow:[nl]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ss,Le]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Le]}],duration:[{duration:ce()}],ease:[{ease:["linear","in","out","in-out",Le]}],delay:[{delay:ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",Le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[rl,Le]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Le]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Kn,_s,vh]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},mR=G2(hR);function be(...e){return mR($j(e))}const pR=S2,Yj=h.forwardRef(({className:e,...t},r)=>s.jsx(Rj,{ref:r,className:be("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Yj.displayName=Rj.displayName;const gR=mc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Xj=h.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(Ij,{ref:n,className:be(gR({variant:t}),e),...r}));Xj.displayName=Ij.displayName;const vR=h.forwardRef(({className:e,...t},r)=>s.jsx(Dj,{ref:r,className:be("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));vR.displayName=Dj.displayName;const Jj=h.forwardRef(({className:e,...t},r)=>s.jsx(Mj,{ref:r,className:be("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Vj,{className:"h-4 w-4"})}));Jj.displayName=Mj.displayName;const Zj=h.forwardRef(({className:e,...t},r)=>s.jsx(Aj,{ref:r,className:be("text-sm font-semibold",e),...t}));Zj.displayName=Aj.displayName;const eN=h.forwardRef(({className:e,...t},r)=>s.jsx(Oj,{ref:r,className:be("text-sm opacity-90",e),...t}));eN.displayName=Oj.displayName;function yR(){const{toasts:e}=Fr();return s.jsxs(pR,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(Xj,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(Zj,{children:r}),n&&s.jsx(eN,{children:n})]}),a,s.jsx(Jj,{})]},t)}),s.jsx(Yj,{})]})}var bx=["light","dark"],xR="(prefers-color-scheme: dark)",bR=h.createContext(void 0),wR={setTheme:e=>{},themes:[]},jR=()=>{var e;return(e=h.useContext(bR))!=null?e:wR};h.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let d=i==="system",u=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=a?bx.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,g=!1,w=!0)=>{let v=o?o[x]:x,y=g?x+"|| ''":`'${v}'`,b="";return a&&w&&!g&&bx.includes(x)&&(b+=`d.style.colorScheme = '${x}';`),r==="class"?g||v?b+=`c.add(${y})`:b+="null":v&&(b+=`d[s](n,${y})`),b},p=e?`!function(){${u}${m(e)}}()`:n?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${xR}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${d?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return h.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var NR=e=>{switch(e){case"success":return CR;case"info":return kR;case"warning":return ER;case"error":return PR;default:return null}},_R=Array(12).fill(0),SR=({visible:e,className:t})=>ye.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},ye.createElement("div",{className:"sonner-spinner"},_R.map((r,n)=>ye.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),CR=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ER=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),kR=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),PR=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),TR=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ye.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ye.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),RR=()=>{let[e,t]=ye.useState(document.hidden);return ye.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Wm=1,IR=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Wm++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],ye.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(OR(c)&&!c.ok){a=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,u=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:d,description:u})}else if(t.success!==void 0){a=!1;let d=typeof t.success=="function"?await t.success(c):t.success,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:d,description:u})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let d=typeof t.error=="function"?await t.error(c):t.error,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:d,description:u})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>o.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Wm++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},fr=new IR,AR=(e,t)=>{let r=(t==null?void 0:t.id)||Wm++;return fr.addToast({title:e,...t,id:r}),r},OR=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",DR=AR,MR=()=>fr.toasts,LR=()=>fr.getActiveToasts();Object.assign(DR,{success:fr.success,info:fr.info,warning:fr.warning,error:fr.error,custom:fr.custom,message:fr.message,promise:fr.promise,dismiss:fr.dismiss,loading:fr.loading},{getHistory:MR,getToasts:LR});function $R(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}$R(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function od(e){return e.label!==void 0}var FR=3,UR="32px",BR="16px",wx=4e3,qR=356,zR=14,VR=20,WR=200;function sn(...e){return e.filter(Boolean).join(" ")}function HR(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var KR=e=>{var t,r,n,a,i,o,l,c,d,u,f;let{invert:m,toast:p,unstyled:x,interacting:g,setHeights:w,visibleToasts:v,heights:y,index:b,toasts:N,expanded:j,removeToast:C,defaultRichColors:E,closeButton:M,style:H,cancelButtonStyle:q,actionButtonStyle:P,className:K="",descriptionClassName:ee="",duration:D,position:S,gap:A,loadingIcon:O,expandByDefault:F,classNames:L,icons:J,closeButtonAriaLabel:ce="Close toast",pauseWhenPageIsHidden:B}=e,[I,V]=ye.useState(null),[Q,se]=ye.useState(null),[Z,R]=ye.useState(!1),[X,ie]=ye.useState(!1),[T,Y]=ye.useState(!1),[le,Pe]=ye.useState(!1),[re,Se]=ye.useState(!1),[ut,Te]=ye.useState(0),[Ye,jr]=ye.useState(0),jn=ye.useRef(p.duration||D||wx),ws=ye.useRef(null),Ur=ye.useRef(null),Ic=b===0,Ac=b+1<=v,Xt=p.type,Wn=p.dismissible!==!1,Oc=p.className||"",Dc=p.descriptionClassName||"",wa=ye.useMemo(()=>y.findIndex(Ae=>Ae.toastId===p.id)||0,[y,p.id]),Mc=ye.useMemo(()=>{var Ae;return(Ae=p.closeButton)!=null?Ae:M},[p.closeButton,M]),zo=ye.useMemo(()=>p.duration||D||wx,[p.duration,D]),xi=ye.useRef(0),Nn=ye.useRef(0),Lc=ye.useRef(0),js=ye.useRef(null),[Vo,$c]=S.split("-"),Fc=ye.useMemo(()=>y.reduce((Ae,Ke,et)=>et>=wa?Ae:Ae+Ke.height,0),[y,wa]),tn=RR(),Df=p.invert||m,Wo=Xt==="loading";Nn.current=ye.useMemo(()=>wa*A+Fc,[wa,Fc]),ye.useEffect(()=>{jn.current=zo},[zo]),ye.useEffect(()=>{R(!0)},[]),ye.useEffect(()=>{let Ae=Ur.current;if(Ae){let Ke=Ae.getBoundingClientRect().height;return jr(Ke),w(et=>[{toastId:p.id,height:Ke,position:p.position},...et]),()=>w(et=>et.filter(Nr=>Nr.toastId!==p.id))}},[w,p.id]),ye.useLayoutEffect(()=>{if(!Z)return;let Ae=Ur.current,Ke=Ae.style.height;Ae.style.height="auto";let et=Ae.getBoundingClientRect().height;Ae.style.height=Ke,jr(et),w(Nr=>Nr.find(_r=>_r.toastId===p.id)?Nr.map(_r=>_r.toastId===p.id?{..._r,height:et}:_r):[{toastId:p.id,height:et,position:p.position},...Nr])},[Z,p.title,p.description,w,p.id]);let rn=ye.useCallback(()=>{ie(!0),Te(Nn.current),w(Ae=>Ae.filter(Ke=>Ke.toastId!==p.id)),setTimeout(()=>{C(p)},WR)},[p,C,w,Nn]);ye.useEffect(()=>{if(p.promise&&Xt==="loading"||p.duration===1/0||p.type==="loading")return;let Ae;return j||g||B&&tn?(()=>{if(Lc.current<xi.current){let Ke=new Date().getTime()-xi.current;jn.current=jn.current-Ke}Lc.current=new Date().getTime()})():jn.current!==1/0&&(xi.current=new Date().getTime(),Ae=setTimeout(()=>{var Ke;(Ke=p.onAutoClose)==null||Ke.call(p,p),rn()},jn.current)),()=>clearTimeout(Ae)},[j,g,p,Xt,B,tn,rn]),ye.useEffect(()=>{p.delete&&rn()},[rn,p.delete]);function Mf(){var Ae,Ke,et;return J!=null&&J.loading?ye.createElement("div",{className:sn(L==null?void 0:L.loader,(Ae=p==null?void 0:p.classNames)==null?void 0:Ae.loader,"sonner-loader"),"data-visible":Xt==="loading"},J.loading):O?ye.createElement("div",{className:sn(L==null?void 0:L.loader,(Ke=p==null?void 0:p.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":Xt==="loading"},O):ye.createElement(SR,{className:sn(L==null?void 0:L.loader,(et=p==null?void 0:p.classNames)==null?void 0:et.loader),visible:Xt==="loading"})}return ye.createElement("li",{tabIndex:0,ref:Ur,className:sn(K,Oc,L==null?void 0:L.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,L==null?void 0:L.default,L==null?void 0:L[Xt],(r=p==null?void 0:p.classNames)==null?void 0:r[Xt]),"data-sonner-toast":"","data-rich-colors":(n=p.richColors)!=null?n:E,"data-styled":!(p.jsx||p.unstyled||x),"data-mounted":Z,"data-promise":!!p.promise,"data-swiped":re,"data-removed":X,"data-visible":Ac,"data-y-position":Vo,"data-x-position":$c,"data-index":b,"data-front":Ic,"data-swiping":T,"data-dismissible":Wn,"data-type":Xt,"data-invert":Df,"data-swipe-out":le,"data-swipe-direction":Q,"data-expanded":!!(j||F&&Z),style:{"--index":b,"--toasts-before":b,"--z-index":N.length-b,"--offset":`${X?ut:Nn.current}px`,"--initial-height":F?"auto":`${Ye}px`,...H,...p.style},onDragEnd:()=>{Y(!1),V(null),js.current=null},onPointerDown:Ae=>{Wo||!Wn||(ws.current=new Date,Te(Nn.current),Ae.target.setPointerCapture(Ae.pointerId),Ae.target.tagName!=="BUTTON"&&(Y(!0),js.current={x:Ae.clientX,y:Ae.clientY}))},onPointerUp:()=>{var Ae,Ke,et,Nr;if(le||!Wn)return;js.current=null;let _r=Number(((Ae=Ur.current)==null?void 0:Ae.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),_n=Number(((Ke=Ur.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Hn=new Date().getTime()-((et=ws.current)==null?void 0:et.getTime()),Sr=I==="x"?_r:_n,Sn=Math.abs(Sr)/Hn;if(Math.abs(Sr)>=VR||Sn>.11){Te(Nn.current),(Nr=p.onDismiss)==null||Nr.call(p,p),se(I==="x"?_r>0?"right":"left":_n>0?"down":"up"),rn(),Pe(!0),Se(!1);return}Y(!1),V(null)},onPointerMove:Ae=>{var Ke,et,Nr,_r;if(!js.current||!Wn||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;let _n=Ae.clientY-js.current.y,Hn=Ae.clientX-js.current.x,Sr=(et=e.swipeDirections)!=null?et:HR(S);!I&&(Math.abs(Hn)>1||Math.abs(_n)>1)&&V(Math.abs(Hn)>Math.abs(_n)?"x":"y");let Sn={x:0,y:0};I==="y"?(Sr.includes("top")||Sr.includes("bottom"))&&(Sr.includes("top")&&_n<0||Sr.includes("bottom")&&_n>0)&&(Sn.y=_n):I==="x"&&(Sr.includes("left")||Sr.includes("right"))&&(Sr.includes("left")&&Hn<0||Sr.includes("right")&&Hn>0)&&(Sn.x=Hn),(Math.abs(Sn.x)>0||Math.abs(Sn.y)>0)&&Se(!0),(Nr=Ur.current)==null||Nr.style.setProperty("--swipe-amount-x",`${Sn.x}px`),(_r=Ur.current)==null||_r.style.setProperty("--swipe-amount-y",`${Sn.y}px`)}},Mc&&!p.jsx?ye.createElement("button",{"aria-label":ce,"data-disabled":Wo,"data-close-button":!0,onClick:Wo||!Wn?()=>{}:()=>{var Ae;rn(),(Ae=p.onDismiss)==null||Ae.call(p,p)},className:sn(L==null?void 0:L.closeButton,(a=p==null?void 0:p.classNames)==null?void 0:a.closeButton)},(i=J==null?void 0:J.close)!=null?i:TR):null,p.jsx||h.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:ye.createElement(ye.Fragment,null,Xt||p.icon||p.promise?ye.createElement("div",{"data-icon":"",className:sn(L==null?void 0:L.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Mf():null,p.type!=="loading"?p.icon||(J==null?void 0:J[Xt])||NR(Xt):null):null,ye.createElement("div",{"data-content":"",className:sn(L==null?void 0:L.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},ye.createElement("div",{"data-title":"",className:sn(L==null?void 0:L.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?ye.createElement("div",{"data-description":"",className:sn(ee,Dc,L==null?void 0:L.description,(d=p==null?void 0:p.classNames)==null?void 0:d.description)},typeof p.description=="function"?p.description():p.description):null),h.isValidElement(p.cancel)?p.cancel:p.cancel&&od(p.cancel)?ye.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||q,onClick:Ae=>{var Ke,et;od(p.cancel)&&Wn&&((et=(Ke=p.cancel).onClick)==null||et.call(Ke,Ae),rn())},className:sn(L==null?void 0:L.cancelButton,(u=p==null?void 0:p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,h.isValidElement(p.action)?p.action:p.action&&od(p.action)?ye.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||P,onClick:Ae=>{var Ke,et;od(p.action)&&((et=(Ke=p.action).onClick)==null||et.call(Ke,Ae),!Ae.defaultPrevented&&rn())},className:sn(L==null?void 0:L.actionButton,(f=p==null?void 0:p.classNames)==null?void 0:f.actionButton)},p.action.label):null))};function jx(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function QR(e,t){let r={};return[e,t].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?BR:UR;function c(d){["top","right","bottom","left"].forEach(u=>{r[`${o}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${o}-${d}`]=l:r[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),r}var GR=h.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:f,duration:m,style:p,visibleToasts:x=FR,toastOptions:g,dir:w=jx(),gap:v=zR,loadingIcon:y,icons:b,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:j}=e,[C,E]=ye.useState([]),M=ye.useMemo(()=>Array.from(new Set([n].concat(C.filter(B=>B.position).map(B=>B.position)))),[C,n]),[H,q]=ye.useState([]),[P,K]=ye.useState(!1),[ee,D]=ye.useState(!1),[S,A]=ye.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=ye.useRef(null),F=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=ye.useRef(null),J=ye.useRef(!1),ce=ye.useCallback(B=>{E(I=>{var V;return(V=I.find(Q=>Q.id===B.id))!=null&&V.delete||fr.dismiss(B.id),I.filter(({id:Q})=>Q!==B.id)})},[]);return ye.useEffect(()=>fr.subscribe(B=>{if(B.dismiss){E(I=>I.map(V=>V.id===B.id?{...V,delete:!0}:V));return}setTimeout(()=>{dj.flushSync(()=>{E(I=>{let V=I.findIndex(Q=>Q.id===B.id);return V!==-1?[...I.slice(0,V),{...I[V],...B},...I.slice(V+1)]:[B,...I]})})})}),[]),ye.useEffect(()=>{if(u!=="system"){A(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?A("dark"):A("light")),typeof window>"u")return;let B=window.matchMedia("(prefers-color-scheme: dark)");try{B.addEventListener("change",({matches:I})=>{A(I?"dark":"light")})}catch{B.addListener(({matches:V})=>{try{A(V?"dark":"light")}catch(Q){console.error(Q)}})}},[u]),ye.useEffect(()=>{C.length<=1&&K(!1)},[C]),ye.useEffect(()=>{let B=I=>{var V,Q;a.every(se=>I[se]||I.code===se)&&(K(!0),(V=O.current)==null||V.focus()),I.code==="Escape"&&(document.activeElement===O.current||(Q=O.current)!=null&&Q.contains(document.activeElement))&&K(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[a]),ye.useEffect(()=>{if(O.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,J.current=!1)}},[O.current]),ye.createElement("section",{ref:t,"aria-label":`${N} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((B,I)=>{var V;let[Q,se]=B.split("-");return C.length?ye.createElement("ol",{key:B,dir:w==="auto"?jx():w,tabIndex:-1,ref:O,className:l,"data-sonner-toaster":!0,"data-theme":S,"data-y-position":Q,"data-lifted":P&&C.length>1&&!i,"data-x-position":se,style:{"--front-toast-height":`${((V=H[0])==null?void 0:V.height)||0}px`,"--width":`${qR}px`,"--gap":`${v}px`,...p,...QR(c,d)},onBlur:Z=>{J.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(J.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||J.current||(J.current=!0,L.current=Z.relatedTarget)},onMouseEnter:()=>K(!0),onMouseMove:()=>K(!0),onMouseLeave:()=>{ee||K(!1)},onDragEnd:()=>K(!1),onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||D(!0)},onPointerUp:()=>D(!1)},C.filter(Z=>!Z.position&&I===0||Z.position===B).map((Z,R)=>{var X,ie;return ye.createElement(KR,{key:Z.id,icons:b,index:R,toast:Z,defaultRichColors:f,duration:(X=g==null?void 0:g.duration)!=null?X:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:x,closeButton:(ie=g==null?void 0:g.closeButton)!=null?ie:o,interacting:ee,position:B,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ce,toasts:C.filter(T=>T.position==Z.position),heights:H.filter(T=>T.position==Z.position),setHeights:q,expandByDefault:i,gap:v,loadingIcon:y,expanded:P,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const YR=({...e})=>{const{theme:t="system"}=jR();return s.jsx(GR,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var XR=Vp[" useId ".trim().toString()]||(()=>{}),JR=0;function Bt(e){const[t,r]=h.useState(XR());return Ot(()=>{r(n=>n??String(JR++))},[e]),t?`radix-${t}`:""}const ZR=["top","right","bottom","left"],ca=Math.min,Er=Math.max,mu=Math.round,ld=Math.floor,$n=e=>({x:e,y:e}),eI={left:"right",right:"left",bottom:"top",top:"bottom"},tI={start:"end",end:"start"};function Hm(e,t,r){return Er(e,ca(t,r))}function gs(e,t){return typeof e=="function"?e(t):e}function vs(e){return e.split("-")[0]}function Lo(e){return e.split("-")[1]}function qg(e){return e==="x"?"y":"x"}function zg(e){return e==="y"?"height":"width"}const rI=new Set(["top","bottom"]);function Dn(e){return rI.has(vs(e))?"y":"x"}function Vg(e){return qg(Dn(e))}function nI(e,t,r){r===void 0&&(r=!1);const n=Lo(e),a=Vg(e),i=zg(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=pu(o)),[o,pu(o)]}function sI(e){const t=pu(e);return[Km(e),t,Km(t)]}function Km(e){return e.replace(/start|end/g,t=>tI[t])}const Nx=["left","right"],_x=["right","left"],aI=["top","bottom"],iI=["bottom","top"];function oI(e,t,r){switch(e){case"top":case"bottom":return r?t?_x:Nx:t?Nx:_x;case"left":case"right":return t?aI:iI;default:return[]}}function lI(e,t,r,n){const a=Lo(e);let i=oI(vs(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Km)))),i}function pu(e){return e.replace(/left|right|bottom|top/g,t=>eI[t])}function cI(e){return{top:0,right:0,bottom:0,left:0,...e}}function tN(e){return typeof e!="number"?cI(e):{top:e,right:e,bottom:e,left:e}}function gu(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function Sx(e,t,r){let{reference:n,floating:a}=e;const i=Dn(t),o=Vg(t),l=zg(o),c=vs(t),d=i==="y",u=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,m=n[l]/2-a[l]/2;let p;switch(c){case"top":p={x:u,y:n.y-a.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-a.width,y:f};break;default:p={x:n.x,y:n.y}}switch(Lo(t)){case"start":p[o]-=m*(r&&d?-1:1);break;case"end":p[o]+=m*(r&&d?-1:1);break}return p}const dI=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:f}=Sx(d,n,c),m=n,p={},x=0;for(let g=0;g<l.length;g++){const{name:w,fn:v}=l[g],{x:y,y:b,data:N,reset:j}=await v({x:u,y:f,initialPlacement:n,placement:m,strategy:a,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});u=y??u,f=b??f,p={...p,[w]:{...p[w],...N}},j&&x<=50&&(x++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(d=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:u,y:f}=Sx(d,m,c)),g=-1)}return{x:u,y:f,placement:m,strategy:a,middlewareData:p}};async function Ql(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=gs(t,e),x=tN(p),w=l[m?f==="floating"?"reference":"floating":f],v=gu(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(w)))==null||r?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),y=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},j=gu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:b,strategy:c}):y);return{top:(v.top-j.top+x.top)/N.y,bottom:(j.bottom-v.bottom+x.bottom)/N.y,left:(v.left-j.left+x.left)/N.x,right:(j.right-v.right+x.right)/N.x}}const uI=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=gs(e,t)||{};if(d==null)return{};const f=tN(u),m={x:r,y:n},p=Vg(a),x=zg(p),g=await o.getDimensions(d),w=p==="y",v=w?"top":"left",y=w?"bottom":"right",b=w?"clientHeight":"clientWidth",N=i.reference[x]+i.reference[p]-m[p]-i.floating[x],j=m[p]-i.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let E=C?C[b]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=l.floating[b]||i.floating[x]);const M=N/2-j/2,H=E/2-g[x]/2-1,q=ca(f[v],H),P=ca(f[y],H),K=q,ee=E-g[x]-P,D=E/2-g[x]/2+M,S=Hm(K,D,ee),A=!c.arrow&&Lo(a)!=null&&D!==S&&i.reference[x]/2-(D<K?q:P)-g[x]/2<0,O=A?D<K?D-K:D-ee:0;return{[p]:m[p]+O,data:{[p]:S,centerOffset:D-S-O,...A&&{alignmentOffset:O}},reset:A}}}),fI=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...w}=gs(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const v=vs(a),y=Dn(l),b=vs(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(d.floating)),j=m||(b||!g?[pu(l)]:sI(l)),C=x!=="none";!m&&C&&j.push(...lI(l,g,x,N));const E=[l,...j],M=await Ql(t,w),H=[];let q=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&H.push(M[v]),f){const D=nI(a,o,N);H.push(M[D[0]],M[D[1]])}if(q=[...q,{placement:a,overflows:H}],!H.every(D=>D<=0)){var P,K;const D=(((P=i.flip)==null?void 0:P.index)||0)+1,S=E[D];if(S&&(!(f==="alignment"?y!==Dn(S):!1)||q.every(F=>F.overflows[0]>0&&Dn(F.placement)===y)))return{data:{index:D,overflows:q},reset:{placement:S}};let A=(K=q.filter(O=>O.overflows[0]<=0).sort((O,F)=>O.overflows[1]-F.overflows[1])[0])==null?void 0:K.placement;if(!A)switch(p){case"bestFit":{var ee;const O=(ee=q.filter(F=>{if(C){const L=Dn(F.placement);return L===y||L==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(L=>L>0).reduce((L,J)=>L+J,0)]).sort((F,L)=>F[1]-L[1])[0])==null?void 0:ee[0];O&&(A=O);break}case"initialPlacement":A=l;break}if(a!==A)return{reset:{placement:A}}}return{}}}};function Cx(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ex(e){return ZR.some(t=>e[t]>=0)}const hI=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=gs(e,t);switch(n){case"referenceHidden":{const i=await Ql(t,{...a,elementContext:"reference"}),o=Cx(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Ex(o)}}}case"escaped":{const i=await Ql(t,{...a,altBoundary:!0}),o=Cx(i,r.floating);return{data:{escapedOffsets:o,escaped:Ex(o)}}}default:return{}}}}},rN=new Set(["left","top"]);async function mI(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=vs(r),l=Lo(r),c=Dn(r)==="y",d=rN.has(o)?-1:1,u=i&&c?-1:1,f=gs(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(p=l==="end"?x*-1:x),c?{x:p*u,y:m*d}:{x:m*d,y:p*u}}const pI=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await mI(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},gI=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:v,y}=w;return{x:v,y}}},...c}=gs(e,t),d={x:r,y:n},u=await Ql(t,c),f=Dn(vs(a)),m=qg(f);let p=d[m],x=d[f];if(i){const w=m==="y"?"top":"left",v=m==="y"?"bottom":"right",y=p+u[w],b=p-u[v];p=Hm(y,p,b)}if(o){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=x+u[w],b=x-u[v];x=Hm(y,x,b)}const g=l.fn({...t,[m]:p,[f]:x});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[m]:i,[f]:o}}}}}},vI=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=gs(e,t),u={x:r,y:n},f=Dn(a),m=qg(f);let p=u[m],x=u[f];const g=gs(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=m==="y"?"height":"width",N=i.reference[m]-i.floating[b]+w.mainAxis,j=i.reference[m]+i.reference[b]-w.mainAxis;p<N?p=N:p>j&&(p=j)}if(d){var v,y;const b=m==="y"?"width":"height",N=rN.has(vs(a)),j=i.reference[f]-i.floating[b]+(N&&((v=o.offset)==null?void 0:v[f])||0)+(N?0:w.crossAxis),C=i.reference[f]+i.reference[b]+(N?0:((y=o.offset)==null?void 0:y[f])||0)-(N?w.crossAxis:0);x<j?x=j:x>C&&(x=C)}return{[m]:p,[f]:x}}}},yI=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=gs(e,t),u=await Ql(t,d),f=vs(a),m=Lo(a),p=Dn(a)==="y",{width:x,height:g}=i.floating;let w,v;f==="top"||f==="bottom"?(w=f,v=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=f,w=m==="end"?"top":"bottom");const y=g-u.top-u.bottom,b=x-u.left-u.right,N=ca(g-u[w],y),j=ca(x-u[v],b),C=!t.middlewareData.shift;let E=N,M=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(M=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(E=y),C&&!m){const q=Er(u.left,0),P=Er(u.right,0),K=Er(u.top,0),ee=Er(u.bottom,0);p?M=x-2*(q!==0||P!==0?q+P:Er(u.left,u.right)):E=g-2*(K!==0||ee!==0?K+ee:Er(u.top,u.bottom))}await c({...t,availableWidth:M,availableHeight:E});const H=await o.getDimensions(l.floating);return x!==H.width||g!==H.height?{reset:{rects:!0}}:{}}}};function Zu(){return typeof window<"u"}function $o(e){return nN(e)?(e.nodeName||"").toLowerCase():"#document"}function Ir(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function qn(e){var t;return(t=(nN(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function nN(e){return Zu()?e instanceof Node||e instanceof Ir(e).Node:!1}function yn(e){return Zu()?e instanceof Element||e instanceof Ir(e).Element:!1}function Bn(e){return Zu()?e instanceof HTMLElement||e instanceof Ir(e).HTMLElement:!1}function kx(e){return!Zu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ir(e).ShadowRoot}const xI=new Set(["inline","contents"]);function gc(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=xn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!xI.has(a)}const bI=new Set(["table","td","th"]);function wI(e){return bI.has($o(e))}const jI=[":popover-open",":modal"];function ef(e){return jI.some(t=>{try{return e.matches(t)}catch{return!1}})}const NI=["transform","translate","scale","rotate","perspective"],_I=["transform","translate","scale","rotate","perspective","filter"],SI=["paint","layout","strict","content"];function Wg(e){const t=Hg(),r=yn(e)?xn(e):e;return NI.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||_I.some(n=>(r.willChange||"").includes(n))||SI.some(n=>(r.contain||"").includes(n))}function CI(e){let t=da(e);for(;Bn(t)&&!Eo(t);){if(Wg(t))return t;if(ef(t))return null;t=da(t)}return null}function Hg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const EI=new Set(["html","body","#document"]);function Eo(e){return EI.has($o(e))}function xn(e){return Ir(e).getComputedStyle(e)}function tf(e){return yn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function da(e){if($o(e)==="html")return e;const t=e.assignedSlot||e.parentNode||kx(e)&&e.host||qn(e);return kx(t)?t.host:t}function sN(e){const t=da(e);return Eo(t)?e.ownerDocument?e.ownerDocument.body:e.body:Bn(t)&&gc(t)?t:sN(t)}function Gl(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=sN(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=Ir(a);if(i){const l=Qm(o);return t.concat(o,o.visualViewport||[],gc(a)?a:[],l&&r?Gl(l):[])}return t.concat(a,Gl(a,[],r))}function Qm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function aN(e){const t=xn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Bn(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=mu(r)!==i||mu(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function Kg(e){return yn(e)?e:e.contextElement}function to(e){const t=Kg(e);if(!Bn(t))return $n(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=aN(t);let o=(i?mu(r.width):r.width)/n,l=(i?mu(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const kI=$n(0);function iN(e){const t=Ir(e);return!Hg()||!t.visualViewport?kI:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function PI(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ir(e)?!1:t}function ti(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=Kg(e);let o=$n(1);t&&(n?yn(n)&&(o=to(n)):o=to(e));const l=PI(i,r,n)?iN(i):$n(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,f=a.height/o.y;if(i){const m=Ir(i),p=n&&yn(n)?Ir(n):n;let x=m,g=Qm(x);for(;g&&n&&p!==x;){const w=to(g),v=g.getBoundingClientRect(),y=xn(g),b=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*w.x,N=v.top+(g.clientTop+parseFloat(y.paddingTop))*w.y;c*=w.x,d*=w.y,u*=w.x,f*=w.y,c+=b,d+=N,x=Ir(g),g=Qm(x)}}return gu({width:u,height:f,x:c,y:d})}function Qg(e,t){const r=tf(e).scrollLeft;return t?t.left+r:ti(qn(e)).left+r}function oN(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:Qg(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function TI(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=qn(n),l=t?ef(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=$n(1);const u=$n(0),f=Bn(n);if((f||!f&&!i)&&(($o(n)!=="body"||gc(o))&&(c=tf(n)),Bn(n))){const p=ti(n);d=to(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const m=o&&!f&&!i?oN(o,c,!0):$n(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+m.x,y:r.y*d.y-c.scrollTop*d.y+u.y+m.y}}function RI(e){return Array.from(e.getClientRects())}function II(e){const t=qn(e),r=tf(e),n=e.ownerDocument.body,a=Er(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Er(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Qg(e);const l=-r.scrollTop;return xn(n).direction==="rtl"&&(o+=Er(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function AI(e,t){const r=Ir(e),n=qn(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=Hg();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const OI=new Set(["absolute","fixed"]);function DI(e,t){const r=ti(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=Bn(e)?to(e):$n(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function Px(e,t,r){let n;if(t==="viewport")n=AI(e,r);else if(t==="document")n=II(qn(e));else if(yn(t))n=DI(t,r);else{const a=iN(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return gu(n)}function lN(e,t){const r=da(e);return r===t||!yn(r)||Eo(r)?!1:xn(r).position==="fixed"||lN(r,t)}function MI(e,t){const r=t.get(e);if(r)return r;let n=Gl(e,[],!1).filter(l=>yn(l)&&$o(l)!=="body"),a=null;const i=xn(e).position==="fixed";let o=i?da(e):e;for(;yn(o)&&!Eo(o);){const l=xn(o),c=Wg(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&OI.has(a.position)||gc(o)&&!c&&lN(e,o))?n=n.filter(u=>u!==o):a=l,o=da(o)}return t.set(e,n),n}function LI(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?ef(t)?[]:MI(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const f=Px(t,u,a);return d.top=Er(f.top,d.top),d.right=ca(f.right,d.right),d.bottom=ca(f.bottom,d.bottom),d.left=Er(f.left,d.left),d},Px(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function $I(e){const{width:t,height:r}=aN(e);return{width:t,height:r}}function FI(e,t,r){const n=Bn(t),a=qn(t),i=r==="fixed",o=ti(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=$n(0);function d(){c.x=Qg(a)}if(n||!n&&!i)if(($o(t)!=="body"||gc(a))&&(l=tf(t)),n){const p=ti(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else a&&d();i&&!n&&a&&d();const u=a&&!n&&!i?oN(a,l):$n(0),f=o.left+l.scrollLeft-c.x-u.x,m=o.top+l.scrollTop-c.y-u.y;return{x:f,y:m,width:o.width,height:o.height}}function yh(e){return xn(e).position==="static"}function Tx(e,t){if(!Bn(e)||xn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return qn(e)===r&&(r=r.ownerDocument.body),r}function cN(e,t){const r=Ir(e);if(ef(e))return r;if(!Bn(e)){let a=da(e);for(;a&&!Eo(a);){if(yn(a)&&!yh(a))return a;a=da(a)}return r}let n=Tx(e,t);for(;n&&wI(n)&&yh(n);)n=Tx(n,t);return n&&Eo(n)&&yh(n)&&!Wg(n)?r:n||CI(e)||r}const UI=async function(e){const t=this.getOffsetParent||cN,r=this.getDimensions,n=await r(e.floating);return{reference:FI(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function BI(e){return xn(e).direction==="rtl"}const qI={convertOffsetParentRelativeRectToViewportRelativeRect:TI,getDocumentElement:qn,getClippingRect:LI,getOffsetParent:cN,getElementRects:UI,getClientRects:RI,getDimensions:$I,getScale:to,isElement:yn,isRTL:BI};function dN(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function zI(e,t){let r=null,n;const a=qn(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:f,width:m,height:p}=d;if(l||t(),!m||!p)return;const x=ld(f),g=ld(a.clientWidth-(u+m)),w=ld(a.clientHeight-(f+p)),v=ld(u),b={rootMargin:-x+"px "+-g+"px "+-w+"px "+-v+"px",threshold:Er(0,ca(1,c))||1};let N=!0;function j(C){const E=C[0].intersectionRatio;if(E!==c){if(!N)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!dN(d,e.getBoundingClientRect())&&o(),N=!1}try{r=new IntersectionObserver(j,{...b,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,b)}r.observe(e)}return o(!0),i}function VI(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Kg(e),u=a||i?[...d?Gl(d):[],...Gl(t)]:[];u.forEach(v=>{a&&v.addEventListener("scroll",r,{passive:!0}),i&&v.addEventListener("resize",r)});const f=d&&l?zI(d,r):null;let m=-1,p=null;o&&(p=new ResizeObserver(v=>{let[y]=v;y&&y.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let x,g=c?ti(e):null;c&&w();function w(){const v=ti(e);g&&!dN(g,v)&&r(),g=v,x=requestAnimationFrame(w)}return r(),()=>{var v;u.forEach(y=>{a&&y.removeEventListener("scroll",r),i&&y.removeEventListener("resize",r)}),f==null||f(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(x)}}const WI=pI,HI=gI,KI=fI,QI=yI,GI=hI,Rx=uI,YI=vI,XI=(e,t,r)=>{const n=new Map,a={platform:qI,...r},i={...a.platform,_c:n};return dI(e,t,{...a,platform:i})};var JI=typeof document<"u",ZI=function(){},$d=JI?h.useLayoutEffect:ZI;function vu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!vu(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!vu(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function uN(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ix(e,t){const r=uN(e);return Math.round(t*r)/r}function xh(e){const t=h.useRef(e);return $d(()=>{t.current=e}),t}function eA(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,f]=h.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=h.useState(n);vu(m,n)||p(n);const[x,g]=h.useState(null),[w,v]=h.useState(null),y=h.useCallback(F=>{F!==C.current&&(C.current=F,g(F))},[]),b=h.useCallback(F=>{F!==E.current&&(E.current=F,v(F))},[]),N=i||x,j=o||w,C=h.useRef(null),E=h.useRef(null),M=h.useRef(u),H=c!=null,q=xh(c),P=xh(a),K=xh(d),ee=h.useCallback(()=>{if(!C.current||!E.current)return;const F={placement:t,strategy:r,middleware:m};P.current&&(F.platform=P.current),XI(C.current,E.current,F).then(L=>{const J={...L,isPositioned:K.current!==!1};D.current&&!vu(M.current,J)&&(M.current=J,ui.flushSync(()=>{f(J)}))})},[m,t,r,P,K]);$d(()=>{d===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,f(F=>({...F,isPositioned:!1})))},[d]);const D=h.useRef(!1);$d(()=>(D.current=!0,()=>{D.current=!1}),[]),$d(()=>{if(N&&(C.current=N),j&&(E.current=j),N&&j){if(q.current)return q.current(N,j,ee);ee()}},[N,j,ee,q,H]);const S=h.useMemo(()=>({reference:C,floating:E,setReference:y,setFloating:b}),[y,b]),A=h.useMemo(()=>({reference:N,floating:j}),[N,j]),O=h.useMemo(()=>{const F={position:r,left:0,top:0};if(!A.floating)return F;const L=Ix(A.floating,u.x),J=Ix(A.floating,u.y);return l?{...F,transform:"translate("+L+"px, "+J+"px)",...uN(A.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:L,top:J}},[r,l,A.floating,u.x,u.y]);return h.useMemo(()=>({...u,update:ee,refs:S,elements:A,floatingStyles:O}),[u,ee,S,A,O])}const tA=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Rx({element:n.current,padding:a}).fn(r):{}:n?Rx({element:n,padding:a}).fn(r):{}}}},rA=(e,t)=>({...WI(e),options:[e,t]}),nA=(e,t)=>({...HI(e),options:[e,t]}),sA=(e,t)=>({...YI(e),options:[e,t]}),aA=(e,t)=>({...KI(e),options:[e,t]}),iA=(e,t)=>({...QI(e),options:[e,t]}),oA=(e,t)=>({...GI(e),options:[e,t]}),lA=(e,t)=>({...tA(e),options:[e,t]});var cA="Arrow",fN=h.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(Ee.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});fN.displayName=cA;var dA=fN;function hN(e){const[t,r]=h.useState(void 0);return Ot(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Gg="Popper",[mN,pa]=lr(Gg),[uA,pN]=mN(Gg),gN=e=>{const{__scopePopper:t,children:r}=e,[n,a]=h.useState(null);return s.jsx(uA,{scope:t,anchor:n,onAnchorChange:a,children:r})};gN.displayName=Gg;var vN="PopperAnchor",yN=h.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=pN(vN,r),o=h.useRef(null),l=De(t,o);return h.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(Ee.div,{...a,ref:l})});yN.displayName=vN;var Yg="PopperContent",[fA,hA]=mN(Yg),xN=h.forwardRef((e,t)=>{var Z,R,X,ie,T,Y;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:x,...g}=e,w=pN(Yg,r),[v,y]=h.useState(null),b=De(t,le=>y(le)),[N,j]=h.useState(null),C=hN(N),E=(C==null?void 0:C.width)??0,M=(C==null?void 0:C.height)??0,H=n+(i!=="center"?"-"+i:""),q=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},P=Array.isArray(d)?d:[d],K=P.length>0,ee={padding:q,boundary:P.filter(pA),altBoundary:K},{refs:D,floatingStyles:S,placement:A,isPositioned:O,middlewareData:F}=eA({strategy:"fixed",placement:H,whileElementsMounted:(...le)=>VI(...le,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[rA({mainAxis:a+M,alignmentAxis:o}),c&&nA({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?sA():void 0,...ee}),c&&aA({...ee}),iA({...ee,apply:({elements:le,rects:Pe,availableWidth:re,availableHeight:Se})=>{const{width:ut,height:Te}=Pe.reference,Ye=le.floating.style;Ye.setProperty("--radix-popper-available-width",`${re}px`),Ye.setProperty("--radix-popper-available-height",`${Se}px`),Ye.setProperty("--radix-popper-anchor-width",`${ut}px`),Ye.setProperty("--radix-popper-anchor-height",`${Te}px`)}}),N&&lA({element:N,padding:l}),gA({arrowWidth:E,arrowHeight:M}),m&&oA({strategy:"referenceHidden",...ee})]}),[L,J]=jN(A),ce=bt(x);Ot(()=>{O&&(ce==null||ce())},[O,ce]);const B=(Z=F.arrow)==null?void 0:Z.x,I=(R=F.arrow)==null?void 0:R.y,V=((X=F.arrow)==null?void 0:X.centerOffset)!==0,[Q,se]=h.useState();return Ot(()=>{v&&se(window.getComputedStyle(v).zIndex)},[v]),s.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...S,transform:O?S.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[(ie=F.transformOrigin)==null?void 0:ie.x,(T=F.transformOrigin)==null?void 0:T.y].join(" "),...((Y=F.hide)==null?void 0:Y.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(fA,{scope:r,placedSide:L,onArrowChange:j,arrowX:B,arrowY:I,shouldHideArrow:V,children:s.jsx(Ee.div,{"data-side":L,"data-align":J,...g,ref:b,style:{...g.style,animation:O?void 0:"none"}})})})});xN.displayName=Yg;var bN="PopperArrow",mA={top:"bottom",right:"left",bottom:"top",left:"right"},wN=h.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=hA(bN,n),o=mA[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(dA,{...a,ref:r,style:{...a.style,display:"block"}})})});wN.displayName=bN;function pA(e){return e!==null}var gA=e=>({name:"transformOrigin",options:e,fn(t){var w,v,y;const{placement:r,rects:n,middlewareData:a}=t,o=((w=a.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=jN(r),f={start:"0%",center:"50%",end:"100%"}[u],m=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,p=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let x="",g="";return d==="bottom"?(x=o?f:`${m}px`,g=`${-c}px`):d==="top"?(x=o?f:`${m}px`,g=`${n.floating.height+c}px`):d==="right"?(x=`${-c}px`,g=o?f:`${p}px`):d==="left"&&(x=`${n.floating.width+c}px`,g=o?f:`${p}px`),{data:{x,y:g}}}});function jN(e){const[t,r="center"]=e.split("-");return[t,r]}var Xg=gN,vc=yN,rf=xN,nf=wN,[sf,MB]=lr("Tooltip",[pa]),Jg=pa(),NN="TooltipProvider",vA=700,Ax="tooltip.open",[yA,_N]=sf(NN),SN=e=>{const{__scopeTooltip:t,delayDuration:r=vA,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=h.useRef(!0),l=h.useRef(!1),c=h.useRef(0);return h.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),s.jsx(yA,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:h.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:h.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:h.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:i})};SN.displayName=NN;var CN="Tooltip",[LB,af]=sf(CN),Gm="TooltipTrigger",xA=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=af(Gm,r),i=_N(Gm,r),o=Jg(r),l=h.useRef(null),c=De(t,l,a.onTriggerChange),d=h.useRef(!1),u=h.useRef(!1),f=h.useCallback(()=>d.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),s.jsx(vc,{asChild:!0,...o,children:s.jsx(Ee.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:ge(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:ge(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:ge(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ge(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:ge(e.onBlur,a.onClose),onClick:ge(e.onClick,a.onClose)})})});xA.displayName=Gm;var bA="TooltipPortal",[$B,wA]=sf(bA,{forceMount:void 0}),ko="TooltipContent",EN=h.forwardRef((e,t)=>{const r=wA(ko,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=af(ko,e.__scopeTooltip);return s.jsx(Dt,{present:n||o.open,children:o.disableHoverableContent?s.jsx(kN,{side:a,...i,ref:t}):s.jsx(jA,{side:a,...i,ref:t})})}),jA=h.forwardRef((e,t)=>{const r=af(ko,e.__scopeTooltip),n=_N(ko,e.__scopeTooltip),a=h.useRef(null),i=De(t,a),[o,l]=h.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:f}=n,m=h.useCallback(()=>{l(null),f(!1)},[f]),p=h.useCallback((x,g)=>{const w=x.currentTarget,v={x:x.clientX,y:x.clientY},y=EA(v,w.getBoundingClientRect()),b=kA(v,y),N=PA(g.getBoundingClientRect()),j=RA([...b,...N]);l(j),f(!0)},[f]);return h.useEffect(()=>()=>m(),[m]),h.useEffect(()=>{if(c&&u){const x=w=>p(w,u),g=w=>p(w,c);return c.addEventListener("pointerleave",x),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",g)}}},[c,u,p,m]),h.useEffect(()=>{if(o){const x=g=>{const w=g.target,v={x:g.clientX,y:g.clientY},y=(c==null?void 0:c.contains(w))||(u==null?void 0:u.contains(w)),b=!TA(v,o);y?m():b&&(m(),d())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,u,o,d,m]),s.jsx(kN,{...e,ref:i})}),[NA,_A]=sf(CN,{isInside:!1}),SA=hj("TooltipContent"),kN=h.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=af(ko,r),d=Jg(r),{onClose:u}=c;return h.useEffect(()=>(document.addEventListener(Ax,u),()=>document.removeEventListener(Ax,u)),[u]),h.useEffect(()=>{if(c.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),s.jsx(fi,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:s.jsxs(rf,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(SA,{children:n}),s.jsx(NA,{scope:r,isInside:!0,children:s.jsx(o2,{id:c.contentId,role:"tooltip",children:a||n})})]})})});EN.displayName=ko;var PN="TooltipArrow",CA=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Jg(r);return _A(PN,r).isInside?null:s.jsx(nf,{...a,...n,ref:t})});CA.displayName=PN;function EA(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function kA(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function PA(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function TA(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,f=c.x,m=c.y;u>n!=m>n&&r<(f-d)*(n-u)/(m-u)+d&&(a=!a)}return a}function RA(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),IA(t)}function IA(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var AA=SN,TN=EN;const OA=AA,DA=h.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(TN,{ref:n,sideOffset:t,className:be("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));DA.displayName=TN.displayName;const MA=mc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),$t=h.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:be(MA({variant:t}),e),...r}));$t.displayName="Alert";const LA=h.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:be("mb-1 font-medium leading-none tracking-tight",e),...t}));LA.displayName="AlertTitle";const Ft=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:be("text-sm [&_p]:leading-relaxed",e),...t}));Ft.displayName="AlertDescription";function $A(){const[e,t]=h.useState(navigator.onLine);return h.useEffect(()=>{const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r),window.addEventListener("offline",n),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}},[]),e?null:s.jsxs($t,{className:"mb-4 border-orange-200 bg-orange-50",children:[s.jsx(M2,{className:"h-4 w-4"}),s.jsx(Ft,{children:"You're currently offline. Some features may not work properly until your connection is restored."})]})}var Fo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},FA={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ms,$p,Bb,UA=(Bb=class{constructor(){Re(this,Ms,FA);Re(this,$p,!1)}setTimeoutProvider(e){_e(this,Ms,e)}setTimeout(e,t){return $(this,Ms).setTimeout(e,t)}clearTimeout(e){$(this,Ms).clearTimeout(e)}setInterval(e,t){return $(this,Ms).setInterval(e,t)}clearInterval(e){$(this,Ms).clearInterval(e)}},Ms=new WeakMap,$p=new WeakMap,Bb),Aa=new UA;function BA(e){setTimeout(e,0)}var ri=typeof window>"u"||"Deno"in globalThis;function Lt(){}function qA(e,t){return typeof e=="function"?e(t):e}function Ym(e){return typeof e=="number"&&e>=0&&e!==1/0}function RN(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ra(e,t){return typeof e=="function"?e(t):e}function zr(e,t){return typeof e=="function"?e(t):e}function Ox(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Zg(o,t.options))return!1}else if(!Yl(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function Dx(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(ni(t.options.mutationKey)!==ni(i))return!1}else if(!Yl(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Zg(e,t){return((t==null?void 0:t.queryKeyHashFn)||ni)(e)}function ni(e){return JSON.stringify(e,(t,r)=>Xm(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Yl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Yl(e[r],t[r])):!1}var zA=Object.prototype.hasOwnProperty;function IN(e,t){if(e===t)return e;const r=Mx(e)&&Mx(t);if(!r&&!(Xm(e)&&Xm(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d],f=e[u],m=t[u];if(f===m){l[u]=f,(r?d<a:zA.call(e,u))&&c++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){l[u]=m;continue}const p=IN(f,m);l[u]=p,p===f&&c++}return a===o&&c===a?e:l}function yu(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Mx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Xm(e){if(!Lx(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Lx(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Lx(e){return Object.prototype.toString.call(e)==="[object Object]"}function VA(e){return new Promise(t=>{Aa.setTimeout(t,e)})}function Jm(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?IN(e,t):t}function WA(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function HA(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var ev=Symbol();function AN(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ev?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function ON(e,t){return typeof e=="function"?e(...t):!!e}var Oa,Ls,ao,qb,KA=(qb=class extends Fo{constructor(){super();Re(this,Oa);Re(this,Ls);Re(this,ao);_e(this,ao,t=>{if(!ri&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){$(this,Ls)||this.setEventListener($(this,ao))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,Ls))==null||t.call(this),_e(this,Ls,void 0))}setEventListener(t){var r;_e(this,ao,t),(r=$(this,Ls))==null||r.call(this),_e(this,Ls,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){$(this,Oa)!==t&&(_e(this,Oa,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof $(this,Oa)=="boolean"?$(this,Oa):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Oa=new WeakMap,Ls=new WeakMap,ao=new WeakMap,qb),tv=new KA;function Zm(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function QA(e){var r;let t;if((r=e.then(n=>(t=n,n),Lt))==null||r.catch(Lt),t!==void 0)return{data:t}}function DN(e){return e}function GA(e){return{mutationKey:e.options.mutationKey,state:e.state,...e.options.scope&&{scope:e.options.scope},...e.meta&&{meta:e.meta}}}function YA(e,t,r){var n;return{dehydratedAt:Date.now(),state:{...e.state,...e.state.data!==void 0&&{data:t(e.state.data)}},queryKey:e.queryKey,queryHash:e.queryHash,...e.state.status==="pending"&&{promise:(n=e.promise)==null?void 0:n.then(t).catch(a=>r(a)?Promise.reject(new Error("redacted")):Promise.reject(a))},...e.meta&&{meta:e.meta}}}function XA(e){return e.state.isPaused}function JA(e){return e.state.status==="success"}function ZA(e){return!0}function eO(e,t={}){var c,d,u,f;const r=t.shouldDehydrateMutation??((c=e.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateMutation)??XA,n=e.getMutationCache().getAll().flatMap(m=>r(m)?[GA(m)]:[]),a=t.shouldDehydrateQuery??((d=e.getDefaultOptions().dehydrate)==null?void 0:d.shouldDehydrateQuery)??JA,i=t.shouldRedactErrors??((u=e.getDefaultOptions().dehydrate)==null?void 0:u.shouldRedactErrors)??ZA,o=t.serializeData??((f=e.getDefaultOptions().dehydrate)==null?void 0:f.serializeData)??DN,l=e.getQueryCache().getAll().flatMap(m=>a(m)?[YA(m,o,i)]:[]);return{mutations:n,queries:l}}function tO(e,t,r){var c,d;if(typeof t!="object"||t===null)return;const n=e.getMutationCache(),a=e.getQueryCache(),i=((c=r==null?void 0:r.defaultOptions)==null?void 0:c.deserializeData)??((d=e.getDefaultOptions().hydrate)==null?void 0:d.deserializeData)??DN,o=t.mutations||[],l=t.queries||[];o.forEach(({state:u,...f})=>{var m,p;n.build(e,{...(m=e.getDefaultOptions().hydrate)==null?void 0:m.mutations,...(p=r==null?void 0:r.defaultOptions)==null?void 0:p.mutations,...f},u)}),l.forEach(({queryKey:u,state:f,queryHash:m,meta:p,promise:x,dehydratedAt:g})=>{var C,E;const w=x?QA(x):void 0,v=f.data===void 0?w==null?void 0:w.data:f.data,y=v===void 0?v:i(v);let b=a.get(m);const N=(b==null?void 0:b.state.status)==="pending",j=(b==null?void 0:b.state.fetchStatus)==="fetching";if(b){const M=w&&g!==void 0&&g>b.state.dataUpdatedAt;if(f.dataUpdatedAt>b.state.dataUpdatedAt||M){const{fetchStatus:H,...q}=f;b.setState({...q,data:y})}}else b=a.build(e,{...(C=e.getDefaultOptions().hydrate)==null?void 0:C.queries,...(E=r==null?void 0:r.defaultOptions)==null?void 0:E.queries,queryKey:u,queryHash:m,meta:p},{...f,data:y,fetchStatus:"idle",status:y!==void 0?"success":f.status});x&&!N&&!j&&(g===void 0||g>b.state.dataUpdatedAt)&&b.fetch(void 0,{initialPromise:Promise.resolve(x).then(i)})})}var rO=BA;function nO(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=rO;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Pt=nO(),io,$s,oo,zb,sO=(zb=class extends Fo{constructor(){super();Re(this,io,!0);Re(this,$s);Re(this,oo);_e(this,oo,t=>{if(!ri&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){$(this,$s)||this.setEventListener($(this,oo))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,$s))==null||t.call(this),_e(this,$s,void 0))}setEventListener(t){var r;_e(this,oo,t),(r=$(this,$s))==null||r.call(this),_e(this,$s,t(this.setOnline.bind(this)))}setOnline(t){$(this,io)!==t&&(_e(this,io,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return $(this,io)}},io=new WeakMap,$s=new WeakMap,oo=new WeakMap,zb),xu=new sO;function aO(e){return Math.min(1e3*2**e,3e4)}function MN(e){return(e??"online")==="online"?xu.isOnline():!0}var ep=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function LN(e){let t=!1,r=0,n;const a=Zm(),i=()=>a.status!=="pending",o=g=>{var w;if(!i()){const v=new ep(g);m(v),(w=e.onCancel)==null||w.call(e,v)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>tv.isFocused()&&(e.networkMode==="always"||xu.isOnline())&&e.canRun(),u=()=>MN(e.networkMode)&&e.canRun(),f=g=>{i()||(n==null||n(),a.resolve(g))},m=g=>{i()||(n==null||n(),a.reject(g))},p=()=>new Promise(g=>{var w;n=v=>{(i()||d())&&g(v)},(w=e.onPause)==null||w.call(e)}).then(()=>{var g;n=void 0,i()||(g=e.onContinue)==null||g.call(e)}),x=()=>{if(i())return;let g;const w=r===0?e.initialPromise:void 0;try{g=w??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(f).catch(v=>{var C;if(i())return;const y=e.retry??(ri?0:3),b=e.retryDelay??aO,N=typeof b=="function"?b(r,v):b,j=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,v);if(t||!j){m(v);return}r++,(C=e.onFail)==null||C.call(e,r,v),VA(N).then(()=>d()?void 0:p()).then(()=>{t?m(v):x()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?x():p().then(x),a)}}var Da,Vb,$N=(Vb=class{constructor(){Re(this,Da)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ym(this.gcTime)&&_e(this,Da,Aa.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ri?1/0:5*60*1e3))}clearGcTimeout(){$(this,Da)&&(Aa.clearTimeout($(this,Da)),_e(this,Da,void 0))}},Da=new WeakMap,Vb),Ma,lo,qr,La,Rt,nc,$a,cn,Qn,Wb,iO=(Wb=class extends $N{constructor(t){super();Re(this,cn);Re(this,Ma);Re(this,lo);Re(this,qr);Re(this,La);Re(this,Rt);Re(this,nc);Re(this,$a);_e(this,$a,!1),_e(this,nc,t.defaultOptions),this.setOptions(t.options),this.observers=[],_e(this,La,t.client),_e(this,qr,$(this,La).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,_e(this,Ma,$x(this.options)),this.state=t.state??$(this,Ma),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=$(this,Rt))==null?void 0:t.promise}setOptions(t){if(this.options={...$(this,nc),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=$x(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),_e(this,Ma,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,qr).remove(this)}setData(t,r){const n=Jm(this.state.data,t,this.options);return Fe(this,cn,Qn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Fe(this,cn,Qn).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=$(this,Rt))==null?void 0:n.promise;return(a=$(this,Rt))==null||a.cancel(t),r?r.then(Lt).catch(Lt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,Ma))}isActive(){return this.observers.some(t=>zr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ev||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ra(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!RN(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=$(this,Rt))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=$(this,Rt))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),$(this,qr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||($(this,Rt)&&($(this,$a)?$(this,Rt).cancel({revert:!0}):$(this,Rt).cancelRetry()),this.scheduleGc()),$(this,qr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Fe(this,cn,Qn).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,u,f,m,p,x,g,w,v,y,b;if(this.state.fetchStatus!=="idle"&&((c=$(this,Rt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if($(this,Rt))return $(this,Rt).continueRetry(),$(this,Rt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(j=>j.options.queryFn);N&&this.setOptions(N.options)}const n=new AbortController,a=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(_e(this,$a,!0),n.signal)})},i=()=>{const N=AN(this.options,r),C=(()=>{const E={client:$(this,La),queryKey:this.queryKey,meta:this.meta};return a(E),E})();return _e(this,$a,!1),this.options.persister?this.options.persister(N,C,this):N(C)},l=(()=>{const N={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:$(this,La),state:this.state,fetchFn:i};return a(N),N})();(d=this.options.behavior)==null||d.onFetch(l,this),_e(this,lo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&Fe(this,cn,Qn).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),_e(this,Rt,LN({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:N=>{N instanceof ep&&N.revert&&this.setState({...$(this,lo),fetchStatus:"idle"}),n.abort()},onFail:(N,j)=>{Fe(this,cn,Qn).call(this,{type:"failed",failureCount:N,error:j})},onPause:()=>{Fe(this,cn,Qn).call(this,{type:"pause"})},onContinue:()=>{Fe(this,cn,Qn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const N=await $(this,Rt).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(p=(m=$(this,qr).config).onSuccess)==null||p.call(m,N,this),(g=(x=$(this,qr).config).onSettled)==null||g.call(x,N,this.state.error,this),N}catch(N){if(N instanceof ep){if(N.silent)return $(this,Rt).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw Fe(this,cn,Qn).call(this,{type:"error",error:N}),(v=(w=$(this,qr).config).onError)==null||v.call(w,N,this),(b=(y=$(this,qr).config).onSettled)==null||b.call(y,this.state.data,N,this),N}finally{this.scheduleGc()}}},Ma=new WeakMap,lo=new WeakMap,qr=new WeakMap,La=new WeakMap,Rt=new WeakMap,nc=new WeakMap,$a=new WeakMap,cn=new WeakSet,Qn=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...FN(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return _e(this,lo,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Pt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),$(this,qr).notify({query:this,type:"updated",action:t})})},Wb);function FN(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:MN(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function $x(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var dr,We,sc,Zt,Fa,co,es,Fs,ac,uo,fo,Ua,Ba,Us,ho,Ge,fl,tp,rp,np,sp,ap,ip,op,UN,Hb,oO=(Hb=class extends Fo{constructor(t,r){super();Re(this,Ge);Re(this,dr);Re(this,We);Re(this,sc);Re(this,Zt);Re(this,Fa);Re(this,co);Re(this,es);Re(this,Fs);Re(this,ac);Re(this,uo);Re(this,fo);Re(this,Ua);Re(this,Ba);Re(this,Us);Re(this,ho,new Set);this.options=r,_e(this,dr,t),_e(this,Fs,null),_e(this,es,Zm()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&($(this,We).addObserver(this),Fx($(this,We),this.options)?Fe(this,Ge,fl).call(this):this.updateResult(),Fe(this,Ge,sp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return lp($(this,We),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return lp($(this,We),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Fe(this,Ge,ap).call(this),Fe(this,Ge,ip).call(this),$(this,We).removeObserver(this)}setOptions(t){const r=this.options,n=$(this,We);if(this.options=$(this,dr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zr(this.options.enabled,$(this,We))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Fe(this,Ge,op).call(this),$(this,We).setOptions(this.options),r._defaulted&&!yu(this.options,r)&&$(this,dr).getQueryCache().notify({type:"observerOptionsUpdated",query:$(this,We),observer:this});const a=this.hasListeners();a&&Ux($(this,We),n,this.options,r)&&Fe(this,Ge,fl).call(this),this.updateResult(),a&&($(this,We)!==n||zr(this.options.enabled,$(this,We))!==zr(r.enabled,$(this,We))||ra(this.options.staleTime,$(this,We))!==ra(r.staleTime,$(this,We)))&&Fe(this,Ge,tp).call(this);const i=Fe(this,Ge,rp).call(this);a&&($(this,We)!==n||zr(this.options.enabled,$(this,We))!==zr(r.enabled,$(this,We))||i!==$(this,Us))&&Fe(this,Ge,np).call(this,i)}getOptimisticResult(t){const r=$(this,dr).getQueryCache().build($(this,dr),t),n=this.createResult(r,t);return cO(this,n)&&(_e(this,Zt,n),_e(this,co,this.options),_e(this,Fa,$(this,We).state)),n}getCurrentResult(){return $(this,Zt)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&!this.options.experimental_prefetchInRender&&$(this,es).status==="pending"&&$(this,es).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,a))})}trackProp(t){$(this,ho).add(t)}getCurrentQuery(){return $(this,We)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=$(this,dr).defaultQueryOptions(t),n=$(this,dr).getQueryCache().build($(this,dr),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Fe(this,Ge,fl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),$(this,Zt)))}createResult(t,r){var H;const n=$(this,We),a=this.options,i=$(this,Zt),o=$(this,Fa),l=$(this,co),d=t!==n?t.state:$(this,sc),{state:u}=t;let f={...u},m=!1,p;if(r._optimisticResults){const q=this.hasListeners(),P=!q&&Fx(t,r),K=q&&Ux(t,n,r,a);(P||K)&&(f={...f,...FN(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:x,errorUpdatedAt:g,status:w}=f;p=f.data;let v=!1;if(r.placeholderData!==void 0&&p===void 0&&w==="pending"){let q;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(q=i.data,v=!0):q=typeof r.placeholderData=="function"?r.placeholderData((H=$(this,fo))==null?void 0:H.state.data,$(this,fo)):r.placeholderData,q!==void 0&&(w="success",p=Jm(i==null?void 0:i.data,q,r),m=!0)}if(r.select&&p!==void 0&&!v)if(i&&p===(o==null?void 0:o.data)&&r.select===$(this,ac))p=$(this,uo);else try{_e(this,ac,r.select),p=r.select(p),p=Jm(i==null?void 0:i.data,p,r),_e(this,uo,p),_e(this,Fs,null)}catch(q){_e(this,Fs,q)}$(this,Fs)&&(x=$(this,Fs),p=$(this,uo),g=Date.now(),w="error");const y=f.fetchStatus==="fetching",b=w==="pending",N=w==="error",j=b&&y,C=p!==void 0,M={status:w,fetchStatus:f.fetchStatus,isPending:b,isSuccess:w==="success",isError:N,isInitialLoading:j,isLoading:j,data:p,dataUpdatedAt:f.dataUpdatedAt,error:x,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:N&&!C,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:N&&C,isStale:rv(t,r),refetch:this.refetch,promise:$(this,es),isEnabled:zr(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const q=ee=>{M.status==="error"?ee.reject(M.error):M.data!==void 0&&ee.resolve(M.data)},P=()=>{const ee=_e(this,es,M.promise=Zm());q(ee)},K=$(this,es);switch(K.status){case"pending":t.queryHash===n.queryHash&&q(K);break;case"fulfilled":(M.status==="error"||M.data!==K.value)&&P();break;case"rejected":(M.status!=="error"||M.error!==K.reason)&&P();break}}return M}updateResult(){const t=$(this,Zt),r=this.createResult($(this,We),this.options);if(_e(this,Fa,$(this,We).state),_e(this,co,this.options),$(this,Fa).data!==void 0&&_e(this,fo,$(this,We)),yu(r,t))return;_e(this,Zt,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!$(this,ho).size)return!0;const o=new Set(i??$(this,ho));return this.options.throwOnError&&o.add("error"),Object.keys($(this,Zt)).some(l=>{const c=l;return $(this,Zt)[c]!==t[c]&&o.has(c)})};Fe(this,Ge,UN).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Fe(this,Ge,sp).call(this)}},dr=new WeakMap,We=new WeakMap,sc=new WeakMap,Zt=new WeakMap,Fa=new WeakMap,co=new WeakMap,es=new WeakMap,Fs=new WeakMap,ac=new WeakMap,uo=new WeakMap,fo=new WeakMap,Ua=new WeakMap,Ba=new WeakMap,Us=new WeakMap,ho=new WeakMap,Ge=new WeakSet,fl=function(t){Fe(this,Ge,op).call(this);let r=$(this,We).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Lt)),r},tp=function(){Fe(this,Ge,ap).call(this);const t=ra(this.options.staleTime,$(this,We));if(ri||$(this,Zt).isStale||!Ym(t))return;const n=RN($(this,Zt).dataUpdatedAt,t)+1;_e(this,Ua,Aa.setTimeout(()=>{$(this,Zt).isStale||this.updateResult()},n))},rp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval($(this,We)):this.options.refetchInterval)??!1},np=function(t){Fe(this,Ge,ip).call(this),_e(this,Us,t),!(ri||zr(this.options.enabled,$(this,We))===!1||!Ym($(this,Us))||$(this,Us)===0)&&_e(this,Ba,Aa.setInterval(()=>{(this.options.refetchIntervalInBackground||tv.isFocused())&&Fe(this,Ge,fl).call(this)},$(this,Us)))},sp=function(){Fe(this,Ge,tp).call(this),Fe(this,Ge,np).call(this,Fe(this,Ge,rp).call(this))},ap=function(){$(this,Ua)&&(Aa.clearTimeout($(this,Ua)),_e(this,Ua,void 0))},ip=function(){$(this,Ba)&&(Aa.clearInterval($(this,Ba)),_e(this,Ba,void 0))},op=function(){const t=$(this,dr).getQueryCache().build($(this,dr),this.options);if(t===$(this,We))return;const r=$(this,We);_e(this,We,t),_e(this,sc,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},UN=function(t){Pt.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r($(this,Zt))}),$(this,dr).getQueryCache().notify({query:$(this,We),type:"observerResultsUpdated"})})},Hb);function lO(e,t){return zr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Fx(e,t){return lO(e,t)||e.state.data!==void 0&&lp(e,t,t.refetchOnMount)}function lp(e,t,r){if(zr(t.enabled,e)!==!1&&ra(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&rv(e,t)}return!1}function Ux(e,t,r,n){return(e!==t||zr(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&rv(e,r)}function rv(e,t){return zr(t.enabled,e)!==!1&&e.isStaleByTime(ra(t.staleTime,e))}function cO(e,t){return!yu(e.getCurrentResult(),t)}function Bx(e){return{onFetch:(t,r)=>{var u,f,m,p,x;const n=t.options,a=(m=(f=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=AN(t.options,t.fetchOptions),y=async(b,N,j)=>{if(g)return Promise.reject();if(N==null&&b.pages.length)return Promise.resolve(b);const E=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:N,direction:j?"backward":"forward",meta:t.options.meta};return w(P),P})(),M=await v(E),{maxPages:H}=t.options,q=j?HA:WA;return{pages:q(b.pages,M,H),pageParams:q(b.pageParams,N,H)}};if(a&&i.length){const b=a==="backward",N=b?dO:qx,j={pages:i,pageParams:o},C=N(n,j);l=await y(j,C,b)}else{const b=e??i.length;do{const N=c===0?o[0]??n.initialPageParam:qx(n,l);if(c>0&&N==null)break;l=await y(l,N),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,w;return(w=(g=t.options).persister)==null?void 0:w.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function qx(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function dO(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var ic,Pn,er,qa,Tn,ks,Kb,uO=(Kb=class extends $N{constructor(t){super();Re(this,Tn);Re(this,ic);Re(this,Pn);Re(this,er);Re(this,qa);_e(this,ic,t.client),this.mutationId=t.mutationId,_e(this,er,t.mutationCache),_e(this,Pn,[]),this.state=t.state||BN(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){$(this,Pn).includes(t)||($(this,Pn).push(t),this.clearGcTimeout(),$(this,er).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){_e(this,Pn,$(this,Pn).filter(r=>r!==t)),this.scheduleGc(),$(this,er).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){$(this,Pn).length||(this.state.status==="pending"?this.scheduleGc():$(this,er).remove(this))}continue(){var t;return((t=$(this,qa))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,u,f,m,p,x,g,w,v,y,b,N,j,C,E,M,H;const r=()=>{Fe(this,Tn,ks).call(this,{type:"continue"})},n={client:$(this,ic),meta:this.options.meta,mutationKey:this.options.mutationKey};_e(this,qa,LN({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(q,P)=>{Fe(this,Tn,ks).call(this,{type:"failed",failureCount:q,error:P})},onPause:()=>{Fe(this,Tn,ks).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,er).canRun(this)}));const a=this.state.status==="pending",i=!$(this,qa).canStart();try{if(a)r();else{Fe(this,Tn,ks).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=$(this,er).config).onMutate)==null?void 0:l.call(o,t,this,n));const P=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));P!==this.state.context&&Fe(this,Tn,ks).call(this,{type:"pending",context:P,variables:t,isPaused:i})}const q=await $(this,qa).start();return await((f=(u=$(this,er).config).onSuccess)==null?void 0:f.call(u,q,t,this.state.context,this,n)),await((p=(m=this.options).onSuccess)==null?void 0:p.call(m,q,t,this.state.context,n)),await((g=(x=$(this,er).config).onSettled)==null?void 0:g.call(x,q,null,this.state.variables,this.state.context,this,n)),await((v=(w=this.options).onSettled)==null?void 0:v.call(w,q,null,t,this.state.context,n)),Fe(this,Tn,ks).call(this,{type:"success",data:q}),q}catch(q){try{throw await((b=(y=$(this,er).config).onError)==null?void 0:b.call(y,q,t,this.state.context,this,n)),await((j=(N=this.options).onError)==null?void 0:j.call(N,q,t,this.state.context,n)),await((E=(C=$(this,er).config).onSettled)==null?void 0:E.call(C,void 0,q,this.state.variables,this.state.context,this,n)),await((H=(M=this.options).onSettled)==null?void 0:H.call(M,void 0,q,t,this.state.context,n)),q}finally{Fe(this,Tn,ks).call(this,{type:"error",error:q})}}finally{$(this,er).runNext(this)}}},ic=new WeakMap,Pn=new WeakMap,er=new WeakMap,qa=new WeakMap,Tn=new WeakSet,ks=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Pt.batch(()=>{$(this,Pn).forEach(n=>{n.onMutationUpdate(t)}),$(this,er).notify({mutation:this,type:"updated",action:t})})},Kb);function BN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ts,dn,oc,Qb,fO=(Qb=class extends Fo{constructor(t={}){super();Re(this,ts);Re(this,dn);Re(this,oc);this.config=t,_e(this,ts,new Set),_e(this,dn,new Map),_e(this,oc,0)}build(t,r,n){const a=new uO({client:t,mutationCache:this,mutationId:++Bc(this,oc)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){$(this,ts).add(t);const r=cd(t);if(typeof r=="string"){const n=$(this,dn).get(r);n?n.push(t):$(this,dn).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if($(this,ts).delete(t)){const r=cd(t);if(typeof r=="string"){const n=$(this,dn).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&$(this,dn).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=cd(t);if(typeof r=="string"){const n=$(this,dn).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=cd(t);if(typeof r=="string"){const a=(n=$(this,dn).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Pt.batch(()=>{$(this,ts).forEach(t=>{this.notify({type:"removed",mutation:t})}),$(this,ts).clear(),$(this,dn).clear()})}getAll(){return Array.from($(this,ts))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Dx(r,n))}findAll(t={}){return this.getAll().filter(r=>Dx(t,r))}notify(t){Pt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Pt.batch(()=>Promise.all(t.map(r=>r.continue().catch(Lt))))}},ts=new WeakMap,dn=new WeakMap,oc=new WeakMap,Qb);function cd(e){var t;return(t=e.options.scope)==null?void 0:t.id}var rs,Bs,ur,ns,cs,Fd,cp,Gb,hO=(Gb=class extends Fo{constructor(r,n){super();Re(this,cs);Re(this,rs);Re(this,Bs);Re(this,ur);Re(this,ns);_e(this,rs,r),this.setOptions(n),this.bindMethods(),Fe(this,cs,Fd).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=$(this,rs).defaultMutationOptions(r),yu(this.options,n)||$(this,rs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:$(this,ur),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&ni(n.mutationKey)!==ni(this.options.mutationKey)?this.reset():((a=$(this,ur))==null?void 0:a.state.status)==="pending"&&$(this,ur).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=$(this,ur))==null||r.removeObserver(this)}onMutationUpdate(r){Fe(this,cs,Fd).call(this),Fe(this,cs,cp).call(this,r)}getCurrentResult(){return $(this,Bs)}reset(){var r;(r=$(this,ur))==null||r.removeObserver(this),_e(this,ur,void 0),Fe(this,cs,Fd).call(this),Fe(this,cs,cp).call(this)}mutate(r,n){var a;return _e(this,ns,n),(a=$(this,ur))==null||a.removeObserver(this),_e(this,ur,$(this,rs).getMutationCache().build($(this,rs),this.options)),$(this,ur).addObserver(this),$(this,ur).execute(r)}},rs=new WeakMap,Bs=new WeakMap,ur=new WeakMap,ns=new WeakMap,cs=new WeakSet,Fd=function(){var n;const r=((n=$(this,ur))==null?void 0:n.state)??BN();_e(this,Bs,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},cp=function(r){Pt.batch(()=>{var n,a,i,o,l,c,d,u;if($(this,ns)&&this.hasListeners()){const f=$(this,Bs).variables,m=$(this,Bs).context,p={client:$(this,rs),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=$(this,ns)).onSuccess)==null||a.call(n,r.data,f,m,p),(o=(i=$(this,ns)).onSettled)==null||o.call(i,r.data,null,f,m,p)):(r==null?void 0:r.type)==="error"&&((c=(l=$(this,ns)).onError)==null||c.call(l,r.error,f,m,p),(u=(d=$(this,ns)).onSettled)==null||u.call(d,void 0,r.error,f,m,p))}this.listeners.forEach(f=>{f($(this,Bs))})})},Gb),Rn,Yb,mO=(Yb=class extends Fo{constructor(t={}){super();Re(this,Rn);this.config=t,_e(this,Rn,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??Zg(a,r);let o=this.get(i);return o||(o=new iO({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){$(this,Rn).has(t.queryHash)||($(this,Rn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=$(this,Rn).get(t.queryHash);r&&(t.destroy(),r===t&&$(this,Rn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Pt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return $(this,Rn).get(t)}getAll(){return[...$(this,Rn).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Ox(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Ox(t,n)):r}notify(t){Pt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Pt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Pt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Rn=new WeakMap,Yb),pt,qs,zs,mo,po,Vs,go,vo,Xb,pO=(Xb=class{constructor(e={}){Re(this,pt);Re(this,qs);Re(this,zs);Re(this,mo);Re(this,po);Re(this,Vs);Re(this,go);Re(this,vo);_e(this,pt,e.queryCache||new mO),_e(this,qs,e.mutationCache||new fO),_e(this,zs,e.defaultOptions||{}),_e(this,mo,new Map),_e(this,po,new Map),_e(this,Vs,0)}mount(){Bc(this,Vs)._++,$(this,Vs)===1&&(_e(this,go,tv.subscribe(async e=>{e&&(await this.resumePausedMutations(),$(this,pt).onFocus())})),_e(this,vo,xu.subscribe(async e=>{e&&(await this.resumePausedMutations(),$(this,pt).onOnline())})))}unmount(){var e,t;Bc(this,Vs)._--,$(this,Vs)===0&&((e=$(this,go))==null||e.call(this),_e(this,go,void 0),(t=$(this,vo))==null||t.call(this),_e(this,vo,void 0))}isFetching(e){return $(this,pt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return $(this,qs).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=$(this,pt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=$(this,pt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ra(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return $(this,pt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=$(this,pt).get(n.queryHash),i=a==null?void 0:a.state.data,o=qA(t,i);if(o!==void 0)return $(this,pt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Pt.batch(()=>$(this,pt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=$(this,pt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=$(this,pt);Pt.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=$(this,pt);return Pt.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Pt.batch(()=>$(this,pt).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Lt).catch(Lt)}invalidateQueries(e,t={}){return Pt.batch(()=>($(this,pt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Pt.batch(()=>$(this,pt).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Lt)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Lt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=$(this,pt).build(this,t);return r.isStaleByTime(ra(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Lt).catch(Lt)}fetchInfiniteQuery(e){return e.behavior=Bx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Lt).catch(Lt)}ensureInfiniteQueryData(e){return e.behavior=Bx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return xu.isOnline()?$(this,qs).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,pt)}getMutationCache(){return $(this,qs)}getDefaultOptions(){return $(this,zs)}setDefaultOptions(e){_e(this,zs,e)}setQueryDefaults(e,t){$(this,mo).set(ni(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...$(this,mo).values()],r={};return t.forEach(n=>{Yl(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){$(this,po).set(ni(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...$(this,po).values()],r={};return t.forEach(n=>{Yl(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...$(this,zs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Zg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ev&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...$(this,zs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){$(this,pt).clear(),$(this,qs).clear()}},pt=new WeakMap,qs=new WeakMap,zs=new WeakMap,mo=new WeakMap,po=new WeakMap,Vs=new WeakMap,go=new WeakMap,vo=new WeakMap,Xb),qN=h.createContext(void 0),ga=e=>{const t=h.useContext(qN);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},gO=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(qN.Provider,{value:e,children:t})),zN=h.createContext(!1),vO=()=>h.useContext(zN);zN.Provider;function yO(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var xO=h.createContext(yO()),bO=()=>h.useContext(xO),wO=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},jO=e=>{h.useEffect(()=>{e.clearReset()},[e])},NO=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||ON(r,[e.error,n])),_O=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},SO=(e,t)=>e.isLoading&&e.isFetching&&!t,CO=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,zx=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function EO(e,t,r){var f,m,p,x,g;const n=vO(),a=bO(),i=ga(),o=i.defaultQueryOptions(e);(m=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,o),o._optimisticResults=n?"isRestoring":"optimistic",_O(o),wO(o,a),jO(a);const l=!i.getQueryCache().get(o.queryHash),[c]=h.useState(()=>new t(i,o)),d=c.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(w=>{const v=u?c.subscribe(Pt.batchCalls(w)):Lt;return c.updateResult(),v},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(o)},[o,c]),CO(o,d))throw zx(o,c,a);if(NO({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((x=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||x.call(p,o,d),o.experimental_prefetchInRender&&!ri&&SO(d,n)){const w=l?zx(o,c,a):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(Lt).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function vt(e,t){return EO(e,oO)}function na(e,t){const r=ga(),[n]=h.useState(()=>new hO(r,e));h.useEffect(()=>{n.setOptions(e)},[n,e]);const a=h.useSyncExternalStore(h.useCallback(o=>n.subscribe(Pt.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=h.useCallback((o,l)=>{n.mutate(o,l).catch(Lt)},[n]);if(a.error&&ON(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}var kO=["added","removed","updated"];function Vx(e){return kO.includes(e)}async function PO({queryClient:e,persister:t,maxAge:r=1e3*60*60*24,buster:n="",hydrateOptions:a}){try{const i=await t.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>r,l=i.buster!==n;if(o||l)return t.removeClient();tO(e,i.clientState,a)}else return t.removeClient()}catch(i){throw await t.removeClient(),i}}async function Wx({queryClient:e,persister:t,buster:r="",dehydrateOptions:n}){const a={buster:r,timestamp:Date.now(),clientState:eO(e,n)};await t.persistClient(a)}function TO(e){const t=e.queryClient.getQueryCache().subscribe(n=>{Vx(n.type)&&Wx(e)}),r=e.queryClient.getMutationCache().subscribe(n=>{Vx(n.type)&&Wx(e)});return()=>{t(),r()}}function RO(e){let t=!1,r;const n=()=>{t=!0,r==null||r()},a=PO(e).then(()=>{t||(r=TO(e))});return[n,a]}var IO=({persistedClient:e})=>{const t=[...e.clientState.mutations],r=[...e.clientState.queries],n={...e,clientState:{mutations:t,queries:r}},a=[...r].sort((i,o)=>i.state.dataUpdatedAt-o.state.dataUpdatedAt);if(a.length>0){const i=a.shift();return n.clientState.queries=r.filter(o=>o!==i),n}};function dd(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var VN={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,a,i){function o(d,u){if(!a[d]){if(!n[d]){var f=typeof dd=="function"&&dd;if(!u&&f)return f(d,!0);if(l)return l(d,!0);var m=new Error("Cannot find module '"+d+"'");throw m.code="MODULE_NOT_FOUND",m}var p=a[d]={exports:{}};n[d][0].call(p.exports,function(x){var g=n[d][1][x];return o(g||x)},p,p.exports,r,n,a,i)}return a[d].exports}for(var l=typeof dd=="function"&&dd,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(r,n,a){(function(i){var o=i.MutationObserver||i.WebKitMutationObserver,l;if(o){var c=0,d=new o(x),u=i.document.createTextNode("");d.observe(u,{characterData:!0}),l=function(){u.data=c=++c%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var f=new i.MessageChannel;f.port1.onmessage=x,l=function(){f.port2.postMessage(0)}}else"document"in i&&"onreadystatechange"in i.document.createElement("script")?l=function(){var w=i.document.createElement("script");w.onreadystatechange=function(){x(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},i.document.documentElement.appendChild(w)}:l=function(){setTimeout(x,0)};var m,p=[];function x(){m=!0;for(var w,v,y=p.length;y;){for(v=p,p=[],w=-1;++w<y;)v[w]();y=p.length}m=!1}n.exports=g;function g(w){p.push(w)===1&&!m&&l()}}).call(this,typeof Qt<"u"?Qt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,a){var i=r(1);function o(){}var l={},c=["REJECTED"],d=["FULFILLED"],u=["PENDING"];n.exports=f;function f(j){if(typeof j!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,j!==o&&g(this,j)}f.prototype.catch=function(j){return this.then(null,j)},f.prototype.then=function(j,C){if(typeof j!="function"&&this.state===d||typeof C!="function"&&this.state===c)return this;var E=new this.constructor(o);if(this.state!==u){var M=this.state===d?j:C;p(E,M,this.outcome)}else this.queue.push(new m(E,j,C));return E};function m(j,C,E){this.promise=j,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(j){l.resolve(this.promise,j)},m.prototype.otherCallFulfilled=function(j){p(this.promise,this.onFulfilled,j)},m.prototype.callRejected=function(j){l.reject(this.promise,j)},m.prototype.otherCallRejected=function(j){p(this.promise,this.onRejected,j)};function p(j,C,E){i(function(){var M;try{M=C(E)}catch(H){return l.reject(j,H)}M===j?l.reject(j,new TypeError("Cannot resolve promise with itself")):l.resolve(j,M)})}l.resolve=function(j,C){var E=w(x,C);if(E.status==="error")return l.reject(j,E.value);var M=E.value;if(M)g(j,M);else{j.state=d,j.outcome=C;for(var H=-1,q=j.queue.length;++H<q;)j.queue[H].callFulfilled(C)}return j},l.reject=function(j,C){j.state=c,j.outcome=C;for(var E=-1,M=j.queue.length;++E<M;)j.queue[E].callRejected(C);return j};function x(j){var C=j&&j.then;if(j&&(typeof j=="object"||typeof j=="function")&&typeof C=="function")return function(){C.apply(j,arguments)}}function g(j,C){var E=!1;function M(K){E||(E=!0,l.reject(j,K))}function H(K){E||(E=!0,l.resolve(j,K))}function q(){C(H,M)}var P=w(q);P.status==="error"&&M(P.value)}function w(j,C){var E={};try{E.value=j(C),E.status="success"}catch(M){E.status="error",E.value=M}return E}f.resolve=v;function v(j){return j instanceof this?j:l.resolve(new this(o),j)}f.reject=y;function y(j){var C=new this(o);return l.reject(C,j)}f.all=b;function b(j){var C=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=j.length,M=!1;if(!E)return this.resolve([]);for(var H=new Array(E),q=0,P=-1,K=new this(o);++P<E;)ee(j[P],P);return K;function ee(D,S){C.resolve(D).then(A,function(O){M||(M=!0,l.reject(K,O))});function A(O){H[S]=O,++q===E&&!M&&(M=!0,l.resolve(K,H))}}}f.race=N;function N(j){var C=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=j.length,M=!1;if(!E)return this.resolve([]);for(var H=-1,q=new this(o);++H<E;)P(j[H]);return q;function P(K){C.resolve(K).then(function(ee){M||(M=!0,l.resolve(q,ee))},function(ee){M||(M=!0,l.reject(q,ee))})}}},{1:1}],3:[function(r,n,a){(function(i){typeof i.Promise!="function"&&(i.Promise=r(2))}).call(this,typeof Qt<"u"?Qt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};function o(_,U){if(!(_ instanceof U))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=l();function d(){try{if(!c||!c.open)return!1;var _=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),U=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!_||U)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function u(_,U){_=_||[],U=U||{};try{return new Blob(_,U)}catch(z){if(z.name!=="TypeError")throw z;for(var k=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,W=new k,G=0;G<_.length;G+=1)W.append(_[G]);return W.getBlob(U.type)}}typeof Promise>"u"&&r(3);var f=Promise;function m(_,U){U&&_.then(function(k){U(null,k)},function(k){U(k)})}function p(_,U,k){typeof U=="function"&&_.then(U),typeof k=="function"&&_.catch(k)}function x(_){return typeof _!="string"&&(console.warn(_+" used as a key, but it is not a string."),_=String(_)),_}function g(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var w="local-forage-detect-blob-support",v=void 0,y={},b=Object.prototype.toString,N="readonly",j="readwrite";function C(_){for(var U=_.length,k=new ArrayBuffer(U),W=new Uint8Array(k),G=0;G<U;G++)W[G]=_.charCodeAt(G);return k}function E(_){return new f(function(U){var k=_.transaction(w,j),W=u([""]);k.objectStore(w).put(W,"key"),k.onabort=function(G){G.preventDefault(),G.stopPropagation(),U(!1)},k.oncomplete=function(){var G=navigator.userAgent.match(/Chrome\/(\d+)/),z=navigator.userAgent.match(/Edge\//);U(z||!G||parseInt(G[1],10)>=43)}}).catch(function(){return!1})}function M(_){return typeof v=="boolean"?f.resolve(v):E(_).then(function(U){return v=U,v})}function H(_){var U=y[_.name],k={};k.promise=new f(function(W,G){k.resolve=W,k.reject=G}),U.deferredOperations.push(k),U.dbReady?U.dbReady=U.dbReady.then(function(){return k.promise}):U.dbReady=k.promise}function q(_){var U=y[_.name],k=U.deferredOperations.pop();if(k)return k.resolve(),k.promise}function P(_,U){var k=y[_.name],W=k.deferredOperations.pop();if(W)return W.reject(U),W.promise}function K(_,U){return new f(function(k,W){if(y[_.name]=y[_.name]||B(),_.db)if(U)H(_),_.db.close();else return k(_.db);var G=[_.name];U&&G.push(_.version);var z=c.open.apply(c,G);U&&(z.onupgradeneeded=function(oe){var ue=z.result;try{ue.createObjectStore(_.storeName),oe.oldVersion<=1&&ue.createObjectStore(w)}catch(me){if(me.name==="ConstraintError")console.warn('The database "'+_.name+'" has been upgraded from version '+oe.oldVersion+" to version "+oe.newVersion+', but the storage "'+_.storeName+'" already exists.');else throw me}}),z.onerror=function(oe){oe.preventDefault(),W(z.error)},z.onsuccess=function(){var oe=z.result;oe.onversionchange=function(ue){ue.target.close()},k(oe),q(_)}})}function ee(_){return K(_,!1)}function D(_){return K(_,!0)}function S(_,U){if(!_.db)return!0;var k=!_.db.objectStoreNames.contains(_.storeName),W=_.version<_.db.version,G=_.version>_.db.version;if(W&&(_.version!==U&&console.warn('The database "'+_.name+`" can't be downgraded from version `+_.db.version+" to version "+_.version+"."),_.version=_.db.version),G||k){if(k){var z=_.db.version+1;z>_.version&&(_.version=z)}return!0}return!1}function A(_){return new f(function(U,k){var W=new FileReader;W.onerror=k,W.onloadend=function(G){var z=btoa(G.target.result||"");U({__local_forage_encoded_blob:!0,data:z,type:_.type})},W.readAsBinaryString(_)})}function O(_){var U=C(atob(_.data));return u([U],{type:_.type})}function F(_){return _&&_.__local_forage_encoded_blob}function L(_){var U=this,k=U._initReady().then(function(){var W=y[U._dbInfo.name];if(W&&W.dbReady)return W.dbReady});return p(k,_,_),k}function J(_){H(_);for(var U=y[_.name],k=U.forages,W=0;W<k.length;W++){var G=k[W];G._dbInfo.db&&(G._dbInfo.db.close(),G._dbInfo.db=null)}return _.db=null,ee(_).then(function(z){return _.db=z,S(_)?D(_):z}).then(function(z){_.db=U.db=z;for(var oe=0;oe<k.length;oe++)k[oe]._dbInfo.db=z}).catch(function(z){throw P(_,z),z})}function ce(_,U,k,W){W===void 0&&(W=1);try{var G=_.db.transaction(_.storeName,U);k(null,G)}catch(z){if(W>0&&(!_.db||z.name==="InvalidStateError"||z.name==="NotFoundError"))return f.resolve().then(function(){if(!_.db||z.name==="NotFoundError"&&!_.db.objectStoreNames.contains(_.storeName)&&_.version<=_.db.version)return _.db&&(_.version=_.db.version+1),D(_)}).then(function(){return J(_).then(function(){ce(_,U,k,W-1)})}).catch(k);k(z)}}function B(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function I(_){var U=this,k={db:null};if(_)for(var W in _)k[W]=_[W];var G=y[k.name];G||(G=B(),y[k.name]=G),G.forages.push(U),U._initReady||(U._initReady=U.ready,U.ready=L);var z=[];function oe(){return f.resolve()}for(var ue=0;ue<G.forages.length;ue++){var me=G.forages[ue];me!==U&&z.push(me._initReady().catch(oe))}var ve=G.forages.slice(0);return f.all(z).then(function(){return k.db=G.db,ee(k)}).then(function(xe){return k.db=xe,S(k,U._defaultConfig.version)?D(k):xe}).then(function(xe){k.db=G.db=xe,U._dbInfo=k;for(var ke=0;ke<ve.length;ke++){var Ue=ve[ke];Ue!==U&&(Ue._dbInfo.db=k.db,Ue._dbInfo.version=k.version)}})}function V(_,U){var k=this;_=x(_);var W=new f(function(G,z){k.ready().then(function(){ce(k._dbInfo,N,function(oe,ue){if(oe)return z(oe);try{var me=ue.objectStore(k._dbInfo.storeName),ve=me.get(_);ve.onsuccess=function(){var xe=ve.result;xe===void 0&&(xe=null),F(xe)&&(xe=O(xe)),G(xe)},ve.onerror=function(){z(ve.error)}}catch(xe){z(xe)}})}).catch(z)});return m(W,U),W}function Q(_,U){var k=this,W=new f(function(G,z){k.ready().then(function(){ce(k._dbInfo,N,function(oe,ue){if(oe)return z(oe);try{var me=ue.objectStore(k._dbInfo.storeName),ve=me.openCursor(),xe=1;ve.onsuccess=function(){var ke=ve.result;if(ke){var Ue=ke.value;F(Ue)&&(Ue=O(Ue));var Qe=_(Ue,ke.key,xe++);Qe!==void 0?G(Qe):ke.continue()}else G()},ve.onerror=function(){z(ve.error)}}catch(ke){z(ke)}})}).catch(z)});return m(W,U),W}function se(_,U,k){var W=this;_=x(_);var G=new f(function(z,oe){var ue;W.ready().then(function(){return ue=W._dbInfo,b.call(U)==="[object Blob]"?M(ue.db).then(function(me){return me?U:A(U)}):U}).then(function(me){ce(W._dbInfo,j,function(ve,xe){if(ve)return oe(ve);try{var ke=xe.objectStore(W._dbInfo.storeName);me===null&&(me=void 0);var Ue=ke.put(me,_);xe.oncomplete=function(){me===void 0&&(me=null),z(me)},xe.onabort=xe.onerror=function(){var Qe=Ue.error?Ue.error:Ue.transaction.error;oe(Qe)}}catch(Qe){oe(Qe)}})}).catch(oe)});return m(G,k),G}function Z(_,U){var k=this;_=x(_);var W=new f(function(G,z){k.ready().then(function(){ce(k._dbInfo,j,function(oe,ue){if(oe)return z(oe);try{var me=ue.objectStore(k._dbInfo.storeName),ve=me.delete(_);ue.oncomplete=function(){G()},ue.onerror=function(){z(ve.error)},ue.onabort=function(){var xe=ve.error?ve.error:ve.transaction.error;z(xe)}}catch(xe){z(xe)}})}).catch(z)});return m(W,U),W}function R(_){var U=this,k=new f(function(W,G){U.ready().then(function(){ce(U._dbInfo,j,function(z,oe){if(z)return G(z);try{var ue=oe.objectStore(U._dbInfo.storeName),me=ue.clear();oe.oncomplete=function(){W()},oe.onabort=oe.onerror=function(){var ve=me.error?me.error:me.transaction.error;G(ve)}}catch(ve){G(ve)}})}).catch(G)});return m(k,_),k}function X(_){var U=this,k=new f(function(W,G){U.ready().then(function(){ce(U._dbInfo,N,function(z,oe){if(z)return G(z);try{var ue=oe.objectStore(U._dbInfo.storeName),me=ue.count();me.onsuccess=function(){W(me.result)},me.onerror=function(){G(me.error)}}catch(ve){G(ve)}})}).catch(G)});return m(k,_),k}function ie(_,U){var k=this,W=new f(function(G,z){if(_<0){G(null);return}k.ready().then(function(){ce(k._dbInfo,N,function(oe,ue){if(oe)return z(oe);try{var me=ue.objectStore(k._dbInfo.storeName),ve=!1,xe=me.openKeyCursor();xe.onsuccess=function(){var ke=xe.result;if(!ke){G(null);return}_===0||ve?G(ke.key):(ve=!0,ke.advance(_))},xe.onerror=function(){z(xe.error)}}catch(ke){z(ke)}})}).catch(z)});return m(W,U),W}function T(_){var U=this,k=new f(function(W,G){U.ready().then(function(){ce(U._dbInfo,N,function(z,oe){if(z)return G(z);try{var ue=oe.objectStore(U._dbInfo.storeName),me=ue.openKeyCursor(),ve=[];me.onsuccess=function(){var xe=me.result;if(!xe){W(ve);return}ve.push(xe.key),xe.continue()},me.onerror=function(){G(me.error)}}catch(xe){G(xe)}})}).catch(G)});return m(k,_),k}function Y(_,U){U=g.apply(this,arguments);var k=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||k.name,_.storeName=_.storeName||k.storeName);var W=this,G;if(!_.name)G=f.reject("Invalid arguments");else{var z=_.name===k.name&&W._dbInfo.db,oe=z?f.resolve(W._dbInfo.db):ee(_).then(function(ue){var me=y[_.name],ve=me.forages;me.db=ue;for(var xe=0;xe<ve.length;xe++)ve[xe]._dbInfo.db=ue;return ue});_.storeName?G=oe.then(function(ue){if(ue.objectStoreNames.contains(_.storeName)){var me=ue.version+1;H(_);var ve=y[_.name],xe=ve.forages;ue.close();for(var ke=0;ke<xe.length;ke++){var Ue=xe[ke];Ue._dbInfo.db=null,Ue._dbInfo.version=me}var Qe=new f(function(Xe,wt){var yt=c.open(_.name,me);yt.onerror=function(Br){var Ko=yt.result;Ko.close(),wt(Br)},yt.onupgradeneeded=function(){var Br=yt.result;Br.deleteObjectStore(_.storeName)},yt.onsuccess=function(){var Br=yt.result;Br.close(),Xe(Br)}});return Qe.then(function(Xe){ve.db=Xe;for(var wt=0;wt<xe.length;wt++){var yt=xe[wt];yt._dbInfo.db=Xe,q(yt._dbInfo)}}).catch(function(Xe){throw(P(_,Xe)||f.resolve()).catch(function(){}),Xe})}}):G=oe.then(function(ue){H(_);var me=y[_.name],ve=me.forages;ue.close();for(var xe=0;xe<ve.length;xe++){var ke=ve[xe];ke._dbInfo.db=null}var Ue=new f(function(Qe,Xe){var wt=c.deleteDatabase(_.name);wt.onerror=function(){var yt=wt.result;yt&&yt.close(),Xe(wt.error)},wt.onblocked=function(){console.warn('dropInstance blocked for database "'+_.name+'" until all open connections are closed')},wt.onsuccess=function(){var yt=wt.result;yt&&yt.close(),Qe(yt)}});return Ue.then(function(Qe){me.db=Qe;for(var Xe=0;Xe<ve.length;Xe++){var wt=ve[Xe];q(wt._dbInfo)}}).catch(function(Qe){throw(P(_,Qe)||f.resolve()).catch(function(){}),Qe})})}return m(G,U),G}var le={_driver:"asyncStorage",_initStorage:I,_support:d(),iterate:Q,getItem:V,setItem:se,removeItem:Z,clear:R,length:X,key:ie,keys:T,dropInstance:Y};function Pe(){return typeof openDatabase=="function"}var re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Se="~~local_forage_type~",ut=/^~~local_forage_type~([^~]+)~/,Te="__lfsc__:",Ye=Te.length,jr="arbf",jn="blob",ws="si08",Ur="ui08",Ic="uic8",Ac="si16",Xt="si32",Wn="ur16",Oc="ui32",Dc="fl32",wa="fl64",Mc=Ye+jr.length,zo=Object.prototype.toString;function xi(_){var U=_.length*.75,k=_.length,W,G=0,z,oe,ue,me;_[_.length-1]==="="&&(U--,_[_.length-2]==="="&&U--);var ve=new ArrayBuffer(U),xe=new Uint8Array(ve);for(W=0;W<k;W+=4)z=re.indexOf(_[W]),oe=re.indexOf(_[W+1]),ue=re.indexOf(_[W+2]),me=re.indexOf(_[W+3]),xe[G++]=z<<2|oe>>4,xe[G++]=(oe&15)<<4|ue>>2,xe[G++]=(ue&3)<<6|me&63;return ve}function Nn(_){var U=new Uint8Array(_),k="",W;for(W=0;W<U.length;W+=3)k+=re[U[W]>>2],k+=re[(U[W]&3)<<4|U[W+1]>>4],k+=re[(U[W+1]&15)<<2|U[W+2]>>6],k+=re[U[W+2]&63];return U.length%3===2?k=k.substring(0,k.length-1)+"=":U.length%3===1&&(k=k.substring(0,k.length-2)+"=="),k}function Lc(_,U){var k="";if(_&&(k=zo.call(_)),_&&(k==="[object ArrayBuffer]"||_.buffer&&zo.call(_.buffer)==="[object ArrayBuffer]")){var W,G=Te;_ instanceof ArrayBuffer?(W=_,G+=jr):(W=_.buffer,k==="[object Int8Array]"?G+=ws:k==="[object Uint8Array]"?G+=Ur:k==="[object Uint8ClampedArray]"?G+=Ic:k==="[object Int16Array]"?G+=Ac:k==="[object Uint16Array]"?G+=Wn:k==="[object Int32Array]"?G+=Xt:k==="[object Uint32Array]"?G+=Oc:k==="[object Float32Array]"?G+=Dc:k==="[object Float64Array]"?G+=wa:U(new Error("Failed to get type for BinaryArray"))),U(G+Nn(W))}else if(k==="[object Blob]"){var z=new FileReader;z.onload=function(){var oe=Se+_.type+"~"+Nn(this.result);U(Te+jn+oe)},z.readAsArrayBuffer(_)}else try{U(JSON.stringify(_))}catch(oe){console.error("Couldn't convert value into a JSON string: ",_),U(null,oe)}}function js(_){if(_.substring(0,Ye)!==Te)return JSON.parse(_);var U=_.substring(Mc),k=_.substring(Ye,Mc),W;if(k===jn&&ut.test(U)){var G=U.match(ut);W=G[1],U=U.substring(G[0].length)}var z=xi(U);switch(k){case jr:return z;case jn:return u([z],{type:W});case ws:return new Int8Array(z);case Ur:return new Uint8Array(z);case Ic:return new Uint8ClampedArray(z);case Ac:return new Int16Array(z);case Wn:return new Uint16Array(z);case Xt:return new Int32Array(z);case Oc:return new Uint32Array(z);case Dc:return new Float32Array(z);case wa:return new Float64Array(z);default:throw new Error("Unkown type: "+k)}}var Vo={serialize:Lc,deserialize:js,stringToBuffer:xi,bufferToString:Nn};function $c(_,U,k,W){_.executeSql("CREATE TABLE IF NOT EXISTS "+U.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],k,W)}function Fc(_){var U=this,k={db:null};if(_)for(var W in _)k[W]=typeof _[W]!="string"?_[W].toString():_[W];var G=new f(function(z,oe){try{k.db=openDatabase(k.name,String(k.version),k.description,k.size)}catch(ue){return oe(ue)}k.db.transaction(function(ue){$c(ue,k,function(){U._dbInfo=k,z()},function(me,ve){oe(ve)})},oe)});return k.serializer=Vo,G}function tn(_,U,k,W,G,z){_.executeSql(k,W,G,function(oe,ue){ue.code===ue.SYNTAX_ERR?oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[U.storeName],function(me,ve){ve.rows.length?z(me,ue):$c(me,U,function(){me.executeSql(k,W,G,z)},z)},z):z(oe,ue)},z)}function Df(_,U){var k=this;_=x(_);var W=new f(function(G,z){k.ready().then(function(){var oe=k._dbInfo;oe.db.transaction(function(ue){tn(ue,oe,"SELECT * FROM "+oe.storeName+" WHERE key = ? LIMIT 1",[_],function(me,ve){var xe=ve.rows.length?ve.rows.item(0).value:null;xe&&(xe=oe.serializer.deserialize(xe)),G(xe)},function(me,ve){z(ve)})})}).catch(z)});return m(W,U),W}function Wo(_,U){var k=this,W=new f(function(G,z){k.ready().then(function(){var oe=k._dbInfo;oe.db.transaction(function(ue){tn(ue,oe,"SELECT * FROM "+oe.storeName,[],function(me,ve){for(var xe=ve.rows,ke=xe.length,Ue=0;Ue<ke;Ue++){var Qe=xe.item(Ue),Xe=Qe.value;if(Xe&&(Xe=oe.serializer.deserialize(Xe)),Xe=_(Xe,Qe.key,Ue+1),Xe!==void 0){G(Xe);return}}G()},function(me,ve){z(ve)})})}).catch(z)});return m(W,U),W}function rn(_,U,k,W){var G=this;_=x(_);var z=new f(function(oe,ue){G.ready().then(function(){U===void 0&&(U=null);var me=U,ve=G._dbInfo;ve.serializer.serialize(U,function(xe,ke){ke?ue(ke):ve.db.transaction(function(Ue){tn(Ue,ve,"INSERT OR REPLACE INTO "+ve.storeName+" (key, value) VALUES (?, ?)",[_,xe],function(){oe(me)},function(Qe,Xe){ue(Xe)})},function(Ue){if(Ue.code===Ue.QUOTA_ERR){if(W>0){oe(rn.apply(G,[_,me,k,W-1]));return}ue(Ue)}})})}).catch(ue)});return m(z,k),z}function Mf(_,U,k){return rn.apply(this,[_,U,k,1])}function Ae(_,U){var k=this;_=x(_);var W=new f(function(G,z){k.ready().then(function(){var oe=k._dbInfo;oe.db.transaction(function(ue){tn(ue,oe,"DELETE FROM "+oe.storeName+" WHERE key = ?",[_],function(){G()},function(me,ve){z(ve)})})}).catch(z)});return m(W,U),W}function Ke(_){var U=this,k=new f(function(W,G){U.ready().then(function(){var z=U._dbInfo;z.db.transaction(function(oe){tn(oe,z,"DELETE FROM "+z.storeName,[],function(){W()},function(ue,me){G(me)})})}).catch(G)});return m(k,_),k}function et(_){var U=this,k=new f(function(W,G){U.ready().then(function(){var z=U._dbInfo;z.db.transaction(function(oe){tn(oe,z,"SELECT COUNT(key) as c FROM "+z.storeName,[],function(ue,me){var ve=me.rows.item(0).c;W(ve)},function(ue,me){G(me)})})}).catch(G)});return m(k,_),k}function Nr(_,U){var k=this,W=new f(function(G,z){k.ready().then(function(){var oe=k._dbInfo;oe.db.transaction(function(ue){tn(ue,oe,"SELECT key FROM "+oe.storeName+" WHERE id = ? LIMIT 1",[_+1],function(me,ve){var xe=ve.rows.length?ve.rows.item(0).key:null;G(xe)},function(me,ve){z(ve)})})}).catch(z)});return m(W,U),W}function _r(_){var U=this,k=new f(function(W,G){U.ready().then(function(){var z=U._dbInfo;z.db.transaction(function(oe){tn(oe,z,"SELECT key FROM "+z.storeName,[],function(ue,me){for(var ve=[],xe=0;xe<me.rows.length;xe++)ve.push(me.rows.item(xe).key);W(ve)},function(ue,me){G(me)})})}).catch(G)});return m(k,_),k}function _n(_){return new f(function(U,k){_.transaction(function(W){W.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(G,z){for(var oe=[],ue=0;ue<z.rows.length;ue++)oe.push(z.rows.item(ue).name);U({db:_,storeNames:oe})},function(G,z){k(z)})},function(W){k(W)})})}function Hn(_,U){U=g.apply(this,arguments);var k=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||k.name,_.storeName=_.storeName||k.storeName);var W=this,G;return _.name?G=new f(function(z){var oe;_.name===k.name?oe=W._dbInfo.db:oe=openDatabase(_.name,"","",0),_.storeName?z({db:oe,storeNames:[_.storeName]}):z(_n(oe))}).then(function(z){return new f(function(oe,ue){z.db.transaction(function(me){function ve(Qe){return new f(function(Xe,wt){me.executeSql("DROP TABLE IF EXISTS "+Qe,[],function(){Xe()},function(yt,Br){wt(Br)})})}for(var xe=[],ke=0,Ue=z.storeNames.length;ke<Ue;ke++)xe.push(ve(z.storeNames[ke]));f.all(xe).then(function(){oe()}).catch(function(Qe){ue(Qe)})},function(me){ue(me)})})}):G=f.reject("Invalid arguments"),m(G,U),G}var Sr={_driver:"webSQLStorage",_initStorage:Fc,_support:Pe(),iterate:Wo,getItem:Df,setItem:Mf,removeItem:Ae,clear:Ke,length:et,key:Nr,keys:_r,dropInstance:Hn};function Sn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Hv(_,U){var k=_.name+"/";return _.storeName!==U.storeName&&(k+=_.storeName+"/"),k}function DE(){var _="_localforage_support_test";try{return localStorage.setItem(_,!0),localStorage.removeItem(_),!1}catch{return!0}}function ME(){return!DE()||localStorage.length>0}function LE(_){var U=this,k={};if(_)for(var W in _)k[W]=_[W];return k.keyPrefix=Hv(_,U._defaultConfig),ME()?(U._dbInfo=k,k.serializer=Vo,f.resolve()):f.reject()}function $E(_){var U=this,k=U.ready().then(function(){for(var W=U._dbInfo.keyPrefix,G=localStorage.length-1;G>=0;G--){var z=localStorage.key(G);z.indexOf(W)===0&&localStorage.removeItem(z)}});return m(k,_),k}function FE(_,U){var k=this;_=x(_);var W=k.ready().then(function(){var G=k._dbInfo,z=localStorage.getItem(G.keyPrefix+_);return z&&(z=G.serializer.deserialize(z)),z});return m(W,U),W}function UE(_,U){var k=this,W=k.ready().then(function(){for(var G=k._dbInfo,z=G.keyPrefix,oe=z.length,ue=localStorage.length,me=1,ve=0;ve<ue;ve++){var xe=localStorage.key(ve);if(xe.indexOf(z)===0){var ke=localStorage.getItem(xe);if(ke&&(ke=G.serializer.deserialize(ke)),ke=_(ke,xe.substring(oe),me++),ke!==void 0)return ke}}});return m(W,U),W}function BE(_,U){var k=this,W=k.ready().then(function(){var G=k._dbInfo,z;try{z=localStorage.key(_)}catch{z=null}return z&&(z=z.substring(G.keyPrefix.length)),z});return m(W,U),W}function qE(_){var U=this,k=U.ready().then(function(){for(var W=U._dbInfo,G=localStorage.length,z=[],oe=0;oe<G;oe++){var ue=localStorage.key(oe);ue.indexOf(W.keyPrefix)===0&&z.push(ue.substring(W.keyPrefix.length))}return z});return m(k,_),k}function zE(_){var U=this,k=U.keys().then(function(W){return W.length});return m(k,_),k}function VE(_,U){var k=this;_=x(_);var W=k.ready().then(function(){var G=k._dbInfo;localStorage.removeItem(G.keyPrefix+_)});return m(W,U),W}function WE(_,U,k){var W=this;_=x(_);var G=W.ready().then(function(){U===void 0&&(U=null);var z=U;return new f(function(oe,ue){var me=W._dbInfo;me.serializer.serialize(U,function(ve,xe){if(xe)ue(xe);else try{localStorage.setItem(me.keyPrefix+_,ve),oe(z)}catch(ke){(ke.name==="QuotaExceededError"||ke.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ue(ke),ue(ke)}})})});return m(G,k),G}function HE(_,U){if(U=g.apply(this,arguments),_=typeof _!="function"&&_||{},!_.name){var k=this.config();_.name=_.name||k.name,_.storeName=_.storeName||k.storeName}var W=this,G;return _.name?G=new f(function(z){_.storeName?z(Hv(_,W._defaultConfig)):z(_.name+"/")}).then(function(z){for(var oe=localStorage.length-1;oe>=0;oe--){var ue=localStorage.key(oe);ue.indexOf(z)===0&&localStorage.removeItem(ue)}}):G=f.reject("Invalid arguments"),m(G,U),G}var KE={_driver:"localStorageWrapper",_initStorage:LE,_support:Sn(),iterate:UE,getItem:FE,setItem:WE,removeItem:VE,clear:$E,length:zE,key:BE,keys:qE,dropInstance:HE},QE=function(U,k){return U===k||typeof U=="number"&&typeof k=="number"&&isNaN(U)&&isNaN(k)},GE=function(U,k){for(var W=U.length,G=0;G<W;){if(QE(U[G],k))return!0;G++}return!1},Kv=Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"},Ho={},Qv={},bi={INDEXEDDB:le,WEBSQL:Sr,LOCALSTORAGE:KE},YE=[bi.INDEXEDDB._driver,bi.WEBSQL._driver,bi.LOCALSTORAGE._driver],Uc=["dropInstance"],Lf=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Uc),XE={description:"",driver:YE.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function JE(_,U){_[U]=function(){var k=arguments;return _.ready().then(function(){return _[U].apply(_,k)})}}function $f(){for(var _=1;_<arguments.length;_++){var U=arguments[_];if(U)for(var k in U)U.hasOwnProperty(k)&&(Kv(U[k])?arguments[0][k]=U[k].slice():arguments[0][k]=U[k])}return arguments[0]}var ZE=function(){function _(U){o(this,_);for(var k in bi)if(bi.hasOwnProperty(k)){var W=bi[k],G=W._driver;this[k]=G,Ho[G]||this.defineDriver(W)}this._defaultConfig=$f({},XE),this._config=$f({},this._defaultConfig,U),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return _.prototype.config=function(k){if((typeof k>"u"?"undefined":i(k))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var W in k){if(W==="storeName"&&(k[W]=k[W].replace(/\W/g,"_")),W==="version"&&typeof k[W]!="number")return new Error("Database version must be a number.");this._config[W]=k[W]}return"driver"in k&&k.driver?this.setDriver(this._config.driver):!0}else return typeof k=="string"?this._config[k]:this._config},_.prototype.defineDriver=function(k,W,G){var z=new f(function(oe,ue){try{var me=k._driver,ve=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!k._driver){ue(ve);return}for(var xe=Lf.concat("_initStorage"),ke=0,Ue=xe.length;ke<Ue;ke++){var Qe=xe[ke],Xe=!GE(Uc,Qe);if((Xe||k[Qe])&&typeof k[Qe]!="function"){ue(ve);return}}var wt=function(){for(var Ko=function(rk){return function(){var nk=new Error("Method "+rk+" is not implemented by the current driver"),Gv=f.reject(nk);return m(Gv,arguments[arguments.length-1]),Gv}},Ff=0,tk=Uc.length;Ff<tk;Ff++){var Uf=Uc[Ff];k[Uf]||(k[Uf]=Ko(Uf))}};wt();var yt=function(Ko){Ho[me]&&console.info("Redefining LocalForage driver: "+me),Ho[me]=k,Qv[me]=Ko,oe()};"_support"in k?k._support&&typeof k._support=="function"?k._support().then(yt,ue):yt(!!k._support):yt(!0)}catch(Br){ue(Br)}});return p(z,W,G),z},_.prototype.driver=function(){return this._driver||null},_.prototype.getDriver=function(k,W,G){var z=Ho[k]?f.resolve(Ho[k]):f.reject(new Error("Driver not found."));return p(z,W,G),z},_.prototype.getSerializer=function(k){var W=f.resolve(Vo);return p(W,k),W},_.prototype.ready=function(k){var W=this,G=W._driverSet.then(function(){return W._ready===null&&(W._ready=W._initDriver()),W._ready});return p(G,k,k),G},_.prototype.setDriver=function(k,W,G){var z=this;Kv(k)||(k=[k]);var oe=this._getSupportedDrivers(k);function ue(){z._config.driver=z.driver()}function me(ke){return z._extend(ke),ue(),z._ready=z._initStorage(z._config),z._ready}function ve(ke){return function(){var Ue=0;function Qe(){for(;Ue<ke.length;){var Xe=ke[Ue];return Ue++,z._dbInfo=null,z._ready=null,z.getDriver(Xe).then(me).catch(Qe)}ue();var wt=new Error("No available storage method found.");return z._driverSet=f.reject(wt),z._driverSet}return Qe()}}var xe=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=xe.then(function(){var ke=oe[0];return z._dbInfo=null,z._ready=null,z.getDriver(ke).then(function(Ue){z._driver=Ue._driver,ue(),z._wrapLibraryMethodsWithReady(),z._initDriver=ve(oe)})}).catch(function(){ue();var ke=new Error("No available storage method found.");return z._driverSet=f.reject(ke),z._driverSet}),p(this._driverSet,W,G),this._driverSet},_.prototype.supports=function(k){return!!Qv[k]},_.prototype._extend=function(k){$f(this,k)},_.prototype._getSupportedDrivers=function(k){for(var W=[],G=0,z=k.length;G<z;G++){var oe=k[G];this.supports(oe)&&W.push(oe)}return W},_.prototype._wrapLibraryMethodsWithReady=function(){for(var k=0,W=Lf.length;k<W;k++)JE(this,Lf[k])},_.prototype.createInstance=function(k){return new _(k)},_}(),ek=new ZE;n.exports=ek},{3:3}]},{},[4])(4)})})(VN);var AO=VN.exports;const Ka=Fp(AO);Ka.config({name:"semiproperty-guardian",storeName:"react-query-cache",description:"Persisted React Query cache for offline support"});const bh="rq-cache-v1",OO={persistClient:async e=>{try{await Ka.setItem(bh,e)}catch(t){console.warn("Failed to persist query client",t)}},restoreClient:async()=>{try{return await Ka.getItem(bh)??void 0}catch(e){console.warn("Failed to restore query client",e);return}},removeClient:async()=>{try{await Ka.removeItem(bh)}catch(e){console.warn("Failed to remove persisted query client",e)}}},WN=5*60*1e3,DO=24*60*60*1e3,MO=24*60*60*1e3,HN="offline-mutation-queue-v1";Ka.config({name:"semiproperty-guardian",storeName:"offline-queue"});async function KN(){return await Ka.getItem(HN)||[]}async function QN(e){await Ka.setItem(HN,e)}async function Zn(e,t){const r={id:`${e}-${Date.now()}-${Math.random().toString(36).slice(2)}`,name:e,payload:t,createdAt:Date.now()},n=await KN();return n.push(r),await QN(n),r}async function LO(e){if(!navigator.onLine)return{processed:0,failed:0};let t=await KN();if(!t.length)return{processed:0,failed:0};const r=[];let n=0,a=0;for(const i of t){const o=e[i.name];if(!o){r.push(i);continue}try{await o(i.payload),n+=1}catch(l){console.warn("Failed processing offline mutation",i.name,l),a+=1,r.push(i)}}return await QN(r),{processed:n,failed:a}}const $O="modulepreload",FO=function(e){return"/semi-property-guardian/"+e},Hx={},yc=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=FO(c),c in Hx)return;Hx[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":$O,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},UO=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>yc(async()=>{const{default:n}=await Promise.resolve().then(()=>Uo);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class nv extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class BO extends nv{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Kx extends nv{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Qx extends nv{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var dp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(dp||(dp={}));var qO=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class zO{constructor(t,{headers:r={},customFetch:n,region:a=dp.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=UO(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return qO(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(g=>{throw new BO(g)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new Kx(f);if(!f.ok)throw new Qx(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return p==="application/json"?x=yield f.json():p==="application/octet-stream"?x=yield f.blob():p==="text/event-stream"?x=f:p==="multipart/form-data"?x=yield f.formData():x=yield f.text(),{data:x,error:null,response:f}}catch(a){return{data:null,error:a,response:a instanceof Qx||a instanceof Kx?a.context:void 0}}})}}var pr={},sv={},of={},xc={},lf={},cf={},VO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Po=VO();const WO=Po.fetch,GN=Po.fetch.bind(Po),YN=Po.Headers,HO=Po.Request,KO=Po.Response,Uo=Object.freeze(Object.defineProperty({__proto__:null,Headers:YN,Request:HO,Response:KO,default:GN,fetch:WO},Symbol.toStringTag,{value:"Module"})),QO=ak(Uo);var df={};Object.defineProperty(df,"__esModule",{value:!0});let GO=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};df.default=GO;var XN=Qt&&Qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cf,"__esModule",{value:!0});const YO=XN(QO),XO=XN(df);let JO=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=YO.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,d;let u=null,f=null,m=null,p=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=y:f=JSON.parse(y))}const w=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&v&&v.length>1&&(m=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,p=406,x="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const w=await i.text();try{u=JSON.parse(w),Array.isArray(u)&&i.status===404&&(f=[],u=null,p=200,x="OK")}catch{i.status===404&&w===""?(p=204,x="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,p=200,x="OK"),u&&this.shouldThrowOnError)throw new XO.default(u)}return{error:u,data:f,count:m,status:p,statusText:x}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};cf.default=JO;var ZO=Qt&&Qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lf,"__esModule",{value:!0});const eD=ZO(cf);let tD=class extends eD.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};lf.default=tD;var rD=Qt&&Qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xc,"__esModule",{value:!0});const nD=rD(lf);let sD=class extends nD.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};xc.default=sD;var aD=Qt&&Qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(of,"__esModule",{value:!0});const sl=aD(xc);let iD=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new sl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var a;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new sl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new sl.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new sl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new sl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};of.default=iD;var JN=Qt&&Qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sv,"__esModule",{value:!0});const oD=JN(of),lD=JN(xc);let cD=class ZN{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new oD.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ZN(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([f,m])=>m!==void 0).map(([f,m])=>[f,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([f,m])=>{c.searchParams.append(f,m)})):(l="POST",d=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new lD.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};sv.default=cD;var Bo=Qt&&Qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pr,"__esModule",{value:!0});pr.PostgrestError=pr.PostgrestBuilder=pr.PostgrestTransformBuilder=pr.PostgrestFilterBuilder=pr.PostgrestQueryBuilder=pr.PostgrestClient=void 0;const e_=Bo(sv);pr.PostgrestClient=e_.default;const t_=Bo(of);pr.PostgrestQueryBuilder=t_.default;const r_=Bo(xc);pr.PostgrestFilterBuilder=r_.default;const n_=Bo(lf);pr.PostgrestTransformBuilder=n_.default;const s_=Bo(cf);pr.PostgrestBuilder=s_.default;const a_=Bo(df);pr.PostgrestError=a_.default;var dD=pr.default={PostgrestClient:e_.default,PostgrestQueryBuilder:t_.default,PostgrestFilterBuilder:r_.default,PostgrestTransformBuilder:n_.default,PostgrestBuilder:s_.default,PostgrestError:a_.default};const{PostgrestClient:uD,PostgrestQueryBuilder:WB,PostgrestFilterBuilder:HB,PostgrestTransformBuilder:KB,PostgrestBuilder:QB,PostgrestError:GB}=dD;class fD{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const hD="2.15.5",mD=`realtime-js/${hD}`,pD="1.0.0",up=1e4,gD=1e3,vD=100;var Cl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Cl||(Cl={}));var St;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(St||(St={}));var fn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(fn||(fn={}));var fp;(function(e){e.websocket="websocket"})(fp||(fp={}));var Pa;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Pa||(Pa={}));class yD{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class i_{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(tt||(tt={}));const Gx=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=xD(o,e,t,a),i),{})},xD=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?o_(i,o):hp(o)},o_=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return ND(t,r)}switch(e){case tt.bool:return bD(t);case tt.float4:case tt.float8:case tt.int2:case tt.int4:case tt.int8:case tt.numeric:case tt.oid:return wD(t);case tt.json:case tt.jsonb:return jD(t);case tt.timestamp:return _D(t);case tt.abstime:case tt.date:case tt.daterange:case tt.int4range:case tt.int8range:case tt.money:case tt.reltime:case tt.text:case tt.time:case tt.timestamptz:case tt.timetz:case tt.tsrange:case tt.tstzrange:return hp(t);default:return hp(t)}},hp=e=>e,bD=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},wD=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},jD=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ND=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>o_(t,l))}return e},_D=e=>typeof e=="string"?e.replace(" ","T"):e,l_=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class wh{constructor(t,r,n={},a=up){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Yx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Yx||(Yx={}));class El{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=El.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=El.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=El.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const f=i[d];if(f){const m=u.map(w=>w.presence_ref),p=f.map(w=>w.presence_ref),x=u.filter(w=>p.indexOf(w.presence_ref)<0),g=f.filter(w=>m.indexOf(w.presence_ref)<0);x.length>0&&(l[d]=x),g.length>0&&(c[d]=g)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const f=t[l].map(p=>p.presence_ref),m=u.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...m)}n(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Xx||(Xx={}));var kl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(kl||(kl={}));var Xn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Xn||(Xn={}));class av{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=St.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new wh(this,fn.join,this.params,this.timeout),this.rejoinTimer=new i_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=St.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=St.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fn.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new El(this),this.broadcastEndpointURL=l_(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==St.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[kl.PRESENCE]&&this.bindings[kl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Xn.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Xn.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var x;if(this.socket.setAuth(),p===void 0){t==null||t(Xn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(x=g==null?void 0:g.length)!==null&&x!==void 0?x:0,v=[];for(let y=0;y<w;y++){const b=g[y],{filter:{event:N,schema:j,table:C,filter:E}}=b,M=p&&p[y];if(M&&M.event===N&&M.schema===j&&M.table===C&&M.filter===E)v.push(Object.assign(Object.assign({},b),{id:M.id}));else{this.unsubscribe(),this.state=St.errored,t==null||t(Xn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Xn.SUBSCRIBED);return}}).receive("error",p=>{this.state=St.errored,t==null||t(Xn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Xn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===St.joined&&t===kl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=St.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new wh(this,fn.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=St.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new wh(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>vD){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=fn;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var x,g,w;return((x=p.filter)===null||x===void 0?void 0:x.event)==="*"||((w=(g=p.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var x,g,w,v,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const N=p.id,j=(x=p.filter)===null||x===void 0?void 0:x.event;return N&&((g=r.ids)===null||g===void 0?void 0:g.includes(N))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const N=(y=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return N==="*"||N===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:g,table:w,commit_timestamp:v,type:y,errors:b}=x;m=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:v,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(x))}p.callback(m,n)})}_isClosed(){return this.state===St.closed}_isJoined(){return this.state===St.joined}_isJoining(){return this.state===St.joining}_isLeaving(){return this.state===St.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&av.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(fn.close,{},t)}_onError(t){this._on(fn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=St.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Gx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Gx(t.columns,t.old_record)),r}}const jh=()=>{},ud={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},SD=[1e3,2e3,5e3,1e4],CD=1e4,ED=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kD{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=up,this.transport=null,this.heartbeatIntervalMs=ud.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jh,this.ref=0,this.reconnectTimer=null,this.logger=jh,this.conn=null,this.sendBuffer=[],this.serializer=new yD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>yc(async()=>{const{default:l}=await Promise.resolve().then(()=>Uo);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${fp.websocket}`,this.httpEndpoint=l_(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fD.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:pD}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Cl.connecting:return Pa.Connecting;case Cl.open:return Pa.Open;case Cl.closing:return Pa.Closing;default:return Pa.Closed}}isConnected(){return this.connectionState()===Pa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new av(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(gD,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ud.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(fn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([ED],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:mD};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(fn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new i_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ud.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,d,u;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:up,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:ud.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:jh,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:f=>SD[f-1]||CD,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(f,m)=>m(JSON.stringify(f)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class iv extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ct(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class PD extends iv{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mp extends iv{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var TD=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const c_=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>yc(async()=>{const{default:n}=await Promise.resolve().then(()=>Uo);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},RD=()=>TD(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield yc(()=>Promise.resolve().then(()=>Uo),void 0)).Response:Response}),pp=e=>{if(Array.isArray(e))return e.map(r=>pp(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=pp(n)}),t},ID=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var hi=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const Nh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),AD=(e,t,r)=>hi(void 0,void 0,void 0,function*(){const n=yield RD();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new PD(Nh(a),i,o))}).catch(a=>{t(new mp(Nh(a),a))}):t(new mp(Nh(e),e))}),OD=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(ID(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function bc(e,t,r,n,a,i){return hi(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,OD(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>AD(c,l,n))})})}function bu(e,t,r,n){return hi(this,void 0,void 0,function*(){return bc(e,"GET",t,r,n)})}function kn(e,t,r,n,a){return hi(this,void 0,void 0,function*(){return bc(e,"POST",t,n,a,r)})}function gp(e,t,r,n,a){return hi(this,void 0,void 0,function*(){return bc(e,"PUT",t,n,a,r)})}function DD(e,t,r,n){return hi(this,void 0,void 0,function*(){return bc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function d_(e,t,r,n,a){return hi(this,void 0,void 0,function*(){return bc(e,"DELETE",t,n,a,r)})}var Jt=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const MD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class LD{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=c_(a)}uploadOrUpdate(t,r,n,a){return Jt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Jx),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),f=yield(t=="PUT"?gp:kn)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(Ct(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Jt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Jt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Jx.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield gp(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(Ct(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Jt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield kn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new iv("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(Ct(n))return{data:null,error:n};throw n}})}update(t,r,n){return Jt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Jt(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Ct(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Jt(this,void 0,void 0,function*(){try{return{data:{path:(yield kn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Ct(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Jt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield kn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(Ct(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Jt(this,void 0,void 0,function*(){try{const a=yield kn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(Ct(a))return{data:null,error:a};throw a}})}download(t,r){return Jt(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield bu(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ct(l))return{data:null,error:l};throw l}})}info(t){return Jt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield bu(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:pp(n),error:null}}catch(n){if(Ct(n))return{data:null,error:n};throw n}})}exists(t){return Jt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield DD(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ct(n)&&n instanceof mp){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return Jt(this,void 0,void 0,function*(){try{return{data:yield d_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Ct(r))return{data:null,error:r};throw r}})}list(t,r,n){return Jt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},MD),r),{prefix:t||""});return{data:yield kn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(Ct(a))return{data:null,error:a};throw a}})}listV2(t,r){return Jt(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield kn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Ct(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const $D="2.11.1",FD={"X-Client-Info":`storage-js/${$D}`};var ji=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class UD{constructor(t,r={},n,a){const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},FD),r),this.fetch=c_(n)}listBuckets(){return ji(this,void 0,void 0,function*(){try{return{data:yield bu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ct(t))return{data:null,error:t};throw t}})}getBucket(t){return ji(this,void 0,void 0,function*(){try{return{data:yield bu(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Ct(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ji(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ct(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return ji(this,void 0,void 0,function*(){try{return{data:yield gp(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ct(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ji(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Ct(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ji(this,void 0,void 0,function*(){try{return{data:yield d_(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Ct(r))return{data:null,error:r};throw r}})}}class BD extends UD{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new LD(this.url,this.headers,t,this.fetch)}}const qD="2.57.2";let hl="";typeof Deno<"u"?hl="deno":typeof document<"u"?hl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hl="react-native":hl="node";const zD={"X-Client-Info":`supabase-js-${hl}/${qD}`},VD={headers:zD},WD={schema:"public"},HD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},KD={};var QD=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const GD=e=>{let t;return e?t=e:typeof fetch>"u"?t=GN:t=fetch,(...r)=>t(...r)},YD=()=>typeof Headers>"u"?YN:Headers,XD=(e,t,r)=>{const n=GD(r),a=YD();return(i,o)=>QD(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var JD=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};function ZD(e){return e.endsWith("/")?e:e+"/"}function eM(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:f}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>JD(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const u_="2.71.1",Ri=30*1e3,vp=3,_h=vp*Ri,tM="http://localhost:9999",rM="supabase.auth.token",nM={"X-Client-Info":`gotrue-js/${u_}`},yp="X-Supabase-Api-Version",f_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},sM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,aM=10*60*1e3;class ov extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class iM extends ov{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function oM(e){return Me(e)&&e.name==="AuthApiError"}class h_ extends ov{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class va extends ov{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Ps extends va{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function lM(e){return Me(e)&&e.name==="AuthSessionMissingError"}class fd extends va{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class hd extends va{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class md extends va{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function cM(e){return Me(e)&&e.name==="AuthImplicitGrantRedirectError"}class Zx extends va{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xp extends va{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Sh(e){return Me(e)&&e.name==="AuthRetryableFetchError"}class eb extends va{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class bp extends va{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const wu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tb=` 	
\r=`.split(""),dM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<tb.length;t+=1)e[tb[t].charCodeAt(0)]=-2;for(let t=0;t<wu.length;t+=1)e[wu[t].charCodeAt(0)]=t;return e})();function rb(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(wu[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(wu[n]),t.queuedBits-=6}}function m_(e,t,r){const n=dM[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function nb(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{hM(o,n,r)};for(let o=0;o<e.length;o+=1)m_(e.charCodeAt(o),a,i);return t.join("")}function uM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function fM(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}uM(n,t)}}function hM(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function mM(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)m_(e.charCodeAt(a),r,n);return new Uint8Array(t)}function pM(e){const t=[];return fM(e,r=>t.push(r)),new Uint8Array(t)}function gM(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>rb(a,r,n)),rb(null,r,n),t.join("")}function vM(e){return Math.round(Date.now()/1e3)+e}function yM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const an=()=>typeof window<"u"&&typeof document<"u",ja={tested:!1,writable:!1},p_=()=>{if(!an())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ja.tested)return ja.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ja.tested=!0,ja.writable=!0}catch{ja.tested=!0,ja.writable=!1}return ja.writable};function xM(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const g_=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>yc(async()=>{const{default:n}=await Promise.resolve().then(()=>Uo);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},bM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ii=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Na=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Cs=async(e,t)=>{await e.removeItem(t)};class uf{constructor(){this.promise=new uf.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}uf.promiseConstructor=Promise;function Ch(e){const t=e.split(".");if(t.length!==3)throw new bp("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!sM.test(t[n]))throw new bp("JWT not in base64url format");return{header:JSON.parse(nb(t[0])),payload:JSON.parse(nb(t[1])),signature:mM(t[2]),raw:{header:t[0],payload:t[1]}}}async function wM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function jM(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function NM(e){return("0"+e.toString(16)).substr(-2)}function _M(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,NM).join("")}async function SM(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function CM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await SM(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ni(e,t,r=!1){const n=_M();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Ii(e,`${t}-code-verifier`,a);const i=await CM(n);return[i,n===i?"plain":"s256"]}const EM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kM(e){const t=e.headers.get(yp);if(!t||!t.match(EM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function PM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function TM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const RM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _i(e){if(!RM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Eh(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sb(e){return JSON.parse(JSON.stringify(e))}var IM=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const Ca=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),AM=[502,503,504];async function ab(e){var t;if(!bM(e))throw new xp(Ca(e),0);if(AM.includes(e.status))throw new xp(Ca(e),e.status);let r;try{r=await e.json()}catch(i){throw new h_(Ca(i),i)}let n;const a=kM(e);if(a&&a.getTime()>=f_["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new eb(Ca(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ps}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new eb(Ca(r),e.status,r.weak_password.reasons);throw new iM(Ca(r),e.status||500,n)}const OM=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function qe(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[yp]||(i[yp]=f_["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await DM(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function DM(e,t,r,n,a,i){const o=OM(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new xp(Ca(c),0)}if(l.ok||await ab(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await ab(c)}}function Gn(e){var t;let r=null;FM(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=vM(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function ib(e){const t=Gn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ds(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function MM(e){return{data:e,error:null}}function LM(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=IM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function $M(e){return e}function FM(e){return e.access_token&&e.refresh_token&&e.expires_in}const kh=["global","local","others"];var UM=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class BM{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=g_(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=kh[0]){if(kh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kh.join(", ")}`);try{return await qe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ds})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=UM(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:LM,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Me(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await qe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ds})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:$M});if(u.error)throw u.error;const f=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Me(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){_i(t);try{return await qe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ds})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){_i(t);try{return await qe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ds})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){_i(t);try{return await qe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ds})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){_i(t.userId);try{const{data:r,error:n}=await qe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Me(r))return{data:null,error:r};throw r}}async _deleteFactor(t){_i(t.userId),_i(t.id);try{return{data:await qe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}}function ob(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function qM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Si={debug:!!(globalThis&&p_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class v_ extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class zM extends v_{}async function VM(e,t,r){Si.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Si.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Si.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Si.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Si.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new zM(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Si.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}qM();const WM={url:tM,storageKey:rM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lb(e,t,r){return await r()}const Ci={};class Xl{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Xl.nextInstanceID,Xl.nextInstanceID+=1,this.instanceID>0&&an()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},WM),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new BM({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=g_(a.fetch),this.lock=a.lock||lb,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:an()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=VM:this.lock=lb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:p_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ob(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=ob(this.memoryStorage)),an()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Ci[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ci[this.storageKey]=Object.assign(Object.assign({},Ci[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ci[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ci[this.storageKey]=Object.assign(Object.assign({},Ci[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${u_}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=xM(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),an()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),cM(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Me(r)?{error:r}:{error:new h_("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Gn}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Me(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:u,password:f,options:m}=t;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await Ni(this.storage,this.storageKey)),i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:x},xform:Gn})}else if("phone"in t){const{phone:u,password:f,options:m}=t;i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Gn})}else throw new hd("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Me(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ib})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ib})}else throw new hd("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new fd}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,i,o,l,c,d,u,f,m,p;let x,g;if("message"in t)x=t.message,g=t.signature;else{const{chain:w,wallet:v,statement:y,options:b}=t;let N;if(an())if(typeof v=="object")N=v;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))N=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=v}const j=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const C=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),y?{statement:y}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)x=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),g=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${j.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await N.signMessage(new TextEncoder().encode(x),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:w,error:v}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:gM(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Gn});if(v)throw v;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new fd}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:v})}catch(w){if(Me(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const r=await Na(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Gn});if(await Cs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fd}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(Me(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Gn}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new fd}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(Me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ni(this.storage,this.storageKey));const{error:f}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new hd("You must provide either an email or phone number.")}catch(l){if(Me(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Gn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Me(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ni(this.storage,this.storageKey)),await qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:MM})}catch(i){if(Me(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ps;const{error:a}=await qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await qe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await qe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new hd("You must provide either an email or phone number and a type")}catch(r){if(Me(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Na(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<_h:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Na(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Eh()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ds}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ps}:await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ds})})}catch(r){if(Me(r))return lM(r)&&(await this._removeSession(),await Cs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Ps;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ni(this.storage,this.storageKey));const{data:d,error:u}=await qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ds});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ps;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=Ch(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Me(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ps;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Me(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!an())throw new md("No browser detected.");if(t.error||t.error_description||t.error_code)throw new md(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Zx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new md("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Zx("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new md("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let m=u+f;c&&(m=parseInt(c));const p=m-u;p*1e3<=Ri&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const x=m-f;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,u);const{data:g,error:w}=await this._getUser(i);if(w)throw w;const v={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(Me(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Na(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(oM(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Cs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=yM(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ni(this.storage,this.storageKey,!0));try{return await qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Me(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:f,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await qe(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return an()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Me(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await qe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Me(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await jM(async a=>(a>0&&await wM(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Gn})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Sh(i)&&Date.now()+o-n<Ri})}catch(n){if(this._debug(r,"error",n),Me(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),an()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Na(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Na(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Ii(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Eh()}else if(a&&!a.user&&!a.user){const o=await Na(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Cs(this.storage,this.storageKey+"-user"),await Ii(this.storage,this.storageKey,a)):a.user=Eh()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<_h;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${_h}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Sh(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ps;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new uf;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ps;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Me(i)){const o={session:null,error:i};return Sh(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ii(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=sb(a);await Ii(this.storage,this.storageKey,i)}else{const a=sb(r);await Ii(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Cs(this.storage,this.storageKey),await Cs(this.storage,this.storageKey+"-code-verifier"),await Cs(this.storage,this.storageKey+"-user"),this.userStorage&&await Cs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&an()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ri);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Ri);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ri}ms, refresh threshold is ${vp} ticks`),a<=vp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof v_)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!an()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ni(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await qe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Me(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await qe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Me(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await qe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(Me(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await qe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Me(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ch(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+aM>a)return n;const{data:i,error:o}=await qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:x}=await this.getSession();if(x||!p.session)return{data:null,error:x};n=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Ch(n);r!=null&&r.allowExpired||PM(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const u=TM(a.alg),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,pM(`${l}.${c}`)))throw new bp("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}}Xl.nextInstanceID=0;const HM=Xl;class KM extends HM{constructor(t){super(t)}}var QM=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class GM{constructor(t,r,n){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=ZD(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:WD,realtime:KD,auth:Object.assign(Object.assign({},HD),{storageKey:d}),global:VD},f=eM(n??{},u);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=XD(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new uD(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new BD(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new zO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return QM(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:d},u,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new KM({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),u),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new kD(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const YM=(e,t,r)=>new GM(e,t,r);function XM(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}XM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const JM="https://drlfakeottpbmxiudftz.supabase.co",ZM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRybGZha2VvdHRwYm14aXVkZnR6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcwODI1MjUsImV4cCI6MjA3MjY1ODUyNX0.PVmrI-ySsWPDTdtFPkthHttKYsq3e08T2oTOurN6Yss",te=YM(JM,ZM),ff=(e=1,t=50)=>{const r=(e-1)*t,n=r+t-1;return{from:r,to:n}},Et={mapRow(e){return{id:e.id,entityName:e.entity_name,fundCluster:e.fund_cluster,semiExpendableProperty:e.semi_expendable_property,propertyNumber:e.property_number,description:e.description,dateAcquired:e.date_acquired,remarks:e.remarks??void 0,createdAt:e.created_at,updatedAt:e.updated_at}},mapEntry(e){return{id:e.id,propertyCardId:e.property_card_id,date:e.date,reference:e.reference,receiptQty:e.receipt_qty,unitCost:Number(e.unit_cost||0),totalCost:Number(e.total_cost||0),issueItemNo:e.issue_item_no,issueQty:e.issue_qty,officeOfficer:e.office_officer,balanceQty:e.balance_qty,amount:Number(e.amount||0),createdAt:e.created_at,updatedAt:e.updated_at}},async getAll(e={}){const{page:t=1,limit:r=50,search:n}=e,{from:a,to:i}=ff(t,r);let o=te.from("property_cards").select("*",{count:"exact"}).range(a,i);n&&(o=o.or(`property_number.ilike.%${n}%,description.ilike.%${n}%,entity_name.ilike.%${n}%`));const l=await o.order("created_at",{ascending:!1});if(l.error)return{data:[],pagination:{page:t,limit:r,total:0,totalPages:0},success:!1,error:l.error.message};const c=l.count||0,d=Math.ceil(c/r);return{data:(l.data||[]).map(u=>Et.mapRow(u)),pagination:{page:t,limit:r,total:c,totalPages:d},success:!0}},async getById(e){var r;const t=await te.from("property_cards").select("*").eq("id",e).single();return{data:t.data?Et.mapRow(t.data):null,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async getWithEntries(e){var n;const t=await te.from("property_cards").select(`
        *,
        entries:property_card_entries(*)
      `).eq("id",e).single();return{data:t.data?{...Et.mapRow(t.data),entries:(t.data.entries||[]).map(a=>Et.mapEntry(a))}:null,error:((n=t.error)==null?void 0:n.message)||null,success:!t.error}},async create(e){var r;if(!navigator.onLine)return await Zn("propertyCards.create",{card:e}),{data:{id:`temp-${Date.now()}`,...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},error:null,success:!0};const t=await te.from("property_cards").insert({entity_name:e.entityName,fund_cluster:e.fundCluster,semi_expendable_property:e.semiExpendableProperty,property_number:e.propertyNumber,description:e.description,date_acquired:e.dateAcquired,remarks:e.remarks}).select().single();return{data:t.data?Et.mapRow(t.data):null,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async update(e,t){var a;if(!navigator.onLine)return await Zn("propertyCards.update",{id:e,updates:t}),{data:{...t,id:e},error:null,success:!0};const r={};t.entityName&&(r.entity_name=t.entityName),t.fundCluster&&(r.fund_cluster=t.fundCluster),t.semiExpendableProperty&&(r.semi_expendable_property=t.semiExpendableProperty),t.propertyNumber&&(r.property_number=t.propertyNumber),t.description&&(r.description=t.description),t.dateAcquired&&(r.date_acquired=t.dateAcquired),t.remarks!==void 0&&(r.remarks=t.remarks);const n=await te.from("property_cards").update(r).eq("id",e).select().single();return{data:n.data?Et.mapRow(n.data):null,error:((a=n.error)==null?void 0:a.message)||null,success:!n.error}},async delete(e){var r;if(!navigator.onLine)return await Zn("propertyCards.delete",{id:e}),{data:null,error:null,success:!0};const t=await te.from("property_cards").delete().eq("id",e);return{data:t.data?Et.mapEntry(t.data):null,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async addEntry(e,t){var n;if(!navigator.onLine)return await Zn("propertyCards.addEntry",{propertyCardId:e,entry:t}),{data:{id:`temp-entry-${Date.now()}`,propertyCardId:e,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},error:null,success:!0};const r=await te.from("property_card_entries").insert({property_card_id:e,date:t.date,reference:t.reference,receipt_qty:t.receiptQty,unit_cost:t.unitCost,total_cost:t.totalCost,issue_item_no:t.issueItemNo,issue_qty:t.issueQty,office_officer:t.officeOfficer,balance_qty:t.balanceQty,amount:t.amount}).select().single();return{data:r.data?Et.mapEntry(r.data):null,error:((n=r.error)==null?void 0:n.message)||null,success:!r.error}},async updateEntry(e,t,r){var i;if(!navigator.onLine)return await Zn("propertyCards.updateEntry",{propertyCardId:e,entryId:t,updates:r}),{data:{...r,id:t,propertyCardId:e},error:null,success:!0};const n={};r.date&&(n.date=r.date),r.reference&&(n.reference=r.reference),r.receiptQty!==void 0&&(n.receipt_qty=r.receiptQty),r.unitCost!==void 0&&(n.unit_cost=r.unitCost),r.totalCost!==void 0&&(n.total_cost=r.totalCost),r.issueItemNo&&(n.issue_item_no=r.issueItemNo),r.issueQty!==void 0&&(n.issue_qty=r.issueQty),r.officeOfficer&&(n.office_officer=r.officeOfficer),r.balanceQty!==void 0&&(n.balance_qty=r.balanceQty),r.amount!==void 0&&(n.amount=r.amount);const a=await te.from("property_card_entries").update(n).eq("id",t).eq("property_card_id",e).select().single();return{data:a.data,error:((i=a.error)==null?void 0:i.message)||null,success:!a.error}},async deleteEntry(e,t){var n;if(!navigator.onLine)return await Zn("propertyCards.deleteEntry",{propertyCardId:e,entryId:t}),{data:null,error:null,success:!0};const r=await te.from("property_card_entries").delete().eq("id",t).eq("property_card_id",e);return{data:r.data,error:((n=r.error)==null?void 0:n.message)||null,success:!r.error}},async getEntries(e){var r;const t=await te.from("property_card_entries").select("*").eq("property_card_id",e).order("date",{ascending:!0});return{data:(t.data||[]).map(n=>Et.mapEntry(n)),error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async search(e,t={}){return this.getAll({...t,search:e})},async safeDelete(e){try{const{data:t,error:r}=await te.rpc("safe_delete_property_card",{card_id:e});return r?(console.error("Safe delete property card error:",r),{data:null,error:r.message,success:!1}):{data:t,error:null,success:!0}}catch(t){return console.error("Safe delete property card exception:",t),{data:null,error:t instanceof Error?t.message:"Unknown error occurred",success:!1}}},async canDelete(e){try{const{data:t,error:r}=await te.rpc("can_delete_property_card",{card_id:e});return r?(console.error("Can delete property card error:",r),{data:null,error:r.message,success:!1}):{data:t,error:null,success:!0}}catch(t){return console.error("Can delete property card exception:",t),{data:null,error:t instanceof Error?t.message:"Unknown error occurred",success:!1}}}},rr={async getAll(e={}){const{page:t=1,limit:r=1e3,status:n,condition:a,search:i,filter:o,valueFilter:l}=e,{from:c,to:d}=ff(t,r);let u;o==="available"?u=te.from("inventory_items").select("*",{count:"planned"}).range(c,d).eq("status","Active").eq("condition","Serviceable").or("assignment_status.is.null,assignment_status.eq.Available"):o==="issued"?(console.log("Fetching issued items with filter:",o),u=te.from("inventory_items").select("*",{count:"planned"}).range(c,d).eq("status","Active").eq("condition","Serviceable").eq("assignment_status","Assigned")):u=te.from("inventory_items").select("*",{count:"planned"}).range(c,d),n&&(u=u.eq("status",n)),a&&(u=u.eq("condition",a)),l==="high-value"?u=u.eq("sub_category","High Value Expendable"):l==="low-value"&&(u=u.eq("sub_category","Small Value Expendable")),i&&(u=u.or(`property_number.ilike.%${i}%,description.ilike.%${i}%,brand.ilike.%${i}%`));const f=await u.order("created_at",{ascending:!1});if(f.error)return console.error("Error fetching inventory items:",f.error),{data:[],pagination:{page:t,limit:r,total:0,totalPages:0},success:!1,error:f.error.message};let m=f.data||[];o==="available"&&(m=m.filter(v=>!(v.assignment_status==="Assigned"||v.custodian&&v.custodian.trim()!==""))),console.log("Raw database response:",{filter:o,dataCount:m.length,totalCount:f.count,sampleItems:m.slice(0,3).map(v=>({id:v.id,property_number:v.property_number,assignment_status:v.assignment_status,custodian:v.custodian,sub_category:v.sub_category}))});const p=o==="available"?m.length:f.count||0,x=Math.ceil(p/r);let g=new Set;if(m.length>0){const v=m.map(y=>y.id);for(let y=0;y<v.length;y+=100){const b=v.slice(y,y+100),{data:N}=await te.from("property_cards").select("inventory_item_id").in("inventory_item_id",b);N&&N.forEach(j=>g.add(j.inventory_item_id))}}const w=m.map(v=>({id:v.id,propertyNumber:v.property_number,description:v.description||(v.model?`${v.brand?v.brand+" ":""}${v.model}`:v.brand)||"",brand:v.brand||"",model:v.model||"",serialNumber:v.serial_number||"",unitOfMeasure:v.unit_of_measure,quantity:v.quantity,unitCost:v.unit_cost,totalCost:v.total_cost,dateAcquired:v.date_acquired,supplier:v.supplier_id||"",condition:v.condition,fundSource:v.fund_source_id||"",remarks:v.remarks||"",lastInventoryDate:v.last_inventory_date||"",semiExpandableCategory:v.semi_expandable_category||void 0,subCategory:v.sub_category||void 0,entityName:v.entity_name||void 0,status:v.status,custodian:v.custodian||"",custodianPosition:v.custodian_position||"",assignmentStatus:v.assignment_status||"Available",assignedDate:v.assigned_date||"",hasPropertyCard:g.has(v.id),createdAt:v.created_at,updatedAt:v.updated_at}));return console.log("Transformed data sample:",{totalItems:w.length,spHVItems:w.filter(v=>{var y;return(y=v.propertyNumber)==null?void 0:y.startsWith("SPHV")}),spLVItems:w.filter(v=>{var y;return(y=v.propertyNumber)==null?void 0:y.startsWith("SPLV")}),sampleTransformed:w.slice(0,3).map(v=>({propertyNumber:v.propertyNumber,subCategory:v.subCategory}))}),{data:w,pagination:{page:t,limit:r,total:p,totalPages:x},success:!0}},async getById(e){const t=await te.from("inventory_items").select("*").eq("id",e).single();return t.error?{data:null,error:t.error.message,success:!1}:{data:{id:t.data.id,propertyNumber:t.data.property_number,description:t.data.description||(t.data.model?`${t.data.brand?t.data.brand+" ":""}${t.data.model}`:t.data.brand)||"",brand:t.data.brand||"",model:t.data.model||"",serialNumber:t.data.serial_number||"",unitOfMeasure:t.data.unit_of_measure,quantity:t.data.quantity,unitCost:t.data.unit_cost,totalCost:t.data.total_cost,dateAcquired:t.data.date_acquired,supplier:t.data.supplier_id||"",condition:t.data.condition,fundSource:t.data.fund_source_id||"",remarks:t.data.remarks||"",lastInventoryDate:t.data.last_inventory_date||"",semiExpandableCategory:t.data.semi_expandable_category||void 0,subCategory:t.data.sub_category||void 0,entityName:t.data.entity_name||void 0,status:t.data.status,custodian:t.data.custodian||"",custodianPosition:t.data.custodian_position||"",assignmentStatus:t.data.assignment_status||"Available",assignedDate:t.data.assigned_date||"",createdAt:t.data.created_at,updatedAt:t.data.updated_at},error:null,success:!0}},async create(e){if(console.log("Creating inventory item with data:",e),!navigator.onLine)return await Zn("inventory.create",{item:e}),{data:{id:`temp-${Date.now()}`,...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},error:null,success:!0};if(e.propertyNumber){const{data:a,error:i}=await te.from("inventory_items").select("id, property_number").eq("property_number",e.propertyNumber).limit(1);if(i)return console.error("Error checking for duplicate property number:",i),{data:null,error:"Failed to validate property number uniqueness",success:!1};if(a&&a.length>0)return console.error("Duplicate property number detected:",e.propertyNumber),{data:null,error:`Property number ${e.propertyNumber} already exists. Please generate a new property number.`,success:!1}}const t={property_number:e.propertyNumber,description:e.description,brand:e.brand,model:e.model,serial_number:e.serialNumber,unit_of_measure:e.unitOfMeasure,quantity:e.quantity,unit_cost:e.unitCost,total_cost:e.totalCost,date_acquired:e.dateAcquired,supplier_id:e.supplier||null,condition:e.condition,fund_source_id:e.fundSource||null,remarks:e.remarks,last_inventory_date:e.lastInventoryDate,category:"Semi-Expendable",status:e.status,estimated_useful_life_override:e.estimatedUsefulLifeOverride};e.subCategory&&(t.sub_category=e.subCategory),e.entityName&&(t.entity_name=e.entityName),e.semiExpandableCategory&&(t.semi_expandable_category=e.semiExpandableCategory),console.log("Inserting data:",t);const r=await te.from("inventory_items").insert(t).select().single();return console.log("Supabase response:",r),r.error?(console.error("Error creating inventory item:",r.error),{data:null,error:r.error.message,success:!1}):{data:{id:r.data.id,propertyNumber:r.data.property_number,description:r.data.description||(r.data.model?`${r.data.brand?r.data.brand+" ":""}${r.data.model}`:r.data.brand)||"",brand:r.data.brand||"",model:r.data.model||"",serialNumber:r.data.serial_number||"",unitOfMeasure:r.data.unit_of_measure,quantity:r.data.quantity,unitCost:r.data.unit_cost,totalCost:r.data.total_cost,dateAcquired:r.data.date_acquired,supplier:r.data.supplier_id||"",condition:r.data.condition,semiExpandableCategory:r.data.semi_expandable_category||void 0,subCategory:r.data.sub_category,entityName:r.data.entity_name,fundSource:r.data.fund_source_id||"",remarks:r.data.remarks||"",lastInventoryDate:r.data.last_inventory_date||"",status:r.data.status,estimatedUsefulLife:r.data.estimated_useful_life,estimatedUsefulLifeOverride:r.data.estimated_useful_life_override,custodian:r.data.custodian||"",custodianPosition:r.data.custodian_position||"",assignmentStatus:r.data.assignment_status||"Available",assignedDate:r.data.assigned_date||"",createdAt:r.data.created_at,updatedAt:r.data.updated_at},error:null,success:!0}},async update(e,t){if(!navigator.onLine)return await Zn("inventory.update",{id:e,updates:t}),{data:{...t,id:e},error:null,success:!0};const r={};t.propertyNumber&&(r.property_number=t.propertyNumber),t.description&&(r.description=t.description),t.brand&&(r.brand=t.brand),t.model&&(r.model=t.model),t.serialNumber&&(r.serial_number=t.serialNumber),t.unitOfMeasure&&(r.unit_of_measure=t.unitOfMeasure),t.quantity!==void 0&&(r.quantity=t.quantity),t.unitCost!==void 0&&(r.unit_cost=t.unitCost),t.totalCost!==void 0&&(r.total_cost=t.totalCost),t.dateAcquired&&(r.date_acquired=t.dateAcquired),t.supplier&&(r.supplier_id=t.supplier),t.condition&&(r.condition=t.condition),t.semiExpandableCategory!==void 0&&(r.semi_expandable_category=t.semiExpandableCategory||null),t.subCategory&&(r.sub_category=t.subCategory),t.entityName&&(r.entity_name=t.entityName),t.fundSource&&(r.fund_source_id=t.fundSource),t.remarks&&(r.remarks=t.remarks),t.lastInventoryDate&&(r.last_inventory_date=t.lastInventoryDate),t.status&&(r.status=t.status),t.estimatedUsefulLifeOverride!==void 0&&(r.estimated_useful_life_override=t.estimatedUsefulLifeOverride);const n=await te.from("inventory_items").update(r).eq("id",e).select().single();return n.error?{data:null,error:n.error.message,success:!1}:{data:{id:n.data.id,propertyNumber:n.data.property_number,description:n.data.description||(n.data.model?`${n.data.brand?n.data.brand+" ":""}${n.data.model}`:n.data.brand)||"",brand:n.data.brand||"",model:n.data.model||"",serialNumber:n.data.serial_number||"",unitOfMeasure:n.data.unit_of_measure,quantity:n.data.quantity,unitCost:n.data.unit_cost,totalCost:n.data.total_cost,dateAcquired:n.data.date_acquired,supplier:n.data.supplier_id||"",condition:n.data.condition,semiExpandableCategory:n.data.semi_expandable_category||void 0,subCategory:n.data.sub_category,entityName:n.data.entity_name,fundSource:n.data.fund_source_id||"",remarks:n.data.remarks||"",lastInventoryDate:n.data.last_inventory_date||"",status:n.data.status,estimatedUsefulLife:n.data.estimated_useful_life,estimatedUsefulLifeOverride:n.data.estimated_useful_life_override,custodian:n.data.custodian||"",custodianPosition:n.data.custodian_position||"",assignmentStatus:n.data.assignment_status||"Available",assignedDate:n.data.assigned_date||"",createdAt:n.data.created_at,updatedAt:n.data.updated_at},error:null,success:!0}},async delete(e){if(!navigator.onLine)return await Zn("inventory.delete",{id:e}),{data:null,error:null,success:!0};const{data:t,error:r}=await te.from("inventory_items").select("id, assignment_status, custodian").eq("id",e).single();if(r)return{data:null,error:r.message||"Failed to fetch item details",success:!1};if(t.assignment_status==="Assigned"||t.custodian&&t.custodian.trim()!=="")return{data:null,error:`This inventory item cannot be deleted because it is currently assigned to ${t.custodian||"a custodian"}. Please unassign the item from the custodian first before deleting.`,success:!1};const{data:a,error:i}=await te.rpc("safe_delete_inventory_item",{item_id:e});return i?i.message.includes("function")&&i.message.includes("does not exist")?{data:null,error:"Safe deletion function not found. Please run the database setup script first.",success:!1}:i.message.includes("Cannot delete inventory item")?{data:null,error:"This inventory item cannot be deleted because it is assigned to custodian slips or has property card entries.",success:!1}:{data:null,error:i.message,success:!1}:{data:a,error:null,success:!0}},async search(e,t={}){return this.getAll({...t,search:e})}};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jl(){return Jl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jl.apply(this,arguments)}var Ks;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ks||(Ks={}));const cb="popstate";function eL(e){e===void 0&&(e={});function t(a,i){let{pathname:o="/",search:l="",hash:c=""}=mi(a.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),wp("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let o=a.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=a.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof i=="string"?i:ju(i))}function n(a,i){lv(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return rL(t,r,n,e)}function _t(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function lv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tL(){return Math.random().toString(36).substr(2,8)}function db(e,t){return{usr:e.state,key:e.key,idx:t}}function wp(e,t,r,n){return r===void 0&&(r=null),Jl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?mi(t):t,{state:r,key:t&&t.key||n||tL()})}function ju(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function mi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function rL(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Ks.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Jl({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function f(){l=Ks.Pop;let w=u(),v=w==null?null:w-d;d=w,c&&c({action:l,location:g.location,delta:v})}function m(w,v){l=Ks.Push;let y=wp(g.location,w,v);r&&r(y,w),d=u()+1;let b=db(y,d),N=g.createHref(y);try{o.pushState(b,"",N)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(N)}i&&c&&c({action:l,location:g.location,delta:1})}function p(w,v){l=Ks.Replace;let y=wp(g.location,w,v);r&&r(y,w),d=u();let b=db(y,d),N=g.createHref(y);o.replaceState(b,"",N),i&&c&&c({action:l,location:g.location,delta:0})}function x(w){let v=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof w=="string"?w:ju(w);return y=y.replace(/ $/,"%20"),_t(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let g={get action(){return l},get location(){return e(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(cb,f),c=w,()=>{a.removeEventListener(cb,f),c=null}},createHref(w){return t(a,w)},createURL:x,encodeLocation(w){let v=x(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:p,go(w){return o.go(w)}};return g}var ub;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ub||(ub={}));function nL(e,t,r){return r===void 0&&(r="/"),sL(e,t,r,!1)}function sL(e,t,r,n){let a=typeof t=="string"?mi(t):t,i=cv(a.pathname||"/",r);if(i==null)return null;let o=y_(e);aL(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=gL(i);l=mL(o[c],d,n)}return l}function y_(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(_t(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=sa([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(_t(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),y_(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:fL(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of x_(i.path))a(i,o,c)}),t}function x_(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=x_(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function aL(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:hL(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const iL=/^:[\w-]+$/,oL=3,lL=2,cL=1,dL=10,uL=-2,fb=e=>e==="*";function fL(e,t){let r=e.split("/"),n=r.length;return r.some(fb)&&(n+=uL),t&&(n+=lL),r.filter(a=>!fb(a)).reduce((a,i)=>a+(iL.test(i)?oL:i===""?cL:dL),n)}function hL(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function mL(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",f=hb({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!f&&d&&r&&!n[n.length-1].route.index&&(f=hb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:sa([i,f.pathname]),pathnameBase:bL(sa([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=sa([i,f.pathnameBase]))}return o}function hb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=pL(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,f)=>{let{paramName:m,isOptional:p}=u;if(m==="*"){let g=l[f]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const x=l[f];return p&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function pL(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),lv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function gL(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return lv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function cv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function vL(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?mi(e):e;return{pathname:r?r.startsWith("/")?r:yL(r,t):t,search:wL(n),hash:jL(a)}}function yL(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ph(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xL(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function b_(e,t){let r=xL(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function w_(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=mi(e):(a=Jl({},e),_t(!a.pathname||!a.pathname.includes("?"),Ph("?","pathname","search",a)),_t(!a.pathname||!a.pathname.includes("#"),Ph("#","pathname","hash",a)),_t(!a.search||!a.search.includes("#"),Ph("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;a.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=vL(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const sa=e=>e.join("/").replace(/\/\/+/g,"/"),bL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wL=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function NL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const j_=["post","put","patch","delete"];new Set(j_);const _L=["get",...j_];new Set(_L);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zl(){return Zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zl.apply(this,arguments)}const dv=h.createContext(null),SL=h.createContext(null),pi=h.createContext(null),hf=h.createContext(null),gi=h.createContext({outlet:null,matches:[],isDataRoute:!1}),N_=h.createContext(null);function CL(e,t){let{relative:r}=t===void 0?{}:t;wc()||_t(!1);let{basename:n,navigator:a}=h.useContext(pi),{hash:i,pathname:o,search:l}=S_(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:sa([n,o])),a.createHref({pathname:c,search:l,hash:i})}function wc(){return h.useContext(hf)!=null}function zn(){return wc()||_t(!1),h.useContext(hf).location}function __(e){h.useContext(pi).static||h.useLayoutEffect(e)}function xs(){let{isDataRoute:e}=h.useContext(gi);return e?FL():EL()}function EL(){wc()||_t(!1);let e=h.useContext(dv),{basename:t,future:r,navigator:n}=h.useContext(pi),{matches:a}=h.useContext(gi),{pathname:i}=zn(),o=JSON.stringify(b_(a,r.v7_relativeSplatPath)),l=h.useRef(!1);return __(()=>{l.current=!0}),h.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let f=w_(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:sa([t,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[t,n,o,i,e])}function S_(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=h.useContext(pi),{matches:a}=h.useContext(gi),{pathname:i}=zn(),o=JSON.stringify(b_(a,n.v7_relativeSplatPath));return h.useMemo(()=>w_(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function kL(e,t){return PL(e,t)}function PL(e,t,r,n){wc()||_t(!1);let{navigator:a}=h.useContext(pi),{matches:i}=h.useContext(gi),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=zn(),u;if(t){var f;let w=typeof t=="string"?mi(t):t;c==="/"||(f=w.pathname)!=null&&f.startsWith(c)||_t(!1),u=w}else u=d;let m=u.pathname||"/",p=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=nL(e,{pathname:p}),g=OL(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:sa([c,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:sa([c,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return t&&g?h.createElement(hf.Provider,{value:{location:Zl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ks.Pop}},g):g}function TL(){let e=$L(),t=NL(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),r?h.createElement("pre",{style:a},r):null,null)}const RL=h.createElement(TL,null);class IL extends h.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?h.createElement(gi.Provider,{value:this.props.routeContext},h.createElement(N_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AL(e){let{routeContext:t,match:r,children:n}=e,a=h.useContext(dv);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),h.createElement(gi.Provider,{value:t},n)}function OL(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);u>=0||_t(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:m,errors:p}=r,x=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||x){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,f,m)=>{let p,x=!1,g=null,w=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||RL,c&&(d<0&&m===0?(x=!0,w=null):d===m&&(x=!0,w=f.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,m+1)),y=()=>{let b;return p?b=g:x?b=w:f.route.Component?b=h.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=u,h.createElement(AL,{match:f,routeContext:{outlet:u,matches:v,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?h.createElement(IL,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var C_=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(C_||{}),Nu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Nu||{});function DL(e){let t=h.useContext(dv);return t||_t(!1),t}function ML(e){let t=h.useContext(SL);return t||_t(!1),t}function LL(e){let t=h.useContext(gi);return t||_t(!1),t}function E_(e){let t=LL(),r=t.matches[t.matches.length-1];return r.route.id||_t(!1),r.route.id}function $L(){var e;let t=h.useContext(N_),r=ML(Nu.UseRouteError),n=E_(Nu.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function FL(){let{router:e}=DL(C_.UseNavigateStable),t=E_(Nu.UseNavigateStable),r=h.useRef(!1);return __(()=>{r.current=!0}),h.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Zl({fromRouteId:t},i)))},[e,t])}function UL(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ht(e){_t(!1)}function BL(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Ks.Pop,navigator:i,static:o=!1,future:l}=e;wc()&&_t(!1);let c=t.replace(/^\/*/,"/"),d=h.useMemo(()=>({basename:c,navigator:i,static:o,future:Zl({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=mi(n));let{pathname:u="/",search:f="",hash:m="",state:p=null,key:x="default"}=n,g=h.useMemo(()=>{let w=cv(u,c);return w==null?null:{location:{pathname:w,search:f,hash:m,state:p,key:x},navigationType:a}},[c,u,f,m,p,x,a]);return g==null?null:h.createElement(pi.Provider,{value:d},h.createElement(hf.Provider,{children:r,value:g}))}function qL(e){let{children:t,location:r}=e;return kL(jp(t),r)}new Promise(()=>{});function jp(e,t){t===void 0&&(t=[]);let r=[];return h.Children.forEach(e,(n,a)=>{if(!h.isValidElement(n))return;let i=[...t,a];if(n.type===h.Fragment){r.push.apply(r,jp(n.props.children,i));return}n.type!==Ht&&_t(!1),!n.props.index||!n.props.children||_t(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=jp(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Np(){return Np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Np.apply(this,arguments)}function zL(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function VL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function WL(e,t){return e.button===0&&(!t||t==="_self")&&!VL(e)}function _p(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function HL(e,t){let r=_p(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const KL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],QL="6";try{window.__reactRouterVersion=QL}catch{}const GL="startTransition",mb=Vp[GL];function YL(e){let{basename:t,children:r,future:n,window:a}=e,i=h.useRef();i.current==null&&(i.current=eL({window:a,v5Compat:!0}));let o=i.current,[l,c]=h.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=h.useCallback(f=>{d&&mb?mb(()=>c(f)):c(f)},[c,d]);return h.useLayoutEffect(()=>o.listen(u),[o,u]),h.useEffect(()=>UL(n),[n]),h.createElement(BL,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const XL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZL=h.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:f}=t,m=zL(t,KL),{basename:p}=h.useContext(pi),x,g=!1;if(typeof d=="string"&&JL.test(d)&&(x=d,XL))try{let b=new URL(window.location.href),N=d.startsWith("//")?new URL(b.protocol+d):new URL(d),j=cv(N.pathname,p);N.origin===b.origin&&j!=null?d=j+N.search+N.hash:g=!0}catch{}let w=CL(d,{relative:a}),v=e4(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:f});function y(b){n&&n(b),b.defaultPrevented||v(b)}return h.createElement("a",Np({},m,{href:x||w,onClick:g||i?n:y,ref:r,target:c}))});var pb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(pb||(pb={}));var gb;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(gb||(gb={}));function e4(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=xs(),d=zn(),u=S_(e,{relative:o});return h.useCallback(f=>{if(WL(f,r)){f.preventDefault();let m=n!==void 0?n:ju(d)===ju(u);c(e,{replace:m,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,r,e,i,o,l])}function t4(e){let t=h.useRef(_p(e)),r=h.useRef(!1),n=zn(),a=h.useMemo(()=>HL(n.search,r.current?null:t.current),[n.search]),i=xs(),o=h.useCallback((l,c)=>{const d=_p(typeof l=="function"?l(a):l);r.current=!0,i("?"+d,c)},[i,a]);return[a,o]}const uv=mc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ne=h.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?$T:"button";return s.jsx(o,{className:be(uv({variant:t,size:r,className:e})),ref:i,...a})});ne.displayName="Button";var r4=h.createContext(void 0);function jc(e){const t=h.useContext(r4);return e||t||"ltr"}var Th=0;function mf(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??vb()),document.body.insertAdjacentElement("beforeend",e[1]??vb()),Th++,()=>{Th===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Th--}},[])}function vb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Rh="focusScope.autoFocusOnMount",Ih="focusScope.autoFocusOnUnmount",yb={bubbles:!1,cancelable:!0},n4="FocusScope",Nc=h.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=h.useState(null),d=bt(a),u=bt(i),f=h.useRef(null),m=De(t,g=>c(g)),p=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(n){let g=function(b){if(p.paused||!l)return;const N=b.target;l.contains(N)?f.current=N:Ts(f.current,{select:!0})},w=function(b){if(p.paused||!l)return;const N=b.relatedTarget;N!==null&&(l.contains(N)||Ts(f.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const j of b)j.removedNodes.length>0&&Ts(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const y=new MutationObserver(v);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),y.disconnect()}}},[n,l,p.paused]),h.useEffect(()=>{if(l){bb.add(p);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(Rh,yb);l.addEventListener(Rh,d),l.dispatchEvent(v),v.defaultPrevented||(s4(c4(k_(l)),{select:!0}),document.activeElement===g&&Ts(l))}return()=>{l.removeEventListener(Rh,d),setTimeout(()=>{const v=new CustomEvent(Ih,yb);l.addEventListener(Ih,u),l.dispatchEvent(v),v.defaultPrevented||Ts(g??document.body,{select:!0}),l.removeEventListener(Ih,u),bb.remove(p)},0)}}},[l,d,u,p]);const x=h.useCallback(g=>{if(!r&&!n||p.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(w&&v){const y=g.currentTarget,[b,N]=a4(y);b&&N?!g.shiftKey&&v===N?(g.preventDefault(),r&&Ts(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),r&&Ts(N,{select:!0})):v===y&&g.preventDefault()}},[r,n,p.paused]);return s.jsx(Ee.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});Nc.displayName=n4;function s4(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Ts(n,{select:t}),document.activeElement!==r)return}function a4(e){const t=k_(e),r=xb(t,e),n=xb(t.reverse(),e);return[r,n]}function k_(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function xb(e,t){for(const r of e)if(!i4(r,{upTo:t}))return r}function i4(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function o4(e){return e instanceof HTMLInputElement&&"select"in e}function Ts(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&o4(e)&&t&&e.select()}}var bb=l4();function l4(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=wb(e,t),e.unshift(t)},remove(t){var r;e=wb(e,t),(r=e[0])==null||r.resume()}}}function wb(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function c4(e){return e.filter(t=>t.tagName!=="A")}var Ah="rovingFocusGroup.onEntryFocus",d4={bubbles:!1,cancelable:!0},_c="RovingFocusGroup",[Sp,P_,u4]=Gu(_c),[f4,pf]=lr(_c,[u4]),[h4,m4]=f4(_c),T_=h.forwardRef((e,t)=>s.jsx(Sp.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Sp.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(p4,{...e,ref:t})})}));T_.displayName=_c;var p4=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...f}=e,m=h.useRef(null),p=De(t,m),x=jc(i),[g,w]=ps({prop:o,defaultProp:l??null,onChange:c,caller:_c}),[v,y]=h.useState(!1),b=bt(d),N=P_(r),j=h.useRef(!1),[C,E]=h.useState(0);return h.useEffect(()=>{const M=m.current;if(M)return M.addEventListener(Ah,b),()=>M.removeEventListener(Ah,b)},[b]),s.jsx(h4,{scope:r,orientation:n,dir:x,loop:a,currentTabStopId:g,onItemFocus:h.useCallback(M=>w(M),[w]),onItemShiftTab:h.useCallback(()=>y(!0),[]),onFocusableItemAdd:h.useCallback(()=>E(M=>M+1),[]),onFocusableItemRemove:h.useCallback(()=>E(M=>M-1),[]),children:s.jsx(Ee.div,{tabIndex:v||C===0?-1:0,"data-orientation":n,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:ge(e.onMouseDown,()=>{j.current=!0}),onFocus:ge(e.onFocus,M=>{const H=!j.current;if(M.target===M.currentTarget&&H&&!v){const q=new CustomEvent(Ah,d4);if(M.currentTarget.dispatchEvent(q),!q.defaultPrevented){const P=N().filter(A=>A.focusable),K=P.find(A=>A.active),ee=P.find(A=>A.id===g),S=[K,ee,...P].filter(Boolean).map(A=>A.ref.current);A_(S,u)}}j.current=!1}),onBlur:ge(e.onBlur,()=>y(!1))})})}),R_="RovingFocusGroupItem",I_=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Bt(),d=i||c,u=m4(R_,r),f=u.currentTabStopId===d,m=P_(r),{onFocusableItemAdd:p,onFocusableItemRemove:x,currentTabStopId:g}=u;return h.useEffect(()=>{if(n)return p(),()=>x()},[n,p,x]),s.jsx(Sp.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:s.jsx(Ee.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:ge(e.onMouseDown,w=>{n?u.onItemFocus(d):w.preventDefault()}),onFocus:ge(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:ge(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=y4(w,u.orientation,u.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=m().filter(N=>N.focusable).map(N=>N.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const N=b.indexOf(w.currentTarget);b=u.loop?x4(b,N+1):b.slice(N+1)}setTimeout(()=>A_(b))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:g!=null}):o})})});I_.displayName=R_;var g4={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function v4(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function y4(e,t,r){const n=v4(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return g4[n]}function A_(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function x4(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var O_=T_,D_=I_,b4=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ei=new WeakMap,pd=new WeakMap,gd={},Oh=0,M_=function(e){return e&&(e.host||M_(e.parentNode))},w4=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=M_(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},j4=function(e,t,r,n){var a=w4(t,Array.isArray(e)?e:[e]);gd[r]||(gd[r]=new WeakMap);var i=gd[r],o=[],l=new Set,c=new Set(a),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};a.forEach(d);var u=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))u(m);else try{var p=m.getAttribute(n),x=p!==null&&p!=="false",g=(Ei.get(m)||0)+1,w=(i.get(m)||0)+1;Ei.set(m,g),i.set(m,w),o.push(m),g===1&&x&&pd.set(m,!0),w===1&&m.setAttribute(r,"true"),x||m.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",m,v)}})};return u(t),l.clear(),Oh++,function(){o.forEach(function(f){var m=Ei.get(f)-1,p=i.get(f)-1;Ei.set(f,m),i.set(f,p),m||(pd.has(f)||f.removeAttribute(n),pd.delete(f)),p||f.removeAttribute(r)}),Oh--,Oh||(Ei=new WeakMap,Ei=new WeakMap,pd=new WeakMap,gd={})}},gf=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=b4(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),j4(n,a,r,"aria-hidden")):function(){return null}},An=function(){return An=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},An.apply(this,arguments)};function L_(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function N4(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var Ud="right-scroll-bar-position",Bd="width-before-scroll-bar",_4="with-scroll-bars-hidden",S4="--removed-body-scroll-bar-size";function Dh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function C4(e,t){var r=h.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var E4=typeof window<"u"?h.useLayoutEffect:h.useEffect,jb=new WeakMap;function k4(e,t){var r=C4(null,function(n){return e.forEach(function(a){return Dh(a,n)})});return E4(function(){var n=jb.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||Dh(l,null)}),i.forEach(function(l){a.has(l)||Dh(l,o)})}jb.set(r,e)},[e]),r}function P4(e){return e}function T4(e,t){t===void 0&&(t=P4);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return a}function R4(e){e===void 0&&(e={});var t=T4(null);return t.options=An({async:!0,ssr:!1},e),t}var $_=function(e){var t=e.sideCar,r=L_(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return h.createElement(n,An({},r))};$_.isSideCarExport=!0;function I4(e,t){return e.useMedium(t),$_}var F_=R4(),Mh=function(){},vf=h.forwardRef(function(e,t){var r=h.useRef(null),n=h.useState({onScrollCapture:Mh,onWheelCapture:Mh,onTouchMoveCapture:Mh}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,f=e.shards,m=e.sideCar,p=e.noRelative,x=e.noIsolation,g=e.inert,w=e.allowPinchZoom,v=e.as,y=v===void 0?"div":v,b=e.gapMode,N=L_(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,C=k4([r,t]),E=An(An({},N),a);return h.createElement(h.Fragment,null,u&&h.createElement(j,{sideCar:F_,removeScrollBar:d,shards:f,noRelative:p,noIsolation:x,inert:g,setCallbacks:i,allowPinchZoom:!!w,lockRef:r,gapMode:b}),o?h.cloneElement(h.Children.only(l),An(An({},E),{ref:C})):h.createElement(y,An({},E,{className:c,ref:C}),l))});vf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vf.classNames={fullWidth:Bd,zeroRight:Ud};var A4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function O4(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=A4();return t&&e.setAttribute("nonce",t),e}function D4(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function M4(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var L4=function(){var e=0,t=null;return{add:function(r){e==0&&(t=O4())&&(D4(t,r),M4(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$4=function(){var e=L4();return function(t,r){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},U_=function(){var e=$4(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},F4={left:0,top:0,right:0,gap:0},Lh=function(e){return parseInt(e||"",10)||0},U4=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Lh(r),Lh(n),Lh(a)]},B4=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return F4;var t=U4(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},q4=U_(),ro="data-scroll-locked",z4=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(_4,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(ro,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ud,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Bd,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ud," .").concat(Ud,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Bd," .").concat(Bd,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(ro,`] {
    `).concat(S4,": ").concat(l,`px;
  }
`)},Nb=function(){var e=parseInt(document.body.getAttribute(ro)||"0",10);return isFinite(e)?e:0},V4=function(){h.useEffect(function(){return document.body.setAttribute(ro,(Nb()+1).toString()),function(){var e=Nb()-1;e<=0?document.body.removeAttribute(ro):document.body.setAttribute(ro,e.toString())}},[])},W4=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;V4();var i=h.useMemo(function(){return B4(a)},[a]);return h.createElement(q4,{styles:z4(i,!t,a,r?"":"!important")})},Cp=!1;if(typeof window<"u")try{var vd=Object.defineProperty({},"passive",{get:function(){return Cp=!0,!0}});window.addEventListener("test",vd,vd),window.removeEventListener("test",vd,vd)}catch{Cp=!1}var ki=Cp?{passive:!1}:!1,H4=function(e){return e.tagName==="TEXTAREA"},B_=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!H4(e)&&r[t]==="visible")},K4=function(e){return B_(e,"overflowY")},Q4=function(e){return B_(e,"overflowX")},_b=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=q_(e,n);if(a){var i=z_(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},G4=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Y4=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},q_=function(e,t){return e==="v"?K4(t):Q4(t)},z_=function(e,t){return e==="v"?G4(t):Y4(t)},X4=function(e,t){return e==="h"&&t==="rtl"?-1:1},J4=function(e,t,r,n,a){var i=X4(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),d=!1,u=o>0,f=0,m=0;do{if(!l)break;var p=z_(e,l),x=p[0],g=p[1],w=p[2],v=g-w-i*x;(x||v)&&q_(e,l)&&(f+=v,m+=x);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(f)<1||!a)||!u&&(Math.abs(m)<1||!a))&&(d=!0),d},yd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Sb=function(e){return[e.deltaX,e.deltaY]},Cb=function(e){return e&&"current"in e?e.current:e},Z4=function(e,t){return e[0]===t[0]&&e[1]===t[1]},e$=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},t$=0,Pi=[];function r$(e){var t=h.useRef([]),r=h.useRef([0,0]),n=h.useRef(),a=h.useState(t$++)[0],i=h.useState(U_)[0],o=h.useRef(e);h.useEffect(function(){o.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=N4([e.lockRef.current],(e.shards||[]).map(Cb),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=yd(g),y=r.current,b="deltaX"in g?g.deltaX:y[0]-v[0],N="deltaY"in g?g.deltaY:y[1]-v[1],j,C=g.target,E=Math.abs(b)>Math.abs(N)?"h":"v";if("touches"in g&&E==="h"&&C.type==="range")return!1;var M=_b(E,C);if(!M)return!0;if(M?j=E:(j=E==="v"?"h":"v",M=_b(E,C)),!M)return!1;if(!n.current&&"changedTouches"in g&&(b||N)&&(n.current=j),!j)return!0;var H=n.current||j;return J4(H,w,g,H==="h"?b:N,!0)},[]),c=h.useCallback(function(g){var w=g;if(!(!Pi.length||Pi[Pi.length-1]!==i)){var v="deltaY"in w?Sb(w):yd(w),y=t.current.filter(function(j){return j.name===w.type&&(j.target===w.target||w.target===j.shadowParent)&&Z4(j.delta,v)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(Cb).filter(Boolean).filter(function(j){return j.contains(w.target)}),N=b.length>0?l(w,b[0]):!o.current.noIsolation;N&&w.cancelable&&w.preventDefault()}}},[]),d=h.useCallback(function(g,w,v,y){var b={name:g,delta:w,target:v,should:y,shadowParent:n$(v)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(N){return N!==b})},1)},[]),u=h.useCallback(function(g){r.current=yd(g),n.current=void 0},[]),f=h.useCallback(function(g){d(g.type,Sb(g),g.target,l(g,e.lockRef.current))},[]),m=h.useCallback(function(g){d(g.type,yd(g),g.target,l(g,e.lockRef.current))},[]);h.useEffect(function(){return Pi.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,ki),document.addEventListener("touchmove",c,ki),document.addEventListener("touchstart",u,ki),function(){Pi=Pi.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,ki),document.removeEventListener("touchmove",c,ki),document.removeEventListener("touchstart",u,ki)}},[]);var p=e.removeScrollBar,x=e.inert;return h.createElement(h.Fragment,null,x?h.createElement(i,{styles:e$(a)}):null,p?h.createElement(W4,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function n$(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const s$=I4(F_,r$);var Sc=h.forwardRef(function(e,t){return h.createElement(vf,An({},e,{ref:t,sideCar:s$}))});Sc.classNames=vf.classNames;var Ep=["Enter"," "],a$=["ArrowDown","PageUp","Home"],V_=["ArrowUp","PageDown","End"],i$=[...a$,...V_],o$={ltr:[...Ep,"ArrowRight"],rtl:[...Ep,"ArrowLeft"]},l$={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Cc="Menu",[ec,c$,d$]=Gu(Cc),[vi,W_]=lr(Cc,[d$,pa,pf]),yf=pa(),H_=pf(),[u$,yi]=vi(Cc),[f$,Ec]=vi(Cc),K_=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=yf(t),[c,d]=h.useState(null),u=h.useRef(!1),f=bt(i),m=jc(a);return h.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),s.jsx(Xg,{...l,children:s.jsx(u$,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:d,children:s.jsx(f$,{scope:t,onClose:h.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:m,modal:o,children:n})})})};K_.displayName=Cc;var h$="MenuAnchor",fv=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=yf(r);return s.jsx(vc,{...a,...n,ref:t})});fv.displayName=h$;var hv="MenuPortal",[m$,Q_]=vi(hv,{forceMount:void 0}),G_=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=yi(hv,t);return s.jsx(m$,{scope:t,forceMount:r,children:s.jsx(Dt,{present:r||i.open,children:s.jsx(Do,{asChild:!0,container:a,children:n})})})};G_.displayName=hv;var Xr="MenuContent",[p$,mv]=vi(Xr),Y_=h.forwardRef((e,t)=>{const r=Q_(Xr,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=yi(Xr,e.__scopeMenu),o=Ec(Xr,e.__scopeMenu);return s.jsx(ec.Provider,{scope:e.__scopeMenu,children:s.jsx(Dt,{present:n||i.open,children:s.jsx(ec.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(g$,{...a,ref:t}):s.jsx(v$,{...a,ref:t})})})})}),g$=h.forwardRef((e,t)=>{const r=yi(Xr,e.__scopeMenu),n=h.useRef(null),a=De(t,n);return h.useEffect(()=>{const i=n.current;if(i)return gf(i)},[]),s.jsx(pv,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ge(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),v$=h.forwardRef((e,t)=>{const r=yi(Xr,e.__scopeMenu);return s.jsx(pv,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),y$=la("MenuContent.ScrollLock"),pv=h.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:p,disableOutsideScroll:x,...g}=e,w=yi(Xr,r),v=Ec(Xr,r),y=yf(r),b=H_(r),N=c$(r),[j,C]=h.useState(null),E=h.useRef(null),M=De(t,E,w.onContentChange),H=h.useRef(0),q=h.useRef(""),P=h.useRef(0),K=h.useRef(null),ee=h.useRef("right"),D=h.useRef(0),S=x?Sc:h.Fragment,A=x?{as:y$,allowPinchZoom:!0}:void 0,O=L=>{var Z,R;const J=q.current+L,ce=N().filter(X=>!X.disabled),B=document.activeElement,I=(Z=ce.find(X=>X.ref.current===B))==null?void 0:Z.textValue,V=ce.map(X=>X.textValue),Q=T$(V,J,I),se=(R=ce.find(X=>X.textValue===Q))==null?void 0:R.ref.current;(function X(ie){q.current=ie,window.clearTimeout(H.current),ie!==""&&(H.current=window.setTimeout(()=>X(""),1e3))})(J),se&&setTimeout(()=>se.focus())};h.useEffect(()=>()=>window.clearTimeout(H.current),[]),mf();const F=h.useCallback(L=>{var ce,B;return ee.current===((ce=K.current)==null?void 0:ce.side)&&I$(L,(B=K.current)==null?void 0:B.area)},[]);return s.jsx(p$,{scope:r,searchRef:q,onItemEnter:h.useCallback(L=>{F(L)&&L.preventDefault()},[F]),onItemLeave:h.useCallback(L=>{var J;F(L)||((J=E.current)==null||J.focus(),C(null))},[F]),onTriggerLeave:h.useCallback(L=>{F(L)&&L.preventDefault()},[F]),pointerGraceTimerRef:P,onPointerGraceIntentChange:h.useCallback(L=>{K.current=L},[]),children:s.jsx(S,{...A,children:s.jsx(Nc,{asChild:!0,trapped:a,onMountAutoFocus:ge(i,L=>{var J;L.preventDefault(),(J=E.current)==null||J.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(fi,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:p,children:s.jsx(O_,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:C,onEntryFocus:ge(c,L=>{v.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(rf,{role:"menu","aria-orientation":"vertical","data-state":fS(w.open),"data-radix-menu-content":"",dir:v.dir,...y,...g,ref:M,style:{outline:"none",...g.style},onKeyDown:ge(g.onKeyDown,L=>{const ce=L.target.closest("[data-radix-menu-content]")===L.currentTarget,B=L.ctrlKey||L.altKey||L.metaKey,I=L.key.length===1;ce&&(L.key==="Tab"&&L.preventDefault(),!B&&I&&O(L.key));const V=E.current;if(L.target!==V||!i$.includes(L.key))return;L.preventDefault();const se=N().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);V_.includes(L.key)&&se.reverse(),k$(se)}),onBlur:ge(e.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(H.current),q.current="")}),onPointerMove:ge(e.onPointerMove,tc(L=>{const J=L.target,ce=D.current!==L.clientX;if(L.currentTarget.contains(J)&&ce){const B=L.clientX>D.current?"right":"left";ee.current=B,D.current=L.clientX}}))})})})})})})});Y_.displayName=Xr;var x$="MenuGroup",gv=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ee.div,{role:"group",...n,ref:t})});gv.displayName=x$;var b$="MenuLabel",X_=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ee.div,{...n,ref:t})});X_.displayName=b$;var _u="MenuItem",Eb="menu.itemSelect",xf=h.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=h.useRef(null),o=Ec(_u,e.__scopeMenu),l=mv(_u,e.__scopeMenu),c=De(t,i),d=h.useRef(!1),u=()=>{const f=i.current;if(!r&&f){const m=new CustomEvent(Eb,{bubbles:!0,cancelable:!0});f.addEventListener(Eb,p=>n==null?void 0:n(p),{once:!0}),Dg(f,m),m.defaultPrevented?d.current=!1:o.onClose()}};return s.jsx(J_,{...a,ref:c,disabled:r,onClick:ge(e.onClick,u),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),d.current=!0},onPointerUp:ge(e.onPointerUp,f=>{var m;d.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:ge(e.onKeyDown,f=>{const m=l.searchRef.current!=="";r||m&&f.key===" "||Ep.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});xf.displayName=_u;var J_=h.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=mv(_u,r),l=H_(r),c=h.useRef(null),d=De(t,c),[u,f]=h.useState(!1),[m,p]=h.useState("");return h.useEffect(()=>{const x=c.current;x&&p((x.textContent??"").trim())},[i.children]),s.jsx(ec.ItemSlot,{scope:r,disabled:n,textValue:a??m,children:s.jsx(D_,{asChild:!0,...l,focusable:!n,children:s.jsx(Ee.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:ge(e.onPointerMove,tc(x=>{n?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ge(e.onPointerLeave,tc(x=>o.onItemLeave(x))),onFocus:ge(e.onFocus,()=>f(!0)),onBlur:ge(e.onBlur,()=>f(!1))})})})}),w$="MenuCheckboxItem",Z_=h.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(sS,{scope:e.__scopeMenu,checked:r,children:s.jsx(xf,{role:"menuitemcheckbox","aria-checked":Su(r)?"mixed":r,...a,ref:t,"data-state":yv(r),onSelect:ge(a.onSelect,()=>n==null?void 0:n(Su(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Z_.displayName=w$;var eS="MenuRadioGroup",[j$,N$]=vi(eS,{value:void 0,onValueChange:()=>{}}),tS=h.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=bt(n);return s.jsx(j$,{scope:e.__scopeMenu,value:r,onValueChange:i,children:s.jsx(gv,{...a,ref:t})})});tS.displayName=eS;var rS="MenuRadioItem",nS=h.forwardRef((e,t)=>{const{value:r,...n}=e,a=N$(rS,e.__scopeMenu),i=r===a.value;return s.jsx(sS,{scope:e.__scopeMenu,checked:i,children:s.jsx(xf,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":yv(i),onSelect:ge(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});nS.displayName=rS;var vv="MenuItemIndicator",[sS,_$]=vi(vv,{checked:!1}),aS=h.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=_$(vv,r);return s.jsx(Dt,{present:n||Su(i.checked)||i.checked===!0,children:s.jsx(Ee.span,{...a,ref:t,"data-state":yv(i.checked)})})});aS.displayName=vv;var S$="MenuSeparator",iS=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ee.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});iS.displayName=S$;var C$="MenuArrow",oS=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=yf(r);return s.jsx(nf,{...a,...n,ref:t})});oS.displayName=C$;var E$="MenuSub",[YB,lS]=vi(E$),ml="MenuSubTrigger",cS=h.forwardRef((e,t)=>{const r=yi(ml,e.__scopeMenu),n=Ec(ml,e.__scopeMenu),a=lS(ml,e.__scopeMenu),i=mv(ml,e.__scopeMenu),o=h.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=h.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return h.useEffect(()=>u,[u]),h.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(fv,{asChild:!0,...d,children:s.jsx(J_,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":fS(r.open),...e,ref:ms(t,a.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ge(e.onPointerMove,tc(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:ge(e.onPointerLeave,tc(f=>{var p,x;u();const m=(p=r.content)==null?void 0:p.getBoundingClientRect();if(m){const g=(x=r.content)==null?void 0:x.dataset.side,w=g==="right",v=w?-5:5,y=m[w?"left":"right"],b=m[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+v,y:f.clientY},{x:y,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:y,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ge(e.onKeyDown,f=>{var p;const m=i.searchRef.current!=="";e.disabled||m&&f.key===" "||o$[n.dir].includes(f.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),f.preventDefault())})})})});cS.displayName=ml;var dS="MenuSubContent",uS=h.forwardRef((e,t)=>{const r=Q_(Xr,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=yi(Xr,e.__scopeMenu),o=Ec(Xr,e.__scopeMenu),l=lS(dS,e.__scopeMenu),c=h.useRef(null),d=De(t,c);return s.jsx(ec.Provider,{scope:e.__scopeMenu,children:s.jsx(Dt,{present:n||i.open,children:s.jsx(ec.Slot,{scope:e.__scopeMenu,children:s.jsx(pv,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ge(e.onFocusOutside,u=>{u.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ge(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ge(e.onKeyDown,u=>{var p;const f=u.currentTarget.contains(u.target),m=l$[o.dir].includes(u.key);f&&m&&(i.onOpenChange(!1),(p=l.trigger)==null||p.focus(),u.preventDefault())})})})})})});uS.displayName=dS;function fS(e){return e?"open":"closed"}function Su(e){return e==="indeterminate"}function yv(e){return Su(e)?"indeterminate":e?"checked":"unchecked"}function k$(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function P$(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function T$(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=P$(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function R$(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,f=c.x,m=c.y;u>n!=m>n&&r<(f-d)*(n-u)/(m-u)+d&&(a=!a)}return a}function I$(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return R$(r,t)}function tc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var A$=K_,O$=fv,D$=G_,M$=Y_,L$=gv,$$=X_,F$=xf,U$=Z_,B$=tS,q$=nS,z$=aS,V$=iS,W$=oS,H$=cS,K$=uS,bf="DropdownMenu",[Q$,XB]=lr(bf,[W_]),cr=W_(),[G$,hS]=Q$(bf),mS=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=cr(t),d=h.useRef(null),[u,f]=ps({prop:a,defaultProp:i??!1,onChange:o,caller:bf});return s.jsx(G$,{scope:t,triggerId:Bt(),triggerRef:d,contentId:Bt(),open:u,onOpenChange:f,onOpenToggle:h.useCallback(()=>f(m=>!m),[f]),modal:l,children:s.jsx(A$,{...c,open:u,onOpenChange:f,dir:n,modal:l,children:r})})};mS.displayName=bf;var pS="DropdownMenuTrigger",gS=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=hS(pS,r),o=cr(r);return s.jsx(O$,{asChild:!0,...o,children:s.jsx(Ee.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:ms(t,i.triggerRef),onPointerDown:ge(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:ge(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});gS.displayName=pS;var Y$="DropdownMenuPortal",vS=e=>{const{__scopeDropdownMenu:t,...r}=e,n=cr(t);return s.jsx(D$,{...n,...r})};vS.displayName=Y$;var yS="DropdownMenuContent",xS=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=hS(yS,r),i=cr(r),o=h.useRef(!1);return s.jsx(M$,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:ge(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ge(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xS.displayName=yS;var X$="DropdownMenuGroup",J$=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=cr(r);return s.jsx(L$,{...a,...n,ref:t})});J$.displayName=X$;var Z$="DropdownMenuLabel",bS=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=cr(r);return s.jsx($$,{...a,...n,ref:t})});bS.displayName=Z$;var eF="DropdownMenuItem",wS=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=cr(r);return s.jsx(F$,{...a,...n,ref:t})});wS.displayName=eF;var tF="DropdownMenuCheckboxItem",jS=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=cr(r);return s.jsx(U$,{...a,...n,ref:t})});jS.displayName=tF;var rF="DropdownMenuRadioGroup",nF=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=cr(r);return s.jsx(B$,{...a,...n,ref:t})});nF.displayName=rF;var sF="DropdownMenuRadioItem",NS=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=cr(r);return s.jsx(q$,{...a,...n,ref:t})});NS.displayName=sF;var aF="DropdownMenuItemIndicator",_S=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=cr(r);return s.jsx(z$,{...a,...n,ref:t})});_S.displayName=aF;var iF="DropdownMenuSeparator",SS=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=cr(r);return s.jsx(V$,{...a,...n,ref:t})});SS.displayName=iF;var oF="DropdownMenuArrow",lF=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=cr(r);return s.jsx(W$,{...a,...n,ref:t})});lF.displayName=oF;var cF="DropdownMenuSubTrigger",CS=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=cr(r);return s.jsx(H$,{...a,...n,ref:t})});CS.displayName=cF;var dF="DropdownMenuSubContent",ES=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=cr(r);return s.jsx(K$,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ES.displayName=dF;var uF=mS,fF=gS,hF=vS,kS=xS,PS=bS,TS=wS,RS=jS,IS=NS,AS=_S,OS=SS,DS=CS,MS=ES;const mF=uF,pF=fF,gF=h.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(DS,{ref:a,className:be("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(qj,{className:"ml-auto h-4 w-4"})]}));gF.displayName=DS.displayName;const vF=h.forwardRef(({className:e,...t},r)=>s.jsx(MS,{ref:r,className:be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));vF.displayName=MS.displayName;const LS=h.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(hF,{children:s.jsx(kS,{ref:n,sideOffset:t,className:be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));LS.displayName=kS.displayName;const qd=h.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(TS,{ref:n,className:be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));qd.displayName=TS.displayName;const yF=h.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(RS,{ref:a,className:be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(AS,{children:s.jsx(Fn,{className:"h-4 w-4"})})}),t]}));yF.displayName=RS.displayName;const xF=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(IS,{ref:n,className:be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(AS,{children:s.jsx(I2,{className:"h-2 w-2 fill-current"})})}),t]}));xF.displayName=IS.displayName;const $S=h.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(PS,{ref:n,className:be("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));$S.displayName=PS.displayName;const FS=h.forwardRef(({className:e,...t},r)=>s.jsx(OS,{ref:r,className:be("-mx-1 my-1 h-px bg-muted",e),...t}));FS.displayName=OS.displayName;const US=h.createContext(void 0);function bF({children:e,defaultTheme:t="system",storageKey:r="vite-ui-theme",...n}){const[a,i]=h.useState(()=>localStorage.getItem(r)||t),[o,l]=h.useState(()=>{if(typeof window>"u")return"light";const d=localStorage.getItem(r)||t;return d==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":d});h.useEffect(()=>{const d=window.document.documentElement;d.classList.remove("light","dark");let u;if(a==="system"){const f=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";u=f,d.classList.add(f)}else u=a,d.classList.add(a);l(u)},[a]),h.useEffect(()=>{if(a!=="system")return;const d=window.matchMedia("(prefers-color-scheme: dark)"),u=f=>{const m=window.document.documentElement;m.classList.remove("light","dark");const p=f.matches?"dark":"light";m.classList.add(p),l(p)};return d.addEventListener("change",u),()=>d.removeEventListener("change",u)},[a]);const c={theme:a,setTheme:d=>{localStorage.setItem(r,d),i(d)},resolvedTheme:o};return s.jsx(US.Provider,{...n,value:c,children:e})}const wF=()=>{const e=h.useContext(US);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},jF=()=>{const{theme:e,setTheme:t}=wF();return s.jsx("header",{className:"bg-government-dark text-white shadow-formal",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gr,{className:"h-8 w-8 text-accent"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold",children:"Semi-Expendable Property"}),s.jsx("p",{className:"text-sm text-white/80",children:"Inventory Management System"})]})]})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs(mF,{children:[s.jsx(pF,{asChild:!0,children:s.jsx(ne,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:e==="light"?s.jsx(vx,{className:"h-4 w-4"}):e==="dark"?s.jsx(px,{className:"h-4 w-4"}):s.jsx(mx,{className:"h-4 w-4"})})}),s.jsxs(LS,{align:"end",children:[s.jsx($S,{children:"Theme"}),s.jsx(FS,{}),s.jsxs(qd,{onClick:()=>t("light"),children:[s.jsx(vx,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Light"}),e==="light"&&s.jsx("span",{className:"ml-auto",children:""})]}),s.jsxs(qd,{onClick:()=>t("dark"),children:[s.jsx(px,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Dark"}),e==="dark"&&s.jsx("span",{className:"ml-auto",children:""})]}),s.jsxs(qd,{onClick:()=>t("system"),children:[s.jsx(mx,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"System"}),e==="system"&&s.jsx("span",{className:"ml-auto",children:""})]})]})]})})]})})})},NF=[{name:"Dashboard",href:"/",icon:D2},{name:"Inventory",href:"/inventory",icon:Pr},{name:"Property Cards",href:"/property-cards",icon:Gr},{name:"Custodian Slips",href:"/custodian-slips",icon:A2},{name:"Custodians",href:"/custodians",icon:Ha},{name:"Transfers",href:"/transfers",icon:Bj},{name:"Physical Count",href:"/physical-count",icon:Ld},{name:"Lookups",href:"/settings/lookups",icon:qm},{name:"Loss Reports",href:"/loss-reports",icon:Hl},{name:"Reports",href:"/reports",icon:Gr}],_F=()=>{const[e,t]=h.useState(!1),r=zn();return s.jsxs("div",{className:be("bg-card border-r border-border transition-all duration-300",e?"w-16":"w-64"),children:[s.jsx("div",{className:"p-4 border-b border-border",children:s.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>t(!e),className:"ml-auto",children:e?s.jsx(qj,{className:"h-4 w-4"}):s.jsx(T2,{className:"h-4 w-4"})})}),s.jsx("nav",{className:"p-4 space-y-2",children:NF.map(n=>{const a=n.icon,i=r.pathname===n.href;return s.jsxs(ZL,{to:n.href,className:be("flex items-center space-x-3 px-3 py-2 rounded-md transition-colors",i?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-secondary hover:text-secondary-foreground"),children:[s.jsx(a,{className:"h-5 w-5"}),!e&&s.jsx("span",{className:"text-sm font-medium",children:n.name})]},n.name)})})]})},je=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:be("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));je.displayName="Card";const Ie=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:be("flex flex-col space-y-1.5 p-6",e),...t}));Ie.displayName="CardHeader";const Oe=h.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:be("text-2xl font-semibold leading-none tracking-tight",e),...t}));Oe.displayName="CardTitle";const SF=h.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:be("text-sm text-muted-foreground",e),...t}));SF.displayName="CardDescription";const Ne=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:be("p-6 pt-0",e),...t}));Ne.displayName="CardContent";const CF=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:be("flex items-center p-6 pt-0",e),...t}));CF.displayName="CardFooter";const EF=async()=>{const[{data:e,error:t},{data:r,error:n}]=await Promise.all([te.from("inventory_items").select("id, total_cost, condition, status, assignment_status, custodian").range(0,499),te.from("inventory_items").select("description, property_number, created_at, updated_at").order("updated_at",{ascending:!1}).limit(8)]);if(t)throw t;if(n)throw n;const a=(e==null?void 0:e.length)||0,i=(e||[]).reduce((p,x)=>p+(Number(x.total_cost)||0),0),o=(e||[]).filter(p=>p.status==="Active"&&p.condition==="Serviceable"),l={},c={};(e||[]).forEach(p=>{l[p.condition]=(l[p.condition]||0)+1,c[p.status]=(c[p.status]||0)+1});const d=o.filter(p=>p.assignment_status==="Assigned"||p.custodian&&p.custodian!=="").length,u=o.filter(p=>!p.assignment_status||p.assignment_status==="Available"||!p.custodian||p.custodian==="").length,f=(e||[]).filter(p=>p.condition==="Unserviceable").length,m=(r||[]).map(p=>({action:`Item ${p.property_number} updated`,user:"system",time:new Date(p.updated_at||p.created_at).toLocaleString()}));return{totalItems:a,totalValue:i,byCondition:l,byStatus:c,issuedItems:d,unissuedItems:u,unserviceableItems:f,recentActivity:m}},kF=()=>{const e=xs();Fr();const t=ga(),{data:r,isLoading:n,error:a}=vt({queryKey:["dashboard-stats"],queryFn:EF,staleTime:2*60*1e3,gcTime:24*60*60*1e3,retry:(c,d)=>navigator.onLine?c<2:!1}),i=r||{totalItems:0,totalValue:0,byCondition:{},byStatus:{},issuedItems:0,unissuedItems:0,unserviceableItems:0,recentActivity:[]};h.useEffect(()=>{const c=te.channel("realtime:dashboard-inventory").on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},()=>{console.log("[Realtime] Inventory items changed, refreshing dashboard..."),t.invalidateQueries({queryKey:["dashboard-stats"]})}).on("postgres_changes",{event:"*",schema:"public",table:"custodian_slip_items"},()=>{console.log("[Realtime] Custodian slip items changed, refreshing dashboard..."),t.invalidateQueries({queryKey:["dashboard-stats"]})}).subscribe();return()=>{te.removeChannel(c)}},[t]);const o=c=>{switch(c){case"Add New Item":e("/inventory");break;case"Generate Report":e("/reports");break;case"Process Transfer":e("/transfers");break;case"Physical Count":e("/physical-count");break}},l=c=>{switch(c){case"Serviceable":return"bg-green-500";case"For Repair":return"bg-yellow-500";case"Unserviceable":return"bg-red-600";case"Missing":return"bg-red-400";default:return"bg-gray-500"}};return n?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Nt,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading dashboard..."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString()]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs(je,{children:[s.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Oe,{className:"text-sm font-medium",children:"Total Items"}),s.jsx(Pr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ne,{children:[s.jsx("div",{className:"text-2xl font-bold",children:i.totalItems.toLocaleString()}),s.jsx("p",{className:"text-xs text-muted-foreground",children:!navigator.onLine&&!r?"Offline - cached data":i.totalItems===0?"No items yet":"From database"})]})]}),s.jsxs(je,{children:[s.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Oe,{className:"text-sm font-medium",children:"Total Value"}),s.jsx(zm,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ne,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:["",i.totalValue.toLocaleString()]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:!navigator.onLine&&!r?"Offline - cached data":i.totalValue===0?"No value yet":"From database"})]})]}),s.jsxs(je,{children:[s.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Oe,{className:"text-sm font-medium",children:"Issued Items"}),s.jsx(Ha,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Ne,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.issuedItems.toLocaleString()}),s.jsx("p",{className:"text-xs text-muted-foreground",children:i.issuedItems===0?"No items issued yet":"Assigned to custodians"})]})]}),s.jsxs(je,{children:[s.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Oe,{className:"text-sm font-medium",children:"Available Items"}),s.jsx(Pr,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(Ne,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.unissuedItems.toLocaleString()}),s.jsx("p",{className:"text-xs text-muted-foreground",children:i.unissuedItems===0?"All items are issued":"Ready for assignment"})]})]})]}),s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsxs(Oe,{className:"flex items-center space-x-2",children:[s.jsx(Gr,{className:"h-5 w-5"}),s.jsx("span",{children:"Issued vs Unissued Items Summary"})]})}),s.jsxs(Ne,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"space-y-4",children:s.jsxs("button",{onClick:()=>e("/inventory?filter=issued"),className:"w-full flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200 hover:bg-green-100 hover:border-green-300 transition-colors cursor-pointer group",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ha,{className:"h-8 w-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Issued Items"}),s.jsx("p",{className:"text-sm text-green-600",children:"Assigned to custodians"}),s.jsx("p",{className:"text-xs text-green-500 group-hover:text-green-700",children:"Click to view "})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:i.issuedItems}),s.jsxs("div",{className:"text-sm text-green-600",children:[i.totalItems>0?Math.round(i.issuedItems/i.totalItems*100):0,"% of total"]})]})]})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("button",{onClick:()=>e("/inventory?filter=available"),className:"w-full flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200 hover:bg-blue-100 hover:border-blue-300 transition-colors cursor-pointer group",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Pr,{className:"h-8 w-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"Available Items"}),s.jsx("p",{className:"text-sm text-blue-600",children:"Ready for assignment"}),s.jsx("p",{className:"text-xs text-blue-500 group-hover:text-blue-700",children:"Click to view "})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:i.unissuedItems}),s.jsxs("div",{className:"text-sm text-blue-600",children:[i.totalItems>0?Math.round(i.unissuedItems/i.totalItems*100):0,"% of total"]})]})]})})]}),i.totalItems>0&&s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Distribution"}),s.jsxs("span",{className:"text-sm text-gray-500",children:[i.totalItems," total items"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden",children:[s.jsx("div",{className:"bg-green-500",style:{width:`${i.totalItems>0?i.issuedItems/i.totalItems*100:0}%`},title:`${i.issuedItems} issued items`}),s.jsx("div",{className:"bg-blue-500",style:{width:`${i.totalItems>0?i.unissuedItems/i.totalItems*100:0}%`},title:`${i.unissuedItems} available items`}),i.unserviceableItems>0&&s.jsx("div",{className:"bg-red-600",style:{width:`${i.totalItems>0?i.unserviceableItems/i.totalItems*100:0}%`},title:`${i.unserviceableItems} unserviceable items`})]})}),s.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-600 flex-wrap gap-2",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),s.jsxs("span",{children:["Issued (",i.issuedItems,")"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),s.jsxs("span",{children:["Available (",i.unissuedItems,")"]})]}),i.unserviceableItems>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-3 h-3 bg-red-600 rounded"}),s.jsxs("span",{children:["Unserviceable (",i.unserviceableItems,")"]})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{children:"Recent Activity"})}),s.jsx(Ne,{children:s.jsx("div",{className:"space-y-4",children:r.recentActivity.length>0?r.recentActivity.map((c,d)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:c.action}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",c.user,"  ",c.time]})]})]},d)):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"No recent activity"}),s.jsx("p",{className:"text-xs",children:"Add items to see activity here"})]})})})]}),s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{children:"Property Status Overview"})}),s.jsx(Ne,{children:s.jsx("div",{className:"space-y-4",children:Object.keys(r.byCondition).length>0?Object.entries(r.byCondition).map(([c,d])=>{const u=Object.values(r.byCondition).reduce((p,x)=>p+x,0),f=u>0?d/u*100:0,m=Math.max(f,5);return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:c}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-20 h-2 bg-muted rounded-full",children:s.jsx("div",{className:`h-2 rounded-full ${l(c)}`,style:{width:`${m}%`}})}),s.jsx("span",{className:"text-sm text-muted-foreground",children:d})]})]},c)}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"No property data"}),s.jsx("p",{className:"text-xs",children:"Add items to see status overview"})]})})})]})]}),s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{children:"Quick Actions"})}),s.jsx(Ne,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{title:"Add New Item",icon:Pr,description:"Register new property"},{title:"Generate Report",icon:Gr,description:"Create inventory reports"},{title:"Process Transfer",icon:Bj,description:"Handle property transfers"},{title:"Physical Count",icon:Ha,description:"Conduct inventory count"}].map((c,d)=>{const u=c.icon;return s.jsxs("div",{onClick:()=>o(c.title),className:"p-4 border border-border rounded-lg hover:bg-muted cursor-pointer transition-colors",children:[s.jsx(u,{className:"h-6 w-6 text-primary mb-2"}),s.jsx("h3",{className:"font-medium text-sm",children:c.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:c.description})]},d)})})})]})]})},we=h.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:be("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));we.displayName="Input";const Gt=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:be("w-full caption-bottom text-sm",e),...t})}));Gt.displayName="Table";const sr=h.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:be("[&_tr]:border-b",e),...t}));sr.displayName="TableHeader";const ar=h.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:be("[&_tr:last-child]:border-0",e),...t}));ar.displayName="TableBody";const PF=h.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:be("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));PF.displayName="TableFooter";const Ve=h.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:be("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Ve.displayName="TableRow";const he=h.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:be("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));he.displayName="TableHead";const de=h.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:be("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));de.displayName="TableCell";const TF=h.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:be("mt-4 text-sm text-muted-foreground",e),...t}));TF.displayName="TableCaption";const RF=mc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Be({className:e,variant:t,...r}){return s.jsx("div",{className:be(RF({variant:t}),e),...r})}function kp(e,[t,r]){return Math.min(r,Math.max(t,e))}function BS(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var IF=[" ","Enter","ArrowUp","ArrowDown"],AF=[" ","Enter"],si="Select",[wf,jf,OF]=Gu(si),[qo,JB]=lr(si,[OF,pa]),Nf=pa(),[DF,ya]=qo(si),[MF,LF]=qo(si),qS=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:m,required:p,form:x}=e,g=Nf(t),[w,v]=h.useState(null),[y,b]=h.useState(null),[N,j]=h.useState(!1),C=jc(d),[E,M]=ps({prop:n,defaultProp:a??!1,onChange:i,caller:si}),[H,q]=ps({prop:o,defaultProp:l,onChange:c,caller:si}),P=h.useRef(null),K=w?x||!!w.closest("form"):!0,[ee,D]=h.useState(new Set),S=Array.from(ee).map(A=>A.props.value).join(";");return s.jsx(Xg,{...g,children:s.jsxs(DF,{required:p,scope:t,trigger:w,onTriggerChange:v,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:N,onValueNodeHasChildrenChange:j,contentId:Bt(),value:H,onValueChange:q,open:E,onOpenChange:M,dir:C,triggerPointerDownPosRef:P,disabled:m,children:[s.jsx(wf.Provider,{scope:t,children:s.jsx(MF,{scope:e.__scopeSelect,onNativeOptionAdd:h.useCallback(A=>{D(O=>new Set(O).add(A))},[]),onNativeOptionRemove:h.useCallback(A=>{D(O=>{const F=new Set(O);return F.delete(A),F})},[]),children:r})}),K?s.jsxs(fC,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:f,value:H,onChange:A=>q(A.target.value),disabled:m,form:x,children:[H===void 0?s.jsx("option",{value:""}):null,Array.from(ee)]},S):null]})})};qS.displayName=si;var zS="SelectTrigger",VS=h.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=Nf(r),o=ya(zS,r),l=o.disabled||n,c=De(t,o.onTriggerChange),d=jf(r),u=h.useRef("touch"),[f,m,p]=mC(g=>{const w=d().filter(b=>!b.disabled),v=w.find(b=>b.value===o.value),y=pC(w,g,v);y!==void 0&&o.onValueChange(y.value)}),x=g=>{l||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return s.jsx(vc,{asChild:!0,...i,children:s.jsx(Ee.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":hC(o.value)?"":void 0,...a,ref:c,onClick:ge(a.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&x(g)}),onPointerDown:ge(a.onPointerDown,g=>{u.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(x(g),g.preventDefault())}),onKeyDown:ge(a.onKeyDown,g=>{const w=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(w&&g.key===" ")&&IF.includes(g.key)&&(x(),g.preventDefault())})})})});VS.displayName=zS;var WS="SelectValue",HS=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=ya(WS,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,f=De(t,c.onValueNodeChange);return Ot(()=>{d(u)},[d,u]),s.jsx(Ee.span,{...l,ref:f,style:{pointerEvents:"none"},children:hC(c.value)?s.jsx(s.Fragment,{children:o}):i})});HS.displayName=WS;var $F="SelectIcon",KS=h.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Ee.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});KS.displayName=$F;var FF="SelectPortal",QS=e=>s.jsx(Do,{asChild:!0,...e});QS.displayName=FF;var ai="SelectContent",GS=h.forwardRef((e,t)=>{const r=ya(ai,e.__scopeSelect),[n,a]=h.useState();if(Ot(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?ui.createPortal(s.jsx(YS,{scope:e.__scopeSelect,children:s.jsx(wf.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(XS,{...e,ref:t})});GS.displayName=ai;var on=10,[YS,xa]=qo(ai),UF="SelectContentImpl",BF=la("SelectContent.RemoveScroll"),XS=h.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:x,hideWhenDetached:g,avoidCollisions:w,...v}=e,y=ya(ai,r),[b,N]=h.useState(null),[j,C]=h.useState(null),E=De(t,Z=>N(Z)),[M,H]=h.useState(null),[q,P]=h.useState(null),K=jf(r),[ee,D]=h.useState(!1),S=h.useRef(!1);h.useEffect(()=>{if(b)return gf(b)},[b]),mf();const A=h.useCallback(Z=>{const[R,...X]=K().map(Y=>Y.ref.current),[ie]=X.slice(-1),T=document.activeElement;for(const Y of Z)if(Y===T||(Y==null||Y.scrollIntoView({block:"nearest"}),Y===R&&j&&(j.scrollTop=0),Y===ie&&j&&(j.scrollTop=j.scrollHeight),Y==null||Y.focus(),document.activeElement!==T))return},[K,j]),O=h.useCallback(()=>A([M,b]),[A,M,b]);h.useEffect(()=>{ee&&O()},[ee,O]);const{onOpenChange:F,triggerPointerDownPosRef:L}=y;h.useEffect(()=>{if(b){let Z={x:0,y:0};const R=ie=>{var T,Y;Z={x:Math.abs(Math.round(ie.pageX)-(((T=L.current)==null?void 0:T.x)??0)),y:Math.abs(Math.round(ie.pageY)-(((Y=L.current)==null?void 0:Y.y)??0))}},X=ie=>{Z.x<=10&&Z.y<=10?ie.preventDefault():b.contains(ie.target)||F(!1),document.removeEventListener("pointermove",R),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",R),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",X,{capture:!0})}}},[b,F,L]),h.useEffect(()=>{const Z=()=>F(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[F]);const[J,ce]=mC(Z=>{const R=K().filter(T=>!T.disabled),X=R.find(T=>T.ref.current===document.activeElement),ie=pC(R,Z,X);ie&&setTimeout(()=>ie.ref.current.focus())}),B=h.useCallback((Z,R,X)=>{const ie=!S.current&&!X;(y.value!==void 0&&y.value===R||ie)&&(H(Z),ie&&(S.current=!0))},[y.value]),I=h.useCallback(()=>b==null?void 0:b.focus(),[b]),V=h.useCallback((Z,R,X)=>{const ie=!S.current&&!X;(y.value!==void 0&&y.value===R||ie)&&P(Z)},[y.value]),Q=n==="popper"?Pp:JS,se=Q===Pp?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:x,hideWhenDetached:g,avoidCollisions:w}:{};return s.jsx(YS,{scope:r,content:b,viewport:j,onViewportChange:C,itemRefCallback:B,selectedItem:M,onItemLeave:I,itemTextRefCallback:V,focusSelectedItem:O,selectedItemText:q,position:n,isPositioned:ee,searchRef:J,children:s.jsx(Sc,{as:BF,allowPinchZoom:!0,children:s.jsx(Nc,{asChild:!0,trapped:y.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:ge(a,Z=>{var R;(R=y.trigger)==null||R.focus({preventScroll:!0}),Z.preventDefault()}),children:s.jsx(fi,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(Q,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Z=>Z.preventDefault(),...v,...se,onPlaced:()=>D(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ge(v.onKeyDown,Z=>{const R=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!R&&Z.key.length===1&&ce(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let ie=K().filter(T=>!T.disabled).map(T=>T.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const T=Z.target,Y=ie.indexOf(T);ie=ie.slice(Y+1)}setTimeout(()=>A(ie)),Z.preventDefault()}})})})})})})});XS.displayName=UF;var qF="SelectItemAlignedPosition",JS=h.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=ya(ai,r),o=xa(ai,r),[l,c]=h.useState(null),[d,u]=h.useState(null),f=De(t,E=>u(E)),m=jf(r),p=h.useRef(!1),x=h.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:v,focusSelectedItem:y}=o,b=h.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&w&&v){const E=i.trigger.getBoundingClientRect(),M=d.getBoundingClientRect(),H=i.valueNode.getBoundingClientRect(),q=v.getBoundingClientRect();if(i.dir!=="rtl"){const T=q.left-M.left,Y=H.left-T,le=E.left-Y,Pe=E.width+le,re=Math.max(Pe,M.width),Se=window.innerWidth-on,ut=kp(Y,[on,Math.max(on,Se-re)]);l.style.minWidth=Pe+"px",l.style.left=ut+"px"}else{const T=M.right-q.right,Y=window.innerWidth-H.right-T,le=window.innerWidth-E.right-Y,Pe=E.width+le,re=Math.max(Pe,M.width),Se=window.innerWidth-on,ut=kp(Y,[on,Math.max(on,Se-re)]);l.style.minWidth=Pe+"px",l.style.right=ut+"px"}const P=m(),K=window.innerHeight-on*2,ee=g.scrollHeight,D=window.getComputedStyle(d),S=parseInt(D.borderTopWidth,10),A=parseInt(D.paddingTop,10),O=parseInt(D.borderBottomWidth,10),F=parseInt(D.paddingBottom,10),L=S+A+ee+F+O,J=Math.min(w.offsetHeight*5,L),ce=window.getComputedStyle(g),B=parseInt(ce.paddingTop,10),I=parseInt(ce.paddingBottom,10),V=E.top+E.height/2-on,Q=K-V,se=w.offsetHeight/2,Z=w.offsetTop+se,R=S+A+Z,X=L-R;if(R<=V){const T=P.length>0&&w===P[P.length-1].ref.current;l.style.bottom="0px";const Y=d.clientHeight-g.offsetTop-g.offsetHeight,le=Math.max(Q,se+(T?I:0)+Y+O),Pe=R+le;l.style.height=Pe+"px"}else{const T=P.length>0&&w===P[0].ref.current;l.style.top="0px";const le=Math.max(V,S+g.offsetTop+(T?B:0)+se)+X;l.style.height=le+"px",g.scrollTop=R-V+g.offsetTop}l.style.margin=`${on}px 0`,l.style.minHeight=J+"px",l.style.maxHeight=K+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,l,d,g,w,v,i.dir,n]);Ot(()=>b(),[b]);const[N,j]=h.useState();Ot(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const C=h.useCallback(E=>{E&&x.current===!0&&(b(),y==null||y(),x.current=!1)},[b,y]);return s.jsx(VF,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(Ee.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});JS.displayName=qF;var zF="SelectPopperPosition",Pp=h.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=on,...i}=e,o=Nf(r);return s.jsx(rf,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Pp.displayName=zF;var[VF,xv]=qo(ai,{}),Tp="SelectViewport",ZS=h.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=xa(Tp,r),o=xv(Tp,r),l=De(t,i.onViewportChange),c=h.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(wf.Slot,{scope:r,children:s.jsx(Ee.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ge(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const p=Math.abs(c.current-u.scrollTop);if(p>0){const x=window.innerHeight-on*2,g=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),v=Math.max(g,w);if(v<x){const y=v+p,b=Math.min(x,y),N=y-b;f.style.height=b+"px",f.style.bottom==="0px"&&(u.scrollTop=N>0?N:0,f.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});ZS.displayName=Tp;var eC="SelectGroup",[WF,HF]=qo(eC),KF=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Bt();return s.jsx(WF,{scope:r,id:a,children:s.jsx(Ee.div,{role:"group","aria-labelledby":a,...n,ref:t})})});KF.displayName=eC;var tC="SelectLabel",rC=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=HF(tC,r);return s.jsx(Ee.div,{id:a.id,...n,ref:t})});rC.displayName=tC;var Cu="SelectItem",[QF,nC]=qo(Cu),sC=h.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=ya(Cu,r),c=xa(Cu,r),d=l.value===n,[u,f]=h.useState(i??""),[m,p]=h.useState(!1),x=De(t,y=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,y,n,a)}),g=Bt(),w=h.useRef("touch"),v=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(QF,{scope:r,value:n,disabled:a,textId:g,isSelected:d,onItemTextChange:h.useCallback(y=>{f(b=>b||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(wf.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:s.jsx(Ee.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:x,onFocus:ge(o.onFocus,()=>p(!0)),onBlur:ge(o.onBlur,()=>p(!1)),onClick:ge(o.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:ge(o.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:ge(o.onPointerDown,y=>{w.current=y.pointerType}),onPointerMove:ge(o.onPointerMove,y=>{var b;w.current=y.pointerType,a?(b=c.onItemLeave)==null||b.call(c):w.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ge(o.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ge(o.onKeyDown,y=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&y.key===" "||(AF.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});sC.displayName=Cu;var pl="SelectItemText",aC=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=ya(pl,r),l=xa(pl,r),c=nC(pl,r),d=LF(pl,r),[u,f]=h.useState(null),m=De(t,v=>f(v),c.onItemTextChange,v=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,v,c.value,c.disabled)}),p=u==null?void 0:u.textContent,x=h.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=d;return Ot(()=>(g(x),()=>w(x)),[g,w,x]),s.jsxs(s.Fragment,{children:[s.jsx(Ee.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ui.createPortal(i.children,o.valueNode):null]})});aC.displayName=pl;var iC="SelectItemIndicator",oC=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return nC(iC,r).isSelected?s.jsx(Ee.span,{"aria-hidden":!0,...n,ref:t}):null});oC.displayName=iC;var Rp="SelectScrollUpButton",lC=h.forwardRef((e,t)=>{const r=xa(Rp,e.__scopeSelect),n=xv(Rp,e.__scopeSelect),[a,i]=h.useState(!1),o=De(t,n.onScrollButtonChange);return Ot(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(dC,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});lC.displayName=Rp;var Ip="SelectScrollDownButton",cC=h.forwardRef((e,t)=>{const r=xa(Ip,e.__scopeSelect),n=xv(Ip,e.__scopeSelect),[a,i]=h.useState(!1),o=De(t,n.onScrollButtonChange);return Ot(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(dC,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});cC.displayName=Ip;var dC=h.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=xa("SelectScrollButton",r),o=h.useRef(null),l=jf(r),c=h.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return h.useEffect(()=>()=>c(),[c]),Ot(()=>{var u;const d=l().find(f=>f.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(Ee.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:ge(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:ge(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:ge(a.onPointerLeave,()=>{c()})})}),GF="SelectSeparator",uC=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Ee.div,{"aria-hidden":!0,...n,ref:t})});uC.displayName=GF;var Ap="SelectArrow",YF=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Nf(r),i=ya(Ap,r),o=xa(Ap,r);return i.open&&o.position==="popper"?s.jsx(nf,{...a,...n,ref:t}):null});YF.displayName=Ap;var XF="SelectBubbleInput",fC=h.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=h.useRef(null),i=De(n,a),o=BS(t);return h.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&u){const f=new Event("change",{bubbles:!0});u.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(Ee.select,{...r,style:{...vj,...r.style},ref:i,defaultValue:t})});fC.displayName=XF;function hC(e){return e===""||e===void 0}function mC(e){const t=bt(e),r=h.useRef(""),n=h.useRef(0),a=h.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=h.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function pC(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=JF(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function JF(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var ZF=qS,gC=VS,e3=HS,t3=KS,r3=QS,vC=GS,n3=ZS,yC=rC,xC=sC,s3=aC,a3=oC,bC=lC,wC=cC,jC=uC;const ct=ZF,dt=e3,at=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(gC,{ref:n,className:be("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(t3,{asChild:!0,children:s.jsx(Ju,{className:"h-4 w-4 opacity-50"})})]}));at.displayName=gC.displayName;const NC=h.forwardRef(({className:e,...t},r)=>s.jsx(bC,{ref:r,className:be("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(R2,{className:"h-4 w-4"})}));NC.displayName=bC.displayName;const _C=h.forwardRef(({className:e,...t},r)=>s.jsx(wC,{ref:r,className:be("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Ju,{className:"h-4 w-4"})}));_C.displayName=wC.displayName;const it=h.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(r3,{children:s.jsxs(vC,{ref:a,className:be("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(NC,{}),s.jsx(n3,{className:be("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(_C,{})]})}));it.displayName=vC.displayName;const i3=h.forwardRef(({className:e,...t},r)=>s.jsx(yC,{ref:r,className:be("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));i3.displayName=yC.displayName;const pe=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(xC,{ref:n,className:be("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(a3,{children:s.jsx(Fn,{className:"h-4 w-4"})})}),s.jsx(s3,{children:t})]}));pe.displayName=xC.displayName;const o3=h.forwardRef(({className:e,...t},r)=>s.jsx(jC,{ref:r,className:be("-mx-1 my-1 h-px bg-muted",e),...t}));o3.displayName=jC.displayName;var _f="Dialog",[SC,CC]=lr(_f),[l3,bn]=SC(_f),EC=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=h.useRef(null),c=h.useRef(null),[d,u]=ps({prop:n,defaultProp:a??!1,onChange:i,caller:_f});return s.jsx(l3,{scope:t,triggerRef:l,contentRef:c,contentId:Bt(),titleId:Bt(),descriptionId:Bt(),open:d,onOpenChange:u,onOpenToggle:h.useCallback(()=>u(f=>!f),[u]),modal:o,children:r})};EC.displayName=_f;var kC="DialogTrigger",PC=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=bn(kC,r),i=De(t,a.triggerRef);return s.jsx(Ee.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":jv(a.open),...n,ref:i,onClick:ge(e.onClick,a.onOpenToggle)})});PC.displayName=kC;var bv="DialogPortal",[c3,TC]=SC(bv,{forceMount:void 0}),RC=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=bn(bv,t);return s.jsx(c3,{scope:t,forceMount:r,children:h.Children.map(n,o=>s.jsx(Dt,{present:r||i.open,children:s.jsx(Do,{asChild:!0,container:a,children:o})}))})};RC.displayName=bv;var Eu="DialogOverlay",IC=h.forwardRef((e,t)=>{const r=TC(Eu,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=bn(Eu,e.__scopeDialog);return i.modal?s.jsx(Dt,{present:n||i.open,children:s.jsx(u3,{...a,ref:t})}):null});IC.displayName=Eu;var d3=la("DialogOverlay.RemoveScroll"),u3=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=bn(Eu,r);return s.jsx(Sc,{as:d3,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Ee.div,{"data-state":jv(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),ii="DialogContent",AC=h.forwardRef((e,t)=>{const r=TC(ii,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=bn(ii,e.__scopeDialog);return s.jsx(Dt,{present:n||i.open,children:i.modal?s.jsx(f3,{...a,ref:t}):s.jsx(h3,{...a,ref:t})})});AC.displayName=ii;var f3=h.forwardRef((e,t)=>{const r=bn(ii,e.__scopeDialog),n=h.useRef(null),a=De(t,r.contentRef,n);return h.useEffect(()=>{const i=n.current;if(i)return gf(i)},[]),s.jsx(OC,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ge(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ge(e.onFocusOutside,i=>i.preventDefault())})}),h3=h.forwardRef((e,t)=>{const r=bn(ii,e.__scopeDialog),n=h.useRef(!1),a=h.useRef(!1);return s.jsx(OC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),OC=h.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=bn(ii,r),c=h.useRef(null),d=De(t,c);return mf(),s.jsxs(s.Fragment,{children:[s.jsx(Nc,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(fi,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":jv(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(p3,{titleId:l.titleId}),s.jsx(v3,{contentRef:c,descriptionId:l.descriptionId})]})]})}),wv="DialogTitle",DC=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=bn(wv,r);return s.jsx(Ee.h2,{id:a.titleId,...n,ref:t})});DC.displayName=wv;var MC="DialogDescription",LC=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=bn(MC,r);return s.jsx(Ee.p,{id:a.descriptionId,...n,ref:t})});LC.displayName=MC;var $C="DialogClose",FC=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=bn($C,r);return s.jsx(Ee.button,{type:"button",...n,ref:t,onClick:ge(e.onClick,()=>a.onOpenChange(!1))})});FC.displayName=$C;function jv(e){return e?"open":"closed"}var UC="DialogTitleWarning",[m3,BC]=MT(UC,{contentName:ii,titleName:wv,docsSlug:"dialog"}),p3=({titleId:e})=>{const t=BC(UC),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},g3="DialogDescriptionWarning",v3=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${BC(g3).contentName}}.`;return h.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Nv=EC,qC=PC,_v=RC,Sf=IC,Cf=AC,Sv=DC,Cv=LC,Ev=FC;const Tr=Nv,y3=qC,x3=_v,zC=h.forwardRef(({className:e,...t},r)=>s.jsx(Sf,{ref:r,className:be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));zC.displayName=Sf.displayName;const vr=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(x3,{children:[s.jsx(zC,{}),s.jsxs(Cf,{ref:n,className:be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(Ev,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(Vj,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));vr.displayName=Cf.displayName;const Ar=({className:e,...t})=>s.jsx("div",{className:be("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ar.displayName="DialogHeader";const VC=({className:e,...t})=>s.jsx("div",{className:be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});VC.displayName="DialogFooter";const Or=h.forwardRef(({className:e,...t},r)=>s.jsx(Sv,{ref:r,className:be("text-lg font-semibold leading-none tracking-tight",e),...t}));Or.displayName=Sv.displayName;const ls=h.forwardRef(({className:e,...t},r)=>s.jsx(Cv,{ref:r,className:be("text-sm text-muted-foreground",e),...t}));ls.displayName=Cv.displayName;var b3="Label",WC=h.forwardRef((e,t)=>s.jsx(Ee.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));WC.displayName=b3;var HC=WC;const w3=mc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ae=h.forwardRef(({className:e,...t},r)=>s.jsx(HC,{ref:r,className:be(w3(),e),...t}));ae.displayName=HC.displayName;var Ef="Tabs",[j3,ZB]=lr(Ef,[pf]),KC=pf(),[N3,kv]=j3(Ef),QC=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=jc(l),[f,m]=ps({prop:n,onChange:a,defaultProp:i??"",caller:Ef});return s.jsx(N3,{scope:r,baseId:Bt(),value:f,onValueChange:m,orientation:o,dir:u,activationMode:c,children:s.jsx(Ee.div,{dir:u,"data-orientation":o,...d,ref:t})})});QC.displayName=Ef;var GC="TabsList",YC=h.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=kv(GC,r),o=KC(r);return s.jsx(O_,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Ee.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});YC.displayName=GC;var XC="TabsTrigger",JC=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=kv(XC,r),l=KC(r),c=t1(o.baseId,n),d=r1(o.baseId,n),u=n===o.value;return s.jsx(D_,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(Ee.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:ge(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:ge(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:ge(e.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!a&&f&&o.onValueChange(n)})})})});JC.displayName=XC;var ZC="TabsContent",e1=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=kv(ZC,r),c=t1(l.baseId,n),d=r1(l.baseId,n),u=n===l.value,f=h.useRef(u);return h.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(Dt,{present:a||u,children:({present:m})=>s.jsx(Ee.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});e1.displayName=ZC;function t1(e,t){return`${e}-trigger-${t}`}function r1(e,t){return`${e}-content-${t}`}var _3=QC,n1=YC,s1=JC,a1=e1;const kf=_3,kc=h.forwardRef(({className:e,...t},r)=>s.jsx(n1,{ref:r,className:be("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));kc.displayName=n1.displayName;const Hr=h.forwardRef(({className:e,...t},r)=>s.jsx(s1,{ref:r,className:be("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Hr.displayName=s1.displayName;const Kr=h.forwardRef(({className:e,...t},r)=>s.jsx(a1,{ref:r,className:be("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Kr.displayName=a1.displayName;const Qa=h.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:be("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Qa.displayName="Textarea";var Pf="Popover",[i1,eq]=lr(Pf,[pa]),Pc=pa(),[S3,ba]=i1(Pf),o1=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=Pc(t),c=h.useRef(null),[d,u]=h.useState(!1),[f,m]=ps({prop:n,defaultProp:a??!1,onChange:i,caller:Pf});return s.jsx(Xg,{...l,children:s.jsx(S3,{scope:t,contentId:Bt(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:d,onCustomAnchorAdd:h.useCallback(()=>u(!0),[]),onCustomAnchorRemove:h.useCallback(()=>u(!1),[]),modal:o,children:r})})};o1.displayName=Pf;var l1="PopoverAnchor",C3=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=ba(l1,r),i=Pc(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return h.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(vc,{...i,...n,ref:t})});C3.displayName=l1;var c1="PopoverTrigger",d1=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=ba(c1,r),i=Pc(r),o=De(t,a.triggerRef),l=s.jsx(Ee.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":p1(a.open),...n,ref:o,onClick:ge(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(vc,{asChild:!0,...i,children:l})});d1.displayName=c1;var Pv="PopoverPortal",[E3,k3]=i1(Pv,{forceMount:void 0}),u1=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=ba(Pv,t);return s.jsx(E3,{scope:t,forceMount:r,children:s.jsx(Dt,{present:r||i.open,children:s.jsx(Do,{asChild:!0,container:a,children:n})})})};u1.displayName=Pv;var To="PopoverContent",f1=h.forwardRef((e,t)=>{const r=k3(To,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=ba(To,e.__scopePopover);return s.jsx(Dt,{present:n||i.open,children:i.modal?s.jsx(T3,{...a,ref:t}):s.jsx(R3,{...a,ref:t})})});f1.displayName=To;var P3=la("PopoverContent.RemoveScroll"),T3=h.forwardRef((e,t)=>{const r=ba(To,e.__scopePopover),n=h.useRef(null),a=De(t,n),i=h.useRef(!1);return h.useEffect(()=>{const o=n.current;if(o)return gf(o)},[]),s.jsx(Sc,{as:P3,allowPinchZoom:!0,children:s.jsx(h1,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ge(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ge(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),R3=h.forwardRef((e,t)=>{const r=ba(To,e.__scopePopover),n=h.useRef(!1),a=h.useRef(!1);return s.jsx(h1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),h1=h.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...f}=e,m=ba(To,r),p=Pc(r);return mf(),s.jsx(Nc,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(fi,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:s.jsx(rf,{"data-state":p1(m.open),role:"dialog",id:m.contentId,...p,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),m1="PopoverClose",I3=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=ba(m1,r);return s.jsx(Ee.button,{type:"button",...n,ref:t,onClick:ge(e.onClick,()=>a.onOpenChange(!1))})});I3.displayName=m1;var A3="PopoverArrow",O3=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Pc(r);return s.jsx(nf,{...a,...n,ref:t})});O3.displayName=A3;function p1(e){return e?"open":"closed"}var D3=o1,M3=d1,L3=u1,g1=f1;const v1=D3,y1=M3,Tv=h.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(L3,{children:s.jsx(g1,{ref:a,align:t,sideOffset:r,className:be("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Tv.displayName=g1.displayName;var kb=1,$3=.9,F3=.8,U3=.17,$h=.1,Fh=.999,B3=.9999,q3=.99,z3=/[\\\/_+.#"@\[\(\{&]/,V3=/[\\\/_+.#"@\[\(\{&]/g,W3=/[\s-]/,x1=/[\s-]/g;function Op(e,t,r,n,a,i,o){if(i===t.length)return a===e.length?kb:q3;var l=`${a},${i}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(i),d=r.indexOf(c,a),u=0,f,m,p,x;d>=0;)f=Op(e,t,r,n,d+1,i+1,o),f>u&&(d===a?f*=kb:z3.test(e.charAt(d-1))?(f*=F3,p=e.slice(a,d-1).match(V3),p&&a>0&&(f*=Math.pow(Fh,p.length))):W3.test(e.charAt(d-1))?(f*=$3,x=e.slice(a,d-1).match(x1),x&&a>0&&(f*=Math.pow(Fh,x.length))):(f*=U3,a>0&&(f*=Math.pow(Fh,d-a))),e.charAt(d)!==t.charAt(i)&&(f*=B3)),(f<$h&&r.charAt(d-1)===n.charAt(i+1)||n.charAt(i+1)===n.charAt(i)&&r.charAt(d-1)!==n.charAt(i))&&(m=Op(e,t,r,n,d+1,i+2,o),m*$h>f&&(f=m*$h)),f>u&&(u=f),d=r.indexOf(c,d+1);return o[l]=u,u}function Pb(e){return e.toLowerCase().replace(x1," ")}function H3(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,Op(e,t,Pb(e),Pb(t),0,0,{})}var al='[cmdk-group=""]',Uh='[cmdk-group-items=""]',K3='[cmdk-group-heading=""]',b1='[cmdk-item=""]',Tb=`${b1}:not([aria-disabled="true"])`,Dp="cmdk-item-select",Ai="data-value",Q3=(e,t,r)=>H3(e,t,r),w1=h.createContext(void 0),Tc=()=>h.useContext(w1),j1=h.createContext(void 0),Rv=()=>h.useContext(j1),N1=h.createContext(void 0),_1=h.forwardRef((e,t)=>{let r=Oi(()=>{var B,I;return{search:"",value:(I=(B=e.value)!=null?B:e.defaultValue)!=null?I:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=Oi(()=>new Set),a=Oi(()=>new Map),i=Oi(()=>new Map),o=Oi(()=>new Set),l=S1(e),{label:c,children:d,value:u,onValueChange:f,filter:m,shouldFilter:p,loop:x,disablePointerSelection:g=!1,vimBindings:w=!0,...v}=e,y=Bt(),b=Bt(),N=Bt(),j=h.useRef(null),C=a5();oi(()=>{if(u!==void 0){let B=u.trim();r.current.value=B,E.emit()}},[u]),oi(()=>{C(6,ee)},[]);let E=h.useMemo(()=>({subscribe:B=>(o.current.add(B),()=>o.current.delete(B)),snapshot:()=>r.current,setState:(B,I,V)=>{var Q,se,Z,R;if(!Object.is(r.current[B],I)){if(r.current[B]=I,B==="search")K(),q(),C(1,P);else if(B==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let X=document.getElementById(N);X?X.focus():(Q=document.getElementById(y))==null||Q.focus()}if(C(7,()=>{var X;r.current.selectedItemId=(X=D())==null?void 0:X.id,E.emit()}),V||C(5,ee),((se=l.current)==null?void 0:se.value)!==void 0){let X=I??"";(R=(Z=l.current).onValueChange)==null||R.call(Z,X);return}}E.emit()}},emit:()=>{o.current.forEach(B=>B())}}),[]),M=h.useMemo(()=>({value:(B,I,V)=>{var Q;I!==((Q=i.current.get(B))==null?void 0:Q.value)&&(i.current.set(B,{value:I,keywords:V}),r.current.filtered.items.set(B,H(I,V)),C(2,()=>{q(),E.emit()}))},item:(B,I)=>(n.current.add(B),I&&(a.current.has(I)?a.current.get(I).add(B):a.current.set(I,new Set([B]))),C(3,()=>{K(),q(),r.current.value||P(),E.emit()}),()=>{i.current.delete(B),n.current.delete(B),r.current.filtered.items.delete(B);let V=D();C(4,()=>{K(),(V==null?void 0:V.getAttribute("id"))===B&&P(),E.emit()})}),group:B=>(a.current.has(B)||a.current.set(B,new Set),()=>{i.current.delete(B),a.current.delete(B)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:y,inputId:N,labelId:b,listInnerRef:j}),[]);function H(B,I){var V,Q;let se=(Q=(V=l.current)==null?void 0:V.filter)!=null?Q:Q3;return B?se(B,r.current.search,I):0}function q(){if(!r.current.search||l.current.shouldFilter===!1)return;let B=r.current.filtered.items,I=[];r.current.filtered.groups.forEach(Q=>{let se=a.current.get(Q),Z=0;se.forEach(R=>{let X=B.get(R);Z=Math.max(X,Z)}),I.push([Q,Z])});let V=j.current;S().sort((Q,se)=>{var Z,R;let X=Q.getAttribute("id"),ie=se.getAttribute("id");return((Z=B.get(ie))!=null?Z:0)-((R=B.get(X))!=null?R:0)}).forEach(Q=>{let se=Q.closest(Uh);se?se.appendChild(Q.parentElement===se?Q:Q.closest(`${Uh} > *`)):V.appendChild(Q.parentElement===V?Q:Q.closest(`${Uh} > *`))}),I.sort((Q,se)=>se[1]-Q[1]).forEach(Q=>{var se;let Z=(se=j.current)==null?void 0:se.querySelector(`${al}[${Ai}="${encodeURIComponent(Q[0])}"]`);Z==null||Z.parentElement.appendChild(Z)})}function P(){let B=S().find(V=>V.getAttribute("aria-disabled")!=="true"),I=B==null?void 0:B.getAttribute(Ai);E.setState("value",I||void 0)}function K(){var B,I,V,Q;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let se=0;for(let Z of n.current){let R=(I=(B=i.current.get(Z))==null?void 0:B.value)!=null?I:"",X=(Q=(V=i.current.get(Z))==null?void 0:V.keywords)!=null?Q:[],ie=H(R,X);r.current.filtered.items.set(Z,ie),ie>0&&se++}for(let[Z,R]of a.current)for(let X of R)if(r.current.filtered.items.get(X)>0){r.current.filtered.groups.add(Z);break}r.current.filtered.count=se}function ee(){var B,I,V;let Q=D();Q&&(((B=Q.parentElement)==null?void 0:B.firstChild)===Q&&((V=(I=Q.closest(al))==null?void 0:I.querySelector(K3))==null||V.scrollIntoView({block:"nearest"})),Q.scrollIntoView({block:"nearest"}))}function D(){var B;return(B=j.current)==null?void 0:B.querySelector(`${b1}[aria-selected="true"]`)}function S(){var B;return Array.from(((B=j.current)==null?void 0:B.querySelectorAll(Tb))||[])}function A(B){let I=S()[B];I&&E.setState("value",I.getAttribute(Ai))}function O(B){var I;let V=D(),Q=S(),se=Q.findIndex(R=>R===V),Z=Q[se+B];(I=l.current)!=null&&I.loop&&(Z=se+B<0?Q[Q.length-1]:se+B===Q.length?Q[0]:Q[se+B]),Z&&E.setState("value",Z.getAttribute(Ai))}function F(B){let I=D(),V=I==null?void 0:I.closest(al),Q;for(;V&&!Q;)V=B>0?n5(V,al):s5(V,al),Q=V==null?void 0:V.querySelector(Tb);Q?E.setState("value",Q.getAttribute(Ai)):O(B)}let L=()=>A(S().length-1),J=B=>{B.preventDefault(),B.metaKey?L():B.altKey?F(1):O(1)},ce=B=>{B.preventDefault(),B.metaKey?A(0):B.altKey?F(-1):O(-1)};return h.createElement(Ee.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:B=>{var I;(I=v.onKeyDown)==null||I.call(v,B);let V=B.nativeEvent.isComposing||B.keyCode===229;if(!(B.defaultPrevented||V))switch(B.key){case"n":case"j":{w&&B.ctrlKey&&J(B);break}case"ArrowDown":{J(B);break}case"p":case"k":{w&&B.ctrlKey&&ce(B);break}case"ArrowUp":{ce(B);break}case"Home":{B.preventDefault(),A(0);break}case"End":{B.preventDefault(),L();break}case"Enter":{B.preventDefault();let Q=D();if(Q){let se=new Event(Dp);Q.dispatchEvent(se)}}}}},h.createElement("label",{"cmdk-label":"",htmlFor:M.inputId,id:M.labelId,style:o5},c),Tf(e,B=>h.createElement(j1.Provider,{value:E},h.createElement(w1.Provider,{value:M},B))))}),G3=h.forwardRef((e,t)=>{var r,n;let a=Bt(),i=h.useRef(null),o=h.useContext(N1),l=Tc(),c=S1(e),d=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:o==null?void 0:o.forceMount;oi(()=>{if(!d)return l.item(a,o==null?void 0:o.id)},[d]);let u=C1(a,i,[e.value,e.children,i],e.keywords),f=Rv(),m=ua(C=>C.value&&C.value===u.current),p=ua(C=>d||l.filter()===!1?!0:C.search?C.filtered.items.get(a)>0:!0);h.useEffect(()=>{let C=i.current;if(!(!C||e.disabled))return C.addEventListener(Dp,x),()=>C.removeEventListener(Dp,x)},[p,e.onSelect,e.disabled]);function x(){var C,E;g(),(E=(C=c.current).onSelect)==null||E.call(C,u.current)}function g(){f.setState("value",u.current,!0)}if(!p)return null;let{disabled:w,value:v,onSelect:y,forceMount:b,keywords:N,...j}=e;return h.createElement(Ee.div,{ref:ms(i,t),...j,id:a,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!m,"data-disabled":!!w,"data-selected":!!m,onPointerMove:w||l.getDisablePointerSelection()?void 0:g,onClick:w?void 0:x},e.children)}),Y3=h.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:a,...i}=e,o=Bt(),l=h.useRef(null),c=h.useRef(null),d=Bt(),u=Tc(),f=ua(p=>a||u.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);oi(()=>u.group(o),[]),C1(o,l,[e.value,e.heading,c]);let m=h.useMemo(()=>({id:o,forceMount:a}),[a]);return h.createElement(Ee.div,{ref:ms(l,t),...i,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&h.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),Tf(e,p=>h.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},h.createElement(N1.Provider,{value:m},p))))}),X3=h.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,a=h.useRef(null),i=ua(o=>!o.search);return!r&&!i?null:h.createElement(Ee.div,{ref:ms(a,t),...n,"cmdk-separator":"",role:"separator"})}),J3=h.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,a=e.value!=null,i=Rv(),o=ua(d=>d.search),l=ua(d=>d.selectedItemId),c=Tc();return h.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),h.createElement(Ee.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:d=>{a||i.setState("search",d.target.value),r==null||r(d.target.value)}})}),Z3=h.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...a}=e,i=h.useRef(null),o=h.useRef(null),l=ua(d=>d.selectedItemId),c=Tc();return h.useEffect(()=>{if(o.current&&i.current){let d=o.current,u=i.current,f,m=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let p=d.offsetHeight;u.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return m.observe(d),()=>{cancelAnimationFrame(f),m.unobserve(d)}}},[]),h.createElement(Ee.div,{ref:ms(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:c.listId},Tf(e,d=>h.createElement("div",{ref:ms(o,c.listInnerRef),"cmdk-list-sizer":""},d)))}),e5=h.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:i,container:o,...l}=e;return h.createElement(Nv,{open:r,onOpenChange:n},h.createElement(_v,{container:o},h.createElement(Sf,{"cmdk-overlay":"",className:a}),h.createElement(Cf,{"aria-label":e.label,"cmdk-dialog":"",className:i},h.createElement(_1,{ref:t,...l}))))}),t5=h.forwardRef((e,t)=>ua(r=>r.filtered.count===0)?h.createElement(Ee.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),r5=h.forwardRef((e,t)=>{let{progress:r,children:n,label:a="Loading...",...i}=e;return h.createElement(Ee.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Tf(e,o=>h.createElement("div",{"aria-hidden":!0},o)))}),wr=Object.assign(_1,{List:Z3,Item:G3,Input:J3,Group:Y3,Separator:X3,Dialog:e5,Empty:t5,Loading:r5});function n5(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function s5(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function S1(e){let t=h.useRef(e);return oi(()=>{t.current=e}),t}var oi=typeof window>"u"?h.useEffect:h.useLayoutEffect;function Oi(e){let t=h.useRef();return t.current===void 0&&(t.current=e()),t}function ua(e){let t=Rv(),r=()=>e(t.snapshot());return h.useSyncExternalStore(t.subscribe,r,r)}function C1(e,t,r,n=[]){let a=h.useRef(),i=Tc();return oi(()=>{var o;let l=(()=>{var d;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=n.map(d=>d.trim());i.value(e,l,c),(o=t.current)==null||o.setAttribute(Ai,l),a.current=l}),a}var a5=()=>{let[e,t]=h.useState(),r=Oi(()=>new Map);return oi(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,a)=>{r.current.set(n,a),t({})}};function i5(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Tf({asChild:e,children:t},r){return e&&h.isValidElement(t)?h.cloneElement(i5(t),{ref:t.ref},r(t.props.children)):r(t)}var o5={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Iv=h.forwardRef(({className:e,...t},r)=>s.jsx(wr,{ref:r,className:be("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Iv.displayName=wr.displayName;const Av=h.forwardRef(({className:e,...t},r)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(Mr,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(wr.Input,{ref:r,className:be("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Av.displayName=wr.Input.displayName;const Ov=h.forwardRef(({className:e,...t},r)=>s.jsx(wr.List,{ref:r,className:be("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));Ov.displayName=wr.List.displayName;const Dv=h.forwardRef((e,t)=>s.jsx(wr.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Dv.displayName=wr.Empty.displayName;const Mv=h.forwardRef(({className:e,...t},r)=>s.jsx(wr.Group,{ref:r,className:be("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Mv.displayName=wr.Group.displayName;const l5=h.forwardRef(({className:e,...t},r)=>s.jsx(wr.Separator,{ref:r,className:be("-mx-1 h-px bg-border",e),...t}));l5.displayName=wr.Separator.displayName;const Lv=h.forwardRef(({className:e,...t},r)=>s.jsx(wr.Item,{ref:r,className:be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));Lv.displayName=wr.Item.displayName;const hr={async getSuppliers(){try{const{data:e,error:t}=await te.from("suppliers").select("id, name").eq("is_active",!0).order("name");return t?(console.error("Error fetching suppliers:",t),[]):e||[]}catch(e){return console.error("Network error fetching suppliers:",e),[]}},async getCustodians(){try{const{data:e,error:t}=await te.from("custodians").select("id, name, custodian_no").order("name");return t?(console.error("Error fetching custodians:",t),[]):(e||[]).map(r=>({id:r.id,name:r.name,code:r.custodian_no}))}catch(e){return console.error("Network error fetching custodians:",e),[]}},async getFundSources(){const{data:e,error:t}=await te.from("fund_sources").select("id, name, code").eq("is_active",!0).order("name");return t?(console.error("Error fetching fund sources:",t),[]):e||[]},async getUsers(){const{data:e,error:t}=await te.from("user_profiles").select("id, full_name").eq("is_active",!0).order("full_name");return t?(console.error("Error fetching users:",t),[]):e||[]},async getDepartments(){const{data:e,error:t}=await te.from("departments").select("id, name, code").eq("is_active",!0).order("name");return t?(console.error("Error fetching departments:",t),[]):e||[]},async getSemiExpandableCategories(){const{data:e,error:t}=await te.from("semi_expandable_categories").select("id, name, code").eq("is_active",!0).order("name");return t?(console.error("Error fetching semi expandable categories:",t),[]):e||[]},async create(e,t){var l;const r={name:t.name},n=(l=t.code)==null?void 0:l.trim();if(e==="fund_sources"){if(!n)throw new Error("Code is required for fund sources");r.code=n}else if(e==="departments"||e==="semi_expandable_categories")n&&(r.code=n);else if(e==="custodians"){let c=n;if(!c){const{data:p,error:x}=await te.from("custodians").select("custodian_no").order("custodian_no",{ascending:!1}).limit(50);if(!x&&p){const g=p.map(v=>String(v.custodian_no||"").trim()).map(v=>v.match(/\d+/)?parseInt(v.match(/\d+/)[0],10):NaN).filter(v=>Number.isFinite(v)),w=g.length?Math.max(...g)+1:1;c=String(w).padStart(4,"0")}else c="0001"}const u=`CUST-${(c.match(/\d+/)?c.match(/\d+/)[0]:c).padStart(4,"0")}`,{data:f,error:m}=await te.from("custodians").select("id").in("custodian_no",[c,u]).limit(1);if(!m&&f&&f.length>0)throw new Error("Custodian number already exists. Please use a different number.");r.custodian_no=u}const a=e==="fund_sources"||e==="departments"||e==="semi_expandable_categories"?"id, name, code":e==="custodians"?"id, name, custodian_no":"id, name",{data:i,error:o}=await te.from(e).insert(r).select(a).single();if(o)throw o.code==="23505"?e==="custodians"?new Error("Custodian number already exists. Please use a different number."):new Error("A record with this code already exists. Please use a different code."):o.code==="23502"&&e==="departments"?new Error("Department code is optional, but your database still requires it. Please run database/make-department-code-optional.sql in Supabase."):o;return e==="custodians"?{id:i.id,name:i.name,code:i.custodian_no}:i},async update(e,t,r){var c;const n={};r.name!==void 0&&(n.name=r.name);const a=(c=r.code)==null?void 0:c.trim();if(e==="fund_sources"||e==="departments"||e==="semi_expandable_categories")r.code!==void 0&&(n.code=a??null);else if(e==="custodians"&&r.code!==void 0)if(a){const d=(a.match(/\d+/)?a.match(/\d+/)[0]:a).padStart(4,"0");n.custodian_no=`CUST-${d}`}else n.custodian_no=null;const i=e==="fund_sources"||e==="departments"||e==="semi_expandable_categories"?"id, name, code":e==="custodians"?"id, name, custodian_no":"id, name",{data:o,error:l}=await te.from(e).update(n).eq("id",t).select(i).single();if(l)throw l;return e==="custodians"?{id:o.id,name:o.name,code:o.custodian_no}:o},async remove(e,t){if(e==="departments"){const{data:n,error:a}=await te.from("custodians").select("id").eq("department_id",t).limit(1);if(a)throw a;if(n&&n.length>0)throw new Error("Cannot delete department: It is currently assigned to custodians. Please reassign the custodians to a different department first.")}if(e==="custodians"){const{data:n,error:a}=await te.from("inventory_items").select("id").eq("custodian_id",t).limit(1);if(a)throw a;if(n&&n.length>0)throw new Error("Cannot delete custodian: They are assigned to inventory items. Please reassign the items first.")}const{error:r}=await te.from(e).delete().eq("id",t);if(r)throw r;return!0}};class xd{static async generateNextPropertyNumber(t){const n=new Date().getFullYear().toString(),a=t==="Small Value Expendable"?"SPLV":"SPHV",i=`${a}-${n}-`;console.log(`Generating property number for ${t}:`,{prefix:a,year:n,searchPattern:i});try{const{data:o,error:l}=await te.from("inventory_items").select("property_number").like("property_number",`${i}%`).order("property_number",{ascending:!1});if(console.log("Database query result:",{data:o,error:l}),l){console.error("Error fetching property numbers:",l);const p=`${i}0001`;return console.log("Using fallback number:",p),p}if(!o||o.length===0){const p=`${i}0001`;return console.log("No existing numbers found, using first number:",p),p}let c=0;for(const p of o){const x=p.property_number;if(x.startsWith(i)){const g=x.split("-");if(g.length===3){const w=g[2],v=parseInt(w,10);!isNaN(v)&&v>c&&(c=v)}}}const d=c+1,u=d.toString().padStart(4,"0"),f=`${i}${u}`;if(console.log("Generated next number:",f,{highestSequence:c,nextSequence:d,totalExisting:o.length}),o.find(p=>p.property_number===f)){console.warn("Generated number already exists, trying next sequence");const x=(d+1).toString().padStart(4,"0"),g=`${i}${x}`;return console.log("Using next available number:",g),g}return f}catch(o){console.error("Error generating property number:",o);const l=`${i}0001`;return console.log("Using fallback number due to error:",l),l}}static parsePropertyNumber(t){const r=t.split("-");if(r.length===3){const[n,a,i]=r;return n!=="SPLV"&&n!=="SPHV"||!/^\d{4}$/.test(a)||!/^\d{4}$/.test(i)?null:{prefix:n,year:a,sequenceNumber:i,fullNumber:t}}if(r.length===4){const[n,a,i,o]=r;return n!=="SPLV"&&n!=="SPHV"||!/^\d{4}$/.test(a)||!/^(0[1-9]|1[0-2])$/.test(i)||!/^\d{4}$/.test(o)?null:{prefix:n,year:a,sequenceNumber:o,fullNumber:t}}return null}static getPrefixForSubCategory(t){return t==="Small Value Expendable"?"SPLV":"SPHV"}static isValidPropertyNumber(t){return this.parsePropertyNumber(t)!==null}static async checkPropertyNumberExists(t){try{const{data:r,error:n}=await te.from("inventory_items").select("id").eq("property_number",t).limit(1);return n?(console.error("Error checking property number existence:",n),!1):r&&r.length>0}catch(r){return console.error("Error checking property number existence:",r),!1}}static async generateUniquePropertyNumber(t){let r=0;const n=10;for(;r<n;){const a=await this.generateNextPropertyNumber(t);if(!await this.checkPropertyNumberExists(a))return console.log(`Generated unique property number: ${a} (attempt ${r+1})`),a;console.warn(`Property number ${a} already exists, trying next sequence`),r++}throw new Error(`Unable to generate unique property number after ${n} attempts`)}}function c5(e){const t=e.toLowerCase();return t.includes("server")||t.includes("computer")||t.includes("workstation")?{years:5,confidence:"high",reasoning:"IT equipment typically lasts 5 years"}:t.includes("vehicle")||t.includes("car")||t.includes("truck")?{years:8,confidence:"high",reasoning:"Vehicles typically last 8 years"}:t.includes("furniture")||t.includes("desk")||t.includes("chair")||t.includes("cabinet")?{years:10,confidence:"high",reasoning:"Furniture typically lasts 10 years"}:t.includes("air conditioning")||t.includes("hvac")||t.includes("cooling")?{years:15,confidence:"high",reasoning:"HVAC systems typically last 15 years"}:t.includes("generator")||t.includes("backup power")?{years:20,confidence:"high",reasoning:"Generators typically last 20 years"}:t.includes("refrigerator")||t.includes("freezer")?{years:12,confidence:"high",reasoning:"Refrigeration equipment typically lasts 12 years"}:t.includes("printer")||t.includes("copier")||t.includes("scanner")?{years:7,confidence:"medium",reasoning:"Office equipment typically lasts 7 years"}:t.includes("monitor")||t.includes("display")||t.includes("screen")?{years:5,confidence:"medium",reasoning:"Displays typically last 5 years"}:t.includes("laptop")||t.includes("notebook")?{years:4,confidence:"high",reasoning:"Laptops typically last 4 years"}:t.includes("tablet")||t.includes("ipad")?{years:3,confidence:"medium",reasoning:"Tablets typically last 3 years"}:t.includes("drill")||t.includes("saw")||t.includes("tool")?{years:8,confidence:"medium",reasoning:"Power tools typically last 8 years"}:t.includes("camera")||t.includes("video")||t.includes("recording")?{years:6,confidence:"medium",reasoning:"A/V equipment typically lasts 6 years"}:t.includes("fire")||t.includes("safety")||t.includes("alarm")?{years:10,confidence:"high",reasoning:"Safety equipment typically lasts 10 years"}:t.includes("paper")||t.includes("pen")||t.includes("supply")?{years:1,confidence:"low",reasoning:"Consumables typically last 1 year"}:{years:5,confidence:"low",reasoning:"Default estimate based on general equipment"}}function d5(e,t){let r=0,n="";return e>=1e5?(r=2,n="High-value items typically last longer"):e>=5e4?(r=1,n="Medium-high value items may last longer"):e>=1e4?(r=0,n="Standard value items"):e>=1e3?(r=-1,n="Lower value items may have shorter life"):(r=-2,n="Low value items typically have shorter life"),{years:Math.max(1,t+r),confidence:e>=1e4?"high":e>=1e3?"medium":"low",reasoning:n}}function u5(e){return{years:{"IT Equipment":5,Furniture:10,Vehicles:8,Machinery:15,Electronics:4,Tools:8,Appliances:12,"Safety Equipment":10,"Office Equipment":7,"Building Equipment":20}[e||""]||5,confidence:"medium",reasoning:`Category-based estimate for ${e||"unknown category"}`}}function f5(e){if(e.manualOverride&&e.manualOverride>0)return{years:e.manualOverride,months:Math.round(e.manualOverride*12),method:"manual",confidence:"high",reasoning:"Manual override provided by user"};const t=c5(e.description),r=d5(e.cost,t.years||5);if(t.confidence==="high"){const a=r.years||t.years||5;return{years:a,months:Math.round(a*12),method:"intelligent",confidence:r.confidence||"high",reasoning:`${t.reasoning}. ${r.reasoning}`}}if(e.category){const a=u5(e.category),i=r.years||a.years||5;return{years:i,months:Math.round(i*12),method:"category_fallback",confidence:r.confidence||"medium",reasoning:`${a.reasoning}. ${r.reasoning}`}}const n=r.years||5;return{years:n,months:Math.round(n*12),method:"intelligent",confidence:"low",reasoning:`Default estimate based on cost analysis. ${r.reasoning}`}}function h5(e){const t={intelligent:"AI Analysis",manual:"Manual Override",category_fallback:"Category-Based"},r={high:"High Confidence",medium:"Medium Confidence",low:"Low Confidence"};return`${e.years} years (${e.months} months) - ${t[e.method]} - ${r[e.confidence]}`}function m5(e){if(!e||e.trim()==="")return{valid:!0};const t=parseFloat(e);return isNaN(t)?{valid:!1,error:"Must be a valid number"}:t<=0?{valid:!1,error:"Must be greater than 0"}:t>50?{valid:!1,error:"Must be 50 years or less"}:{valid:!0,years:t}}var Rf="Checkbox",[p5,tq]=lr(Rf),[g5,$v]=p5(Rf);function v5(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:f}=e,[m,p]=ps({prop:r,defaultProp:a??!1,onChange:c,caller:Rf}),[x,g]=h.useState(null),[w,v]=h.useState(null),y=h.useRef(!1),b=x?!!o||!!x.closest("form"):!0,N={checked:m,disabled:i,setChecked:p,control:x,setControl:g,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:y,required:d,defaultChecked:aa(a)?!1:a,isFormControl:b,bubbleInput:w,setBubbleInput:v};return s.jsx(g5,{scope:t,...N,children:y5(f)?f(N):n})}var E1="CheckboxTrigger",k1=h.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:x}=$v(E1,e),g=De(a,u),w=h.useRef(c);return h.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const y=()=>f(w.current);return v.addEventListener("reset",y),()=>v.removeEventListener("reset",y)}},[i,f]),s.jsx(Ee.button,{type:"button",role:"checkbox","aria-checked":aa(c)?"mixed":c,"aria-required":d,"data-state":A1(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:g,onKeyDown:ge(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:ge(r,v=>{f(y=>aa(y)?!0:!y),x&&p&&(m.current=v.isPropagationStopped(),m.current||v.stopPropagation())})})});k1.displayName=E1;var Fv=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...f}=e;return s.jsx(v5,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:m})=>s.jsxs(s.Fragment,{children:[s.jsx(k1,{...f,ref:t,__scopeCheckbox:r}),m&&s.jsx(I1,{__scopeCheckbox:r})]})})});Fv.displayName=Rf;var P1="CheckboxIndicator",T1=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=$v(P1,r);return s.jsx(Dt,{present:n||aa(i.checked)||i.checked===!0,children:s.jsx(Ee.span,{"data-state":A1(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});T1.displayName=P1;var R1="CheckboxBubbleInput",I1=h.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:f,bubbleInput:m,setBubbleInput:p}=$v(R1,e),x=De(r,p),g=BS(i),w=hN(n);h.useEffect(()=>{const y=m;if(!y)return;const b=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(b,"checked").set,C=!a.current;if(g!==i&&j){const E=new Event("click",{bubbles:C});y.indeterminate=aa(i),j.call(y,aa(i)?!1:i),y.dispatchEvent(E)}},[m,g,i,a]);const v=h.useRef(aa(i)?!1:i);return s.jsx(Ee.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??v.current,required:l,disabled:c,name:d,value:u,form:f,...t,tabIndex:-1,ref:x,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});I1.displayName=R1;function y5(e){return typeof e=="function"}function aa(e){return e==="indeterminate"}function A1(e){return aa(e)?"indeterminate":e?"checked":"unchecked"}const Rc=h.forwardRef(({className:e,...t},r)=>s.jsx(Fv,{ref:r,className:be("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(T1,{className:be("flex items-center justify-center text-current"),children:s.jsx(Fn,{className:"h-4 w-4"})})}));Rc.displayName=Fv.displayName;const x5=({item:e,onSave:t,onCancel:r,isSaving:n=!1})=>{var Q,se,Z;const[a,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(!0),[m,p]=h.useState({type:null}),[x,g]=h.useState({name:""}),[w,v]=h.useState(((Q=e==null?void 0:e.estimatedUsefulLifeOverride)==null?void 0:Q.toString())||""),[y,b]=h.useState(null),[N,j]=h.useState(""),[C,E]=h.useState(!1),[M,H]=h.useState(""),[q,P]=h.useState(""),[K,ee]=h.useState(!1),D=async()=>{if(!x.name.trim()||!m.type)return;const R={supplier:"suppliers",fundSource:"fund_sources"},X=await hr.create(R[m.type],x);m.type==="supplier"&&i([X,...a]),m.type==="fundSource"&&l([X,...o]),g({name:""}),p({type:null})},[S,A]=h.useState({propertyNumber:(e==null?void 0:e.propertyNumber)||"",description:(e==null?void 0:e.description)||"",brand:(e==null?void 0:e.brand)||"",model:(e==null?void 0:e.model)||"",serialNumber:(e==null?void 0:e.serialNumber)||"",unitOfMeasure:(e==null?void 0:e.unitOfMeasure)||"piece",quantity:(e==null?void 0:e.quantity)||1,unitCost:(e==null?void 0:e.unitCost)||void 0,dateAcquired:(e==null?void 0:e.dateAcquired)||new Date().toISOString().split("T")[0],supplier:(e==null?void 0:e.supplier)||"",condition:(e==null?void 0:e.condition)||"Serviceable",fundSource:(e==null?void 0:e.fundSource)||"",remarks:(e==null?void 0:e.remarks)||"",semiExpandableCategory:(e==null?void 0:e.semiExpandableCategory)||"",subCategory:(e==null?void 0:e.subCategory)||void 0,status:(e==null?void 0:e.status)||"Active",lastInventoryDate:(e==null?void 0:e.lastInventoryDate)||"",entityName:(e==null?void 0:e.entityName)||"PROVINCIAL GOVERNMENT OF APAYAO"}),O=h.useMemo(()=>{var X,ie,T;return[(X=S.brand)==null?void 0:X.trim(),(ie=S.model)==null?void 0:ie.trim(),(T=S.serialNumber)==null?void 0:T.trim()].filter(Boolean).join(" ")},[S.brand,S.model,S.serialNumber]),F=R=>{if(R!=null)return R<=5e3?"Small Value Expendable":"High Value Expendable"};h.useEffect(()=>{if(e!=null&&e.propertyNumber&&!q){const R=e.propertyNumber.split("-");(R[0]==="SPLV"||R[0]==="SPHV")&&P(R[0])}},[e==null?void 0:e.propertyNumber,q]);const L=async R=>{console.log("generatePropertyNumber called with subCategory:",R);const X=xd.getPrefixForSubCategory(R);P(X);try{const ie=await xd.generateUniquePropertyNumber(R);console.log("Generated unique property number:",ie),A(T=>({...T,propertyNumber:ie})),console.log("Updated formData with property number:",ie)}catch(ie){console.error("Error generating unique property number:",ie);try{const T=await xd.generateNextPropertyNumber(R);console.log("Generated fallback property number:",T),A(Y=>({...Y,propertyNumber:T}))}catch(T){console.error("Fallback generation also failed:",T);const Y=new Date,le=Y.getFullYear().toString(),Pe=(Y.getMonth()+1).toString().padStart(2,"0"),re=`${X}-${le}-${Pe}-0001`;console.log("Using final fallback number:",re),A(Se=>({...Se,propertyNumber:re}))}}};h.useEffect(()=>{if(S.unitCost!==void 0&&S.unitCost!==null&&S.unitCost>=.01){const R=F(S.unitCost);R&&A(X=>X.subCategory!==R?(console.log("Auto-determining sub-category:",R,"from unit cost:",S.unitCost),L(R),{...X,subCategory:R}):X)}else(S.unitCost===void 0||S.unitCost===null)&&A(R=>R.subCategory?(P(""),{...R,subCategory:void 0,propertyNumber:""}):R)},[S.unitCost]);const J=R=>{if(!R)return"";const X=R.split("-");if(X.length!==4)return R;const[ie,T,Y,le]=X;return ie!=="SPLV"&&ie!=="SPHV"?q?`${q}-${T}-${Y}-${le}`:R:q&&ie!==q?`${q}-${T}-${Y}-${le}`:R},ce=R=>{const X=J(R);A(ie=>({...ie,propertyNumber:X}))},B=h.useMemo(()=>{const R=S.unitCost;return R==null?{isValid:!0,message:""}:R<.01?{isValid:!1,message:"Unit cost must be at least 0.01"}:{isValid:!0,message:""}},[S.unitCost]);h.useEffect(()=>{(async()=>{try{const[X,ie,T]=await Promise.all([hr.getSuppliers(),hr.getFundSources(),hr.getSemiExpandableCategories()]);i(X),l(ie),d(T)}catch(X){console.error("Error loading lookup data:",X)}finally{f(!1)}})()},[]),h.useEffect(()=>{if(S.description&&S.unitCost!==void 0){const R=f5({description:S.description,cost:S.unitCost,category:"Semi-Expendable",manualOverride:w?parseFloat(w):void 0});b(R)}},[S.description,S.unitCost,w]);const I=R=>{v(R);const X=m5(R);j(X.error||"")},V=R=>{if(R.preventDefault(),!S.semiExpandableCategory){j("Please select a Semi-Expendable Category");return}if(!S.unitCost||S.unitCost<.01){j("Please enter a valid unit cost (minimum 0.01)");return}if(!S.subCategory){const ie=F(S.unitCost);if(ie){A(T=>({...T,subCategory:ie})),j("Please wait for property number to be generated..."),L(ie).then(()=>{setTimeout(()=>{const T={id:(e==null?void 0:e.id)||`INV-${Date.now()}`,...S,subCategory:ie,totalCost:(S.quantity||0)*(S.unitCost||0),estimatedUsefulLifeOverride:w?parseFloat(w):null,createdAt:(e==null?void 0:e.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};t(T,K)},500)});return}j("Unable to determine sub-category. Please check unit cost.");return}if(!B.isValid){j(B.message);return}if(!S.propertyNumber){j("Property number is required. Please wait for it to be generated or enter manually.");return}j("");const X={id:(e==null?void 0:e.id)||`INV-${Date.now()}`,...S,totalCost:(S.quantity||0)*(S.unitCost||0),estimatedUsefulLifeOverride:w?parseFloat(w):null,createdAt:(e==null?void 0:e.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};t(X,K)};return u?s.jsx(je,{className:"max-w-4xl mx-auto",children:s.jsx(Ne,{className:"p-8 text-center",children:s.jsx("div",{className:"text-muted-foreground",children:"Loading form data..."})})}):s.jsxs(s.Fragment,{children:[s.jsxs(je,{className:"max-w-4xl mx-auto",children:[s.jsx(Ie,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsx(Oe,{children:e?"Edit Inventory Item":"Add New Inventory Item"})})}),s.jsx(Ne,{children:s.jsxs("form",{onSubmit:V,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-sm font-bold",children:"1"}),s.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Category Selection"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"semiExpandableCategory",className:"text-sm font-medium",children:"Semi-Expendable Category *"}),s.jsxs(v1,{open:C,onOpenChange:E,children:[s.jsx(y1,{asChild:!0,children:s.jsxs(ne,{variant:"outline",role:"combobox","aria-expanded":C,className:"w-full justify-between h-auto min-h-10 py-2 bg-white",children:[s.jsx("span",{className:"truncate text-left flex-1 mr-2",children:S.semiExpandableCategory?((se=c.find(R=>R.name===S.semiExpandableCategory))==null?void 0:se.name)||S.semiExpandableCategory:"Select category..."}),s.jsx(zj,{className:"h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(Tv,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:s.jsxs(Iv,{children:[s.jsx(Av,{placeholder:"Search categories...",value:M,onValueChange:H}),s.jsxs(Ov,{children:[s.jsx(Dv,{children:"No category found."}),s.jsx(Mv,{children:c.filter(R=>M===""||R.name.toLowerCase().includes(M.toLowerCase())).map(R=>s.jsxs(Lv,{value:R.name,onSelect:()=>{A({...S,semiExpandableCategory:R.name}),E(!1),H("")},children:[s.jsx(Fn,{className:be("mr-2 h-4 w-4",S.semiExpandableCategory===R.name?"opacity-100":"opacity-0")}),R.name]},R.id))})]})]})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Search and select the appropriate semi-expendable category"})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-green-600 text-white flex items-center justify-center text-sm font-bold",children:"2"}),s.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Item Identification"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"brand",children:"Brand"}),s.jsx(we,{id:"brand",value:S.brand,onChange:R=>A({...S,brand:R.target.value}),placeholder:"e.g., Dell, HP, Apple"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"model",children:"Model"}),s.jsx(we,{id:"model",value:S.model,onChange:R=>A({...S,model:R.target.value}),placeholder:"e.g., OptiPlex 7090"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"serialNumber",children:"Serial Number"}),s.jsx(we,{id:"serialNumber",value:S.serialNumber,onChange:R=>A({...S,serialNumber:R.target.value}),placeholder:"e.g., DL12345678"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"description",children:"Description (auto-generated) *"}),s.jsx(we,{id:"description",value:O,disabled:!0,placeholder:"Auto-generated from Brand, Model, Serial Number",className:"bg-muted"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Description is automatically generated from Brand, Model, and Serial Number fields above"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"entityName",children:"Entity Name *"}),s.jsx(we,{id:"entityName",value:S.entityName||"",onChange:R=>A({...S,entityName:R.target.value}),placeholder:"PROVINCIAL GOVERNMENT OF APAYAO",required:!0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended: PROVINCIAL GOVERNMENT OF APAYAO - This will be used as the entity name when creating property cards"})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-600 text-white flex items-center justify-center text-sm font-bold",children:"3"}),s.jsx("h3",{className:"text-lg font-semibold text-yellow-900",children:"Financial Information"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"quantity",children:"Quantity *"}),s.jsx(we,{id:"quantity",type:"number",min:"1",value:S.quantity,onChange:R=>A({...S,quantity:parseInt(R.target.value)||1}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"unitOfMeasure",children:"Unit of Measure *"}),s.jsxs(ct,{value:S.unitOfMeasure,onValueChange:R=>A({...S,unitOfMeasure:R}),children:[s.jsx(at,{children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"piece",children:"Piece"}),s.jsx(pe,{value:"set",children:"Set"}),s.jsx(pe,{value:"unit",children:"Unit"}),s.jsx(pe,{value:"lot",children:"Lot"}),s.jsx(pe,{value:"pair",children:"Pair"}),s.jsx(pe,{value:"dozen",children:"Dozen"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"unitCost",children:"Unit Cost *"}),s.jsx(we,{id:"unitCost",type:"number",step:"0.01",min:"0.01",value:S.unitCost||"",onChange:R=>{const X=parseFloat(R.target.value);isNaN(X)?A({...S,unitCost:void 0}):A({...S,unitCost:X})},onBlur:R=>{const X=parseFloat(R.target.value);(!X||X<=0)&&A({...S,unitCost:.01})},required:!0,placeholder:"Enter amount (minimum 0.01)",className:B.isValid?"":"border-red-500"}),!B.isValid&&s.jsx("div",{className:"text-sm text-red-600",children:B.message}),S.unitCost!==void 0&&S.unitCost!==null&&S.unitCost>=.01&&s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:`px-2 py-1 rounded ${S.unitCost<=5e3?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:S.unitCost<=5e3?" Small Value (SPLV)":" High Value (SPHV)"}),s.jsx("span",{className:"text-muted-foreground",children:"Sub-category and property number will be auto-generated"})]}),(!S.unitCost||S.unitCost<.01)&&s.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Enter unit cost to automatically determine sub-category and generate property number"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{children:"Total Cost"}),s.jsxs("div",{className:"px-3 py-2 bg-muted rounded-md text-sm font-medium",children:["",((S.quantity||0)*(S.unitCost||0)).toFixed(2)]})]})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-purple-50 to-purple-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center text-sm font-bold",children:"4"}),s.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Property Details"}),s.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:"(Auto-determined from unit cost)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"subCategory",className:"text-sm font-medium",children:"Sub-Category"}),s.jsx("div",{className:`px-4 py-3 rounded-md text-sm font-medium flex items-center justify-between ${S.subCategory==="High Value Expendable"?"bg-blue-100 text-blue-800 border-2 border-blue-300":S.subCategory==="Small Value Expendable"?"bg-green-100 text-green-800 border-2 border-green-300":"bg-muted text-muted-foreground border-2 border-gray-200"}`,children:S.subCategory?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:S.subCategory==="High Value Expendable"?"":""}),s.jsx("span",{children:S.subCategory==="Small Value Expendable"?"Small Value Expendable (SPLV)":"High Value Expendable (SPHV)"})]}):s.jsx("span",{children:"Enter unit cost above to determine"})}),S.unitCost!==void 0&&S.unitCost!==null&&S.unitCost>=.01&&s.jsx("p",{className:"text-xs text-muted-foreground",children:S.unitCost<=5e3?" Determined as Small Value ( 5,000)":" Determined as High Value (> 5,000)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ae,{htmlFor:"propertyNumber",className:"text-sm font-medium",children:"Property Number *"}),S.subCategory&&s.jsx(ne,{type:"button",variant:"outline",size:"sm",onClick:()=>{S.subCategory&&L(S.subCategory)},className:"text-xs h-7",children:" Regenerate"})]}),s.jsx(we,{id:"propertyNumber",value:S.propertyNumber,onChange:R=>ce(R.target.value),required:!0,placeholder:S.subCategory?"Auto-generated from unit cost":"Enter unit cost to generate",className:S.subCategory?"bg-green-50 border-green-300 font-mono":"bg-muted"}),S.subCategory&&s.jsxs("p",{className:"text-xs text-green-700",children:[" Format: ",xd.getPrefixForSubCategory(S.subCategory),"-YYYY-MM-NNNN"]})]})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-orange-50 to-orange-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-600 text-white flex items-center justify-center text-sm font-bold",children:"5"}),s.jsx("h3",{className:"text-lg font-semibold text-orange-900",children:"Acquisition Details"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"dateAcquired",children:"Date Acquired *"}),s.jsx(we,{id:"dateAcquired",type:"date",value:S.dateAcquired,onChange:R=>A({...S,dateAcquired:R.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"supplier",children:"Supplier"}),s.jsxs(ct,{value:S.supplier,onValueChange:R=>A({...S,supplier:R}),children:[s.jsx(at,{children:s.jsx(dt,{placeholder:"Select supplier"})}),s.jsxs(it,{children:[a.map(R=>s.jsx(pe,{value:R.id,children:R.name},R.id)),s.jsx("div",{className:"p-2",children:s.jsx(ne,{type:"button",variant:"outline",size:"sm",onClick:()=>p({type:"supplier"}),children:"+ Add supplier"})})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"fundSource",children:"Fund Source"}),s.jsxs(ct,{value:S.fundSource,onValueChange:R=>A({...S,fundSource:R}),children:[s.jsx(at,{children:s.jsx(dt,{placeholder:"Select fund source"})}),s.jsxs(it,{children:[o.map(R=>s.jsx(pe,{value:R.id,children:R.name},R.id)),s.jsx("div",{className:"p-2",children:s.jsx(ne,{type:"button",variant:"outline",size:"sm",onClick:()=>p({type:"fundSource"}),children:"+ Add fund source"})})]})]})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-red-50 to-red-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-red-600 text-white flex items-center justify-center text-sm font-bold",children:"6"}),s.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Status and Condition"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"condition",children:"Condition *"}),s.jsxs(ct,{value:S.condition,onValueChange:R=>A({...S,condition:R}),children:[s.jsx(at,{children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"Serviceable",children:"Serviceable"}),s.jsx(pe,{value:"Unserviceable",children:"Unserviceable"}),s.jsx(pe,{value:"For Repair",children:"For Repair"}),s.jsx(pe,{value:"Lost",children:"Lost"}),s.jsx(pe,{value:"Stolen",children:"Stolen"}),s.jsx(pe,{value:"Damaged",children:"Damaged"}),s.jsx(pe,{value:"Destroyed",children:"Destroyed"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"status",children:"Status *"}),s.jsxs(ct,{value:S.status,onValueChange:R=>A({...S,status:R}),children:[s.jsx(at,{children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"Active",children:"Active"}),s.jsx(pe,{value:"Transferred",children:"Transferred"}),s.jsx(pe,{value:"Disposed",children:"Disposed"}),s.jsx(pe,{value:"Missing",children:"Missing"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"lastInventoryDate",children:"Last Inventory Date"}),s.jsx(we,{id:"lastInventoryDate",type:"date",value:S.lastInventoryDate,onChange:R=>A({...S,lastInventoryDate:R.target.value})})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-gray-50 to-gray-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 text-white flex items-center justify-center text-sm font-bold",children:"7"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Additional Information"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"remarks",children:"Remarks"}),s.jsx(Qa,{id:"remarks",value:S.remarks,onChange:R=>A({...S,remarks:R.target.value}),rows:3,placeholder:"Additional notes or comments about this item"})]})]}),!e&&s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-teal-50 to-teal-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-teal-600 text-white flex items-center justify-center text-sm font-bold",children:"8"}),s.jsx("h3",{className:"text-lg font-semibold text-teal-900",children:"Property Card Creation"})]}),s.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-background rounded-md border",children:[s.jsx(Rc,{id:"autoCreatePropertyCard",checked:K,onCheckedChange:R=>ee(R===!0)}),s.jsxs("div",{className:"space-y-1 flex-1",children:[s.jsx(ae,{htmlFor:"autoCreatePropertyCard",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Automatically create property card"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"If checked, a property card will be created automatically using the entity name and fund source from this inventory item. You can still edit the property card later if needed."}),K&&s.jsxs("div",{className:"mt-2 p-2 bg-teal-50 rounded text-xs",children:[s.jsx("p",{className:"font-medium text-teal-800",children:"Property card will be created with:"}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1 text-teal-700",children:[s.jsxs("li",{children:["Entity Name: ",S.entityName||"PROVINCIAL GOVERNMENT OF APAYAO"]}),s.jsxs("li",{children:["Fund Cluster: ",S.fundSource?((Z=o.find(R=>R.id===S.fundSource))==null?void 0:Z.name)||"From selected fund source":"General Fund (default)"]}),s.jsxs("li",{children:["Property Number: ",S.propertyNumber||"Will use generated number"]})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-indigo-50 to-indigo-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center text-sm font-bold",children:e?"8":"9"}),s.jsx("h3",{className:"text-lg font-semibold text-indigo-900",children:"Estimated Useful Life"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Intelligent calculation based on description and cost, with manual override option"}),y&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-background rounded-md border",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:[y.years," years (",y.months," months)"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:h5(y)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-green-600",children:y.method==="manual"?"Manual Override":y.method==="intelligent"?"AI Analysis":"Category-Based"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[y.confidence," confidence"]})]})]}),y.reasoning&&s.jsxs("div",{className:"text-xs text-muted-foreground p-2 bg-muted rounded",children:[s.jsx("strong",{children:"Reasoning:"})," ",y.reasoning]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:"estimatedLifeOverride",children:"Manual Override (Optional)"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(we,{id:"estimatedLifeOverride",type:"number",step:"0.1",min:"0.1",max:"50",value:w,onChange:R=>I(R.target.value),placeholder:"Enter years (e.g., 5.5)",className:N?"border-red-500":""}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"years"})]}),N&&s.jsx("div",{className:"text-sm text-red-600",children:N}),!N&&w&&s.jsx("div",{className:"text-sm text-green-600",children:" Manual override will be used instead of intelligent calculation"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(ne,{type:"button",variant:"outline",onClick:r,disabled:n,children:"Cancel"}),s.jsx(ne,{type:"submit",disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),e?"Updating...":"Adding..."]}):e?"Update Item":"Add Item"})]})]})})]}),s.jsx(Tr,{open:!!m.type,onOpenChange:()=>p({type:null}),children:s.jsxs(vr,{children:[s.jsx(Ar,{children:s.jsxs(Or,{children:["Add ",m.type==="supplier"?"Supplier":"Fund Source"]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[s.jsx(we,{placeholder:"Name",value:x.name,onChange:R=>g({...x,name:R.target.value})}),s.jsx(we,{placeholder:"Code (optional)",value:x.code||"",onChange:R=>g({...x,code:R.target.value})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ne,{variant:"outline",onClick:()=>p({type:null}),children:"Cancel"}),s.jsx(ne,{onClick:D,disabled:!x.name.trim(),children:"Save"})]})]})})]})};var O1="AlertDialog",[b5,rq]=lr(O1,[CC]),bs=CC(),D1=e=>{const{__scopeAlertDialog:t,...r}=e,n=bs(t);return s.jsx(Nv,{...n,...r,modal:!0})};D1.displayName=O1;var w5="AlertDialogTrigger",j5=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=bs(r);return s.jsx(qC,{...a,...n,ref:t})});j5.displayName=w5;var N5="AlertDialogPortal",M1=e=>{const{__scopeAlertDialog:t,...r}=e,n=bs(t);return s.jsx(_v,{...n,...r})};M1.displayName=N5;var _5="AlertDialogOverlay",L1=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=bs(r);return s.jsx(Sf,{...a,...n,ref:t})});L1.displayName=_5;var no="AlertDialogContent",[S5,C5]=b5(no),E5=hj("AlertDialogContent"),$1=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=bs(r),o=h.useRef(null),l=De(t,o),c=h.useRef(null);return s.jsx(m3,{contentName:no,titleName:F1,docsSlug:"alert-dialog",children:s.jsx(S5,{scope:r,cancelRef:c,children:s.jsxs(Cf,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:ge(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(E5,{children:n}),s.jsx(P5,{contentRef:o})]})})})});$1.displayName=no;var F1="AlertDialogTitle",U1=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=bs(r);return s.jsx(Sv,{...a,...n,ref:t})});U1.displayName=F1;var B1="AlertDialogDescription",q1=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=bs(r);return s.jsx(Cv,{...a,...n,ref:t})});q1.displayName=B1;var k5="AlertDialogAction",z1=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=bs(r);return s.jsx(Ev,{...a,...n,ref:t})});z1.displayName=k5;var V1="AlertDialogCancel",W1=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=C5(V1,r),i=bs(r),o=De(t,a);return s.jsx(Ev,{...i,...n,ref:o})});W1.displayName=V1;var P5=({contentRef:e})=>{const t=`\`${no}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${no}\` by passing a \`${B1}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${no}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return h.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},T5=D1,R5=M1,H1=L1,K1=$1,Q1=z1,G1=W1,Y1=U1,X1=q1;const I5=T5,A5=R5,J1=h.forwardRef(({className:e,...t},r)=>s.jsx(H1,{className:be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));J1.displayName=H1.displayName;const Z1=h.forwardRef(({className:e,...t},r)=>s.jsxs(A5,{children:[s.jsx(J1,{}),s.jsx(K1,{ref:r,className:be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Z1.displayName=K1.displayName;const eE=({className:e,...t})=>s.jsx("div",{className:be("flex flex-col space-y-2 text-center sm:text-left",e),...t});eE.displayName="AlertDialogHeader";const tE=({className:e,...t})=>s.jsx("div",{className:be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});tE.displayName="AlertDialogFooter";const rE=h.forwardRef(({className:e,...t},r)=>s.jsx(Y1,{ref:r,className:be("text-lg font-semibold",e),...t}));rE.displayName=Y1.displayName;const nE=h.forwardRef(({className:e,...t},r)=>s.jsx(X1,{ref:r,className:be("text-sm text-muted-foreground",e),...t}));nE.displayName=X1.displayName;const sE=h.forwardRef(({className:e,...t},r)=>s.jsx(Q1,{ref:r,className:be(uv(),e),...t}));sE.displayName=Q1.displayName;const aE=h.forwardRef(({className:e,...t},r)=>s.jsx(G1,{ref:r,className:be(uv({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));aE.displayName=G1.displayName;function wn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function li(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const iE=6048e5,O5=864e5;let D5={};function If(){return D5}function rc(e,t){var l,c,d,u;const r=If(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=wn(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function ku(e){return rc(e,{weekStartsOn:1})}function oE(e){const t=wn(e),r=t.getFullYear(),n=li(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=ku(n),i=li(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=ku(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Rb(e){const t=wn(e);return t.setHours(0,0,0,0),t}function Ib(e){const t=wn(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function M5(e,t){const r=Rb(e),n=Rb(t),a=+r-Ib(r),i=+n-Ib(n);return Math.round((a-i)/O5)}function L5(e){const t=oE(e),r=li(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ku(r)}function $5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function F5(e){if(!$5(e)&&typeof e!="number")return!1;const t=wn(e);return!isNaN(Number(t))}function U5(e){const t=wn(e),r=li(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const B5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},q5=(e,t,r)=>{let n;const a=B5[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Bh(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const z5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},V5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},W5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},H5={date:Bh({formats:z5,defaultWidth:"full"}),time:Bh({formats:V5,defaultWidth:"full"}),dateTime:Bh({formats:W5,defaultWidth:"full"})},K5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Q5=(e,t,r,n)=>K5[e];function il(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const G5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Y5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},X5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},J5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Z5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},eU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},tU=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},rU={ordinalNumber:tU,era:il({values:G5,defaultWidth:"wide"}),quarter:il({values:Y5,defaultWidth:"wide",argumentCallback:e=>e-1}),month:il({values:X5,defaultWidth:"wide"}),day:il({values:J5,defaultWidth:"wide"}),dayPeriod:il({values:Z5,defaultWidth:"wide",formattingValues:eU,defaultFormattingWidth:"wide"})};function ol(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?sU(l,f=>f.test(o)):nU(l,f=>f.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function nU(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function sU(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function aU(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const iU=/^(\d+)(th|st|nd|rd)?/i,oU=/\d+/i,lU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cU={any:[/^b/i,/^(a|c)/i]},dU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},uU={any:[/1/i,/2/i,/3/i,/4/i]},fU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yU={ordinalNumber:aU({matchPattern:iU,parsePattern:oU,valueCallback:e=>parseInt(e,10)}),era:ol({matchPatterns:lU,defaultMatchWidth:"wide",parsePatterns:cU,defaultParseWidth:"any"}),quarter:ol({matchPatterns:dU,defaultMatchWidth:"wide",parsePatterns:uU,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ol({matchPatterns:fU,defaultMatchWidth:"wide",parsePatterns:hU,defaultParseWidth:"any"}),day:ol({matchPatterns:mU,defaultMatchWidth:"wide",parsePatterns:pU,defaultParseWidth:"any"}),dayPeriod:ol({matchPatterns:gU,defaultMatchWidth:"any",parsePatterns:vU,defaultParseWidth:"any"})},xU={code:"en-US",formatDistance:q5,formatLong:H5,formatRelative:Q5,localize:rU,match:yU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bU(e){const t=wn(e);return M5(t,U5(t))+1}function wU(e){const t=wn(e),r=+ku(t)-+L5(t);return Math.round(r/iE)+1}function lE(e,t){var u,f,m,p;const r=wn(e),n=r.getFullYear(),a=If(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(m=a.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=li(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=rc(o,t),c=li(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=rc(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function jU(e,t){var l,c,d,u;const r=If(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=lE(e,t),i=li(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),rc(i,t)}function NU(e,t){const r=wn(e),n=+rc(r,t)-+jU(r,t);return Math.round(n/iE)+1}function Je(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Es={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Je(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Je(r+1,2)},d(e,t){return Je(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Je(e.getHours()%12||12,t.length)},H(e,t){return Je(e.getHours(),t.length)},m(e,t){return Je(e.getMinutes(),t.length)},s(e,t){return Je(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Je(a,t.length)}},Ti={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ab={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Es.y(e,t)},Y:function(e,t,r,n){const a=lE(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Je(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Je(i,t.length)},R:function(e,t){const r=oE(e);return Je(r,t.length)},u:function(e,t){const r=e.getFullYear();return Je(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Je(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Je(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Es.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Je(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=NU(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Je(a,t.length)},I:function(e,t,r){const n=wU(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Je(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Es.d(e,t)},D:function(e,t,r){const n=bU(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Je(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Je(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Je(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Je(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=Ti.noon:n===0?a=Ti.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=Ti.evening:n>=12?a=Ti.afternoon:n>=4?a=Ti.morning:a=Ti.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Es.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Es.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Je(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Je(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Es.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Es.s(e,t)},S:function(e,t){return Es.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Db(n);case"XXXX":case"XX":return Ea(n);case"XXXXX":case"XXX":default:return Ea(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Db(n);case"xxxx":case"xx":return Ea(n);case"xxxxx":case"xxx":default:return Ea(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ob(n,":");case"OOOO":default:return"GMT"+Ea(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ob(n,":");case"zzzz":default:return"GMT"+Ea(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Je(n,t.length)},T:function(e,t,r){const n=e.getTime();return Je(n,t.length)}};function Ob(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+Je(i,2)}function Db(e,t){return e%60===0?(e>0?"-":"+")+Je(Math.abs(e)/60,2):Ea(e,t)}function Ea(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Je(Math.trunc(n/60),2),i=Je(n%60,2);return r+a+t+i}const Mb=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},cE=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},_U=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return Mb(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Mb(n,t)).replace("{{time}}",cE(a,t))},SU={p:cE,P:_U},CU=/^D+$/,EU=/^Y+$/,kU=["D","DD","YY","YYYY"];function PU(e){return CU.test(e)}function TU(e){return EU.test(e)}function RU(e,t,r){const n=IU(e,t,r);if(console.warn(n),kU.includes(e))throw new RangeError(n)}function IU(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const AU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,OU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,DU=/^'([^]*?)'?$/,MU=/''/g,LU=/[a-zA-Z]/;function On(e,t,r){var u,f,m,p;const n=If(),a=n.locale??xU,i=n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,l=wn(e);if(!F5(l))throw new RangeError("Invalid time value");let c=t.match(OU).map(x=>{const g=x[0];if(g==="p"||g==="P"){const w=SU[g];return w(x,a.formatLong)}return x}).join("").match(AU).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const g=x[0];if(g==="'")return{isToken:!1,value:$U(x)};if(Ab[g])return{isToken:!0,value:x};if(g.match(LU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:x}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(x=>{if(!x.isToken)return x.value;const g=x.value;(TU(g)||PU(g))&&RU(g,t,String(e));const w=Ab[g[0]];return w(l,g,a.localize,d)}).join("")}function $U(e){const t=e.match(DU);return t?t[1].replace(MU,"'"):e}class FU{async createPropertyCardFromInventory(t){var c;const{data:r,error:n}=await te.from("inventory_items").select("*").eq("id",t.inventoryItemId).single();if(n||!r)throw new Error(`Inventory item not found: ${n==null?void 0:n.message}`);const a=(r.description||(r.model?`${r.brand?r.brand+" ":""}${r.model}`:r.brand)||"").trim(),i={entity_name:t.entityName,fund_cluster:t.fundCluster,semi_expendable_property:r.description||a,property_number:r.property_number,description:a,date_acquired:r.date_acquired,remarks:r.remarks};i.inventory_item_id=t.inventoryItemId;const{data:o,error:l}=await te.from("property_cards").insert(i).select().single();if(l)throw new Error(`Failed to create property card: ${l.message}`);return t.initialEntry&&await this.addPropertyCardEntry(o.id,{...t.initialEntry,reference:((c=t.initialEntry.reference)==null?void 0:c.trim())||"",issueItemNo:"",issueQty:0,officeOfficer:"",balanceQty:t.initialEntry.receiptQty,amount:t.initialEntry.totalCost}),this.mapToAnnexPropertyCard(o)}async createCustodianSlip(t){var i;if(console.log("Creating custodian slip(s) with inventory items:",((i=t.inventoryItemIds)==null?void 0:i.length)||0),!t.inventoryItemIds||t.inventoryItemIds.length===0)throw new Error("No inventory items provided for the custodian slip");console.log("Validating inventory items and property cards...");const r=[];for(const o of t.inventoryItemIds){const{data:l,error:c}=await te.from("inventory_items").select("*").eq("id",o).single();if(c||!l)throw new Error(`Inventory item ${o} not found`);if(l.assignment_status==="Assigned"||l.custodian)throw new Error(`Inventory item ${l.property_number} is already assigned to ${l.custodian}`);if(l.condition!=="Serviceable")throw new Error(`Inventory item ${l.property_number} is not serviceable (${l.condition})`);console.log(`Processing inventory item: ${l.property_number} (${o})`),r.push(l)}console.log("All validations passed, grouping items by sub-category...");const n={};for(const o of r){const l=o.sub_category||"Unknown";n[l]||(n[l]=[]),n[l].push(o)}console.log(`Grouped items into ${Object.keys(n).length} sub-category(ies):`,Object.keys(n));const a=[];for(const o of Object.keys(n)){const l=n[o];console.log(`Creating slip for ${o} with ${l.length} item(s)`);const c=o==="Small Value Expendable"?"SPLV":"SPHV",{data:d,error:u}=await te.rpc("generate_ics_number",{sub_category_prefix:c});if(u){console.error("Error generating ICS number:",u);const{data:g}=await te.rpc("generate_ics_number",{sub_category_prefix:null});console.log("Using fallback ICS number:",g)}const f={slip_number:u?null:d,custodian_name:t.custodianName,designation:t.designation,office:t.office,date_issued:t.dateIssued,issued_by:t.issuedBy,received_by:t.receivedBy,slip_status:"Draft"};console.log("Inserting custodian slip:",f);const{data:m,error:p}=await te.from("custodian_slips").insert(f).select().single();if(p)throw console.error("Error creating custodian slip:",p),new Error(`Failed to create custodian slip: ${p.message}`);console.log("Custodian slip created successfully:",m.id);const x=[];for(const g of l){const w=g.quantity||1,v=g.unit_cost||0,y=w*v,b=(g.description||(g.model?`${g.brand?g.brand+" ":""}${g.model}`:g.brand)||"").trim(),N={slip_id:m.id,inventory_item_id:g.id,property_number:g.property_number,description:b,quantity:w,unit:g.unit_of_measure,unit_cost:v,total_cost:y,amount:y,date_issued:t.dateIssued},{data:j,error:C}=await te.from("custodian_slip_items").insert(N).select().single();if(C){console.error(`Failed to create slip item for ${g.id}:`,C);continue}console.log(`Draft slip created for inventory item ${g.property_number} - assignment will happen on confirmation`);const{data:E,error:M}=await te.from("property_cards").select("*").eq("inventory_item_id",g.id).single();if(M||!E){console.warn(`Property card not found for inventory item ${g.id}, skipping property card entry creation`),x.push(this.mapToAnnexCustodianSlipItem(j));continue}const H=await this.addPropertyCardEntry(E.id,{date:t.dateIssued,reference:m.slip_number||"PENDING",receiptQty:0,unitCost:0,totalCost:0,issueItemNo:m.slip_number||"PENDING",issueQty:g.quantity,officeOfficer:`${t.custodianName} (${t.designation})`,balanceQty:0,amount:0,remarks:`Issued via ICS ${m.slip_number||"PENDING"}`,relatedSlipId:m.id});await te.from("custodian_slip_items").update({property_card_entry_id:H.id}).eq("id",j.id),x.push(this.mapToAnnexCustodianSlipItem(j))}if(console.log(`Created ${x.length} slip items for custodian slip ${m.id}`),x.length===0)throw console.error(`No items were successfully added to the custodian slip for ${o}. Deleting empty slip.`),await te.from("custodian_slips").delete().eq("id",m.id),new Error(`No valid ${o} items could be added to the custodian slip. Please check that items are available and serviceable.`);a.push({...this.mapToAnnexCustodianSlip(m),items:x})}return a.length===1?(console.log("Single slip created, returning as single object"),a[0]):(console.log(`${a.length} slips created (separated by sub-category)`),a)}async addPropertyCardEntry(t,r){const n={property_card_id:t,date:r.date,reference:r.reference,receipt_qty:r.receiptQty,unit_cost:r.unitCost,total_cost:r.totalCost,issue_item_no:r.issueItemNo,issue_qty:r.issueQty,office_officer:r.officeOfficer,balance_qty:r.balanceQty,amount:r.amount,remarks:r.remarks,related_slip_id:r.relatedSlipId,related_transfer_id:r.relatedTransferId},{data:a,error:i}=await te.from("property_card_entries").insert(n).select().single();if(i)throw new Error(`Failed to add property card entry: ${i.message}`);return this.mapToAnnexSPCEntry(a)}async findPropertyCardByInventoryItem(t){try{console.log(`Searching for property card with inventory_item_id: ${t}`);const{data:r,error:n}=await te.from("property_cards").select("*").eq("inventory_item_id",t).single();return console.log("Property card query result - data:",r,"error:",n),n?n.message.includes('column "inventory_item_id" does not exist')?(console.warn("inventory_item_id column not found in property_cards table. Please run the database migration."),null):(console.error("Error finding property card by inventory item:",n),null):r?(console.log("Found property card:",r),this.mapToAnnexPropertyCard(r)):(console.log("No property card found for inventory item:",t),null)}catch(r){return console.error("Unexpected error finding property card:",r),null}}async getPropertyCardWithEntries(t){const{data:r,error:n}=await te.from("property_cards").select("*").eq("id",t).single();if(n||!r)return null;const{data:a,error:i}=await te.from("property_card_entries").select("*").eq("property_card_id",t).order("date",{ascending:!0});return i?(console.error("Failed to fetch property card entries:",i),this.mapToAnnexPropertyCard(r)):{...this.mapToAnnexPropertyCard(r),entries:a.map(o=>this.mapToAnnexSPCEntry(o))}}async getCustodianSlipWithItems(t){const{data:r,error:n}=await te.from("custodian_slips").select("*").eq("id",t).single();if(n||!r)return null;const{data:a,error:i}=await te.from("custodian_slip_items").select("*").eq("slip_id",t).order("created_at",{ascending:!0});return i?(console.error("Failed to fetch custodian slip items:",i),this.mapToAnnexCustodianSlip(r)):{...this.mapToAnnexCustodianSlip(r),items:a.map(o=>this.mapToAnnexCustodianSlipItem(o))}}mapToAnnexPropertyCard(t){return{id:t.id,entityName:t.entity_name,fundCluster:t.fund_cluster,semiExpendableProperty:t.semi_expendable_property,propertyNumber:t.property_number,description:t.description,dateAcquired:t.date_acquired,remarks:t.remarks,inventoryItemId:t.inventory_item_id,entries:[],createdAt:t.created_at,updatedAt:t.updated_at}}mapToAnnexSPCEntry(t){return{id:t.id,propertyCardId:t.property_card_id,date:t.date,reference:t.reference,receiptQty:t.receipt_qty||0,unitCost:t.unit_cost||0,totalCost:t.total_cost||0,issueItemNo:t.issue_item_no||"",issueQty:t.issue_qty||0,officeOfficer:t.office_officer||"",balanceQty:t.balance_qty||0,amount:t.amount||0,remarks:t.remarks,relatedSlipId:t.related_slip_id,relatedTransferId:t.related_transfer_id,createdAt:t.created_at,updatedAt:t.updated_at}}mapToAnnexCustodianSlip(t){return{id:t.id,slipNumber:t.slip_number,custodianName:t.custodian_name,designation:t.designation,office:t.office,dateIssued:t.date_issued,issuedBy:t.issued_by,receivedBy:t.received_by,items:[],createdAt:t.created_at,updatedAt:t.updated_at}}mapToAnnexCustodianSlipItem(t){return{id:t.id,slipId:t.slip_id,inventoryItemId:t.inventory_item_id,propertyNumber:t.property_number,description:t.description,quantity:t.quantity,unit:t.unit,unitCost:t.unit_cost||0,totalCost:t.total_cost||0,amount:t.amount||0,itemNumber:t.item_number||"",estimatedUsefulLife:t.estimated_useful_life||"",dateIssued:t.date_issued,propertyCardEntryId:t.property_card_entry_id,createdAt:t.created_at,updatedAt:t.updated_at}}}const so=new FU,UU=()=>{const[e,t]=h.useState(!1),[r,n]=h.useState(),[a,i]=h.useState(null),[o,l]=h.useState(!1),[c,d]=h.useState(""),[u,f]=h.useState(!1),[m,p]=h.useState(null),{toast:x}=Fr(),g=ga(),[w]=t4(),v=xs();h.useEffect(()=>{const re=te.channel("realtime:inventory-page").on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},()=>{console.log("[Realtime] Inventory item changed, refreshing..."),g.invalidateQueries({queryKey:["inventory-items"]}),g.invalidateQueries({queryKey:["inventory-items-high-value"]}),g.invalidateQueries({queryKey:["inventory-items-low-value"]}),g.invalidateQueries({queryKey:["inventory-items-filtered"]}),g.refetchQueries({queryKey:["inventory-items-high-value"]}),g.refetchQueries({queryKey:["inventory-items-low-value"]}),g.refetchQueries({queryKey:["inventory-items-filtered"]})}).on("postgres_changes",{event:"*",schema:"public",table:"property_cards"},()=>{console.log("[Realtime] Property cards changed, refreshing inventory..."),g.invalidateQueries({queryKey:["inventory-items"]}),g.invalidateQueries({queryKey:["inventory-items-high-value"]}),g.invalidateQueries({queryKey:["inventory-items-low-value"]}),g.invalidateQueries({queryKey:["inventory-items-filtered"]}),g.refetchQueries({queryKey:["inventory-items-high-value"]}),g.refetchQueries({queryKey:["inventory-items-low-value"]}),g.refetchQueries({queryKey:["inventory-items-filtered"]})}).on("postgres_changes",{event:"*",schema:"public",table:"custodian_slip_items"},()=>{console.log("[Realtime] Custodian slip items changed, refreshing inventory..."),g.invalidateQueries({queryKey:["inventory-items"]}),g.invalidateQueries({queryKey:["inventory-items-high-value"]}),g.invalidateQueries({queryKey:["inventory-items-low-value"]}),g.invalidateQueries({queryKey:["inventory-items-filtered"]}),g.refetchQueries({queryKey:["inventory-items-high-value"]}),g.refetchQueries({queryKey:["inventory-items-low-value"]}),g.refetchQueries({queryKey:["inventory-items-filtered"]})}).subscribe();return()=>{te.removeChannel(re)}},[g]);const y=w.get("filter"),b=w.get("valueFilter"),N=re=>{const Se=new URLSearchParams;re!=="all"&&Se.set("filter",re),b&&Se.set("valueFilter",b),v(`/inventory${Se.toString()?"?"+Se.toString():""}`)},j=re=>{const Se=new URLSearchParams;y&&Se.set("filter",y),re!=="all"&&Se.set("valueFilter",re),v(`/inventory${Se.toString()?"?"+Se.toString():""}`)},{data:C=[],isLoading:E,isFetching:M,error:H}=vt({queryKey:["inventory-items-high-value",c,y],queryFn:async()=>{console.log("Fetching high value items, searchTerm:",c,"filter:",y);const re=c.trim()?await rr.search(c,{filter:y,valueFilter:"high-value"}):await rr.getAll({filter:y,valueFilter:"high-value"});return console.log("High value inventory response:",re),re.success?re.data:[]},staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchInterval:!1,retry:(re,Se)=>navigator.onLine?re<2:!1}),{data:q=[],isLoading:P,isFetching:K,error:ee}=vt({queryKey:["inventory-items-low-value",c,y],queryFn:async()=>{console.log("Fetching low value items, searchTerm:",c,"filter:",y);const re=c.trim()?await rr.search(c,{filter:y,valueFilter:"low-value"}):await rr.getAll({filter:y,valueFilter:"low-value"});return console.log("Low value inventory response:",re),re.success?re.data:[]},staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchInterval:!1,retry:(re,Se)=>navigator.onLine?re<2:!1}),{data:D=[],isLoading:S,isFetching:A,error:O}=vt({queryKey:["inventory-items-filtered",c,y,b],queryFn:async()=>{console.log("Fetching filtered inventory items, searchTerm:",c,"filter:",y,"valueFilter:",b);const re=c.trim()?await rr.search(c,{filter:y,valueFilter:b}):await rr.getAll({filter:y,valueFilter:b});return console.log("Filtered inventory response:",re),re.success?re.data:[]},staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchInterval:!1,retry:(re,Se)=>navigator.onLine?re<2:!1,enabled:!!b}),F=b?D:[],L=b?S:!1,J=b?A:M||K,ce=b?O:null,B=na({mutationFn:async({item:re,autoCreatePropertyCard:Se})=>{const ut=await rr.create(re);if(!ut.success||!ut.data)throw new Error(ut.error||"Failed to create inventory item");const Te=ut.data;if(console.log("[Inventory] Checking auto-create:",{autoCreatePropertyCard:Se,hasId:!!Te.id}),Se&&Te.id){console.log("[Inventory] Auto-create enabled, creating property card...");try{let Ye="General Fund";if(re.fundSource){console.log("[Inventory] Fetching fund source:",re.fundSource);const ws=(await hr.getFundSources()).find(Ur=>Ur.id===re.fundSource);ws&&(Ye=ws.name,console.log("[Inventory] Found fund source:",Ye))}console.log("[Inventory] Creating property card with:",{inventoryItemId:Te.id,entityName:re.entityName||"PROVINCIAL GOVERNMENT OF APAYAO",fundCluster:Ye,propertyNumber:Te.propertyNumber});const jr=await so.createPropertyCardFromInventory({inventoryItemId:Te.id,entityName:re.entityName||"PROVINCIAL GOVERNMENT OF APAYAO",fundCluster:Ye});return console.log("[Inventory]  Property card created successfully:",{id:jr.id,propertyNumber:jr.propertyNumber}),{data:Te,propertyCardCreated:!0,propertyCardId:jr.id,success:!0,error:null}}catch(Ye){console.error("[Inventory]  Error auto-creating property card:",Ye);const jr=Ye instanceof Error?Ye.message:String(Ye);return console.error("[Inventory] Error details:",{message:jr,stack:Ye instanceof Error?Ye.stack:void 0}),{data:Te,propertyCardCreated:!1,propertyCardError:jr,success:!0,error:null}}}return console.log("[Inventory] Auto-create not enabled or no item ID"),{data:Te,propertyCardCreated:!1,success:!0,error:null}},onSuccess:async re=>{if(await Promise.all([g.invalidateQueries({queryKey:["inventory-items"]}),g.invalidateQueries({queryKey:["inventory-items-high-value"]}),g.invalidateQueries({queryKey:["inventory-items-low-value"]}),g.invalidateQueries({queryKey:["inventory-items-filtered"]}),g.invalidateQueries({queryKey:["available-inventory-for-slips"]}),g.invalidateQueries({queryKey:["dashboard-stats"]}),g.invalidateQueries({queryKey:["annex-property-cards"]}),g.invalidateQueries({queryKey:["available-inventory-for-cards"]}),g.invalidateQueries({queryKey:["inventory-items-for-property-cards"]})]),await Promise.all([g.refetchQueries({queryKey:["inventory-items-high-value"]}),g.refetchQueries({queryKey:["inventory-items-low-value"]}),g.refetchQueries({queryKey:["inventory-items-filtered"]}),g.refetchQueries({queryKey:["annex-property-cards"]}),g.refetchQueries({queryKey:["dashboard-stats"]})]),!re.data)return;const Se=re.data;re.propertyCardCreated?(console.log("Property card was created successfully, showing success message"),x({title:"Inventory Item & Property Card Created Successfully",description:`Item ${Se.propertyNumber} has been added and a property card was automatically created. You can now assign this item to a custodian.`,action:s.jsx(ne,{variant:"outline",size:"sm",onClick:()=>v("/property-cards"),children:"View Property Cards"})})):re.propertyCardError?x({title:"Inventory Item Created",description:`Item ${Se.propertyNumber} was created, but property card creation failed: ${re.propertyCardError}. You can create it manually.`,variant:"destructive",action:s.jsx(ne,{variant:"outline",size:"sm",onClick:()=>v("/property-cards",{state:{prefillItem:{propertyNumber:Se.propertyNumber,description:Se.description}}}),children:"Create Property Card"})}):x({title:"Inventory Item Created Successfully",description:`Item ${Se.propertyNumber} has been added. To assign this item to a custodian, you'll need to create a property card first.`,action:s.jsx(ne,{variant:"outline",size:"sm",onClick:()=>v("/property-cards",{state:{prefillItem:{propertyNumber:Se.propertyNumber,description:Se.description}}}),children:"Create Property Card"})})},onError:()=>{x({title:"Error",description:"Failed to create inventory item",variant:"destructive"})}}),I=na({mutationFn:({id:re,updates:Se})=>rr.update(re,Se),onSuccess:async()=>{await Promise.all([g.invalidateQueries({queryKey:["inventory-items"]}),g.invalidateQueries({queryKey:["inventory-items-high-value"]}),g.invalidateQueries({queryKey:["inventory-items-low-value"]}),g.invalidateQueries({queryKey:["inventory-items-filtered"]}),g.invalidateQueries({queryKey:["available-inventory-for-slips"]}),g.invalidateQueries({queryKey:["dashboard-stats"]}),g.invalidateQueries({queryKey:["annex-property-cards"]})]),await Promise.all([g.refetchQueries({queryKey:["inventory-items-high-value"]}),g.refetchQueries({queryKey:["inventory-items-low-value"]}),g.refetchQueries({queryKey:["inventory-items-filtered"]}),g.refetchQueries({queryKey:["dashboard-stats"]})]),x({title:"Success",description:"Inventory item updated successfully"})},onError:()=>{x({title:"Error",description:"Failed to update inventory item",variant:"destructive"})}}),V=na({mutationFn:re=>rr.delete(re),onSuccess:async()=>{await Promise.all([g.invalidateQueries({queryKey:["inventory-items"]}),g.invalidateQueries({queryKey:["inventory-items-high-value"]}),g.invalidateQueries({queryKey:["inventory-items-low-value"]}),g.invalidateQueries({queryKey:["inventory-items-filtered"]}),g.invalidateQueries({queryKey:["available-inventory-for-slips"]}),g.invalidateQueries({queryKey:["annex-property-cards"]}),g.invalidateQueries({queryKey:["property-cards"]}),g.invalidateQueries({queryKey:["dashboard-stats"]})]),await Promise.all([g.refetchQueries({queryKey:["inventory-items-high-value"]}),g.refetchQueries({queryKey:["inventory-items-low-value"]}),g.refetchQueries({queryKey:["inventory-items-filtered"]}),g.refetchQueries({queryKey:["dashboard-stats"]})]),x({title:"Success",description:"Inventory item deleted successfully"})},onError:re=>{const Se=(re==null?void 0:re.message)||(re==null?void 0:re.error)||"Failed to delete inventory item";x({title:"Cannot Delete Item",description:Se,variant:"destructive"})}}),Q=async(re,Se)=>{console.log("[Inventory] handleSave called",{isEditing:!!r,autoCreatePropertyCard:Se,propertyNumber:re.propertyNumber});try{r?await I.mutateAsync({id:re.id,updates:re}):(console.log("[Inventory] Creating new item with autoCreatePropertyCard:",Se),await B.mutateAsync({item:re,autoCreatePropertyCard:Se})),t(!1),n(void 0)}catch(ut){console.error("[Inventory] Error in handleSave:",ut)}},se=re=>{i(re),l(!0)},Z=re=>{n(re),t(!0)},R=re=>{if(re.assignmentStatus==="Assigned"||re.custodian&&re.custodian.trim()!==""){x({title:"Cannot Delete Item",description:`This item cannot be deleted because it is currently assigned to ${re.custodian||"a custodian"}. Please unassign the item from the custodian first before deleting.`,variant:"destructive"});return}p(re),f(!0)},X=re=>re.assignmentStatus==="Assigned"||re.custodian&&re.custodian.trim()!=="",ie=async()=>{if(m)try{await V.mutateAsync(m.id),f(!1),p(null)}catch{}},T=(()=>{let re;return Se=>{clearTimeout(re),re=setTimeout(()=>{d(Se)},300)}})(),Y=re=>{switch(re){case"Serviceable":return"bg-green-100 text-green-800";case"For Repair":return"bg-yellow-100 text-yellow-800";case"Unserviceable":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},le=re=>{switch(re){case"Active":return"bg-green-100 text-green-800";case"Transferred":return"bg-blue-100 text-blue-800";case"Disposed":return"bg-gray-100 text-gray-800";case"Missing":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Pe=re=>re.condition!=="Serviceable"?{status:"Unavailable",reason:`Condition: ${re.condition}`,color:"bg-red-100 text-red-800"}:re.status!=="Active"?{status:"Unavailable",reason:`Status: ${re.status}`,color:"bg-gray-100 text-gray-800"}:re.assignmentStatus==="Assigned"?{status:"Assigned",reason:"Assigned via custodian slip",color:"bg-blue-100 text-blue-800"}:{status:"Available",reason:"Ready for assignment",color:"bg-green-100 text-green-800"};if(e)return s.jsx(x5,{item:r,onSave:Q,onCancel:()=>{t(!1),n(void 0)},isSaving:B.isPending||I.isPending});if((L||E||P)&&F.length===0&&C.length===0&&q.length===0)return s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Nt,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading inventory..."})]});if((ce||H||ee)&&navigator.onLine){const re=ce instanceof Error?ce.message:H instanceof Error?H.message:ee instanceof Error?ee.message:String(ce||H||ee||"Unknown error");return s.jsxs("div",{className:"text-center py-8",children:[s.jsxs($t,{className:"max-w-md mx-auto",children:[s.jsx(vn,{className:"h-4 w-4"}),s.jsxs(Ft,{children:["Error: ",re]})]}),s.jsx(ne,{onClick:()=>window.location.reload(),className:"mt-4",children:"Retry"})]})}return ce&&!navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs($t,{className:"max-w-md mx-auto",children:[s.jsx(vn,{className:"h-4 w-4"}),s.jsx(Ft,{children:"You're offline. Some features may not work until your connection is restored."})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-muted-foreground",children:"Previously loaded inventory data will appear when available."})})]}):s.jsxs("div",{className:"space-y-6 relative",children:[J&&!L&&s.jsx("div",{className:"absolute inset-0 bg-background/50 backdrop-blur-sm z-40 flex items-center justify-center pointer-events-none",children:s.jsxs("div",{className:"flex flex-col items-center gap-2 bg-background border rounded-lg shadow-lg p-4",children:[s.jsx(Nt,{className:"h-6 w-6 animate-spin text-primary"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Refreshing inventory..."})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>v("/inventory"),className:"flex items-center space-x-2",disabled:B.isPending||I.isPending||V.isPending,children:[s.jsx(Uj,{className:"h-4 w-4"}),s.jsx("span",{children:y||b?"Clear Filters":"View All Items"})]}),s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:y==="issued"?"Issued Items":y==="available"?"Available Items":"Inventory Management"})]}),s.jsxs(ne,{onClick:()=>t(!0),className:"bg-primary hover:bg-primary-dark",disabled:B.isPending||I.isPending||V.isPending,children:[s.jsx(Un,{className:"h-4 w-4 mr-2"}),"Add New Item"]})]}),(y||b)&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[y==="issued"&&b==="high-value"&&"Showing high value items (above 5,000) that have been issued to custodians",y==="issued"&&b==="low-value"&&"Showing low value items (5,000 or less) that have been issued to custodians",y==="available"&&b==="high-value"&&"Showing high value items (above 5,000) available for assignment",y==="available"&&b==="low-value"&&"Showing low value items (5,000 or less) available for assignment",y==="issued"&&!b&&"Showing only items that have been issued to custodians",y==="available"&&!b&&"Showing only items available for assignment",!y&&b==="high-value"&&"Showing only high value items (above 5,000)",!y&&b==="low-value"&&"Showing only low value items (5,000 or less)"]})]})}),(()=>{const re=(Se,ut)=>s.jsx("div",{className:"rounded-md border",children:s.jsxs(Gt,{children:[s.jsx(sr,{children:s.jsxs(Ve,{children:[s.jsx(he,{children:"Property Number"}),s.jsx(he,{children:"Description"}),s.jsx(he,{children:"Custodian"}),s.jsx(he,{children:"Condition"}),s.jsx(he,{children:"Status"}),s.jsx(he,{children:"Availability"}),s.jsx(he,{children:"Total Cost"}),s.jsx(he,{children:"Actions"})]})}),s.jsx(ar,{children:ut?s.jsx(Ve,{children:s.jsx(de,{colSpan:8,className:"text-center py-8",children:s.jsx(Nt,{className:"h-6 w-6 animate-spin mx-auto"})})}):Se.map(Te=>s.jsxs(Ve,{children:[s.jsx(de,{className:"font-medium",children:Te.propertyNumber}),s.jsxs(de,{className:"max-w-xs",children:[s.jsx("div",{className:"truncate",title:Te.description,children:Te.description}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[Te.brand," ",Te.model]})]}),s.jsxs(de,{children:[s.jsx("div",{children:Te.custodian||"-"}),Te.custodianPosition&&s.jsx("div",{className:"text-xs text-muted-foreground",children:Te.custodianPosition})]}),s.jsx(de,{children:s.jsx(Be,{className:Y(Te.condition),children:Te.condition})}),s.jsx(de,{children:s.jsx(Be,{className:le(Te.status),children:Te.status})}),s.jsx(de,{children:s.jsxs("div",{className:"flex flex-col gap-1",children:[(()=>{const Ye=Pe(Te);return s.jsx(Be,{className:Ye.color,title:Ye.reason,children:Ye.status})})(),Te.hasPropertyCard===!1&&s.jsx(Be,{variant:"outline",className:"text-xs text-amber-600 border-amber-300 bg-amber-50",children:" No Property Card"})]})}),s.jsxs(de,{children:["",Te.totalCost.toLocaleString()]}),s.jsx(de,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>se(Te),title:"View Details",disabled:B.isPending||I.isPending||V.isPending,children:s.jsx(pc,{className:"h-4 w-4"})}),s.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>Z(Te),title:"Edit",disabled:B.isPending||I.isPending||V.isPending,children:s.jsx(gx,{className:"h-4 w-4"})}),s.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>R(Te),title:X(Te)?"Cannot delete: Item is assigned to a custodian":"Delete",className:"text-destructive hover:text-destructive",disabled:V.isPending||B.isPending||I.isPending||X(Te),children:V.isPending&&(m==null?void 0:m.id)===Te.id?s.jsx(Nt,{className:"h-4 w-4 animate-spin"}):s.jsx(ei,{className:"h-4 w-4"})})]})})]},Te.id))})]})});return b?s.jsxs(je,{children:[s.jsxs(Ie,{children:[s.jsx(Oe,{children:y==="issued"?"Issued Semi-Expendable Property Items":y==="available"?"Available Semi-Expendable Property Items":"Semi-Expendable Property Items"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Mr,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),s.jsx(we,{placeholder:"Search by property number, description, or custodian...",value:c,onChange:Se=>{d(Se.target.value),T(Se.target.value)},className:"pl-10"})]}),s.jsxs(ct,{value:y||"all",onValueChange:N,children:[s.jsx(at,{className:"w-40",children:s.jsx(dt,{placeholder:"Status..."})}),s.jsxs(it,{children:[s.jsx(pe,{value:"all",children:"All Items"}),s.jsx(pe,{value:"available",children:"Available"}),s.jsx(pe,{value:"issued",children:"Issued"})]})]}),s.jsxs(ct,{value:b||"all",onValueChange:j,children:[s.jsx(at,{className:"w-48",children:s.jsx(dt,{placeholder:"Value Filter..."})}),s.jsxs(it,{children:[s.jsx(pe,{value:"all",children:"All Values"}),s.jsx(pe,{value:"high-value",children:"High Value (>5,000)"}),s.jsx(pe,{value:"low-value",children:"Low Value (5,000)"})]})]})]})]}),s.jsxs(Ne,{children:[re(F,L),F.length===0&&!L&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground",children:"No inventory items found."}),c&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search terms."})]})]})]}):s.jsxs(je,{children:[s.jsxs(Ie,{children:[s.jsx(Oe,{children:y==="issued"?"Issued Semi-Expendable Property Items":y==="available"?"Available Semi-Expendable Property Items":"Semi-Expendable Property Items"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Mr,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),s.jsx(we,{placeholder:"Search by property number, description, or custodian...",value:c,onChange:Se=>{d(Se.target.value),T(Se.target.value)},className:"pl-10"})]}),s.jsxs(ct,{value:y||"all",onValueChange:N,children:[s.jsx(at,{className:"w-40",children:s.jsx(dt,{placeholder:"Status..."})}),s.jsxs(it,{children:[s.jsx(pe,{value:"all",children:"All Items"}),s.jsx(pe,{value:"available",children:"Available"}),s.jsx(pe,{value:"issued",children:"Issued"})]})]})]})]}),s.jsx(Ne,{children:s.jsxs(kf,{defaultValue:"high-value",className:"w-full",children:[s.jsxs(kc,{className:"grid w-full grid-cols-2",children:[s.jsxs(Hr,{value:"high-value",className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"High Value"}),s.jsx(Be,{variant:"secondary",className:"ml-auto",children:E?"...":C.length})]}),s.jsxs(Hr,{value:"low-value",className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Low Value"}),s.jsx(Be,{variant:"secondary",className:"ml-auto",children:P?"...":q.length})]})]}),s.jsxs(Kr,{value:"high-value",className:"mt-4",children:[s.jsx("div",{className:"mb-4 text-sm text-muted-foreground",children:"Items above 5,000 - High Value Expendable"}),re(C,E),C.length===0&&!E&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground",children:"No high value items found."}),c&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search terms."})]})]}),s.jsxs(Kr,{value:"low-value",className:"mt-4",children:[s.jsx("div",{className:"mb-4 text-sm text-muted-foreground",children:"Items 5,000 or less - Small Value Expendable"}),re(q,P),q.length===0&&!P&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground",children:"No low value items found."}),c&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search terms."})]})]})]})})]})})(),s.jsx(Tr,{open:o,onOpenChange:l,children:s.jsxs(vr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Ar,{children:[s.jsxs(Or,{className:"flex items-center gap-2",children:[s.jsx(Pr,{className:"h-5 w-5"}),"Inventory Item Details"]}),s.jsx(ls,{children:"Complete information about this inventory item"})]}),a&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{className:"text-lg",children:"Basic Information"})}),s.jsxs(Ne,{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Property Number"}),s.jsx("p",{className:"font-mono font-semibold",children:a.propertyNumber})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Description"}),s.jsx("p",{children:a.description})]}),a.semiExpandableCategory&&s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Semi-Expandable Category"}),s.jsx("p",{children:a.semiExpandableCategory})]}),a.subCategory&&s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Sub-Category"}),s.jsx(Be,{variant:"outline",children:a.subCategory})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Status"}),s.jsx(Be,{className:le(a.status),children:a.status})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),s.jsx(Be,{className:Y(a.condition),children:a.condition})]})]})]}),s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{className:"text-lg",children:"Item Details"})}),s.jsxs(Ne,{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Brand"}),s.jsx("p",{children:a.brand||"-"})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Model"}),s.jsx("p",{children:a.model||"-"})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Serial Number"}),s.jsx("p",{className:"font-mono",children:a.serialNumber||"-"})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Quantity"}),s.jsxs("p",{children:[a.quantity," ",a.unitOfMeasure]})]})]})]}),s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsxs(Oe,{className:"text-lg flex items-center gap-2",children:[s.jsx(Wa,{className:"h-5 w-5"}),"Financial Information"]})}),s.jsxs(Ne,{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Unit Cost"}),s.jsxs("p",{className:"font-semibold",children:["",a.unitCost.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Total Cost"}),s.jsxs("p",{className:"font-semibold text-lg",children:["",a.totalCost.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.dateAcquired&&s.jsxs("div",{children:[s.jsxs(ae,{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(Md,{className:"h-3 w-3"}),"Date Acquired"]}),s.jsx("p",{children:On(new Date(a.dateAcquired),"MMMM dd, yyyy")})]})]})]}),(a.custodian||a.assignmentStatus)&&s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsxs(Oe,{className:"text-lg flex items-center gap-2",children:[s.jsx(Fg,{className:"h-5 w-5"}),"Assignment Information"]})}),s.jsxs(Ne,{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Custodian"}),s.jsx("p",{children:a.custodian||"-"}),a.custodianPosition&&s.jsx("p",{className:"text-sm text-muted-foreground",children:a.custodianPosition})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Assignment Status"}),(()=>{const re=Pe(a);return s.jsx(Be,{className:re.color,children:re.status})})(),a.hasPropertyCard===!1&&s.jsx(Be,{variant:"outline",className:"ml-2 text-xs text-amber-600 border-amber-300 bg-amber-50",children:" No Property Card"})]}),a.assignedDate&&s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Assigned Date"}),s.jsx("p",{children:On(new Date(a.assignedDate),"MMMM dd, yyyy")})]})]})]}),(a.remarks||a.entityName||a.lastInventoryDate)&&s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{className:"text-lg",children:"Additional Information"})}),s.jsxs(Ne,{className:"space-y-4",children:[a.entityName&&s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Entity Name"}),s.jsx("p",{children:a.entityName})]}),a.lastInventoryDate&&s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Last Inventory Date"}),s.jsx("p",{children:On(new Date(a.lastInventoryDate),"MMMM dd, yyyy")})]}),a.remarks&&s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Remarks"}),s.jsx("p",{className:"whitespace-pre-wrap",children:a.remarks})]})]})]}),s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{className:"text-lg",children:"System Information"})}),s.jsxs(Ne,{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Created At"}),s.jsx("p",{className:"text-sm",children:On(new Date(a.createdAt),"MMMM dd, yyyy HH:mm")})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),s.jsx("p",{className:"text-sm",children:On(new Date(a.updatedAt),"MMMM dd, yyyy HH:mm")})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ne,{variant:"outline",onClick:()=>l(!1),disabled:B.isPending||I.isPending||V.isPending,children:"Close"}),s.jsxs(ne,{onClick:()=>{l(!1),Z(a)},disabled:B.isPending||I.isPending||V.isPending,children:[s.jsx(gx,{className:"h-4 w-4 mr-2"}),"Edit Item"]})]})]})]})}),s.jsx(I5,{open:u,onOpenChange:f,children:s.jsxs(Z1,{children:[s.jsxs(eE,{children:[s.jsx(rE,{children:"Are you sure?"}),s.jsx(nE,{children:m&&X(m)?s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-destructive font-semibold",children:" This item cannot be deleted because it is currently under custody."}),s.jsxs("p",{children:["The item ",s.jsxs("span",{className:"font-semibold",children:['"',m.propertyNumber," - ",m.description,'"']})," is assigned to ",s.jsx("span",{className:"font-semibold",children:m.custodian||"a custodian"}),"."]}),s.jsx("p",{children:"Please unassign the item from the custodian first before deleting it."})]}):s.jsxs("p",{children:["This action cannot be undone. This will permanently delete the inventory item",m&&s.jsxs("span",{className:"font-semibold",children:[' "',m.propertyNumber," - ",m.description,'"']})," from the system."]})})]}),s.jsxs(tE,{children:[s.jsx(aE,{disabled:V.isPending,children:"Cancel"}),m&&!X(m)&&s.jsx(sE,{onClick:ie,disabled:V.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:V.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ei,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]})})]})},BU=()=>{const[e,t]=h.useState("");Fr();const{data:r=[],isLoading:n,error:a}=vt({queryKey:["property-cards"],queryFn:async()=>{const o=await Et.getAll();return o.success?o.data:[]},staleTime:5*60*1e3,retry:(o,l)=>navigator.onLine?o<2:!1}),i=r.filter(o=>o.propertyNumber.toLowerCase().includes(e.toLowerCase())||o.description.toLowerCase().includes(e.toLowerCase())||o.entityName.toLowerCase().includes(e.toLowerCase()));return n&&r.length===0?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Nt,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading property cards..."})]}):a&&navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs($t,{className:"max-w-md mx-auto",children:[s.jsx(vn,{className:"h-4 w-4"}),s.jsxs(Ft,{children:["Error: ",a.message||"Failed to load property cards"]})]}),s.jsx(ne,{onClick:()=>window.location.reload(),className:"mt-4",children:"Retry"})]}):a&&!navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs($t,{className:"max-w-md mx-auto",children:[s.jsx(vn,{className:"h-4 w-4"}),s.jsx(Ft,{children:"You're offline. Some features may not work until your connection is restored."})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-muted-foreground",children:"Previously loaded data will appear when available."})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Property Cards"}),s.jsxs(ne,{className:"bg-primary hover:bg-primary-dark",children:[s.jsx(Un,{className:"h-4 w-4 mr-2"}),"Create New Card"]})]}),s.jsxs(je,{children:[s.jsxs(Ie,{children:[s.jsx(Oe,{children:"Semi-Expendable Property Cards"}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Mr,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),s.jsx(we,{placeholder:"Search by property number, description, or entity...",value:e,onChange:o=>t(o.target.value),className:"pl-10"})]})})]}),s.jsx(Ne,{children:s.jsx("div",{className:"rounded-md border",children:s.jsxs(Gt,{children:[s.jsx(sr,{children:s.jsxs(Ve,{children:[s.jsx(he,{children:"Property Number"}),s.jsx(he,{children:"Entity Name"}),s.jsx(he,{children:"Description"}),s.jsx(he,{children:"Fund Cluster"}),s.jsx(he,{children:"Date Acquired"}),s.jsx(he,{children:"Status"})]})}),s.jsx(ar,{children:i.length===0?s.jsx(Ve,{children:s.jsx(de,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:r.length===0?"No property cards found":"No cards match your search"})}):i.map(o=>s.jsxs(Ve,{children:[s.jsx(de,{className:"font-medium",children:o.propertyNumber}),s.jsx(de,{children:o.entityName}),s.jsx(de,{children:o.description}),s.jsx(de,{children:o.fundCluster}),s.jsx(de,{children:new Date(o.dateAcquired).toLocaleDateString()}),s.jsx(de,{children:s.jsx(Be,{variant:"secondary",children:"Active"})})]},o.id))})]})})})]})]})},dE=({data:e})=>{const t=()=>{window.print()};return s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 print:hidden",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Semi-Expendable Property Card"}),s.jsxs(ne,{onClick:t,className:"flex items-center gap-2",children:[s.jsx(zt,{className:"h-4 w-4"}),"Print"]})]}),s.jsxs(je,{className:"print:shadow-none print:border-2 print:border-black",children:[s.jsx(Ie,{className:"border-b-2 border-black p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute right-0 top-0 text-[11px]",children:"Annex A.1"}),s.jsx("div",{className:"text-center",children:s.jsx("h1",{className:"text-base font-bold uppercase tracking-wide",children:"SEMI-EXPANDABLE PROPERTY CARD"})})]})}),s.jsxs(Ne,{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Entity Name :"}),s.jsx("div",{className:"flex-1 border-b border-black leading-4",children:e.entityName})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Fund Cluster:"}),s.jsx("div",{className:"flex-1 border-b border-black leading-4",children:e.fundCluster})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Semi-expendable Property:"}),s.jsx("div",{className:"flex-1 border-b border-black leading-4",children:e.semiExpendableProperty})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Semi-expendable Property Number:"}),s.jsx("div",{className:"flex-1 border-b border-black leading-4",children:e.propertyNumber})]})]}),s.jsx("div",{className:"text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Description :"}),s.jsx("div",{className:"flex-1 border-b border-black leading-4",children:e.description})]})}),s.jsx("div",{className:"border-2 border-black",children:s.jsxs("table",{className:"w-full text-[11px] border-collapse",children:[s.jsxs("thead",{children:[s.jsxs("tr",{className:"border-b-2 border-black",children:[s.jsx("th",{className:"border-r border-black p-1 text-center w-[8%]",children:"Date"}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[12%]",children:"Reference"}),s.jsx("th",{className:"border-r border-black p-1 text-center",colSpan:3,children:"Receipt"}),s.jsx("th",{className:"border-r border-black p-1 text-center",colSpan:3,children:"Issue/Transfer/Disposal"}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[6%]",children:"Balance"}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[10%]",children:"Amount"}),s.jsx("th",{className:"p-1 text-center w-[14%]",children:"Remarks"})]}),s.jsxs("tr",{className:"border-b border-black",children:[s.jsx("th",{className:"border-r border-black p-1"}),s.jsx("th",{className:"border-r border-black p-1"}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[6%]",children:"Qty."}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[10%]",children:"Unit Cost"}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[10%]",children:"Total Cost"}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[8%]",children:"Item No."}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[6%]",children:"Qty."}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[14%]",children:"Office/Officer"}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[6%]",children:"Qty."}),s.jsx("th",{className:"border-r border-black p-1"}),s.jsx("th",{className:"p-1"})]})]}),s.jsxs("tbody",{children:[e.entries.map((r,n)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:r.date}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:r.reference}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:r.receiptQty||""}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:r.unitCost?`${r.unitCost.toFixed(2)}`:""}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:r.totalCost?`${r.totalCost.toFixed(2)}`:""}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:r.issueItemNo||""}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:r.issueQty||""}),s.jsx("td",{className:"border-r border-black p-2 align-top",children:r.officeOfficer||""}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:r.balanceQty||""}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:r.amount?`${r.amount.toFixed(2)}`:""}),s.jsx("td",{className:"p-2 align-top",children:r.remarks||""})]},n)),Array.from({length:Math.max(0,15-e.entries.length)}).map((r,n)=>s.jsx("tr",{className:"border-b border-gray-300",children:Array.from({length:11}).map((a,i)=>s.jsx("td",{className:`${i<10?"border-r border-black":""} p-3 h-8`,children:" "},i))},`empty-${n}`))]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-6 pt-4 border-t-2 border-black",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-[11px] font-semibold",children:"Property and/or Supply Custodian"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-[11px] font-semibold",children:"Accountable Officer"})]})]})]})]})]})};var Uv="Progress",Bv=100,[qU,nq]=lr(Uv),[zU,VU]=qU(Uv),uE=h.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=WU,...o}=e;(a||a===0)&&!Lb(a)&&console.error(HU(`${a}`,"Progress"));const l=Lb(a)?a:Bv;n!==null&&!$b(n,l)&&console.error(KU(`${n}`,"Progress"));const c=$b(n,l)?n:null,d=Pu(c)?i(c,l):void 0;return s.jsx(zU,{scope:r,value:c,max:l,children:s.jsx(Ee.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Pu(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":mE(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});uE.displayName=Uv;var fE="ProgressIndicator",hE=h.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=VU(fE,r);return s.jsx(Ee.div,{"data-state":mE(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});hE.displayName=fE;function WU(e,t){return`${Math.round(e/t*100)}%`}function mE(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Pu(e){return typeof e=="number"}function Lb(e){return Pu(e)&&!isNaN(e)&&e>0}function $b(e,t){return Pu(e)&&!isNaN(e)&&e<=t&&e>=0}function HU(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Bv}\`.`}function KU(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Bv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var pE=uE,QU=hE;const Mp=h.forwardRef(({className:e,value:t,...r},n)=>s.jsx(pE,{ref:n,className:be("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:s.jsx(QU,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Mp.displayName=pE.displayName;const qh=[{id:"general-fund",name:"General Fund",entityName:"PROVINCIAL GOVERNMENT OF APAYAO",fundCluster:"General Fund",description:"Standard property cards for general fund items",rules:{fundSource:"general"}},{id:"custom",name:"Custom Template",entityName:"",fundCluster:"",description:"Create a custom template",rules:{}}],GU=({isOpen:e,onClose:t,onSuccess:r,inventoryItems:n})=>{const[a,i]=h.useState("selection"),[o,l]=h.useState([]),[c,d]=h.useState(null),[u,f]=h.useState(qh[2]),[m,p]=h.useState([]),[x,g]=h.useState(!1),[w,v]=h.useState(0);h.useEffect(()=>{e&&(i("selection"),l([]),d(null),p([]),g(!1),v(0))},[e]),h.useMemo(()=>n.filter(S=>o.includes(S.id)),[n,o]),h.useEffect(()=>{if(c&&o.length>0){const S=o.map(A=>(n.find(O=>O.id===A),{itemId:A,entityName:c.entityName,fundCluster:c.fundCluster,isOverridden:!1}));p(S)}},[c,o,n]);const y=async S=>{try{const{data:A}=await te.from("fund_sources").select("name").eq("id",S).single();return(A==null?void 0:A.name)||null}catch(A){return console.error("Error fetching fund source:",A),null}},b=async S=>{const A=n.find(L=>L.id===S);if(!A)return;let O=(c==null?void 0:c.entityName)||"",F=(c==null?void 0:c.fundCluster)||"";if(A.entityName&&(O=A.entityName),A.fundSource){const L=await y(A.fundSource);L&&(F=L)}return{entityName:O,fundCluster:F}},N=S=>{l(A=>A.includes(S)?A.filter(O=>O!==S):[...A,S])},j=S=>{const A=qh.find(O=>O.id===S);d(A||null)},C=(S,A)=>{f(O=>({...O,[S]:A}))},E=(S,A,O)=>{p(F=>F.map(L=>L.itemId===S?{...L,[A]:O,isOverridden:!0}:L))},M=async()=>{const S=await Promise.all(o.map(async A=>{const O=await b(A);return{itemId:A,entityName:(O==null?void 0:O.entityName)||(c==null?void 0:c.entityName)||"",fundCluster:(O==null?void 0:O.fundCluster)||(c==null?void 0:c.fundCluster)||"",isOverridden:!1}}));p(S)},H=async()=>{g(!0),v(0);try{for(let S=0;S<m.length;S++){const A=m[S],O=n.find(J=>J.id===A.itemId);if(!O)continue;const F=O.description||(O.model?`${O.brand?O.brand+" ":""}${O.model}`:O.brand)||"",{error:L}=await te.from("property_cards").insert({entity_name:A.entityName,fund_cluster:A.fundCluster,semi_expendable_property:F,property_number:O.propertyNumber,description:F,date_acquired:O.dateAcquired,remarks:O.remarks,inventory_item_id:O.id});L?console.error(`Error creating property card for ${O.propertyNumber}:`,L):v(S+1)}r(),t()}catch(S){console.error("Error creating property cards:",S)}finally{g(!1)}},q=()=>{const S=["selection","template","configuration","overrides","preview","processing"],A=S.indexOf(a);A<S.length-1&&i(S[A+1])},P=()=>{const S=["selection","template","configuration","overrides","preview","processing"],A=S.indexOf(a);A>0&&i(S[A-1])},K=()=>{switch(a){case"selection":return o.length>0;case"template":return c!==null;case"configuration":return!0;case"overrides":return!0;case"preview":return!0;default:return!1}},ee=()=>{switch(a){case"selection":return"Select Inventory Items";case"template":return"Choose Template";case"configuration":return"Configure Common Settings";case"overrides":return"Customize Individual Items";case"preview":return"Preview & Confirm";case"processing":return"Creating Property Cards";default:return""}},D=()=>{switch(a){case"selection":return s.jsx(Ha,{className:"h-5 w-5"});case"template":return s.jsx(Gr,{className:"h-5 w-5"});case"configuration":return s.jsx(qm,{className:"h-5 w-5"});case"overrides":return s.jsx(qm,{className:"h-5 w-5"});case"preview":return s.jsx(pc,{className:"h-5 w-5"});case"processing":return s.jsx(So,{className:"h-5 w-5"});default:return null}};return s.jsx(Tr,{open:e,onOpenChange:t,children:s.jsxs(vr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Ar,{children:s.jsxs(Or,{className:"flex items-center gap-2",children:[D(),"Bulk Create Property Cards - ",ee()]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Step ",["selection","template","configuration","overrides","preview","processing"].indexOf(a)+1," of 6"]}),s.jsxs("span",{children:[o.length," items selected"]})]}),s.jsx(Mp,{value:(["selection","template","configuration","overrides","preview","processing"].indexOf(a)+1)*16.67,className:"h-2"})]}),s.jsxs("div",{className:"space-y-6",children:[a==="selection"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx($t,{children:s.jsx(Ft,{children:"Select the inventory items you want to create property cards for. You can select multiple items at once."})}),s.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto",children:n.map(S=>{const A=S.description||(S.model?`${S.brand?S.brand+" ":""}${S.model}`:S.brand)||"";return s.jsxs("div",{className:"flex items-center space-x-2 p-2 border rounded",children:[s.jsx(Rc,{id:S.id,checked:o.includes(S.id),onCheckedChange:()=>N(S.id)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(ae,{htmlFor:S.id,className:"font-medium",children:[S.propertyNumber," - ",A]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[S.category,"  ",S.condition,"  ",S.fundSource?"Has Fund Source":"No Fund Source"]})]})]},S.id)})})]}),a==="template"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx($t,{children:s.jsx(Ft,{children:"Choose a template to apply common settings to all selected items. You can customize individual items later."})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:qh.map(S=>s.jsxs(je,{className:`cursor-pointer transition-colors ${(c==null?void 0:c.id)===S.id?"ring-2 ring-primary":""}`,onClick:()=>j(S.id),children:[s.jsxs(Ie,{children:[s.jsx(Oe,{className:"text-lg",children:S.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:S.description})]}),s.jsx(Ne,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Entity:"})," ",S.entityName||"Custom"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Fund Cluster:"})," ",S.fundCluster||"Custom"]})]})})]},S.id))}),(c==null?void 0:c.id)==="custom"&&s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{children:"Custom Template"})}),s.jsxs(Ne,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"customEntityName",children:"Entity Name"}),s.jsx(we,{id:"customEntityName",value:u.entityName,onChange:S=>C("entityName",S.target.value),placeholder:"Enter entity name"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"customFundCluster",children:"Fund Cluster"}),s.jsx(we,{id:"customFundCluster",value:u.fundCluster,onChange:S=>C("fundCluster",S.target.value),placeholder:"Enter fund cluster"})]})]})]})]}),a==="configuration"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx($t,{children:s.jsx(Ft,{children:"Configure common settings that will be applied to all selected items. You can customize individual items in the next step."})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"commonEntityName",children:"Entity Name"}),s.jsx(we,{id:"commonEntityName",value:(c==null?void 0:c.entityName)||"",onChange:S=>{const A={...c,entityName:S.target.value};d(A)},placeholder:"Enter entity name"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"commonFundCluster",children:"Fund Cluster"}),s.jsx(we,{id:"commonFundCluster",value:(c==null?void 0:c.fundCluster)||"",onChange:S=>{const A={...c,fundCluster:S.target.value};d(A)},placeholder:"Enter fund cluster"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{onClick:M,variant:"outline",children:"Auto-Assign from Inventory Data"}),s.jsx(ne,{onClick:()=>{p(S=>S.map(A=>({...A,entityName:(c==null?void 0:c.entityName)||"",fundCluster:(c==null?void 0:c.fundCluster)||"",isOverridden:!1})))},variant:"outline",children:"Apply Template to All Items"})]})]}),a==="overrides"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx($t,{children:s.jsx(Ft,{children:"Review and customize individual items. Items marked with overrides will use their custom values instead of the template."})}),s.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:m.map(S=>{const A=n.find(F=>F.id===S.itemId),O=(A==null?void 0:A.description)||(A!=null&&A.model?`${A!=null&&A.brand?A.brand+" ":""}${A.model}`:A==null?void 0:A.brand)||"";return s.jsx(je,{className:S.isOverridden?"ring-2 ring-orange-200":"",children:s.jsxs(Ne,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium",children:[A==null?void 0:A.propertyNumber," - ",O]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:A==null?void 0:A.category})]}),S.isOverridden&&s.jsx(Be,{variant:"secondary",children:"Customized"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:`entity-${S.itemId}`,children:"Entity Name"}),s.jsx(we,{id:`entity-${S.itemId}`,value:S.entityName,onChange:F=>E(S.itemId,"entityName",F.target.value),placeholder:"Enter entity name"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:`fund-${S.itemId}`,children:"Fund Cluster"}),s.jsx(we,{id:`fund-${S.itemId}`,value:S.fundCluster,onChange:F=>E(S.itemId,"fundCluster",F.target.value),placeholder:"Enter fund cluster"})]})]})]})},S.itemId)})})]}),a==="preview"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx($t,{children:s.jsx(Ft,{children:"Review all property cards that will be created. Make sure all information is correct before proceeding."})}),s.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:m.map(S=>{const A=n.find(F=>F.id===S.itemId),O=(A==null?void 0:A.description)||(A!=null&&A.model?`${A!=null&&A.brand?A.brand+" ":""}${A.model}`:A==null?void 0:A.brand)||"";return s.jsx(je,{children:s.jsxs(Ne,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-medium",children:[A==null?void 0:A.propertyNumber," - ",O]}),S.isOverridden&&s.jsx(Be,{variant:"secondary",children:"Customized"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Entity Name:"})," ",S.entityName]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Fund Cluster:"})," ",S.fundCluster]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Property Number:"})," ",A==null?void 0:A.propertyNumber]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Description:"})," ",O]})]})]})},S.itemId)})})]}),a==="processing"&&s.jsx("div",{className:"space-y-4 text-center",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-lg font-medium",children:"Creating Property Cards..."}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[w," of ",m.length," cards created"]}),s.jsx(Mp,{value:w/m.length*100,className:"h-2"})]})})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs(ne,{variant:"outline",onClick:P,disabled:a==="selection"||a==="processing",children:[s.jsx(Uj,{className:"h-4 w-4 mr-2"}),"Previous"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{variant:"outline",onClick:t,children:"Cancel"}),a==="preview"?s.jsxs(ne,{onClick:H,disabled:x,children:[s.jsx(So,{className:"h-4 w-4 mr-2"}),"Create ",m.length," Property Cards"]}):s.jsxs(ne,{onClick:q,disabled:!K()||a==="processing",children:["Next",s.jsx(P2,{className:"h-4 w-4 ml-2"})]})]})]})]})})},YU=()=>{const e=zn();xs();const[t,r]=h.useState(""),[n,a]=h.useState(!1),[i,o]=h.useState(null),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,m]=h.useState({entityName:"",fundCluster:"",inventoryItemId:""}),[p,x]=h.useState(!1),[g,w]=h.useState(!1),[v,y]=h.useState(null),[b,N]=h.useState(!1),j=async R=>{try{const{data:X}=await te.from("fund_sources").select("name").eq("id",R).single();return(X==null?void 0:X.name)||null}catch(X){return console.error("Error fetching fund source:",X),null}},[C,E]=h.useState(!1),M=h.useMemo(()=>"",[]);h.useEffect(()=>{n&&(M?(m(R=>({...R,entityName:M})),x(!0)):x(!1))},[n,M]);const{toast:H}=Fr(),q=ga(),P=h.useRef(null);h.useEffect(()=>{const R=te.channel("realtime:property-cards-annex").on("postgres_changes",{event:"*",schema:"public",table:"property_cards"},()=>{console.log("[Realtime] Property card changed, refreshing..."),q.invalidateQueries({queryKey:["annex-property-cards"]})}).on("postgres_changes",{event:"*",schema:"public",table:"property_card_entries"},()=>{console.log("[Realtime] Property card entries changed, refreshing..."),q.invalidateQueries({queryKey:["annex-property-cards"]})}).on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},()=>{console.log("[Realtime] Inventory items changed, refreshing property cards and available items..."),q.invalidateQueries({queryKey:["annex-property-cards"]}),q.invalidateQueries({queryKey:["inventory-items-for-property-cards"]})}).subscribe();return()=>{te.removeChannel(R)}},[q]);const{data:K=[],isLoading:ee,error:D}=vt({queryKey:["annex-property-cards"],queryFn:async()=>{console.log("[PropertyCardsAnnex] Fetching property cards...");const{data:R,error:X}=await te.from("property_cards").select(`
          *,
          inventory_items(
            id,
            assignment_status,
            custodian,
            property_number,
            sub_category,
            unit_cost
          )
        `);if(X)throw console.error("[PropertyCardsAnnex] Error fetching property cards:",X),X;console.log("[PropertyCardsAnnex] Fetched property cards:",(R==null?void 0:R.length)||0);const T=(R||[]).sort((Y,le)=>{const Pe=new Date(Y.created_at).getTime(),re=new Date(le.created_at).getTime();return Pe!==re?re-Pe:(le.property_number||"").localeCompare(Y.property_number||"")}).map(Y=>{const le=Array.isArray(Y.inventory_items)?Y.inventory_items[0]:Y.inventory_items,Pe=le==null?void 0:le.sub_category,re=(le==null?void 0:le.unit_cost)||0,Se=Pe==="High Value Expendable"||!Pe&&re>5e3;return{id:Y.id,entityName:Y.entity_name,fundCluster:Y.fund_cluster,semiExpendableProperty:Y.semi_expendable_property,propertyNumber:Y.property_number,description:Y.description,dateAcquired:Y.date_acquired,remarks:Y.remarks,inventoryItemId:Y.inventory_item_id,entries:[],createdAt:Y.created_at,updatedAt:Y.updated_at,assignmentStatus:le==null?void 0:le.assignment_status,custodian:le==null?void 0:le.custodian,subCategory:Pe||(Se?"High Value Expendable":"Small Value Expendable"),unitCost:re,isHighValue:Se}});return console.log("[PropertyCardsAnnex] Mapped property cards:",T.length),T},staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,retry:(R,X)=>navigator.onLine?R<2:!1}),{data:S=[]}=vt({queryKey:["available-inventory-for-cards"],queryFn:async()=>{const{data:R,error:X}=await te.from("inventory_items").select("*").eq("category","Semi-Expendable").eq("status","Active").eq("condition","Serviceable").order("created_at",{ascending:!1});if(X){console.error("Error fetching available inventory:",X);const T=await rr.getAll();if(T.success){const Y=K.map(le=>le.inventoryItemId).filter(Boolean);return T.data.filter(le=>le.condition==="Serviceable"&&!Y.includes(le.id)&&le.status==="Active"&&(!le.assignmentStatus||le.assignmentStatus==="Available"))}return[]}const ie=K.map(T=>T.inventoryItemId).filter(Boolean);return R.filter(T=>!ie.includes(T.id)).map(T=>({id:T.id,propertyNumber:T.property_number,description:T.description,brand:T.brand,model:T.model,serialNumber:T.serial_number,entityName:T.entity_name,unitOfMeasure:T.unit_of_measure,quantity:T.quantity,unitCost:T.unit_cost,totalCost:T.total_cost,dateAcquired:T.date_acquired,supplier:T.supplier_id,condition:T.condition,location:T.location,fundSource:T.fund_source_id,remarks:T.remarks,lastInventoryDate:T.last_inventory_date,category:T.category,subCategory:T.sub_category,status:T.status,assignmentStatus:T.assignment_status,assignedDate:T.assigned_date,createdAt:T.created_at,updatedAt:T.updated_at}))},enabled:n,staleTime:2*60*1e3});h.useEffect(()=>{var X;const R=(X=e.state)==null?void 0:X.prefillItem;if(console.log("Checking for prefill item:",R),R)if(console.log("Prefill item found, opening creation dialog"),a(!0),S.length>0){const ie=S.find(T=>T.propertyNumber===R.propertyNumber);console.log("Matching inventory item:",ie),ie&&(m(T=>({...T,inventoryItemId:ie.id})),u([ie.id]))}else console.log("No inventory items available yet, will retry when loaded")},[e.state,S]);const A=na({mutationFn:async R=>await so.createPropertyCardFromInventory(R),onSuccess:()=>{H({title:"Success",description:"Property card created successfully"}),q.invalidateQueries({queryKey:["annex-property-cards"]}),a(!1),m({entityName:"",fundCluster:"",inventoryItemId:""})},onError:R=>{H({title:"Error",description:R.message,variant:"destructive"})}}),O=na({mutationFn:async R=>{const X=await Et.canDelete(R);if(!X.success||!X.data)throw new Error("This property card cannot be deleted because it has custodian slip references.");const ie=await Et.safeDelete(R);if(!ie.success)throw new Error(ie.error||"Failed to delete property card");return ie.data},onSuccess:()=>{H({title:"Success",description:"Property card deleted successfully"}),q.invalidateQueries({queryKey:["annex-property-cards"]}),y(null),E(!1)},onError:R=>{H({title:"Error",description:R.message,variant:"destructive"})}}),F=async R=>{const X=await so.getPropertyCardWithEntries(R);if(!X)return null;try{const{data:ie}=await te.from("inventory_items").select("*").eq("id",X.inventoryItemId).single();if(ie)return{...X,brand:ie.brand,model:ie.model,serialNumber:ie.serial_number,quantity:ie.quantity,unitOfMeasure:ie.unit_of_measure,unitCost:ie.unit_cost,totalCost:ie.total_cost,semiExpandableCategory:ie.semi_expandable_category,subCategory:ie.sub_category,condition:ie.condition,status:ie.status,supplier:ie.supplier,fundSource:ie.fund_source}}catch(ie){console.error("Error fetching inventory details:",ie)}return X},L=async()=>{if(A.isPending){console.log("Property card creation already in progress, ignoring duplicate click");return}if(!f.entityName||!f.fundCluster||!f.inventoryItemId){H({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const R=S.find(X=>X.id===f.inventoryItemId);if(!R){H({title:"Error",description:"Selected inventory item not found",variant:"destructive"});return}console.log("Creating property card for item:",R.propertyNumber),A.mutate({inventoryItemId:f.inventoryItemId,entityName:f.entityName,fundCluster:f.fundCluster})},J=async R=>{try{const X=await F(R.id);X&&o(X)}catch{H({title:"Error",description:"Failed to load property card details",variant:"destructive"})}},ce=async R=>{try{const X=await F(R.id);X&&(o(X),c(!0))}catch{H({title:"Error",description:"Failed to load property card for printing",variant:"destructive"})}},B=R=>{if(R.assignmentStatus==="Assigned"){H({title:"Cannot Delete Property Card",description:`This item is currently assigned to ${R.custodian}. Please return the item before deleting the property card.`,variant:"destructive"});return}y(R),E(!0)},I=()=>{v&&O.mutate(v.id)},V=R=>({entityName:R.entityName,fundCluster:R.fundCluster,semiExpendableProperty:R.semiExpendableProperty,description:R.description,propertyNumber:R.propertyNumber,entries:R.entries||[],remarks:R.remarks||""}),Q=K.filter(R=>R.propertyNumber.toLowerCase().includes(t.toLowerCase())||R.description.toLowerCase().includes(t.toLowerCase())||R.entityName.toLowerCase().includes(t.toLowerCase())),se=Q.filter(R=>R.isHighValue===!0),Z=Q.filter(R=>R.isHighValue!==!0);return ee&&K.length===0?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Nt,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading property cards..."})]}):D&&navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs($t,{className:"max-w-md mx-auto",children:[s.jsx(vn,{className:"h-4 w-4"}),s.jsxs(Ft,{children:["Error: ",D.message]})]}),s.jsx(ne,{onClick:()=>q.invalidateQueries({queryKey:["annex-property-cards"]}),className:"mt-4",children:"Retry"})]}):D&&!navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs($t,{className:"max-w-md mx-auto",children:[s.jsx(vn,{className:"h-4 w-4"}),s.jsx(Ft,{children:"You're offline. Some features may not work until your connection is restored."})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-muted-foreground",children:"Previously loaded property cards will appear when available."})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Semi-Expendable Property Cards (Annex A.1)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ne,{onClick:()=>N(!0),variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Un,{className:"h-4 w-4"}),"Bulk Create"]}),s.jsxs(ne,{onClick:()=>a(!0),className:"flex items-center gap-2",children:[s.jsx(Un,{className:"h-4 w-4"}),"Create from Inventory"]})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(we,{placeholder:"Search property cards...",value:t,onChange:R=>r(R.target.value),className:"pl-10"})]})}),s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{children:"Semi-Expendable Property Cards"})}),s.jsx(Ne,{children:s.jsxs(kf,{defaultValue:"high-value",className:"w-full",children:[s.jsxs(kc,{className:"grid w-full grid-cols-2",children:[s.jsxs(Hr,{value:"high-value",className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"High Value"}),s.jsx(Be,{variant:"secondary",className:"ml-auto",children:ee?"...":se.length})]}),s.jsxs(Hr,{value:"low-value",className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Low Value"}),s.jsx(Be,{variant:"secondary",className:"ml-auto",children:ee?"...":Z.length})]})]}),(()=>{const R=(X,ie)=>s.jsx("div",{className:"rounded-md border mt-4",children:s.jsxs(Gt,{children:[s.jsx(sr,{children:s.jsxs(Ve,{children:[s.jsx(he,{className:"font-semibold",children:"Property Number"}),s.jsx(he,{children:"Description"}),s.jsx(he,{children:"Entity Name"}),s.jsx(he,{children:"Fund Cluster"}),s.jsx(he,{children:"Date Acquired"}),s.jsx(he,{children:"Assignment Status"}),s.jsx(he,{children:"Actions"})]})}),s.jsx(ar,{children:ie?s.jsx(Ve,{children:s.jsx(de,{colSpan:7,className:"text-center py-8",children:s.jsx(Nt,{className:"h-6 w-6 animate-spin mx-auto"})})}):X.length===0?s.jsx(Ve,{children:s.jsx(de,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No property cards found."})}):X.map(T=>s.jsxs(Ve,{children:[s.jsx(de,{className:"font-medium font-mono",children:T.propertyNumber}),s.jsx(de,{className:"max-w-xs",children:s.jsx("div",{className:"truncate",title:T.description,children:T.description})}),s.jsx(de,{children:T.entityName}),s.jsx(de,{children:T.fundCluster}),s.jsx(de,{children:T.dateAcquired}),s.jsx(de,{children:T.assignmentStatus==="Assigned"&&T.custodian?s.jsxs(Be,{variant:"secondary",className:"text-xs",children:["Assigned to: ",T.custodian]}):s.jsx(Be,{variant:"outline",className:"text-xs",children:"Available"})}),s.jsx(de,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>J(T),title:"View Details",disabled:O.isPending,children:s.jsx(pc,{className:"h-4 w-4"})}),s.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>ce(T),title:"Print",disabled:O.isPending,children:s.jsx(zt,{className:"h-4 w-4"})}),s.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>B(T),title:T.assignmentStatus==="Assigned"?`Cannot delete - item is assigned to ${T.custodian}`:"Delete property card",className:"text-destructive hover:text-destructive",disabled:O.isPending||T.assignmentStatus==="Assigned",children:O.isPending&&(v==null?void 0:v.id)===T.id?s.jsx(Nt,{className:"h-4 w-4 animate-spin"}):s.jsx(ei,{className:"h-4 w-4"})})]})})]},T.id))})]})});return s.jsxs(s.Fragment,{children:[s.jsxs(Kr,{value:"high-value",className:"mt-4",children:[s.jsx("div",{className:"mb-4 text-sm text-muted-foreground",children:"Items above 5,000 - High Value Expendable (SPHV)"}),R(se,ee)]}),s.jsxs(Kr,{value:"low-value",className:"mt-4",children:[s.jsx("div",{className:"mb-4 text-sm text-muted-foreground",children:"Items 5,000 or less - Small Value Expendable (SPLV)"}),R(Z,ee)]})]})})()]})})]}),s.jsx(Tr,{open:n,onOpenChange:a,children:s.jsxs(vr,{className:"max-w-2xl",children:[s.jsxs(Ar,{children:[s.jsx(Or,{children:"Create Property Card from Inventory"}),s.jsx(ls,{children:"Select an inventory item to create a Semi-Expendable Property Card (Annex A.1)"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"entityName",children:"Entity Name *"}),s.jsx(we,{id:"entityName",value:f.entityName,onChange:R=>m(X=>({...X,entityName:R.target.value})),placeholder:"PROVINCIAL GOVERNMENT OF APAYAO",disabled:p})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fundCluster",children:"Fund Cluster *"}),s.jsx(we,{id:"fundCluster",value:f.fundCluster,onChange:R=>m(X=>({...X,fundCluster:R.target.value})),placeholder:"Enter fund cluster",disabled:g})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"inventoryItem",children:"Select Inventory Item *"}),s.jsxs(ct,{value:f.inventoryItemId,onValueChange:async R=>{const X=S.find(ie=>ie.id===R);if(m(ie=>({...ie,inventoryItemId:R,entityName:(X==null?void 0:X.entityName)||ie.entityName})),x(!!(X!=null&&X.entityName)),X!=null&&X.fundSource){const ie=await j(X.fundSource);ie?(m(T=>({...T,fundCluster:ie})),w(!0)):w(!1)}else w(!1)},children:[s.jsx(at,{children:s.jsx(dt,{placeholder:"Choose an inventory item"})}),s.jsx(it,{children:S.map(R=>s.jsxs(pe,{value:R.id,children:[R.propertyNumber," - ",R.description]},R.id))})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ne,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsxs(ne,{onClick:L,disabled:A.isPending,children:[A.isPending&&s.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Property Card"]})]})]})]})}),s.jsx(Tr,{open:l,onOpenChange:c,children:s.jsx(vr,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:s.jsx("div",{ref:P,children:i&&s.jsx(dE,{data:V(i)})})})}),s.jsx(Tr,{open:!!i&&!l,onOpenChange:()=>o(null),children:s.jsxs(vr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Ar,{children:[s.jsx(Or,{children:"Property Card Details"}),s.jsxs(ls,{children:[i==null?void 0:i.propertyNumber," - ",i==null?void 0:i.description]})]}),i&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Entity Name"}),s.jsx("p",{className:"text-sm",children:i.entityName})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Fund Cluster"}),s.jsx("p",{className:"text-sm",children:i.fundCluster})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Property Number"}),s.jsx("p",{className:"font-mono font-semibold",children:i.propertyNumber})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Date Acquired"}),s.jsx("p",{className:"text-sm",children:i.dateAcquired})]})]}),i.brand||i.model||i.serialNumber?s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-semibold",children:"Item Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[i.brand&&s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Brand"}),s.jsx("p",{className:"text-sm",children:i.brand})]}),i.model&&s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Model"}),s.jsx("p",{className:"text-sm",children:i.model})]}),i.serialNumber&&s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Serial Number"}),s.jsx("p",{className:"font-mono text-sm",children:i.serialNumber})]}),i.quantity&&s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Quantity"}),s.jsxs("p",{className:"text-sm",children:[i.quantity," ",i.unitOfMeasure]})]})]})]}):null,i.unitCost!==void 0?s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-semibold",children:"Financial Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Unit Cost"}),s.jsxs("p",{className:"font-semibold text-sm",children:["",(i.unitCost||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Total Cost"}),s.jsxs("p",{className:"font-semibold text-sm",children:["",(i.totalCost||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}):null,i.entries&&i.entries.length>0&&s.jsxs("div",{children:[s.jsx(ae,{className:"text-sm font-semibold",children:"Property Card Entries"}),s.jsx("div",{className:"mt-2 rounded-md border",children:s.jsxs(Gt,{children:[s.jsx(sr,{children:s.jsxs(Ve,{children:[s.jsx(he,{children:"Date"}),s.jsx(he,{children:"Reference"}),s.jsx(he,{children:"Receipt Qty"}),s.jsx(he,{children:"Issue Qty"}),s.jsx(he,{children:"Office/Officer"}),s.jsx(he,{children:"Balance"})]})}),s.jsx(ar,{children:i.entries.map(R=>s.jsxs(Ve,{children:[s.jsx(de,{children:R.date}),s.jsx(de,{children:R.reference}),s.jsx(de,{children:R.receiptQty||"-"}),s.jsx(de,{children:R.issueQty||"-"}),s.jsx(de,{children:R.officeOfficer||"-"}),s.jsx(de,{children:R.balanceQty})]},R.id))})]})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ne,{variant:"outline",onClick:()=>o(null),children:"Close"}),s.jsxs(ne,{onClick:()=>c(!0),children:[s.jsx(zt,{className:"mr-2 h-4 w-4"}),"Print"]})]})]})]})}),s.jsx(Tr,{open:C,onOpenChange:E,children:s.jsxs(vr,{children:[s.jsxs(Ar,{children:[s.jsx(Or,{children:"Delete Property Card"}),s.jsxs(ls,{children:["Are you sure you want to delete this property card? This action cannot be undone.",v&&s.jsxs("div",{className:"mt-2 p-2 bg-muted rounded",children:[s.jsx("strong",{children:"Property Card:"})," ",v.propertyNumber,s.jsx("br",{}),s.jsx("strong",{children:"Description:"})," ",v.description]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ne,{variant:"outline",onClick:()=>{E(!1),y(null)},disabled:O.isPending,children:"Cancel"}),s.jsx(ne,{variant:"destructive",onClick:I,disabled:O.isPending,children:O.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ei,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]})}),s.jsx(GU,{isOpen:b,onClose:()=>N(!1),onSuccess:()=>{q.invalidateQueries({queryKey:["annex-property-cards"]}),q.invalidateQueries({queryKey:["available-inventory-for-cards"]}),q.invalidateQueries({queryKey:["available-inventory-for-slips"]}),q.invalidateQueries({queryKey:["dashboard-stats"]}),H({title:"Success",description:"Property cards created successfully!"})},inventoryItems:S})]})},gE=({data:e})=>{const r=Math.max(0,15-e.items.length);return s.jsxs("div",{className:"max-w-4xl mx-auto bg-white",children:[s.jsx("div",{className:"flex justify-end mb-4 print:hidden",children:s.jsxs(ne,{onClick:()=>window.print(),className:"flex items-center gap-2",children:[s.jsx(zt,{className:"h-4 w-4"}),"Print"]})}),s.jsxs("div",{className:"border-2 border-black print:border-black min-h-[11in] font-mono text-sm",children:[s.jsx("div",{className:"text-center py-3 border-b border-black",children:s.jsx("h1",{className:"text-lg font-bold",children:"INVENTORY CUSTODIAN SLIP"})}),s.jsxs("div",{className:"grid grid-cols-2 border-b border-black",children:[s.jsxs("div",{className:"p-2 border-r border-black",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs font-semibold",children:"Entity Name:"}),s.jsx("div",{className:"border-b border-black flex-1 min-h-[20px] px-1",children:e.entityName})]}),s.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[s.jsx("span",{className:"text-xs font-semibold",children:"Fund Cluster:"}),s.jsx("div",{className:"border-b border-black flex-1 min-h-[20px] px-1",children:e.fundCluster})]})]}),s.jsx("div",{className:"p-2 flex items-start justify-end",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs font-semibold",children:"ICS No.:"}),s.jsx("div",{className:"border-b border-black min-w-[120px] min-h-[20px] px-1",children:e.slipNumber})]})})]}),s.jsxs("table",{className:"w-full border-collapse text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"border-r border-black p-2 w-16 text-center font-semibold",children:"Quantity"}),s.jsx("th",{className:"border-r border-black p-2 w-12 text-center font-semibold",children:"Units of Measure"}),s.jsxs("th",{className:"border-r border-black p-2 text-center font-semibold",children:[s.jsx("div",{children:"Amount"}),s.jsxs("div",{className:"grid grid-cols-2 border-t border-black mt-1",children:[s.jsx("div",{className:"border-r border-black p-1",children:"Unit Cost"}),s.jsx("div",{className:"p-1",children:"Total Cost"})]})]}),s.jsx("th",{className:"border-r border-black p-2 text-center font-semibold",children:"Description"}),s.jsx("th",{className:"border-r border-black p-2 w-16 text-center font-semibold",children:"Item No."}),s.jsxs("th",{className:"p-2 w-20 text-center font-semibold",children:[s.jsx("div",{children:"Estimated"}),s.jsx("div",{children:"Useful Life"})]})]})}),s.jsxs("tbody",{children:[e.items.map((n,a)=>s.jsxs("tr",{className:"border-b border-black",children:[s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.quantity}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.unit}),s.jsx("td",{className:"border-r border-black p-0 align-top",children:s.jsxs("div",{className:"grid grid-cols-2 h-full",children:[s.jsxs("div",{className:"border-r border-black p-2 text-right",children:["",n.unitCost.toFixed(2)]}),s.jsxs("div",{className:"p-2 text-right",children:["",n.totalCost.toFixed(2)]})]})}),s.jsx("td",{className:"border-r border-black p-2 align-top",children:n.description}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.itemNumber}),s.jsx("td",{className:"p-2 text-center align-top",children:n.estimatedUsefulLife})]},a)),Array.from({length:r}).map((n,a)=>s.jsxs("tr",{className:"border-b border-black",children:[s.jsx("td",{className:"border-r border-black p-2 h-8",children:""}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"border-r border-black p-0",children:s.jsxs("div",{className:"grid grid-cols-2 h-8",children:[s.jsx("div",{className:"border-r border-black",children:""}),s.jsx("div",{children:""})]})}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"p-2",children:""})]},`empty-${a}`))]})]}),s.jsxs("div",{className:"grid grid-cols-2 border-t border-black",children:[s.jsxs("div",{className:"border-r border-black p-4",children:[s.jsx("div",{className:"text-xs font-semibold mb-1",children:"Received from:"}),s.jsxs("div",{className:"mt-12 pt-8",children:[s.jsx("div",{className:"border-b border-black mb-1 text-center px-1 min-h-[20px]",children:e.issuedBy||""}),s.jsx("div",{className:"text-center text-[10px]",children:"Signature Over Printed Name"}),s.jsx("div",{className:"border-b border-black mb-1 mt-4 text-center px-1 min-h-[20px]",children:e.office||""}),s.jsx("div",{className:"text-center text-[10px]",children:"Position/Office"}),s.jsx("div",{className:"border-b border-black mb-1 mt-4 text-center px-1 min-h-[20px]",children:e.dateIssued||""}),s.jsx("div",{className:"text-center text-[10px]",children:"Date"})]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"text-xs font-semibold mb-1",children:"Received by:"}),s.jsxs("div",{className:"mt-12 pt-8",children:[s.jsx("div",{className:"border-b border-black mb-1 text-center px-1 min-h-[20px]",children:e.receivedBy||e.custodianName||""}),s.jsx("div",{className:"text-center text-[10px]",children:"Signature Over Printed Name"}),s.jsx("div",{className:"border-b border-black mb-1 mt-4 text-center px-1 min-h-[20px]",children:e.designation||e.office||""}),s.jsx("div",{className:"text-center text-[10px]",children:"Position/Office"}),s.jsx("div",{className:"border-b border-black mb-1 mt-4 text-center px-1 min-h-[20px]",children:e.dateIssued||""}),s.jsx("div",{className:"text-center text-[10px]",children:"Date"})]})]})]})]})]})},ss={async getAll(e={}){let t=te.from("custodians").select(`
        *,
        departments!custodians_department_id_fkey (
          id,
          name
        )
      `).order("name",{ascending:!0});e.search&&(t=t.or(`name.ilike.%${e.search}%,custodian_no.ilike.%${e.search}%`)),e.department_id&&(t=t.eq("department_id",e.department_id)),e.is_active!==void 0&&(t=t.eq("is_active",e.is_active)),e.limit&&(t=t.limit(e.limit)),e.offset&&(t=t.range(e.offset,e.offset+(e.limit||10)-1));const{data:r,error:n}=await t;if(n)throw n;return(r==null?void 0:r.map(a=>{var i;return{...a,department_name:(i=a.departments)==null?void 0:i.name}}))||[]},async getById(e){var n;const{data:t,error:r}=await te.from("custodians").select(`
        *,
        departments!custodians_department_id_fkey (
          id,
          name
        )
      `).eq("id",e).single();if(r)throw r;return t?{...t,department_name:(n=t.departments)==null?void 0:n.name}:null},async getSummary(e){const t=await this.getById(e);if(!t)return null;const{data:r,error:n}=await te.from("custodian_slips").select("id, slip_number, custodian_name, date_issued").eq("custodian_name",t.name);if(n)throw n;const a=(r==null?void 0:r.map(g=>g.id))||[];let i=[];if(a.length>0){const{data:g,error:w}=await te.from("custodian_slip_items").select(`
          *,
          inventory_items (
            property_number,
            description,
            category,
            sub_category,
            unit_cost,
            total_cost,
            condition,
            status,
            assignment_status,
            assigned_date
          )
        `).in("slip_id",a);if(w)throw w;i=g||[]}const{data:o,error:l}=await te.from("inventory_items").select("*").eq("custodian",t.name).eq("assignment_status","Assigned").eq("status","Active");if(l)throw l;const c=(i==null?void 0:i.length)||0,d=(i==null?void 0:i.reduce((g,w)=>{var v;return g+(((v=w.inventory_items)==null?void 0:v.total_cost)||0)},0))||0,u=(o==null?void 0:o.length)||0,f=(o==null?void 0:o.reduce((g,w)=>g+(w.total_cost||0),0))||0,m=c-u,p=d-f,x=r!=null&&r.length?Math.max(...r.map(g=>new Date(g.date_issued||0).getTime())):void 0;return{custodian:t,total_items_assigned:c,total_value_assigned:d,currently_assigned_items:u,currently_assigned_value:f,historical_items:m,historical_value:p,last_activity_date:x?new Date(x).toISOString():void 0}},async getItemHistory(e,t={}){const r=await this.getById(e);if(!r)return[];const{data:n,error:a}=await te.from("custodian_slips").select("id, slip_number, custodian_name, date_issued").eq("custodian_name",r.name);if(a)throw a;if(!n||n.length===0)return[];const i=n.map(u=>u.id);let o=te.from("custodian_slip_items").select(`
        *,
        custodian_slips!inner (id, slip_number, custodian_name, date_issued),
        inventory_items (
          property_number,
          description,
          brand,
          model,
          category,
          sub_category,
          unit_cost,
          total_cost,
          condition,
          status,
          assignment_status,
          assigned_date
        )
      `).in("slip_id",i).order("created_at",{ascending:!1});t.includeReturned,t.limit&&(o=o.limit(t.limit)),t.offset&&(o=o.range(t.offset,t.offset+(t.limit||10)-1));const{data:l,error:c}=await o;if(c)throw c;let d=l||[];return t.includeReturned||(d=d.filter(u=>{var f;return((f=u.inventory_items)==null?void 0:f.assignment_status)==="Assigned"})),d.map(u=>{const f=n.find(x=>x.id===u.slip_id),m=u.inventory_items,p=(m==null?void 0:m.description)||(m!=null&&m.model?`${(m==null?void 0:m.brand)||""} ${m==null?void 0:m.model}`.trim():m==null?void 0:m.brand)||"No description available";return{id:u.id,property_number:(m==null?void 0:m.property_number)||"",description:p,category:(m==null?void 0:m.category)||"Semi-Expendable",sub_category:m==null?void 0:m.sub_category,unit_cost:Number(m==null?void 0:m.unit_cost)||0,total_cost:Number(m==null?void 0:m.total_cost)||0,condition:(m==null?void 0:m.condition)||"",status:(m==null?void 0:m.status)||"",assignment_status:(m==null?void 0:m.assignment_status)||"",assigned_date:m==null?void 0:m.assigned_date,custodian_slip_id:u.slip_id,custodian_slip_number:(f==null?void 0:f.slip_number)||"",date_issued:(f==null?void 0:f.date_issued)||"",date_returned:(m==null?void 0:m.assignment_status)==="Available"?m==null?void 0:m.assigned_date:void 0,is_currently_assigned:(m==null?void 0:m.assignment_status)==="Assigned"}})},async getCurrentItems(e){const t=await this.getById(e);if(!t)return[];const{data:r,error:n}=await te.from("inventory_items").select("*").eq("custodian",t.name).eq("assignment_status","Assigned").eq("status","Active").order("assigned_date",{ascending:!1});if(n)throw n;return(r==null?void 0:r.map(a=>{const i=a.description||(a.model?`${a.brand||""} ${a.model}`.trim():a.brand)||"No description available";return{id:a.id,property_number:a.property_number,description:i,category:a.category||"Semi-Expendable",sub_category:a.sub_category,unit_cost:Number(a.unit_cost)||0,total_cost:Number(a.total_cost)||0,condition:a.condition,status:a.status,assignment_status:a.assignment_status,assigned_date:a.assigned_date,custodian_slip_id:"",custodian_slip_number:"",date_issued:a.assigned_date||"",date_returned:void 0,is_currently_assigned:!0}}))||[]},async create(e){var n;const{data:t,error:r}=await te.from("custodians").insert([e]).select(`
        *,
        departments!custodians_department_id_fkey (
          id,
          name
        )
      `).single();if(r)throw r;return{...t,department_name:(n=t.departments)==null?void 0:n.name}},async update(e,t){var a;const{data:r,error:n}=await te.from("custodians").update(t).eq("id",e).select(`
        *,
        departments!custodians_department_id_fkey (
          id,
          name
        )
      `).single();if(n)throw n;return{...r,department_name:(a=r.departments)==null?void 0:a.name}},async delete(e){const{error:t}=await te.from("custodians").delete().eq("id",e);if(t)throw t},async getAllSummaries(e={}){const t=await this.getAll(e),r=[];for(const n of t){const a=await this.getSummary(n.id);a&&r.push(a)}return r}},Tu=({value:e,onChange:t,placeholder:r="Search for custodian...",label:n="Custodian Name",required:a=!1,className:i})=>{const[o,l]=h.useState(!1),[c,d]=h.useState(""),[u,f]=h.useState(null),m=h.useRef(null),p=h.useRef(null),{data:x=[],isLoading:g}=vt({queryKey:["custodians-search",c],queryFn:()=>ss.getAll({search:c,is_active:!0,limit:20}),enabled:o,staleTime:5*60*1e3}),w=x.filter(j=>j.name.toLowerCase().includes(c.toLowerCase())||j.custodian_no.toLowerCase().includes(c.toLowerCase())||j.department_name&&j.department_name.toLowerCase().includes(c.toLowerCase())),v=j=>{f(j),d(j.name),l(!1),t(j.name,j)},y=j=>{const C=j.target.value;d(C),C?u&&C!==u.name&&(f(null),t(C)):(f(null),t("")),l(!0)},b=()=>{l(!0),!c&&u&&d(u.name)},N=()=>{setTimeout(()=>{l(!1)},200)};return h.useEffect(()=>{const j=C=>{m.current&&!m.current.contains(C.target)&&l(!1)};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[]),h.useEffect(()=>{e&&!u&&d(e)},[e,u]),s.jsxs("div",{className:be("relative",i),ref:m,children:[n&&s.jsxs(ae,{htmlFor:"custodian-selector",className:"text-sm font-medium",children:[n," ",a&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(we,{ref:p,id:"custodian-selector",value:c,onChange:y,onFocus:b,onBlur:N,placeholder:r,className:"pl-10 pr-10",autoComplete:"off"}),s.jsx(ne,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:()=>l(!o),children:s.jsx(Ju,{className:be("h-4 w-4 transition-transform",o&&"rotate-180")})})]}),o&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto",children:g?s.jsx("div",{className:"p-3 text-center text-sm text-muted-foreground",children:"Loading custodians..."}):w.length===0?s.jsx("div",{className:"p-3 text-center text-sm text-muted-foreground",children:c?"No custodians found":"Start typing to search custodians"}):s.jsx("div",{className:"py-1",children:w.map(j=>s.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",onClick:()=>v(j),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kl,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:j.name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[j.custodian_no,j.department_name&&s.jsxs(s.Fragment,{children:["  ",s.jsx(Fg,{className:"inline h-3 w-3 mr-1"}),j.department_name]})]})]})]}),(u==null?void 0:u.id)===j.id&&s.jsx(Fn,{className:"h-4 w-4 text-green-600"})]})},j.id))})})]}),u&&s.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fn,{className:"h-4 w-4 text-green-600"}),s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"font-medium text-green-800",children:["Selected: ",u.name]}),s.jsxs("div",{className:"text-green-600",children:[u.custodian_no,u.department_name&&`  ${u.department_name}`]})]})]})})]})},vE=({value:e,onChange:t,placeholder:r="Search for department...",label:n="Office/Department",required:a=!1,className:i})=>{const[o,l]=h.useState(!1),[c,d]=h.useState(""),[u,f]=h.useState(null),m=h.useRef(null),p=h.useRef(null),{data:x=[],isLoading:g}=vt({queryKey:["departments-search",c],queryFn:()=>hr.getDepartments(),enabled:o,staleTime:5*60*1e3}),w=x.filter(j=>j.name.toLowerCase().includes(c.toLowerCase())||j.code&&j.code.toLowerCase().includes(c.toLowerCase())),v=j=>{f(j),d(j.name),l(!1),t(j.name,j)},y=j=>{const C=j.target.value;d(C),C?u&&C!==u.name&&(f(null),t(C)):(f(null),t("")),l(!0)},b=()=>{l(!0),!c&&u&&d(u.name)},N=()=>{setTimeout(()=>{l(!1)},200)};return h.useEffect(()=>{const j=C=>{m.current&&!m.current.contains(C.target)&&l(!1)};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[]),h.useEffect(()=>{e&&!u&&d(e)},[e,u]),s.jsxs("div",{className:be("relative",i),ref:m,children:[n&&s.jsxs(ae,{htmlFor:"department-selector",className:"text-sm font-medium",children:[n," ",a&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(we,{ref:p,id:"department-selector",value:c,onChange:y,onFocus:b,onBlur:N,placeholder:r,className:"pl-10 pr-10",autoComplete:"off"}),s.jsx(ne,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:()=>l(!o),children:s.jsx(Ju,{className:be("h-4 w-4 transition-transform",o&&"rotate-180")})})]}),o&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto",children:g?s.jsx("div",{className:"p-3 text-center text-sm text-muted-foreground",children:"Loading departments..."}):w.length===0?s.jsx("div",{className:"p-3 text-center text-sm text-muted-foreground",children:c?"No departments found":"Start typing to search departments"}):s.jsx("div",{className:"py-1",children:w.map(j=>s.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",onClick:()=>v(j),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fg,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:j.name}),j.code&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx(hx,{className:"inline h-3 w-3 mr-1"}),j.code]})]})]}),(u==null?void 0:u.id)===j.id&&s.jsx(Fn,{className:"h-4 w-4 text-green-600"})]})},j.id))})})]}),u&&s.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fn,{className:"h-4 w-4 text-green-600"}),s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"font-medium text-green-800",children:["Selected: ",u.name]}),u.code&&s.jsxs("div",{className:"text-green-600",children:[s.jsx(hx,{className:"inline h-3 w-3 mr-1"}),u.code]})]})]})})]})},yE=({value:e,onChange:t,placeholder:r="Search for custodian or enter manually...",label:n="Received By",required:a=!1,className:i})=>{const[o,l]=h.useState(!1),[c,d]=h.useState(!1),[u,f]=h.useState(e),{data:m=[],isLoading:p,error:x}=vt({queryKey:["custodians-for-received-by"],queryFn:async()=>{try{return await ss.getAll()||[]}catch(b){return console.error("Error fetching custodians:",b),[]}},staleTime:5*60*1e3}),g=h.useMemo(()=>!e||e.length<2?m:m.filter(b=>{var N,j;return b.name.toLowerCase().includes(e.toLowerCase())||((N=b.position)==null?void 0:N.toLowerCase().includes(e.toLowerCase()))||((j=b.department_name)==null?void 0:j.toLowerCase().includes(e.toLowerCase()))}),[m,e]),w=()=>{d(!c),c?f(""):(f(""),t(""))},v=b=>{t(b),l(!1),d(!1)},y=b=>{f(b),t(b)};return h.useEffect(()=>{c&&f(e)},[e,c]),s.jsxs("div",{className:be("space-y-2",i),children:[s.jsxs(ae,{htmlFor:"received-by-selector",children:[n,a&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1",children:c?s.jsx(we,{id:"received-by-manual",value:u,onChange:b=>y(b.target.value),placeholder:"Enter receiver name manually...",className:"w-full"}):s.jsxs(v1,{open:o,onOpenChange:l,children:[s.jsx(y1,{asChild:!0,children:s.jsxs(ne,{variant:"outline",role:"combobox","aria-expanded":o,className:"w-full justify-between",children:[e?s.jsx("span",{className:"truncate",children:e}):s.jsx("span",{className:"text-muted-foreground",children:r}),s.jsx(zj,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(Tv,{className:"w-full p-0",align:"start",children:s.jsxs(Iv,{children:[s.jsx(Av,{placeholder:"Search custodians..."}),s.jsxs(Ov,{children:[s.jsx(Dv,{children:p?"Loading custodians...":"No custodians found."}),s.jsx(Mv,{children:g.map(b=>s.jsxs(Lv,{value:b.name,onSelect:()=>v(b.name),children:[s.jsx(Fn,{className:be("mr-2 h-4 w-4",e===b.name?"opacity-100":"opacity-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:b.name}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[b.position,"  ",b.department_name]})]})]},b.id))})]})]})})]})}),s.jsx(ne,{type:"button",variant:"outline",size:"sm",onClick:w,className:"px-3",title:c?"Switch to dropdown selection":"Switch to manual input",children:s.jsx(Kl,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:c?"Manual input mode - type the receiver's name directly":"Dropdown mode - search and select from existing custodians"})]})},XU=()=>{const[e,t]=h.useState(null),[r,n]=h.useState(!1),[a,i]=h.useState(""),o=h.useRef(null),{toast:l}=Fr(),c=ga(),[d,u]=h.useState([]),[f,m]=h.useState(""),[p,x]=h.useState(null),[g,w]=h.useState(null),v=(O,F)=>{M(L=>({...L,custodianName:O})),x(F||null),F&&M(L=>({...L,custodianName:O,designation:F.position||L.designation,office:F.department_name||L.office}))},y=(O,F)=>{M(L=>({...L,office:O})),w(F||null)},{data:b=[],isLoading:N,error:j}=vt({queryKey:["custodian-slips"],queryFn:async()=>{const{data:O,error:F}=await te.from("custodian_slips").select("*").order("created_at",{ascending:!1});if(F)throw F;return(O||[]).map(L=>({id:L.id,slipNumber:L.slip_number,custodianName:L.custodian_name,designation:L.designation,office:L.office,items:[],dateIssued:L.date_issued,issuedBy:L.issued_by,receivedBy:L.received_by}))},staleTime:5*60*1e3,retry:(O,F)=>navigator.onLine?O<2:!1}),{data:C=[]}=vt({queryKey:["inventory-for-slips"],queryFn:async()=>{const O=await rr.getAll({limit:100});return O.success?O.data:[]},staleTime:5*60*1e3,retry:(O,F)=>navigator.onLine?O<2:!1}),[E,M]=h.useState({custodianName:"",designation:"",office:"",items:[{propertyNumber:"",description:"",quantity:1,unit:"",dateIssued:""}],dateIssued:"",issuedBy:"",receivedBy:""}),H=async()=>{if(!E.custodianName||!E.dateIssued||!E.issuedBy||!E.receivedBy){l({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}const{data:O,error:F}=await te.from("custodian_slips").insert({slip_number:"",custodian_name:E.custodianName,designation:E.designation,office:E.office,date_issued:E.dateIssued,issued_by:E.issuedBy,received_by:E.receivedBy}).select("*").single();if(F){l({title:"Error",description:F.message,variant:"destructive"});return}const L=(E.items||[]).map(J=>({slip_id:O.id,property_number:J.propertyNumber,description:J.description,quantity:J.quantity,unit:J.unit,date_issued:E.dateIssued}));if(L.length){const{error:J}=await te.from("custodian_slip_items").insert(L);J&&l({title:"Items error",description:J.message,variant:"destructive"})}c.invalidateQueries({queryKey:["custodian-slips"]}),M({custodianName:"",designation:"",office:"",items:[{propertyNumber:"",description:"",quantity:1,unit:"",dateIssued:""}],dateIssued:"",issuedBy:"",receivedBy:""}),x(null),w(null),n(!1),l({title:"Success",description:"Custodian slip created successfully"})};h.useEffect(()=>{const O=te.channel("realtime:ics").on("postgres_changes",{event:"*",schema:"public",table:"custodian_slips"},()=>{c.invalidateQueries({queryKey:["custodian-slips"]})}).on("postgres_changes",{event:"*",schema:"public",table:"custodian_slip_items"},()=>{c.invalidateQueries({queryKey:["custodian-slips"]})}).subscribe();return()=>{te.removeChannel(O)}},[c]);const q=async O=>{const{data:F}=await te.from("custodian_slip_items").select("*").eq("slip_id",O.id).order("date_issued",{ascending:!0}),L={...O,items:(F||[]).map(B=>({propertyNumber:B.property_number,description:B.description,quantity:B.quantity,unit:B.unit,dateIssued:B.date_issued}))};t(L);const J=te.channel(`realtime:ics-items:${O.id}`).on("postgres_changes",{event:"*",schema:"public",table:"custodian_slip_items",filter:`slip_id=eq.${O.id}`},async()=>{const{data:B}=await te.from("custodian_slip_items").select("*").eq("slip_id",O.id).order("date_issued",{ascending:!0});t(I=>I&&{...I,items:(B||[]).map(V=>({propertyNumber:V.property_number,description:V.description,quantity:V.quantity,unit:V.unit,dateIssued:V.date_issued}))})}).subscribe(),ce=()=>te.removeChannel(J);window.__icsCleanup=ce},P=()=>{window.__icsCleanup&&window.__icsCleanup(),t(null)},K=async O=>{const{data:F}=await te.from("custodian_slip_items").select("*").eq("slip_id",O.id).order("date_issued",{ascending:!0}),L={...O,items:(F||[]).map(J=>({propertyNumber:J.property_number,description:J.description,quantity:J.quantity,unit:J.unit,dateIssued:J.date_issued}))};t(L),setTimeout(()=>window.print(),100)},ee=async()=>{if(!e||d.length===0){l({title:"No items selected",description:"Please select inventory items to add",variant:"destructive"});return}const{data:O,error:F}=await te.from("inventory_items").select("id, property_number, custodian, assignment_status").in("id",d).or("custodian.not.is.null,assignment_status.eq.Assigned");if(F){l({title:"Error checking assignments",description:F.message,variant:"destructive"});return}if(O&&O.length>0){const B=O.map(I=>I.property_number).join(", ");l({title:"Items already assigned",description:`The following items are already assigned to other custodians: ${B}`,variant:"destructive"});return}const L=d.map(B=>{const I=C.find(V=>V.id===B);return{slip_id:e.id,property_number:(I==null?void 0:I.propertyNumber)||"",description:(I==null?void 0:I.description)||"",quantity:1,unit:(I==null?void 0:I.unitOfMeasure)||"pcs",date_issued:e.dateIssued}}),{error:J}=await te.from("custodian_slip_items").insert(L);if(J){l({title:"Items error",description:J.message,variant:"destructive"});return}const{error:ce}=await te.from("inventory_items").update({custodian:e.custodianName,custodian_position:e.designation||"",assignment_status:"Assigned",assigned_date:e.dateIssued,updated_at:new Date().toISOString()}).in("id",d);if(ce){l({title:"Error updating inventory",description:ce.message,variant:"destructive"});return}u([]),l({title:"Success",description:`${L.length} items assigned to ${e.custodianName}`}),c.invalidateQueries({queryKey:["inventory-for-slips"]})},D=O=>{u(F=>F.includes(O)?F.filter(L=>L!==O):[...F,O])},S=async O=>{if(confirm("Are you sure you want to delete this custodian slip? This will also release all assigned inventory items."))try{const{data:F,error:L}=await te.from("custodian_slip_items").select("property_number").eq("slip_id",O);if(L){l({title:"Error fetching slip items",description:L.message,variant:"destructive"});return}if(F&&F.length>0){const B=F.map(V=>V.property_number),{error:I}=await te.from("inventory_items").update({custodian:null,custodian_position:null,assignment_status:"Available",assigned_date:null,updated_at:new Date().toISOString()}).in("property_number",B);if(I){console.warn("Full inventory update failed, trying minimal update:",I.message);const{error:V}=await te.from("inventory_items").update({updated_at:new Date().toISOString()}).in("property_number",B);V&&console.warn("Could not update inventory items at all:",V.message)}}const{error:J}=await te.from("custodian_slip_items").delete().eq("slip_id",O);if(J){l({title:"Error deleting slip items",description:J.message,variant:"destructive"});return}const{error:ce}=await te.from("custodian_slips").delete().eq("id",O);if(ce){l({title:"Error deleting slip",description:ce.message,variant:"destructive"});return}l({title:"Success",description:"Custodian slip deleted successfully"}),c.invalidateQueries({queryKey:["custodian-slips"]}),c.invalidateQueries({queryKey:["inventory-for-slips"]})}catch(F){console.error("Delete error:",F),l({title:"Error",description:`Failed to delete custodian slip: ${F instanceof Error?F.message:"Unknown error"}`,variant:"destructive"})}},A=b.filter(O=>O.slipNumber.toLowerCase().includes(a.toLowerCase())||O.custodianName.toLowerCase().includes(a.toLowerCase()));return N&&b.length===0?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Nt,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading custodian slips..."})]}):j&&navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs($t,{className:"max-w-md mx-auto",children:[s.jsx(vn,{className:"h-4 w-4"}),s.jsxs(Ft,{children:["Error: ",j.message]})]}),s.jsx(ne,{onClick:()=>c.invalidateQueries({queryKey:["custodian-slips"]}),className:"mt-4",children:"Retry"})]}):j&&!navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs($t,{className:"max-w-md mx-auto",children:[s.jsx(vn,{className:"h-4 w-4"}),s.jsx(Ft,{children:"You're offline. Some features may not work until your connection is restored."})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-muted-foreground",children:"Previously loaded custodian slips will appear when available."})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Inventory Custodian Slips"}),s.jsxs(ne,{onClick:()=>n(!0),className:"flex items-center gap-2",children:[s.jsx(Un,{className:"h-4 w-4"}),"Create New Slip"]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(we,{placeholder:"Search custodian slips...",value:a,onChange:O=>i(O.target.value),className:"pl-10"})]})}),r&&s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{children:"Create New Custodian Slip"})}),s.jsxs(Ne,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"dateIssued",children:"Date Issued *"}),s.jsx(we,{id:"dateIssued",type:"date",value:E.dateIssued,onChange:O=>M({...E,dateIssued:O.target.value})}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ICS number will be auto-generated (format: ICS-YYYY-MM-NNNN)"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"issuedBy",children:"Issued By *"}),s.jsx(we,{id:"issuedBy",value:E.issuedBy,onChange:O=>M({...E,issuedBy:O.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx(Tu,{value:E.custodianName||"",onChange:v,placeholder:"Search for custodian...",label:"Custodian Name",required:!0})}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"designation",children:"Designation"}),s.jsx(we,{id:"designation",value:E.designation,onChange:O=>M({...E,designation:O.target.value})})]})]}),s.jsx("div",{children:s.jsx(vE,{value:E.office||"",onChange:y,placeholder:"Search for department...",label:"Office/Department",required:!1})}),s.jsx("div",{children:s.jsx(ae,{children:"Items from Inventory"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"issuedBy",children:"Issued By"}),s.jsx(we,{id:"issuedBy",value:E.issuedBy,onChange:O=>M({...E,issuedBy:O.target.value})})]}),s.jsx("div",{children:s.jsx(yE,{value:E.receivedBy||"",onChange:O=>M({...E,receivedBy:O}),placeholder:"Search for custodian or enter manually...",label:"Received By",required:!1})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{onClick:H,children:"Create Slip"}),s.jsx(ne,{variant:"outline",onClick:()=>n(!1),children:"Cancel"})]})]})]}),e?s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsxs(Oe,{children:["Custodian Slip  ",e.slipNumber]})}),s.jsxs(Ne,{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Custodian:"})," ",e.custodianName]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Designation:"})," ",e.designation]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Office:"})," ",e.office]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{variant:"outline",onClick:P,children:"Back"}),s.jsxs(ne,{onClick:()=>K(e),children:[s.jsx(zt,{className:"h-4 w-4 mr-2"})," Print"]}),s.jsxs(ne,{variant:"destructive",onClick:()=>S(e.id),children:[s.jsx(ei,{className:"h-4 w-4 mr-2"})," Delete"]})]})]}),s.jsxs("div",{className:"border rounded",children:[s.jsx("div",{className:"p-2 font-medium",children:"Select Items from Inventory"}),s.jsxs("div",{className:"p-2 border-t",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx(we,{placeholder:"Search inventory items...",value:f,onChange:O=>m(O.target.value),className:"mb-2"}),s.jsxs(ne,{onClick:ee,disabled:d.length===0,className:"w-full",children:["Add Selected Items (",d.length,")"]})]}),s.jsxs("div",{className:"max-h-48 overflow-auto border rounded",children:[C.filter(O=>{var F,L;return((F=O.propertyNumber)==null?void 0:F.toLowerCase().includes(f.toLowerCase()))||((L=O.description)==null?void 0:L.toLowerCase().includes(f.toLowerCase()))}).map(O=>s.jsxs("div",{className:`p-2 border-b cursor-pointer hover:bg-gray-50 flex items-center justify-between ${d.includes(O.id)?"bg-blue-50":""}`,onClick:()=>D(O.id),children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:O.propertyNumber}),s.jsx("div",{className:"text-sm text-gray-600",children:O.description}),s.jsx("div",{className:"text-xs text-green-600",children:"Available"})]}),d.includes(O.id)&&s.jsx(Fn,{className:"h-4 w-4 text-blue-600"})]},O.id)),C.length===0&&s.jsx("div",{className:"p-4 text-center text-gray-500",children:"No inventory items found."})]})]}),s.jsx("div",{className:"max-h-72 overflow-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-2",children:"Property Number"}),s.jsx("th",{className:"p-2",children:"Description"}),s.jsx("th",{className:"p-2",children:"Qty"}),s.jsx("th",{className:"p-2",children:"Unit"}),s.jsx("th",{className:"p-2",children:"Status"})]})}),s.jsx("tbody",{children:e.items.map((O,F)=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-2",children:O.propertyNumber}),s.jsx("td",{className:"p-2",children:O.description}),s.jsx("td",{className:"p-2",children:O.quantity}),s.jsx("td",{className:"p-2",children:O.unit}),s.jsx("td",{className:"p-2",children:s.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:["Assigned to ",e.custodianName]})})]},F))})]})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Items Assigned to Other Custodians"}),s.jsxs("div",{className:"max-h-32 overflow-auto border rounded",children:[C.filter(O=>O.assignmentStatus==="Assigned").slice(0,5).map(O=>s.jsxs("div",{className:"p-2 border-b text-sm",children:[s.jsx("div",{className:"font-medium",children:O.propertyNumber}),s.jsx("div",{className:"text-gray-600",children:O.description}),s.jsxs("div",{className:"text-xs text-red-600",children:["Status: ",O.assignmentStatus]})]},O.id)),C.filter(O=>O.assignmentStatus==="Assigned").length===0&&s.jsx("div",{className:"p-2 text-center text-gray-500 text-sm",children:"No items assigned to other custodians"})]})]})]})]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(O=>s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{className:"text-lg",children:O.slipNumber})}),s.jsxs(Ne,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:O.custodianName}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Designation:"})," ",O.designation]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Office:"})," ",O.office]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Items:"})," ",O.items.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Date:"})," ",O.dateIssued]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-4",children:[s.jsx(ne,{size:"sm",variant:"outline",onClick:()=>q(O),children:"Open"}),s.jsxs(ne,{size:"sm",onClick:()=>K(O),children:[s.jsx(zt,{className:"h-4 w-4 mr-2"})," Print"]}),s.jsxs(ne,{size:"sm",variant:"destructive",onClick:()=>S(O.id),children:[s.jsx(ei,{className:"h-4 w-4 mr-2"})," Delete"]})]})]})]},O.id))}),e&&s.jsx("div",{className:"print-only",children:s.jsx("div",{ref:o,children:s.jsx(gE,{data:{slipNumber:e.slipNumber,entityName:e.custodianName,fundCluster:"General Fund",custodianName:e.custodianName,designation:e.designation,office:e.office,dateIssued:e.dateIssued,issuedBy:e.issuedBy,receivedBy:e.receivedBy,items:e.items.map(O=>({itemNumber:"1",propertyNumber:O.propertyNumber,description:O.description,quantity:O.quantity,unit:O.unit,unitCost:0,totalCost:0,amount:0,estimatedUsefulLife:"5 years",dateIssued:O.dateIssued})),totalAmount:0}})})}),s.jsx("style",{children:`
        @media print {
          .print-only { display: block !important; }
          body * { visibility: hidden; }
          .print-only, .print-only * { visibility: visible; }
          .print-only { position: absolute; left: 0; top: 0; }
        }
        .print-only { display: none; }
      `})]})},JU=()=>{xs(),zn();const[e,t]=h.useState(""),[r,n]=h.useState(!1),[a,i]=h.useState(null),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState({custodianName:"",designation:"",office:"",dateIssued:new Date().toISOString().split("T")[0],issuedBy:"",receivedBy:""}),[m,p]=h.useState(null),[x,g]=h.useState(null),[w,v]=h.useState(null),y=h.useRef(!1),b=(I,V)=>{f(Q=>({...Q,custodianName:I})),p(V||null),V&&f(Q=>({...Q,custodianName:I,designation:V.position||Q.designation,office:V.department_name||Q.office}))},N=(I,V)=>{f(Q=>({...Q,office:I})),g(V||null)},{toast:j}=Fr(),C=ga(),E=h.useRef(null);h.useEffect(()=>{const I=te.channel("realtime:custodian-slips-annex").on("postgres_changes",{event:"*",schema:"public",table:"custodian_slips"},()=>{console.log("[Realtime] Custodian slip changed, refreshing..."),C.invalidateQueries({queryKey:["annex-custodian-slips"]})}).on("postgres_changes",{event:"*",schema:"public",table:"custodian_slip_items"},()=>{console.log("[Realtime] Custodian slip items changed, refreshing..."),C.invalidateQueries({queryKey:["annex-custodian-slips"]})}).on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},()=>{console.log("[Realtime] Inventory items changed, refreshing available items..."),C.invalidateQueries({queryKey:["available-inventory-for-slips"]})}).subscribe();return()=>{te.removeChannel(I)}},[C]);const{data:M=[],isLoading:H,error:q}=vt({queryKey:["annex-custodian-slips"],queryFn:async()=>{const{data:I,error:V}=await te.from("custodian_slips").select(`
          *,
          custodian_slip_items(
            *,
            inventory_items (
              estimated_useful_life,
              sub_category,
              category
            )
          )
        `).order("created_at",{ascending:!1});if(V)throw V;return I.map(Q=>({id:Q.id,slipNumber:Q.slip_number,custodianName:Q.custodian_name,designation:Q.designation,office:Q.office,dateIssued:Q.date_issued,issuedBy:Q.issued_by,receivedBy:Q.received_by,slipStatus:Q.slip_status,items:Q.custodian_slip_items.map(se=>({id:se.id,slipId:se.slip_id,inventoryItemId:se.inventory_item_id,propertyNumber:se.property_number,description:se.description,quantity:se.quantity,unit:se.unit,unitCost:se.unit_cost||0,totalCost:se.total_cost||0,amount:se.amount||se.total_cost||0,itemNumber:se.item_number||"",estimatedUsefulLife:se.estimated_useful_life||se.inventory_items&&se.inventory_items.estimated_useful_life||"",dateIssued:se.date_issued,propertyCardEntryId:se.property_card_entry_id,createdAt:se.created_at,updatedAt:se.updated_at})),createdAt:Q.created_at,updatedAt:Q.updated_at}))},staleTime:5*60*1e3,retry:(I,V)=>navigator.onLine?I<2:!1}),{data:P=[]}=vt({queryKey:["available-inventory-for-slips"],queryFn:async()=>{const{data:I,error:V}=await te.from("available_inventory_items_with_property_cards").select("*").order("created_at",{ascending:!1});if(V){console.error("Error fetching available inventory:",V);const Q=await rr.getAll();if(Q.success){const se=[];for(const Z of Q.data){const{data:R}=await te.from("property_cards").select("id").eq("inventory_item_id",Z.id).single();if(R){const X=Z.condition==="Serviceable",ie=Z.status==="Active",T=!Z.custodian||Z.custodian==="",Y=!Z.assignmentStatus||Z.assignmentStatus==="Available",le=Z.assignmentStatus!=="Assigned";X&&ie&&T&&Y&&le&&se.push(Z)}}return se}return[]}return I.map(Q=>({id:Q.id,propertyNumber:Q.property_number,description:Q.description,brand:Q.brand,model:Q.model,serialNumber:Q.serial_number,unitOfMeasure:Q.unit_of_measure,quantity:Q.quantity,unitCost:Q.unit_cost,totalCost:Q.total_cost,dateAcquired:Q.date_acquired,supplier:Q.supplier,condition:Q.condition,location:Q.location,fundSource:Q.fund_source_id,remarks:Q.remarks,lastInventoryDate:Q.last_inventory_date,semiExpandableCategory:Q.semi_expandable_category,status:Q.status,assignmentStatus:Q.assignment_status,assignedDate:Q.assigned_date,createdAt:Q.created_at,updatedAt:Q.updated_at}))},enabled:r,staleTime:2*60*1e3}),K=na({mutationKey:["create-custodian-slip"],mutationFn:async I=>(console.log("[mutationFn] Executing - calling annexService.createCustodianSlip"),await so.createCustodianSlip(I)),retry:!1,onSuccess:I=>{y.current=!1;const V=Array.isArray(I)?I.length:1;V>1?j({title:"Success",description:`${V} custodian slips created (separated by value)! ${c.length} item(s) assigned to ${u.custodianName}`}):j({title:"Success",description:`Custodian slip created successfully! ${c.length} item(s) assigned to ${u.custodianName}`}),C.invalidateQueries({queryKey:["annex-custodian-slips"]}),C.invalidateQueries({queryKey:["available-inventory-for-slips"]}),C.invalidateQueries({queryKey:["inventory-items"]}),C.invalidateQueries({queryKey:["custodian-summaries"]}),C.invalidateQueries({queryKey:["custodian-summary"]}),C.invalidateQueries({queryKey:["custodian-item-history"]}),C.invalidateQueries({queryKey:["custodian-current-items"]}),C.refetchQueries({queryKey:["annex-custodian-slips"]}),n(!1),f({custodianName:"",designation:"",office:"",dateIssued:new Date().toISOString().split("T")[0],issuedBy:"",receivedBy:""}),p(null),g(null),d([])},onError:I=>{y.current=!1,console.log("Custodian slip creation error:",I.message),j({title:"Error",description:I.message,variant:"destructive"})}}),ee=na({mutationFn:async I=>{console.log("Attempting to delete custodian slip:",I);const{data:V,error:Q}=await te.from("custodian_slips").select("slip_status").eq("id",I).single();if(Q)throw new Error(`Failed to get slip data: ${Q.message}`);if(!V)throw new Error("Custodian slip not found");if(V.slip_status!=="Draft")throw new Error("This custodian slip cannot be deleted because it has been officially issued. Only draft slips can be deleted.");const{data:se,error:Z}=await te.from("custodian_slip_items").select("inventory_item_id").eq("slip_id",I);if(Z)throw new Error(`Failed to get slip items: ${Z.message}`);if(console.log("Found slip items:",se),se&&se.length>0){const T=se.map(le=>le.inventory_item_id),{error:Y}=await te.from("inventory_items").update({custodian:null,custodian_position:null,assignment_status:"Available",assigned_date:null,updated_at:new Date().toISOString()}).in("id",T);Y?console.warn("Could not update inventory items:",Y.message):console.log("Successfully released inventory items")}const{error:R}=await te.from("property_card_entries").delete().eq("related_slip_id",I);R?console.warn("Could not delete property card entries:",R.message):console.log("Successfully deleted property card entries");const{error:X}=await te.from("custodian_slip_items").delete().eq("slip_id",I);if(X)throw new Error(`Failed to delete slip items: ${X.message}`);const{error:ie}=await te.from("custodian_slips").delete().eq("id",I);if(ie)throw console.error("Delete slip error:",ie),new Error(`Failed to delete custodian slip: ${ie.message} (Code: ${ie.code})`);return console.log("Successfully deleted custodian slip"),!0},onSuccess:()=>{j({title:"Success",description:"Custodian slip deleted successfully"}),C.invalidateQueries({queryKey:["annex-custodian-slips"]}),C.invalidateQueries({queryKey:["available-inventory-for-slips"]}),C.invalidateQueries({queryKey:["inventory-items"]})},onError:I=>{j({title:"Error",description:I.message,variant:"destructive"})}}),D=na({mutationFn:async I=>{const{data:V,error:Q}=await te.from("custodian_slips").select(`
          *,
          custodian_slip_items(*)
        `).eq("id",I).single();if(Q||!V)throw new Error(`Failed to get slip details: ${Q==null?void 0:Q.message}`);const{error:se}=await te.from("custodian_slips").update({slip_status:"Issued",updated_at:new Date().toISOString()}).eq("id",I);if(se)throw new Error(`Failed to confirm slip: ${se.message}`);if(V.custodian_slip_items&&V.custodian_slip_items.length>0){const Z=V.custodian_slip_items.map(X=>X.inventory_item_id),{error:R}=await te.from("inventory_items").update({custodian:V.custodian_name,custodian_position:V.designation,assignment_status:"Assigned",assigned_date:V.date_issued,updated_at:new Date().toISOString()}).in("id",Z);R?console.error("Failed to update inventory items:",R):console.log(`Successfully assigned ${Z.length} inventory items to ${V.custodian_name}`)}},onSuccess:()=>{j({title:"Success",description:"Custodian slip has been officially confirmed and cannot be deleted"}),C.invalidateQueries({queryKey:["annex-custodian-slips"]}),C.invalidateQueries({queryKey:["inventory-items"]}),C.invalidateQueries({queryKey:["available-inventory-for-slips"]}),C.invalidateQueries({queryKey:["custodian-summaries"]}),v(null)},onError:I=>{j({title:"Error",description:I.message,variant:"destructive"})}}),S=async()=>{if(console.log("[handleCreateSlip] Called. Ref:",y.current,"isPending:",K.isPending),y.current||K.isPending){console.log("[handleCreateSlip] BLOCKED - Creation already in progress, ignoring duplicate call");return}if(!u.custodianName||!u.designation||!u.office||!u.issuedBy||!u.receivedBy){j({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(c.length===0){j({title:"Validation Error",description:"Please select at least one inventory item",variant:"destructive"});return}y.current=!0,console.log("[handleCreateSlip] Creating custodian slip with items:",c),console.log("[handleCreateSlip] About to call mutate()"),K.mutate({custodianName:u.custodianName,designation:u.designation,office:u.office,dateIssued:u.dateIssued,issuedBy:u.issuedBy,receivedBy:u.receivedBy,inventoryItemIds:c}),console.log("[handleCreateSlip] mutate() called, returning from handler")},A=async I=>{try{const V=await so.getCustodianSlipWithItems(I.id);V&&i(V)}catch{j({title:"Error",description:"Failed to load custodian slip details",variant:"destructive"})}},O=async I=>{try{const V=await so.getCustodianSlipWithItems(I.id);V&&(i(V),l(!0))}catch{j({title:"Error",description:"Failed to load custodian slip for printing",variant:"destructive"})}},F=I=>{confirm("Are you sure you want to delete this custodian slip? This will release all assigned inventory items.")&&ee.mutate(I)},L=I=>{confirm("Are you sure you want to officially confirm this custodian slip? Once confirmed, it cannot be deleted and will be marked as an official document.")&&D.mutate(I)},J=I=>{const V=I.items.reduce((Q,se)=>Q+(se.amount||0),0);return{slipNumber:I.slipNumber,entityName:"PROVINCIAL GOVERNMENT OF APAYAO",fundCluster:"General Fund",custodianName:I.custodianName,designation:I.designation,office:I.office,dateIssued:I.dateIssued,issuedBy:I.issuedBy,receivedBy:I.receivedBy,items:I.items.map(Q=>({itemNumber:Q.propertyNumber,propertyNumber:Q.propertyNumber,description:Q.description,quantity:Q.quantity,unit:Q.unit,unitCost:Q.unitCost,totalCost:Q.totalCost,amount:Q.amount,estimatedUsefulLife:Q.estimatedUsefulLife,dateIssued:Q.dateIssued})),totalAmount:V}},ce=I=>{d(V=>V.includes(I)?V.filter(Q=>Q!==I):[...V,I])},B=M.filter(I=>I.slipNumber.toLowerCase().includes(e.toLowerCase())||I.custodianName.toLowerCase().includes(e.toLowerCase())||I.office.toLowerCase().includes(e.toLowerCase()));return H&&M.length===0?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Nt,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading custodian slips..."})]}):q&&navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs($t,{className:"max-w-md mx-auto",children:[s.jsx(vn,{className:"h-4 w-4"}),s.jsxs(Ft,{children:["Error: ",q.message]})]}),s.jsx(ne,{onClick:()=>C.invalidateQueries({queryKey:["annex-custodian-slips"]}),className:"mt-4",children:"Retry"})]}):q&&!navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs($t,{className:"max-w-md mx-auto",children:[s.jsx(vn,{className:"h-4 w-4"}),s.jsx(Ft,{children:"You're offline. Some features may not work until your connection is restored."})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-muted-foreground",children:"Previously loaded custodian slips will appear when available."})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Inventory Custodian Slips (ICS)"}),s.jsxs(ne,{onClick:()=>n(!0),className:"flex items-center gap-2",children:[s.jsx(Un,{className:"h-4 w-4"}),"Create New Slip"]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(we,{placeholder:"Search custodian slips...",value:e,onChange:I=>t(I.target.value),className:"pl-10"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map(I=>s.jsxs(je,{className:"hover:shadow-lg transition-shadow",children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Oe,{className:"text-lg font-mono",children:I.slipNumber}),s.jsx(Be,{variant:I.slipStatus==="Issued"?"default":"secondary",className:"ml-2",children:I.slipStatus||"Draft"})]})}),s.jsx(Ne,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Property Numbers:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:I.items.map((V,Q)=>s.jsx(Be,{variant:"outline",className:"font-mono text-xs",children:V.propertyNumber},V.id||Q))}),I.items.length===0&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"No items"})]}),s.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[s.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>A(I),className:"flex items-center gap-1 flex-1",children:[s.jsx(pc,{className:"h-3 w-3"}),"View"]}),s.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>O(I),className:"flex items-center gap-1 flex-1",children:[s.jsx(zt,{className:"h-3 w-3"}),"Print"]}),(I.slipStatus==="Draft"||!I.slipStatus)&&s.jsxs(ne,{variant:"default",size:"sm",onClick:()=>L(I.id),className:"flex items-center gap-1 bg-green-600 hover:bg-green-700 flex-1",disabled:D.isPending,title:"Confirm this slip as official (cannot be deleted after confirmation)",children:[D.isPending?s.jsx(Nt,{className:"h-3 w-3 animate-spin"}):s.jsx(So,{className:"h-3 w-3"}),"Confirm"]}),(I.slipStatus==="Draft"||!I.slipStatus)&&s.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>F(I.id),className:"flex items-center gap-1 text-red-600 hover:text-red-700",disabled:ee.isPending,title:"Delete this draft custodian slip",children:[s.jsx(ei,{className:"h-3 w-3"}),"Delete"]})]})]})})]},I.id))}),B.length===0&&!H&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground",children:"No custodian slips found."}),s.jsx(ne,{onClick:()=>n(!0),className:"mt-4",children:"Create your first custodian slip"})]}),s.jsx(Tr,{open:r,onOpenChange:I=>{n(I),I||(y.current=!1)},children:s.jsxs(vr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Ar,{children:[s.jsx(Or,{children:"Create Inventory Custodian Slip"}),s.jsx(ls,{children:"Create a new ICS by selecting inventory items and assigning them to a custodian"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx(Tu,{value:u.custodianName,onChange:b,placeholder:"Search for custodian...",label:"Custodian Name",required:!0})}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"designation",children:"Designation *"}),s.jsx(we,{id:"designation",value:u.designation,onChange:I=>f(V=>({...V,designation:I.target.value})),placeholder:"Enter designation"})]}),s.jsx("div",{children:s.jsx(vE,{value:u.office,onChange:N,placeholder:"Search for department...",label:"Office/Department",required:!0})}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"dateIssued",children:"Date Issued *"}),s.jsx(we,{id:"dateIssued",type:"date",value:u.dateIssued,onChange:I=>f(V=>({...V,dateIssued:I.target.value}))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"issuedBy",children:"Issued By *"}),s.jsx(we,{id:"issuedBy",value:u.issuedBy,onChange:I=>f(V=>({...V,issuedBy:I.target.value})),placeholder:"Enter issuer name"})]}),s.jsx("div",{children:s.jsx(yE,{value:u.receivedBy,onChange:I=>f(V=>({...V,receivedBy:I})),placeholder:"Search for custodian or enter manually...",label:"Received By",required:!0})})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Select Inventory Items *"}),s.jsx("div",{className:"border rounded-md max-h-64 overflow-y-auto",children:s.jsxs(Gt,{children:[s.jsx(sr,{children:s.jsxs(Ve,{children:[s.jsx(he,{className:"w-12",children:"Select"}),s.jsx(he,{children:"Property Number"}),s.jsx(he,{children:"Description"}),s.jsx(he,{children:"Condition"}),s.jsx(he,{children:"Quantity"}),s.jsx(he,{children:"Unit"}),s.jsx(he,{children:"Unit Cost"}),s.jsx(he,{children:"Total Cost"})]})}),s.jsx(ar,{children:P.length===0?s.jsx(Ve,{children:s.jsx(de,{colSpan:8,className:"text-center text-muted-foreground py-8",children:"No available inventory items found. All items may be assigned to custodians or marked as unserviceable."})}):P.map(I=>{var V,Q;return s.jsxs(Ve,{children:[s.jsx(de,{children:s.jsx(Rc,{checked:c.includes(I.id),onCheckedChange:()=>ce(I.id)})}),s.jsx(de,{children:I.propertyNumber}),s.jsx(de,{children:I.description}),s.jsx(de,{children:s.jsx(Be,{variant:I.condition==="Serviceable"?"default":"destructive",children:I.condition})}),s.jsx(de,{children:I.quantity}),s.jsx(de,{children:I.unitOfMeasure}),s.jsxs(de,{children:["",((V=I.unitCost)==null?void 0:V.toFixed(2))||"0.00"]}),s.jsxs(de,{children:["",((Q=I.totalCost)==null?void 0:Q.toFixed(2))||"0.00"]})]},I.id)})})]})}),P.length===0?s.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[s.jsx("p",{children:"No items available for assignment."}),s.jsx("p",{className:"text-xs mt-1",children:"Items must be in 'Serviceable' condition and not already assigned to be available."})]}):s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Selected: ",c.length," items  Available: ",P.length," items"]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ne,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsxs(ne,{onClick:S,disabled:K.isPending||y.current,children:[(K.isPending||y.current)&&s.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Custodian Slip"]})]})]})]})}),s.jsx(Tr,{open:o,onOpenChange:l,children:s.jsxs(vr,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Ar,{children:[s.jsx(Or,{children:"Print Custodian Slip"}),s.jsx(ls,{children:"Inventory Custodian Slip (ICS) - Ready for printing"})]}),s.jsx("div",{ref:E,children:a&&s.jsx(gE,{data:J(a)})})]})}),s.jsx(Tr,{open:!!a&&!o,onOpenChange:()=>i(null),children:s.jsxs(vr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Ar,{children:[s.jsx(Or,{children:"Custodian Slip Details"}),s.jsxs(ls,{children:[a==null?void 0:a.slipNumber," - ",a==null?void 0:a.custodianName]})]}),a&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{children:"Slip Number"}),s.jsx("p",{className:"text-sm",children:a.slipNumber})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Custodian Name"}),s.jsx("p",{className:"text-sm",children:a.custodianName})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Designation"}),s.jsx("p",{className:"text-sm",children:a.designation})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Office"}),s.jsx("p",{className:"text-sm",children:a.office})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Date Issued"}),s.jsx("p",{className:"text-sm",children:a.dateIssued})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Issued By"}),s.jsx("p",{className:"text-sm",children:a.issuedBy})]})]}),a.items&&a.items.length>0&&s.jsxs("div",{children:[s.jsx(ae,{children:"Items"}),s.jsx("div",{className:"border rounded-md",children:s.jsxs(Gt,{children:[s.jsx(sr,{children:s.jsxs(Ve,{children:[s.jsx(he,{children:"Item No."}),s.jsx(he,{children:"Property Number"}),s.jsx(he,{children:"Description"}),s.jsx(he,{children:"Quantity"}),s.jsx(he,{children:"Unit"}),s.jsx(he,{children:"Unit Cost"}),s.jsx(he,{children:"Amount"}),s.jsx(he,{children:"Est. Life"})]})}),s.jsx(ar,{children:a.items.map(I=>{var V,Q;return s.jsxs(Ve,{children:[s.jsx(de,{children:I.itemNumber}),s.jsx(de,{children:I.propertyNumber}),s.jsx(de,{children:I.description}),s.jsx(de,{children:I.quantity}),s.jsx(de,{children:I.unit}),s.jsxs(de,{children:["",((V=I.unitCost)==null?void 0:V.toFixed(2))||"0.00"]}),s.jsxs(de,{children:["",((Q=I.amount)==null?void 0:Q.toFixed(2))||"0.00"]}),s.jsx(de,{children:I.estimatedUsefulLife||"N/A"})]},I.id)})})]})}),s.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[s.jsx("strong",{children:"Total Items:"})," ",a.items.length," |",s.jsx("strong",{children:" Total Amount:"})," ",a.items.reduce((I,V)=>I+(V.amount||0),0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ne,{variant:"outline",onClick:()=>i(null),children:"Close"}),s.jsxs(ne,{onClick:()=>l(!0),children:[s.jsx(zt,{className:"mr-2 h-4 w-4"}),"Print"]})]})]})]})})]})};function ZU(){const e=xs(),[t,r]=h.useState(""),[n,a]=h.useState(null),[i,o]=h.useState(!1);Fr();const l=ga();h.useEffect(()=>{const v=te.channel("realtime:custodians-page").on("postgres_changes",{event:"*",schema:"public",table:"custodian_slips"},()=>{console.log("[Realtime] Custodian slips changed, refreshing..."),l.invalidateQueries({queryKey:["custodian-summaries"]}),l.invalidateQueries({queryKey:["custodian-summary"]}),l.invalidateQueries({queryKey:["custodian-item-history"]}),l.invalidateQueries({queryKey:["custodian-current-items"]})}).on("postgres_changes",{event:"*",schema:"public",table:"custodian_slip_items"},()=>{console.log("[Realtime] Custodian slip items changed, refreshing..."),l.invalidateQueries({queryKey:["custodian-summaries"]}),l.invalidateQueries({queryKey:["custodian-summary"]}),l.invalidateQueries({queryKey:["custodian-item-history"]}),l.invalidateQueries({queryKey:["custodian-current-items"]})}).on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},()=>{console.log("[Realtime] Inventory items changed, refreshing custodian data..."),l.invalidateQueries({queryKey:["custodian-summaries"]}),l.invalidateQueries({queryKey:["custodian-current-items"]})}).subscribe();return()=>{te.removeChannel(v)}},[l]);const{data:c=[],isLoading:d,error:u}=vt({queryKey:["custodians"],queryFn:()=>ss.getAll({search:t}),enabled:!0}),{data:f=[]}=vt({queryKey:["custodian-summaries"],queryFn:()=>ss.getAllSummaries(),enabled:!0,staleTime:30*1e3,refetchOnWindowFocus:!0}),{data:m}=vt({queryKey:["custodian-summary",n==null?void 0:n.id],queryFn:()=>ss.getSummary(n.id),enabled:!!n,staleTime:30*1e3,refetchOnWindowFocus:!0}),{data:p=[]}=vt({queryKey:["custodian-item-history",n==null?void 0:n.id],queryFn:()=>ss.getItemHistory(n.id,{includeReturned:!0}),enabled:!!n,staleTime:30*1e3,refetchOnWindowFocus:!0}),{data:x=[]}=vt({queryKey:["custodian-current-items",n==null?void 0:n.id],queryFn:()=>ss.getCurrentItems(n.id),enabled:!!n,staleTime:30*1e3,refetchOnWindowFocus:!0}),g=v=>{a(v),o(!0)},w=c.filter(v=>v.name.toLowerCase().includes(t.toLowerCase())||v.custodian_no.toLowerCase().includes(t.toLowerCase())||v.department_name&&v.department_name.toLowerCase().includes(t.toLowerCase()));return u?s.jsx("div",{className:"p-6",children:s.jsx(je,{children:s.jsx(Ne,{className:"p-6",children:s.jsxs("div",{className:"text-center text-red-600",children:["Error loading custodians: ",u.message]})})})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Custodians"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage and view custodian information and item assignments"})]}),s.jsxs(ne,{onClick:()=>e("/settings/lookups#custodians"),children:[s.jsx(Un,{className:"h-4 w-4 mr-2"}),"Add Custodian"]})]}),s.jsx(je,{children:s.jsx(Ne,{className:"p-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(we,{placeholder:"Search custodians by name, number, or department...",value:t,onChange:v=>r(v.target.value),className:"pl-10"})]})})}),s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsxs(Oe,{className:"flex items-center gap-2",children:[s.jsx(Kl,{className:"h-5 w-5"}),"All Custodians (",w.length,")"]})}),s.jsx(Ne,{children:d?s.jsx("div",{className:"text-center py-8",children:"Loading custodians..."}):s.jsxs(Gt,{children:[s.jsx(sr,{children:s.jsxs(Ve,{children:[s.jsx(he,{children:"Custodian No."}),s.jsx(he,{children:"Name"}),s.jsx(he,{children:"Position"}),s.jsx(he,{children:"Department"}),s.jsx(he,{children:"Status"}),s.jsx(he,{children:"Current Items"}),s.jsx(he,{children:"Total Value"}),s.jsx(he,{children:"Actions"})]})}),s.jsx(ar,{children:w.map(v=>{const y=f.find(b=>b.custodian.id===v.id);return s.jsxs(Ve,{children:[s.jsx(de,{className:"font-mono",children:v.custodian_no}),s.jsx(de,{className:"font-medium",children:v.name}),s.jsx(de,{children:v.position||"-"}),s.jsx(de,{children:v.department_name||"-"}),s.jsx(de,{children:s.jsx(Be,{variant:v.is_active?"default":"secondary",children:v.is_active?"Active":"Inactive"})}),s.jsx(de,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pr,{className:"h-4 w-4"}),(y==null?void 0:y.currently_assigned_items)||0]})}),s.jsx(de,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Wa,{className:"h-4 w-4"}),"",((y==null?void 0:y.currently_assigned_value)||0).toLocaleString()]})}),s.jsx(de,{children:s.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>g(v),children:[s.jsx(pc,{className:"h-4 w-4 mr-1"}),"View Details"]})})]},v.id)})})]})})]}),s.jsx(Tr,{open:i,onOpenChange:o,children:s.jsxs(vr,{className:"max-w-6xl max-h-[90vh] overflow-y-auto print:max-w-full print:max-h-none print:overflow-visible",children:[s.jsxs(Ar,{className:"print:block pr-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 print:flex-col print:items-start print:gap-2",children:[s.jsxs(Or,{className:"flex items-center gap-2 print:text-2xl",children:[s.jsx(Kl,{className:"h-5 w-5 print:hidden"}),"Custodian Details"]}),s.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>window.print(),className:"print:hidden",children:[s.jsx(zt,{className:"h-4 w-4 mr-2"}),"Print"]})]}),s.jsx(ls,{className:"print:hidden",children:"View detailed information and item history for this custodian"})]}),n&&m&&s.jsxs("div",{className:"space-y-6 print:space-y-4",children:[s.jsxs(je,{className:"print:shadow-none print:border print:border-gray-300",children:[s.jsx(Ie,{children:s.jsxs(Oe,{className:"flex items-center justify-between",children:[s.jsx("span",{children:n.name}),s.jsx(Be,{variant:n.is_active?"default":"secondary",children:n.is_active?"Active":"Inactive"})]})}),s.jsx(Ne,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Custodian Number"}),s.jsx("p",{className:"font-mono",children:n.custodian_no})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Position"}),s.jsx("p",{children:n.position||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Department"}),s.jsx("p",{children:n.department_name||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Activity"}),s.jsx("p",{children:m.last_activity_date?On(new Date(m.last_activity_date),"MMM dd, yyyy"):"No activity"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(je,{children:s.jsx(Ne,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pr,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Items"}),s.jsx("p",{className:"text-2xl font-bold",children:m.currently_assigned_items})]})]})})}),s.jsx(je,{children:s.jsx(Ne,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wa,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Value"}),s.jsxs("p",{className:"text-2xl font-bold",children:["",m.currently_assigned_value.toLocaleString()]})]})]})})}),s.jsx(je,{children:s.jsx(Ne,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gr,{className:"h-5 w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Items"}),s.jsx("p",{className:"text-2xl font-bold",children:m.total_items_assigned})]})]})})}),s.jsx(je,{children:s.jsx(Ne,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wa,{className:"h-5 w-5 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Value"}),s.jsxs("p",{className:"text-2xl font-bold",children:["",m.total_value_assigned.toLocaleString()]})]})]})})})]}),s.jsxs(kf,{defaultValue:"current",className:"w-full",children:[s.jsxs(kc,{className:"grid w-full grid-cols-2",children:[s.jsxs(Hr,{value:"current",children:["Currently Assigned (",x.length,")"]}),s.jsxs(Hr,{value:"history",children:["All History (",p.length,")"]})]}),s.jsx(Kr,{value:"current",className:"space-y-4",children:s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{children:"Currently Assigned Items"})}),s.jsx(Ne,{children:x.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No items currently assigned to this custodian."}):s.jsxs(Gt,{className:"print:border print:border-gray-300",children:[s.jsx(sr,{className:"print:bg-gray-100",children:s.jsxs(Ve,{className:"print:border-b print:border-gray-300",children:[s.jsx(he,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Property Number"}),s.jsx(he,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Description"}),s.jsx(he,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Condition"}),s.jsx(he,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Value"}),s.jsx(he,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Assigned Date"})]})}),s.jsx(ar,{children:x.map(v=>s.jsxs(Ve,{className:"print:border-b print:border-gray-300",children:[s.jsx(de,{className:"font-mono print:border print:border-gray-300 print:px-2 print:py-1",children:v.property_number}),s.jsx(de,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:v.description}),s.jsx(de,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:s.jsx(Be,{variant:v.condition==="Serviceable"?"default":"destructive",className:"print:bg-transparent print:text-black print:border print:border-gray-400",children:v.condition})}),s.jsxs(de,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:["",v.total_cost.toLocaleString()]}),s.jsx(de,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:v.assigned_date?On(new Date(v.assigned_date),"MMM dd, yyyy"):"-"})]},v.id))})]})})]})}),s.jsx(Kr,{value:"history",className:"space-y-4",children:s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{children:"All Item History"})}),s.jsx(Ne,{children:p.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No item history found for this custodian."}):s.jsxs(Gt,{className:"print:border print:border-gray-300",children:[s.jsx(sr,{className:"print:bg-gray-100",children:s.jsxs(Ve,{className:"print:border-b print:border-gray-300",children:[s.jsx(he,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Property Number"}),s.jsx(he,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Description"}),s.jsx(he,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Condition"}),s.jsx(he,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Value"}),s.jsx(he,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Slip Number"}),s.jsx(he,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Date Issued"}),s.jsx(he,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Status"})]})}),s.jsx(ar,{children:p.map(v=>s.jsxs(Ve,{className:"print:border-b print:border-gray-300",children:[s.jsx(de,{className:"font-mono print:border print:border-gray-300 print:px-2 print:py-1",children:v.property_number}),s.jsx(de,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:v.description}),s.jsx(de,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:s.jsx(Be,{variant:v.condition==="Serviceable"?"default":"destructive",className:"print:bg-transparent print:text-black print:border print:border-gray-400",children:v.condition})}),s.jsxs(de,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:["",v.total_cost.toLocaleString()]}),s.jsx(de,{className:"font-mono print:border print:border-gray-300 print:px-2 print:py-1",children:v.custodian_slip_number}),s.jsx(de,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:v.date_issued?On(new Date(v.date_issued),"MMM dd, yyyy"):"-"}),s.jsx(de,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:s.jsx(Be,{variant:v.is_currently_assigned?"default":"secondary",className:"print:bg-transparent print:text-black print:border print:border-gray-400",children:v.is_currently_assigned?"Currently Assigned":"Returned"})})]},v.id))})]})})]})})]})]})]})})]})}function eB(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var qv="ScrollArea",[xE,sq]=lr(qv),[tB,en]=xE(qv),bE=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=h.useState(null),[d,u]=h.useState(null),[f,m]=h.useState(null),[p,x]=h.useState(null),[g,w]=h.useState(null),[v,y]=h.useState(0),[b,N]=h.useState(0),[j,C]=h.useState(!1),[E,M]=h.useState(!1),H=De(t,P=>c(P)),q=jc(a);return s.jsx(tB,{scope:r,type:n,dir:q,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:f,onContentChange:m,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:j,onScrollbarXEnabledChange:C,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:E,onScrollbarYEnabledChange:M,onCornerWidthChange:y,onCornerHeightChange:N,children:s.jsx(Ee.div,{dir:q,...o,ref:H,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});bE.displayName=qv;var wE="ScrollAreaViewport",jE=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,o=en(wE,r),l=h.useRef(null),c=De(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(Ee.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});jE.displayName=wE;var Vn="ScrollAreaScrollbar",zv=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=en(Vn,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return h.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(rB,{...n,ref:t,forceMount:r}):a.type==="scroll"?s.jsx(nB,{...n,ref:t,forceMount:r}):a.type==="auto"?s.jsx(NE,{...n,ref:t,forceMount:r}):a.type==="always"?s.jsx(Vv,{...n,ref:t}):null});zv.displayName=Vn;var rB=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=en(Vn,e.__scopeScrollArea),[i,o]=h.useState(!1);return h.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(Dt,{present:r||i,children:s.jsx(NE,{"data-state":i?"visible":"hidden",...n,ref:t})})}),nB=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=en(Vn,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Of(()=>c("SCROLL_END"),100),[l,c]=eB("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),h.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let f=d[u];const m=()=>{const p=d[u];f!==p&&(c("SCROLL"),o()),f=p};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[a.viewport,i,c,o]),s.jsx(Dt,{present:r||l!=="hidden",children:s.jsx(Vv,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:ge(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ge(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),NE=h.forwardRef((e,t)=>{const r=en(Vn,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=h.useState(!1),l=e.orientation==="horizontal",c=Of(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?d:u)}},10);return Ro(r.viewport,c),Ro(r.content,c),s.jsx(Dt,{present:n||i,children:s.jsx(Vv,{"data-state":i?"visible":"hidden",...a,ref:t})})}),Vv=h.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=en(Vn,e.__scopeScrollArea),i=h.useRef(null),o=h.useRef(0),[l,c]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=kE(l.viewport,l.content),u={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,p){return cB(m,o.current,l,p)}return r==="horizontal"?s.jsx(sB,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,p=Fb(m,l,a.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=f(m,a.dir))}}):r==="vertical"?s.jsx(aB,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,p=Fb(m,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=f(m))}}):null}),sB=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=en(Vn,e.__scopeScrollArea),[o,l]=h.useState(),c=h.useRef(null),d=De(t,c,i.onScrollbarXChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(SE,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Af(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(m),TE(m,f)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Iu(o.paddingLeft),paddingEnd:Iu(o.paddingRight)}})}})}),aB=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=en(Vn,e.__scopeScrollArea),[o,l]=h.useState(),c=h.useRef(null),d=De(t,c,i.onScrollbarYChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(SE,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Af(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(i.viewport){const m=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(m),TE(m,f)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Iu(o.paddingTop),paddingEnd:Iu(o.paddingBottom)}})}})}),[iB,_E]=xE(Vn),SE=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:f,...m}=e,p=en(Vn,r),[x,g]=h.useState(null),w=De(t,H=>g(H)),v=h.useRef(null),y=h.useRef(""),b=p.viewport,N=n.content-n.viewport,j=bt(u),C=bt(c),E=Of(f,10);function M(H){if(v.current){const q=H.clientX-v.current.left,P=H.clientY-v.current.top;d({x:q,y:P})}}return h.useEffect(()=>{const H=q=>{const P=q.target;(x==null?void 0:x.contains(P))&&j(q,N)};return document.addEventListener("wheel",H,{passive:!1}),()=>document.removeEventListener("wheel",H,{passive:!1})},[b,x,N,j]),h.useEffect(C,[n,C]),Ro(x,E),Ro(p.content,E),s.jsx(iB,{scope:r,scrollbar:x,hasThumb:a,onThumbChange:bt(i),onThumbPointerUp:bt(o),onThumbPositionChange:C,onThumbPointerDown:bt(l),children:s.jsx(Ee.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:ge(e.onPointerDown,H=>{H.button===0&&(H.target.setPointerCapture(H.pointerId),v.current=x.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),M(H))}),onPointerMove:ge(e.onPointerMove,M),onPointerUp:ge(e.onPointerUp,H=>{const q=H.target;q.hasPointerCapture(H.pointerId)&&q.releasePointerCapture(H.pointerId),document.body.style.webkitUserSelect=y.current,p.viewport&&(p.viewport.style.scrollBehavior=""),v.current=null})})})}),Ru="ScrollAreaThumb",CE=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=_E(Ru,e.__scopeScrollArea);return s.jsx(Dt,{present:r||a.hasThumb,children:s.jsx(oB,{ref:t,...n})})}),oB=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=en(Ru,r),o=_E(Ru,r),{onThumbPositionChange:l}=o,c=De(t,f=>o.onThumbChange(f)),d=h.useRef(void 0),u=Of(()=>{d.current&&(d.current(),d.current=void 0)},100);return h.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(u(),!d.current){const p=dB(f,l);d.current=p,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,u,l]),s.jsx(Ee.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ge(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),x=f.clientX-p.left,g=f.clientY-p.top;o.onThumbPointerDown({x,y:g})}),onPointerUp:ge(e.onPointerUp,o.onThumbPointerUp)})});CE.displayName=Ru;var Wv="ScrollAreaCorner",EE=h.forwardRef((e,t)=>{const r=en(Wv,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(lB,{...e,ref:t}):null});EE.displayName=Wv;var lB=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=en(Wv,r),[i,o]=h.useState(0),[l,c]=h.useState(0),d=!!(i&&l);return Ro(a.scrollbarX,()=>{var f;const u=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),Ro(a.scrollbarY,()=>{var f;const u=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(u),o(u)}),d?s.jsx(Ee.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Iu(e){return e?parseInt(e,10):0}function kE(e,t){const r=e/t;return isNaN(r)?0:r}function Af(e){const t=kE(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function cB(e,t,r,n="ltr"){const a=Af(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,u=r.content-r.viewport,f=n==="ltr"?[0,u]:[u*-1,0];return PE([c,d],f)(e)}function Fb(e,t,r="ltr"){const n=Af(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],d=kp(e,c);return PE([0,o],[0,l])(d)}function PE(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function TE(e,t){return e>0&&e<t}var dB=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function Of(e,t){const r=bt(e),n=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),h.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Ro(e,t){const r=bt(t);Ot(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var RE=bE,uB=jE,fB=EE;const zd=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(RE,{ref:n,className:be("relative overflow-hidden",e),...r,children:[s.jsx(uB,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(IE,{}),s.jsx(fB,{})]}));zd.displayName=RE.displayName;const IE=h.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(zv,{ref:n,orientation:t,className:be("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(CE,{className:"relative flex-1 rounded-full bg-border"})}));IE.displayName=zv.displayName;const Lp=["Donation","Reassignment","Relocate","Others"],bd={entityName:"",fromAccountableOfficer:"",toAccountableOfficer:"",fundCluster:"",itrNumber:"",date:"",transferType:"Donation",otherTransferType:"",reason:"",status:"Pending",items:[]},zh=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"})},hB=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},ka=e=>e==null?"":new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e),Ki=(e,t)=>e?t?`${e} / ${t}`:e:"",Vh=e=>{const t=new Date().getFullYear(),r=new RegExp(`^ITR-${t}-(\\d{4})$`);let n=0;for(const i of e){const o=r.exec(i.itrNumber);if(o){const l=parseInt(o[1],10);Number.isNaN(l)||(n=Math.max(n,l))}}const a=String(n+1).padStart(4,"0");return`ITR-${t}-${a}`},mB=(e,t)=>{const r=t.map(o=>o.map(l=>`"${l.replace(/"/g,'""')}"`).join(",")).join(`\r
`),n=new Blob([r],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.setAttribute("download",e),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)},pB=e=>({propertyNumber:e.propertyNumber,description:e.description,quantity:e.quantity,condition:e.condition,dateAcquired:e.dateAcquired,amount:e.amount,icsSlipId:e.icsSlipId,icsSlipNumber:e.icsSlipNumber,icsDate:e.icsDate,inventoryItemId:e.inventoryItemId,custodianName:e.custodianName}),Ub=(e,t=!1)=>{const r=e.items||[],n=Math.max(12-r.length,0),a=t?"bg-white border border-border rounded-lg shadow-sm text-foreground":"bg-white text-black border border-black",i=t?"p-6":"p-10",o=l=>l.icsSlipNumber&&l.icsDate?`${l.icsSlipNumber} / ${l.icsDate}`:l.icsSlipNumber?l.icsSlipNumber:l.icsDate?l.icsDate:"";return s.jsxs("div",{className:`${a} ${i}`,children:[s.jsx("div",{className:`flex justify-end text-xs mb-2 ${t?"text-muted-foreground":""}`,children:"Annex A.5"}),s.jsx("div",{className:"text-center border-b border-black pb-2 mb-4",children:s.jsx("h1",{className:"text-2xl font-bold tracking-wide",children:"INVENTORY TRANSFER REPORT"})}),s.jsx("table",{className:"w-full text-sm mb-4",children:s.jsx("tbody",{children:s.jsxs("tr",{children:[s.jsxs("td",{className:"pr-4 align-top",children:["Entity Name:",s.jsx("span",{className:"inline-block min-w-[250px] border-b border-black",children:e.entityName||""})]}),s.jsxs("td",{className:"align-top",children:["Fund Cluster:",s.jsx("span",{className:"inline-block min-w-[180px] border-b border-black",children:e.fundCluster||""})]})]})})}),s.jsx("table",{className:"w-full text-sm mb-2",children:s.jsx("tbody",{children:s.jsxs("tr",{children:[s.jsxs("td",{className:"pr-2 align-top w-[55%]",children:[s.jsxs("div",{children:["From Accountable Officer/Agency/Fund Cluster:",s.jsx("span",{className:"inline-block min-w-[230px] border-b border-black",children:Ki(e.fromAccountableOfficer,e.fromAccountableOfficerDepartment)||""})]}),s.jsxs("div",{className:"mt-2",children:["To Accountable Officer/Agency/Fund Cluster:",s.jsx("span",{className:"inline-block min-w-[230px] border-b border-black",children:Ki(e.toAccountableOfficer,e.toAccountableOfficerDepartment)||""})]})]}),s.jsxs("td",{className:"align-top",children:[s.jsxs("div",{children:["ITR No.:",s.jsx("span",{className:"inline-block min-w-[160px] border-b border-black",children:e.itrNumber||""})]}),s.jsxs("div",{className:"mt-2",children:["Date:",s.jsx("span",{className:"inline-block min-w-[160px] border-b border-black",children:e.date||""})]})]})]})})}),s.jsxs("div",{className:"border border-black p-2 mb-4",children:[s.jsx("div",{className:"text-sm mb-2 font-semibold",children:"Transfer Type: (check only one)"}),s.jsx("div",{className:"grid grid-cols-2 gap-y-1 text-sm",children:Lp.map(l=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex h-3.5 w-3.5 items-center justify-center border border-black text-[10px] font-bold",children:e.transferType===l?"":""}),s.jsxs("span",{children:[l==="Others"?"Others (Specify)":l,l==="Others"&&e.transferType==="Others"&&e.otherTransferType?`: ${e.otherTransferType}`:""]})]},l))})]}),s.jsxs("table",{className:"w-full border-collapse border border-black text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"border border-black p-2 text-left w-[12%]",children:"Date Acquired"}),s.jsx("th",{className:"border border-black p-2 text-left w-[10%]",children:"Item No."}),s.jsx("th",{className:"border border-black p-2 text-left w-[15%]",children:"ICS No./Date"}),s.jsx("th",{className:"border border-black p-2 text-left",children:"Description"}),s.jsx("th",{className:"border border-black p-2 text-right w-[12%]",children:"Amount"}),s.jsx("th",{className:"border border-black p-2 text-center w-[15%]",children:"Condition of Inventory"})]})}),s.jsxs("tbody",{children:[r.map((l,c)=>s.jsxs("tr",{className:"h-10 align-top",children:[s.jsx("td",{className:"border border-black p-2",children:l.dateAcquired||""}),s.jsx("td",{className:"border border-black p-2",children:l.propertyNumber||""}),s.jsx("td",{className:"border border-black p-2",children:o(l)}),s.jsxs("td",{className:"border border-black p-2",children:[l.description,l.quantity?` (Qty: ${l.quantity})`:""]}),s.jsx("td",{className:"border border-black p-2 text-right",children:l.amount!==void 0?ka(l.amount):""}),s.jsx("td",{className:"border border-black p-2 text-center",children:l.condition||""})]},l.propertyNumber??c)),Array.from({length:n}).map((l,c)=>s.jsxs("tr",{className:"h-10",children:[s.jsx("td",{className:"border border-black p-2",children:""}),s.jsx("td",{className:"border border-black p-2",children:""}),s.jsx("td",{className:"border border-black p-2",children:""}),s.jsx("td",{className:"border border-black p-2",children:""}),s.jsx("td",{className:"border border-black p-2",children:""}),s.jsx("td",{className:"border border-black p-2",children:""})]},`blank-${c}`))]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"font-semibold text-sm mb-1",children:"Reasons for Transfer:"}),s.jsx("div",{className:"border border-black h-24 p-3 leading-tight text-sm",children:e.reason||""})]}),s.jsx("div",{className:"grid grid-cols-3 gap-6 text-sm mt-6",children:["Approved by","Released/Issued by","Received by"].map(l=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"border-t border-black pt-2 text-center",children:s.jsx("p",{className:"font-semibold uppercase text-xs",children:l})}),s.jsx("div",{className:"space-y-2",children:["Signature:","Printed Name:","Designation:","Date:"].map(c=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"whitespace-nowrap",children:c}),s.jsx("span",{className:"flex-1 border-b border-black h-4"})]},c))})]},l))})]})},gB=()=>{const[e,t]=h.useState([]),[r,n]=h.useState(null),[a,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState("All"),[u,f]=h.useState("All"),[m,p]=h.useState(""),[x,g]=h.useState(""),[w,v]=h.useState({}),[y,b]=h.useState(!1),[N,j]=h.useState([]),[C,E]=h.useState(""),M=h.useRef(null),{toast:H}=Fr(),q=xs(),[P,K]=h.useState(bd),ee=h.useMemo(()=>["PROVINCIAL GOVERNMENT OF APAYAO","CITY OF LUNA","MUNICIPALITY OF FLORA","PROVINCIAL ACCOUNTING OFFICE"],[]),{data:D=[],isLoading:S}=vt({queryKey:["transfer-ics-options"],queryFn:async()=>{var Pe,re;const{data:T,error:Y}=await te.from("custodian_slips").select(`
          id,
          slip_number,
          date_issued,
          custodian_name,
          custodian_slip_items (
            id,
            inventory_item_id,
            property_number,
            description,
            quantity,
            condition,
            amount,
            total_cost,
            unit_cost,
            date_issued,
            inventory_items (
              id,
              date_acquired,
              property_number,
              total_cost
            )
          )
        `).order("date_issued",{ascending:!1}).limit(100);if(Y)throw console.error("Failed to load custodian slip items for transfers",Y),Y;const le=[];for(const Se of T||[]){const ut=Se.custodian_slip_items||[];for(const Te of ut)le.push({id:Te.id,propertyNumber:Te.property_number||"",description:Te.description||"",quantity:Te.quantity||0,condition:Te.condition||"",amount:Number(Te.total_cost??Te.amount??Te.unit_cost??0),dateAcquired:((Pe=Te.inventory_items)==null?void 0:Pe.date_acquired)||"",custodianName:Se.custodian_name||"",icsSlipId:Se.id,icsSlipNumber:Se.slip_number||"",icsDate:Te.date_issued||Se.date_issued||"",inventoryItemId:Te.inventory_item_id||((re=Te.inventory_items)==null?void 0:re.id)||""})}return le},staleTime:5*60*1e3}),A=h.useMemo(()=>{const T=P.fromAccountableOfficer?P.fromAccountableOfficer.toLowerCase().trim():"",Y=new Set(P.items.map(le=>le.propertyNumber));return D.filter(le=>{var Pe;return Y.has(le.propertyNumber)?!1:T?((Pe=le.custodianName)==null?void 0:Pe.toLowerCase())===T:!0}).filter(le=>C?`${le.propertyNumber} ${le.description} ${le.icsSlipNumber} ${le.custodianName||""}`.toLowerCase().includes(C.toLowerCase()):!0)},[D,P.fromAccountableOfficer,P.items,C]),O=h.useMemo(()=>{const T=o.toLowerCase();return e.filter(Y=>{const Pe=[Y.itrNumber,Y.entityName,Y.fromAccountableOfficer,Y.toAccountableOfficer,Y.reason,Y.items.map(Ye=>`${Ye.propertyNumber} ${Ye.description}`).join(" ")].join(" ").toLowerCase().includes(T),re=c==="All"||Y.status===c,Se=u==="All"||Y.transferType===u,ut=!m||Y.date>=m,Te=!x||Y.date<=x;return Pe&&re&&Se&&ut&&Te})},[e,o,c,u,m,x]);h.useEffect(()=>{a?(K(T=>({...bd,...T,itrNumber:T.itrNumber||Vh(e),status:"Pending"})),v({})):(K(bd),j([]),b(!1))},[a,e]);const F=T=>{const Y={};return T.entityName.trim()||(Y.entityName="Entity name is required."),T.fundCluster.trim()||(Y.fundCluster="Fund cluster is required."),T.itrNumber.trim()||(Y.itrNumber="ITR number is required."),T.date.trim()||(Y.date="Date is required."),T.fromAccountableOfficer.trim()||(Y.fromOfficer="Select the releasing accountable officer."),T.toAccountableOfficer.trim()||(Y.toOfficer="Select the receiving accountable officer."),T.reason.trim()||(Y.reason="Please provide the reason for transfer."),T.items.length||(Y.items="Select at least one item from the ICS list."),Y},L=()=>{const T=Vh(e);K(Y=>({...Y,itrNumber:T}))},J=()=>{const T=F(P);if(Object.keys(T).length>0){v(T),H({title:"Missing information",description:"Please fill in the required fields before saving the transfer.",variant:"destructive"});return}const Y=new Date().toISOString(),le=P.itrNumber||Vh(e),Pe={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}`,entityName:P.entityName.trim(),fromAccountableOfficer:P.fromAccountableOfficer.trim(),fromAccountableOfficerDepartment:P.fromAccountableOfficerDepartment,fromAccountableOfficerId:P.fromAccountableOfficerId,toAccountableOfficer:P.toAccountableOfficer.trim(),toAccountableOfficerDepartment:P.toAccountableOfficerDepartment,toAccountableOfficerId:P.toAccountableOfficerId,fundCluster:P.fundCluster.trim(),itrNumber:le,date:P.date,transferType:P.transferType,otherTransferType:P.otherTransferType,reason:P.reason.trim(),status:P.status,items:P.items,history:[{timestamp:Y,status:P.status,action:"Transfer created",details:`Created ITR ${le}`}]};t(re=>[...re,Pe]),K(bd),i(!1),v({}),j([]),H({title:"Transfer saved",description:`Transfer ${le} has been added to the list.`})},ce=(T,Y)=>{t(le=>le.map(Pe=>{if(Pe.id!==T)return Pe;const re=new Date().toISOString();return{...Pe,status:Y,dateCompleted:Y==="Completed"?re.split("T")[0]:Pe.dateCompleted,history:[...Pe.history,{timestamp:re,status:Y,action:`Status changed to ${Y}`,details:Y==="Completed"?"Transfer marked as completed.":Y==="Rejected"?"Transfer was rejected.":void 0}]}})),H({title:"Status updated",description:`Transfer marked as ${Y}.`})},B=T=>{n(T),setTimeout(()=>{window.print()},100)},I=()=>{if(!O.length){H({title:"Nothing to export",description:"Adjust the filters to include at least one transfer before exporting.",variant:"destructive"});return}const T=[["ITR No.","Entity","Fund Cluster","From Officer","To Officer","Date","Transfer Type","Status","Reason","Item Count","Items","Total Amount"]];O.forEach(Y=>{const le=Y.items.reduce((re,Se)=>re+(Se.amount??0),0),Pe=Y.items.map(re=>`${re.propertyNumber} - ${re.description}`).join("; ");T.push([Y.itrNumber,Y.entityName,Y.fundCluster,Ki(Y.fromAccountableOfficer,Y.fromAccountableOfficerDepartment),Ki(Y.toAccountableOfficer,Y.toAccountableOfficerDepartment),Y.date,Y.transferType==="Others"&&Y.otherTransferType?`${Y.transferType} (${Y.otherTransferType})`:Y.transferType,Y.status,Y.reason,Y.items.length.toString(),Pe,le?ka(le):""])}),mB(`inventory-transfers-${Date.now()}.csv`,T)},V=T=>{K(Y=>({...Y,items:Y.items.filter(le=>le.propertyNumber!==T)}))},Q=()=>{if(!P.fromAccountableOfficer){H({title:"Select an accountable officer first",description:"Please choose the releasing accountable officer to filter the ICS items.",variant:"destructive"});return}b(!0)},se=T=>{j(Y=>Y.includes(T)?Y.filter(le=>le!==T):[...Y,T])},Z=()=>{const T=A.filter(Y=>N.includes(Y.id));if(!T.length){H({title:"No items selected",description:"Choose at least one item from the list before confirming.",variant:"destructive"});return}K(Y=>{const le=new Map;return Y.items.forEach(Pe=>le.set(Pe.propertyNumber,Pe)),T.map(pB).forEach(Pe=>le.set(Pe.propertyNumber,Pe)),{...Y,items:Array.from(le.values())}}),j([]),b(!1)},R=h.useMemo(()=>({id:"preview",entityName:P.entityName,fromAccountableOfficer:P.fromAccountableOfficer,fromAccountableOfficerDepartment:P.fromAccountableOfficerDepartment,toAccountableOfficer:P.toAccountableOfficer,toAccountableOfficerDepartment:P.toAccountableOfficerDepartment,fundCluster:P.fundCluster,itrNumber:P.itrNumber,date:P.date,transferType:P.transferType,otherTransferType:P.otherTransferType,reason:P.reason,status:P.status,items:P.items,history:[]}),[P]),X=P.items.reduce((T,Y)=>T+(Y.amount??0),0),ie=a&&(P.entityName||P.fundCluster||P.itrNumber||P.items.length>0||P.reason);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Property Transfers"}),s.jsxs(ne,{onClick:()=>i(!0),className:"flex items-center gap-2",children:[s.jsx(Un,{className:"h-4 w-4"}),"Create Transfer"]})]}),s.jsxs("div",{className:"grid gap-4 lg:grid-cols-2 xl:grid-cols-3",children:[s.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[s.jsx(Mr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(we,{placeholder:"Search by ITR no., officer, reason, or item",value:o,onChange:T=>l(T.target.value),className:"pl-10"})]}),s.jsxs(ct,{value:c,onValueChange:d,children:[s.jsx(at,{children:s.jsx(dt,{placeholder:"Filter by status"})}),s.jsxs(it,{children:[s.jsx(pe,{value:"All",children:"All status"}),s.jsx(pe,{value:"Pending",children:"Pending"}),s.jsx(pe,{value:"In Transit",children:"In Transit"}),s.jsx(pe,{value:"Completed",children:"Completed"}),s.jsx(pe,{value:"Rejected",children:"Rejected"})]})]}),s.jsxs(ct,{value:u,onValueChange:f,children:[s.jsx(at,{children:s.jsx(dt,{placeholder:"Filter by transfer type"})}),s.jsxs(it,{children:[s.jsx(pe,{value:"All",children:"All types"}),Lp.map(T=>s.jsx(pe,{value:T,children:T},T))]})]}),s.jsx(we,{type:"date",value:m,onChange:T=>p(T.target.value),placeholder:"From date"}),s.jsx(we,{type:"date",value:x,onChange:T=>g(T.target.value),placeholder:"To date"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(ne,{type:"button",variant:"outline",onClick:I,className:"flex-1 sm:flex-none",children:[s.jsx(Ug,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),s.jsx(ne,{type:"button",variant:"ghost",className:"flex-1 sm:flex-none",onClick:()=>{d("All"),f("All"),p(""),g(""),l("")},children:"Clear Filters"})]})]}),a&&s.jsxs("div",{className:"grid gap-6 xl:grid-cols-[minmax(0,1fr)_420px]",children:[s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{children:"Create Inventory Transfer Report"})}),s.jsxs(Ne,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"entityName",children:"Entity Name *"}),s.jsx(we,{id:"entityName",list:"entity-suggestions",value:P.entityName,onChange:T=>K({...P,entityName:T.target.value}),placeholder:"PROVINCIAL GOVERNMENT OF APAYAO"}),s.jsx("datalist",{id:"entity-suggestions",children:ee.map(T=>s.jsx("option",{value:T},T))}),w.entityName&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:w.entityName}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Suggested: PROVINCIAL GOVERNMENT OF APAYAO (used across property cards and ICS forms)"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fundCluster",children:"Fund Cluster *"}),s.jsx(we,{id:"fundCluster",value:P.fundCluster,onChange:T=>K({...P,fundCluster:T.target.value}),placeholder:"e.g., 101"}),w.fundCluster&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:w.fundCluster})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"itrNumber",children:"ITR No. *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(we,{id:"itrNumber",value:P.itrNumber,onChange:T=>K({...P,itrNumber:T.target.value.toUpperCase()}),placeholder:"ITR-2025-0001"}),s.jsx(ne,{type:"button",variant:"outline",onClick:L,children:"Generate"})]}),w.itrNumber&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:w.itrNumber}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Format suggestion: ITR-YYYY-#### (independent sequence from ICS numbers)"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"transferDate",children:"Date *"}),s.jsx(we,{id:"transferDate",type:"date",value:P.date,onChange:T=>K({...P,date:T.target.value})}),w.date&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:w.date})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Tu,{className:"space-y-1",label:"From Accountable Officer *",value:P.fromAccountableOfficer,onChange:(T,Y)=>K(le=>({...le,fromAccountableOfficer:T,fromAccountableOfficerDepartment:Y==null?void 0:Y.department_name,fromAccountableOfficerId:Y==null?void 0:Y.id})),placeholder:"Search custodians...",required:!0}),w.fromOfficer&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:w.fromOfficer})]}),s.jsxs("div",{children:[s.jsx(Tu,{className:"space-y-1",label:"To Accountable Officer *",value:P.toAccountableOfficer,onChange:(T,Y)=>K(le=>({...le,toAccountableOfficer:T,toAccountableOfficerDepartment:Y==null?void 0:Y.department_name,toAccountableOfficerId:Y==null?void 0:Y.id})),placeholder:"Search custodians...",required:!0}),w.toOfficer&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:w.toOfficer})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{children:"Transfer Type *"}),s.jsxs(ct,{value:P.transferType,onValueChange:T=>K(Y=>({...Y,transferType:T,otherTransferType:T==="Others"?Y.otherTransferType:""})),children:[s.jsx(at,{children:s.jsx(dt,{placeholder:"Select transfer type"})}),s.jsx(it,{children:Lp.map(T=>s.jsx(pe,{value:T,children:T},T))})]})]}),P.transferType==="Others"&&s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"otherTransferType",children:"Specify Other Transfer Type"}),s.jsx(we,{id:"otherTransferType",value:P.otherTransferType||"",onChange:T=>K({...P,otherTransferType:T.target.value}),placeholder:"Describe the transfer type"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsx(ae,{className:"text-base font-semibold",children:"Items to Transfer *"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ne,{type:"button",variant:"outline",size:"sm",onClick:Q,children:"Select from ICS"}),S&&s.jsx(Nt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]})]}),w.items&&s.jsx("p",{className:"text-sm text-destructive",children:w.items}),P.items.length===0?s.jsx("div",{className:"rounded-md border border-dashed p-4 text-sm text-muted-foreground bg-muted/30",children:"Select items from existing ICS slips. The table will auto-fill Item No., ICS number/date, description, amount, and condition."}):s.jsxs("div",{className:"rounded-md border overflow-hidden",children:[s.jsxs(Gt,{children:[s.jsx(sr,{children:s.jsxs(Ve,{children:[s.jsx(he,{className:"w-[120px]",children:"Item No."}),s.jsx(he,{children:"ICS No./Date"}),s.jsx(he,{children:"Description"}),s.jsx(he,{className:"text-right w-[120px]",children:"Amount"}),s.jsx(he,{className:"w-[140px]",children:"Condition"}),s.jsx(he,{className:"w-[160px] text-right",children:"Actions"})]})}),s.jsx(ar,{children:P.items.map(T=>{const Y=[T.icsSlipNumber,T.icsDate].filter(Boolean).join(" / ");return s.jsxs(Ve,{children:[s.jsx(de,{className:"font-medium",children:T.propertyNumber}),s.jsx(de,{children:Y||""}),s.jsxs(de,{children:[s.jsx("div",{className:"font-medium",children:T.description}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[zh(T.dateAcquired),T.quantity?`  Qty: ${T.quantity}`:""]})]}),s.jsx(de,{className:"text-right",children:T.amount!==void 0?ka(T.amount):""}),s.jsx(de,{children:T.condition||""}),s.jsx(de,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>q(`/property-cards?search=${encodeURIComponent(T.propertyNumber)}`),children:"Card"}),s.jsx(ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>q(`/custodian-slips?slip=${encodeURIComponent(T.icsSlipNumber||"")}`),children:"ICS"}),s.jsx(ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>V(T.propertyNumber),children:"Remove"})]})})]},T.propertyNumber)})})]}),s.jsxs("div",{className:"px-4 py-2 text-sm text-right text-muted-foreground border-t",children:["Total amount of selected items: ",s.jsx("span",{className:"font-semibold",children:ka(X)})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"reason",children:"Reason for Transfer *"}),s.jsx(Qa,{id:"reason",value:P.reason,onChange:T=>K({...P,reason:T.target.value}),placeholder:"Provide the justification or remarks for this transfer.",rows:4}),w.reason&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:w.reason})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ne,{type:"button",variant:"ghost",onClick:()=>i(!1),children:"Cancel"}),s.jsx(ne,{type:"button",onClick:J,children:"Save Transfer"})]})]})]}),ie&&s.jsxs(je,{className:"xl:sticky xl:top-24 h-fit",children:[s.jsxs(Ie,{children:[s.jsx(Oe,{children:"Print Preview"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Updates automatically as you complete the form. This mirrors the Annex A.5 layout."})]}),s.jsx(Ne,{children:s.jsx(zd,{className:"max-h-[70vh] pr-2",children:Ub(R,!0)})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[O.map(T=>{const Y=T.items.reduce((le,Pe)=>le+(Pe.amount??0),0);return s.jsxs(je,{className:"flex flex-col",children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx(Oe,{className:"text-lg",children:T.itrNumber}),s.jsx("p",{className:"text-sm text-muted-foreground",children:zh(T.date)})]}),s.jsxs(Be,{variant:T.status==="Pending"?"warning":T.status==="Completed"?"success":T.status==="Rejected"?"destructive":"secondary",className:"flex items-center gap-1",children:[T.status==="Pending"?s.jsx(Co,{className:"h-3.5 w-3.5"}):T.status==="Completed"?s.jsx(So,{className:"h-3.5 w-3.5"}):T.status==="Rejected"?s.jsx(vn,{className:"h-3.5 w-3.5"}):s.jsx(Co,{className:"h-3.5 w-3.5"}),T.status]})]})}),s.jsxs(Ne,{className:"flex flex-1 flex-col gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Entity:"})," ",T.entityName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Fund Cluster:"})," ",T.fundCluster]}),s.jsxs("p",{children:[s.jsx("strong",{children:"From:"})," ",Ki(T.fromAccountableOfficer,T.fromAccountableOfficerDepartment)||""]}),s.jsxs("p",{children:[s.jsx("strong",{children:"To:"})," ",Ki(T.toAccountableOfficer,T.toAccountableOfficerDepartment)||""]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Transfer Type:"})," ",T.transferType==="Others"&&T.otherTransferType?`${T.transferType}  ${T.otherTransferType}`:T.transferType]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Reason:"})," ",T.reason||""]}),Y>0&&s.jsxs("p",{children:[s.jsx("strong",{children:"Total Amount:"})," ",ka(Y)]})]}),T.items.length>0&&s.jsx("div",{className:"border rounded-md overflow-hidden",children:s.jsxs(Gt,{children:[s.jsx(sr,{children:s.jsxs(Ve,{children:[s.jsx(he,{children:"Item No."}),s.jsx(he,{children:"ICS"}),s.jsx(he,{children:"Description"}),s.jsx(he,{className:"text-right",children:"Amount"})]})}),s.jsx(ar,{children:T.items.map(le=>{const Pe=[le.icsSlipNumber,le.icsDate].filter(Boolean).join(" / ");return s.jsxs(Ve,{children:[s.jsx(de,{className:"font-medium",children:le.propertyNumber}),s.jsx(de,{children:Pe||""}),s.jsxs(de,{children:[s.jsx("div",{children:le.description}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[le.condition||"",le.quantity?`  Qty: ${le.quantity}`:""]})]}),s.jsx(de,{className:"text-right",children:le.amount!==void 0?ka(le.amount):""})]},le.propertyNumber)})})]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[s.jsx(O2,{className:"h-4 w-4"}),"History"]}),s.jsx(zd,{className:"mt-2 max-h-32 pr-2",children:s.jsx("div",{className:"space-y-1.5 text-xs text-muted-foreground",children:T.history.map((le,Pe)=>s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-foreground",children:hB(le.timestamp)})," "," ",le.action," (",le.status,")",le.details&&s.jsx("div",{className:"ml-5 text-[11px]",children:le.details})]},`${le.timestamp}-${Pe}`))})})]}),s.jsxs("div",{className:"mt-auto flex flex-col gap-2",children:[s.jsxs(ne,{type:"button",size:"sm",variant:"outline",onClick:()=>B(T),children:[s.jsx(zt,{className:"h-4 w-4 mr-2"}),"Print Inventory Transfer Report"]}),T.status!=="Completed"&&T.status!=="Rejected"&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[T.status==="Pending"&&s.jsxs(s.Fragment,{children:[s.jsx(ne,{type:"button",size:"sm",variant:"secondary",className:"flex-1",onClick:()=>ce(T.id,"In Transit"),children:"Mark In Transit"}),s.jsx(ne,{type:"button",size:"sm",variant:"destructive",className:"flex-1",onClick:()=>ce(T.id,"Rejected"),children:"Reject"})]}),T.status==="In Transit"&&s.jsx(ne,{type:"button",size:"sm",className:"flex-1",onClick:()=>ce(T.id,"Completed"),children:"Mark Complete"})]})]})]})]},T.id)}),!O.length&&s.jsxs(je,{className:"col-span-full border-dashed border-muted-foreground/40",children:[s.jsx(Ie,{children:s.jsx(Oe,{className:"text-lg",children:"No transfers found"})}),s.jsx(Ne,{className:"text-muted-foreground",children:"Adjust the filters or create a new transfer to see it listed here."})]})]}),r&&s.jsx("div",{className:"print-only",children:s.jsx("div",{ref:M,children:Ub(r)})}),s.jsx(Tr,{open:y,onOpenChange:b,children:s.jsxs(vr,{className:"max-w-4xl",children:[s.jsxs(Ar,{children:[s.jsx(Or,{children:"Select Items from ICS"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing items issued to ",P.fromAccountableOfficer||"the selected accountable officer",". Choose the items that will be transferred."]})]}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx(we,{placeholder:"Search by item number, description, ICS number",value:C,onChange:T=>E(T.target.value)}),s.jsxs("div",{className:"border rounded-md h-[360px] overflow-hidden",children:[s.jsx(Gt,{children:s.jsx(sr,{children:s.jsxs(Ve,{children:[s.jsx(he,{className:"w-[40px]"}),s.jsx(he,{children:"Item No."}),s.jsx(he,{children:"Description"}),s.jsx(he,{children:"ICS No."}),s.jsx(he,{children:"Date Issued"}),s.jsx(he,{children:"Amount"}),s.jsx(he,{children:"Condition"})]})})}),s.jsx(zd,{className:"h-[300px]",children:s.jsx(Gt,{children:s.jsx(ar,{children:S?s.jsx(Ve,{children:s.jsx(de,{colSpan:7,className:"text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-muted-foreground",children:[s.jsx(Nt,{className:"h-4 w-4 animate-spin"}),"Loading ICS items"]})})}):A.length===0?s.jsx(Ve,{children:s.jsx(de,{colSpan:7,className:"text-center text-muted-foreground py-10",children:"No ICS items found for the selected officer. Adjust your search or confirm the officer selection."})}):A.map(T=>{const Y=N.includes(T.id);return s.jsxs(Ve,{className:"cursor-pointer",onClick:()=>se(T.id),children:[s.jsx(de,{className:"w-[40px]",children:s.jsx(Rc,{checked:Y,onCheckedChange:()=>se(T.id)})}),s.jsx(de,{className:"font-medium",children:T.propertyNumber}),s.jsx(de,{children:T.description}),s.jsx(de,{children:T.icsSlipNumber}),s.jsx(de,{children:zh(T.icsDate)}),s.jsx(de,{children:T.amount!==void 0?ka(T.amount):""}),s.jsx(de,{children:T.condition||""})]},T.id)})})})})]})]}),s.jsxs(VC,{className:"flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:N.length?`${N.length} item(s) selected`:"Select one or more items to add to the transfer."}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{type:"button",variant:"ghost",onClick:()=>b(!1),children:"Cancel"}),s.jsx(ne,{type:"button",onClick:Z,children:"Add Selected Items"})]})]})]})}),s.jsx("style",{children:`
        @media print {
          .print-only { display: block !important; }
          body * { visibility: hidden; }
          .print-only, .print-only * { visibility: visible; }
          .print-only { position: absolute; left: 0; top: 0; width: 100%; }
        }
        .print-only { display: none; }
      `})]})},vB=()=>{var K,ee;const[e,t]=h.useState([]),[r,n]=h.useState(null),[a,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState("All"),u=h.useRef(null),{toast:f}=Fr(),[m,p]=h.useState({countNumber:"",department:"",countDate:"",countType:"Annual",status:"Planned",conductedBy:[""],witnessedBy:"",approvedBy:"",items:[{propertyNumber:"",description:"",expectedQuantity:0,actualQuantity:0,condition:"Serviceable",location:"",remarks:"",variance:0}],remarks:""}),x=(D,S)=>S-D,g=()=>{var L;if(!m.countNumber||!m.department){f({title:"Error",description:"Please fill in required fields",variant:"destructive"});return}const D=((L=m.items)==null?void 0:L.map(J=>({...J,variance:x(J.expectedQuantity,J.actualQuantity)})))||[],S=D.reduce((J,ce)=>J+ce.expectedQuantity,0),A=D.reduce((J,ce)=>J+ce.actualQuantity,0),O=A-S,F={id:Date.now().toString(),...m,items:D,totalExpected:S,totalActual:A,totalVariance:O};t([...e,F]),p({countNumber:"",department:"",countDate:"",countType:"Annual",status:"Planned",conductedBy:[""],witnessedBy:"",approvedBy:"",items:[{propertyNumber:"",description:"",expectedQuantity:0,actualQuantity:0,condition:"Serviceable",location:"",remarks:"",variance:0}],remarks:""}),i(!1),f({title:"Success",description:"Physical count record created successfully"})},w=()=>{p({...m,items:[...m.items||[],{propertyNumber:"",description:"",expectedQuantity:0,actualQuantity:0,condition:"Serviceable",location:"",remarks:"",variance:0}]})},v=(D,S,A)=>{const O=[...m.items||[]];if(O[D]={...O[D],[S]:A},S==="expectedQuantity"||S==="actualQuantity"){const F=S==="expectedQuantity"?A:O[D].expectedQuantity,L=S==="actualQuantity"?A:O[D].actualQuantity;O[D].variance=x(F,L)}p({...m,items:O})},y=D=>{var A;const S=(A=m.items)==null?void 0:A.filter((O,F)=>F!==D);p({...m,items:S})},b=()=>{p({...m,conductedBy:[...m.conductedBy||[],""]})},N=(D,S)=>{const A=[...m.conductedBy||[]];A[D]=S,p({...m,conductedBy:A})},j=D=>{var A;const S=(A=m.conductedBy)==null?void 0:A.filter((O,F)=>F!==D);p({...m,conductedBy:S})},C=(D,S)=>{t(e.map(A=>A.id===D?{...A,status:S}:A)),f({title:"Success",description:`Physical count status updated to ${S}`})},E=D=>{n(D),setTimeout(()=>{window.print()},100)},M=D=>{switch(D){case"Planned":return s.jsx(Co,{className:"h-4 w-4"});case"Completed":return s.jsx(So,{className:"h-4 w-4"});case"Under Review":return s.jsx(Hl,{className:"h-4 w-4"});default:return s.jsx(Co,{className:"h-4 w-4"})}},H=D=>{switch(D){case"Planned":return"secondary";case"In Progress":return"warning";case"Completed":return"success";case"Under Review":return"warning";default:return"secondary"}},q=D=>D===0?"success":D>0?"warning":"destructive",P=e.filter(D=>{const S=D.countNumber.toLowerCase().includes(o.toLowerCase())||D.department.toLowerCase().includes(o.toLowerCase()),A=c==="All"||D.status===c;return S&&A});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Physical Count of Semi-Expandable Property"}),s.jsxs(ne,{onClick:()=>i(!0),className:"flex items-center gap-2",children:[s.jsx(Un,{className:"h-4 w-4"}),"Create Physical Count"]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(we,{placeholder:"Search physical counts...",value:o,onChange:D=>l(D.target.value),className:"pl-10"})]}),s.jsxs(ct,{value:c,onValueChange:d,children:[s.jsx(at,{className:"w-48",children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"All",children:"All Status"}),s.jsx(pe,{value:"Planned",children:"Planned"}),s.jsx(pe,{value:"In Progress",children:"In Progress"}),s.jsx(pe,{value:"Completed",children:"Completed"}),s.jsx(pe,{value:"Under Review",children:"Under Review"})]})]})]}),a&&s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{children:"Create Physical Count Record"})}),s.jsxs(Ne,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"countNumber",children:"Count Number *"}),s.jsx(we,{id:"countNumber",value:m.countNumber,onChange:D=>p({...m,countNumber:D.target.value})})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"countDate",children:"Count Date"}),s.jsx(we,{id:"countDate",type:"date",value:m.countDate,onChange:D=>p({...m,countDate:D.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"department",children:"Department *"}),s.jsx(we,{id:"department",value:m.department,onChange:D=>p({...m,department:D.target.value})})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Count Type"}),s.jsxs(ct,{value:m.countType,onValueChange:D=>p({...m,countType:D}),children:[s.jsx(at,{children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"Annual",children:"Annual"}),s.jsx(pe,{value:"Quarterly",children:"Quarterly"}),s.jsx(pe,{value:"Special",children:"Special"}),s.jsx(pe,{value:"Spot Check",children:"Spot Check"})]})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(ae,{children:"Conducted By"}),s.jsx(ne,{type:"button",onClick:b,size:"sm",variant:"outline",children:"Add Person"})]}),(K=m.conductedBy)==null?void 0:K.map((D,S)=>s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx(we,{placeholder:"Name and Position",value:D,onChange:A=>N(S,A.target.value)}),m.conductedBy&&m.conductedBy.length>1&&s.jsx(ne,{type:"button",onClick:()=>j(S),size:"sm",variant:"destructive",children:"Remove"})]},S))]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"witnessedBy",children:"Witnessed By"}),s.jsx(we,{id:"witnessedBy",value:m.witnessedBy,onChange:D=>p({...m,witnessedBy:D.target.value})})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"approvedBy",children:"Approved By"}),s.jsx(we,{id:"approvedBy",value:m.approvedBy,onChange:D=>p({...m,approvedBy:D.target.value})})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(ae,{children:"Items"}),s.jsx(ne,{type:"button",onClick:w,size:"sm",variant:"outline",children:"Add Item"})]}),s.jsx("div",{className:"space-y-2",children:(ee=m.items)==null?void 0:ee.map((D,S)=>s.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 border rounded",children:[s.jsx(we,{placeholder:"Property #",value:D.propertyNumber,onChange:A=>v(S,"propertyNumber",A.target.value)}),s.jsx(we,{placeholder:"Description",value:D.description,onChange:A=>v(S,"description",A.target.value)}),s.jsx(we,{placeholder:"Expected",type:"number",value:D.expectedQuantity,onChange:A=>v(S,"expectedQuantity",parseInt(A.target.value)||0)}),s.jsx(we,{placeholder:"Actual",type:"number",value:D.actualQuantity,onChange:A=>v(S,"actualQuantity",parseInt(A.target.value)||0)}),s.jsx(we,{placeholder:"Location",value:D.location,onChange:A=>v(S,"location",A.target.value)}),s.jsxs(ct,{value:D.condition,onValueChange:A=>v(S,"condition",A),children:[s.jsx(at,{children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"Serviceable",children:"Serviceable"}),s.jsx(pe,{value:"For Repair",children:"For Repair"}),s.jsx(pe,{value:"Unserviceable",children:"Unserviceable"}),s.jsx(pe,{value:"Missing",children:"Missing"})]})]}),s.jsx("div",{className:"text-center py-2",children:s.jsxs(Be,{variant:q(D.variance),children:[D.variance>0?"+":"",D.variance]})}),s.jsx(ne,{type:"button",onClick:()=>y(S),size:"sm",variant:"destructive",children:""})]},S))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"remarks",children:"General Remarks"}),s.jsx(Qa,{id:"remarks",value:m.remarks,onChange:D=>p({...m,remarks:D.target.value})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{onClick:g,children:"Create Count"}),s.jsx(ne,{variant:"outline",onClick:()=>i(!1),children:"Cancel"})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:P.map(D=>s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx(Oe,{className:"text-lg",children:D.countNumber}),s.jsxs(Be,{variant:H(D.status),className:"flex items-center gap-1",children:[M(D.status),D.status]})]})}),s.jsxs(Ne,{children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Department:"})," ",D.department]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Type:"})," ",D.countType]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Date:"})," ",D.countDate]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Items:"})," ",D.items.length]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[s.jsx("strong",{children:"Expected:"})," ",D.totalExpected]}),s.jsxs("span",{children:[s.jsx("strong",{children:"Actual:"})," ",D.totalActual]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("strong",{children:"Variance:"}),s.jsxs(Be,{variant:q(D.totalVariance),children:[D.totalVariance>0?"+":"",D.totalVariance]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[s.jsxs(ne,{onClick:()=>E(D),size:"sm",variant:"outline",children:[s.jsx(zt,{className:"h-4 w-4 mr-2"}),"Print Report"]}),D.status!=="Completed"&&s.jsxs("div",{className:"flex gap-1",children:[D.status==="Planned"&&s.jsx(ne,{onClick:()=>C(D.id,"In Progress"),size:"sm",className:"flex-1",children:"Start Count"}),D.status==="In Progress"&&s.jsx(ne,{onClick:()=>C(D.id,"Under Review"),size:"sm",className:"flex-1",children:"Submit Review"}),D.status==="Under Review"&&s.jsx(ne,{onClick:()=>C(D.id,"Completed"),size:"sm",className:"flex-1",children:"Complete"})]})]})]})]},D.id))}),r&&s.jsx("div",{className:"print-only",children:s.jsxs("div",{ref:u,className:"max-w-4xl mx-auto p-8 bg-white text-black",children:[s.jsxs("div",{className:"text-center border-b-2 border-black pb-4 mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"REPORT ON THE PHYSICAL COUNT OF SEMI-EXPANDABLE PROPERTY"}),s.jsxs("p",{className:"text-lg",children:["Count No: ",r.countNumber]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"COUNT DETAILS"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Department:"})," ",r.department]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Count Type:"})," ",r.countType]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Date:"})," ",r.countDate]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Status:"})," ",r.status]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"SUMMARY"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Total Expected:"})," ",r.totalExpected]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Actual:"})," ",r.totalActual]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Variance:"})," ",r.totalVariance>0?"+":"",r.totalVariance]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"CONDUCTED BY"}),s.jsx("div",{className:"space-y-1",children:r.conductedBy.map((D,S)=>s.jsxs("p",{children:[" ",D]},S))})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"ITEMS COUNTED"}),s.jsxs("table",{className:"w-full border-collapse border border-black text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"border border-black p-1 text-left",children:"Property Number"}),s.jsx("th",{className:"border border-black p-1 text-left",children:"Description"}),s.jsx("th",{className:"border border-black p-1 text-center",children:"Expected"}),s.jsx("th",{className:"border border-black p-1 text-center",children:"Actual"}),s.jsx("th",{className:"border border-black p-1 text-center",children:"Variance"}),s.jsx("th",{className:"border border-black p-1 text-left",children:"Condition"}),s.jsx("th",{className:"border border-black p-1 text-left",children:"Location"})]})}),s.jsx("tbody",{children:r.items.map((D,S)=>s.jsxs("tr",{children:[s.jsx("td",{className:"border border-black p-1",children:D.propertyNumber}),s.jsx("td",{className:"border border-black p-1",children:D.description}),s.jsx("td",{className:"border border-black p-1 text-center",children:D.expectedQuantity}),s.jsx("td",{className:"border border-black p-1 text-center",children:D.actualQuantity}),s.jsxs("td",{className:"border border-black p-1 text-center",children:[D.variance>0?"+":"",D.variance]}),s.jsx("td",{className:"border border-black p-1",children:D.condition}),s.jsx("td",{className:"border border-black p-1",children:D.location})]},S))})]})]}),r.remarks&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"REMARKS"}),s.jsx("p",{children:r.remarks})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-8 text-center mt-12",children:[s.jsx("div",{children:s.jsxs("div",{className:"border-t border-black pt-2",children:[s.jsx("p",{className:"text-sm",children:"Count Team Leader"}),s.jsx("p",{className:"mt-8",children:r.conductedBy[0]})]})}),s.jsx("div",{children:s.jsxs("div",{className:"border-t border-black pt-2",children:[s.jsx("p",{className:"text-sm",children:"Witnessed By"}),s.jsx("p",{className:"mt-8",children:r.witnessedBy})]})}),s.jsx("div",{children:s.jsxs("div",{className:"border-t border-black pt-2",children:[s.jsx("p",{className:"text-sm",children:"Approved By"}),s.jsx("p",{className:"mt-8",children:r.approvedBy})]})})]})]})}),s.jsx("style",{children:`
        @media print {
          .print-only { display: block !important; }
          body * { visibility: hidden; }
          .print-only, .print-only * { visibility: visible; }
          .print-only { position: absolute; left: 0; top: 0; }
        }
        .print-only { display: none; }
      `})]})},yB=()=>{var q;const[e,t]=h.useState([]),[r,n]=h.useState(null),[a,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState("All"),[u,f]=h.useState("All"),m=h.useRef(null),{toast:p}=Fr(),[x,g]=h.useState({reportNumber:"",department:"",reportDate:"",incidentDate:"",reportType:"Lost",status:"Draft",reportedBy:"",investigatedBy:"",approvedBy:"",items:[{propertyNumber:"",description:"",quantity:1,unitCost:0,totalCost:0,dateAcquired:"",condition:"Lost",circumstances:""}],incidentDescription:"",actionsTaken:"",recommendations:"",attachments:[]}),w=()=>{var ee;if(!x.reportNumber||!x.department||!x.reportType){p({title:"Error",description:"Please fill in required fields",variant:"destructive"});return}const P=((ee=x.items)==null?void 0:ee.reduce((D,S)=>D+S.totalCost,0))||0,K={id:Date.now().toString(),...x,totalLossAmount:P};t([...e,K]),g({reportNumber:"",department:"",reportDate:"",incidentDate:"",reportType:"Lost",status:"Draft",reportedBy:"",investigatedBy:"",approvedBy:"",items:[{propertyNumber:"",description:"",quantity:1,unitCost:0,totalCost:0,dateAcquired:"",condition:"Lost",circumstances:""}],incidentDescription:"",actionsTaken:"",recommendations:"",attachments:[]}),i(!1),p({title:"Success",description:"Loss report created successfully"})},v=()=>{g({...x,items:[...x.items||[],{propertyNumber:"",description:"",quantity:1,unitCost:0,totalCost:0,dateAcquired:"",condition:x.reportType||"Lost",circumstances:""}]})},y=(P,K,ee)=>{const D=[...x.items||[]];if(D[P]={...D[P],[K]:ee},K==="quantity"||K==="unitCost"){const S=K==="quantity"?ee:D[P].quantity,A=K==="unitCost"?ee:D[P].unitCost;D[P].totalCost=S*A}g({...x,items:D})},b=P=>{var ee;const K=(ee=x.items)==null?void 0:ee.filter((D,S)=>S!==P);g({...x,items:K})},N=(P,K)=>{t(e.map(ee=>ee.id===P?{...ee,status:K}:ee)),p({title:"Success",description:`Report status updated to ${K}`})},j=P=>{n(P),setTimeout(()=>{window.print()},100)},C=P=>{switch(P){case"Draft":return s.jsx(Co,{className:"h-4 w-4"});case"Under Investigation":return s.jsx(Hl,{className:"h-4 w-4"});case"Approved":return s.jsx(So,{className:"h-4 w-4"});default:return s.jsx(Co,{className:"h-4 w-4"})}},E=P=>{switch(P){case"Draft":return"secondary";case"Submitted":return"warning";case"Under Investigation":return"warning";case"Approved":return"success";case"Rejected":return"destructive";default:return"secondary"}},M=P=>{switch(P){case"Lost":return"warning";case"Stolen":return"destructive";case"Damaged":return"secondary";case"Destroyed":return"destructive";default:return"secondary"}},H=e.filter(P=>{const K=P.reportNumber.toLowerCase().includes(o.toLowerCase())||P.department.toLowerCase().includes(o.toLowerCase()),ee=c==="All"||P.status===c,D=u==="All"||P.reportType===u;return K&&ee&&D});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Loss/Damage Reports"}),s.jsxs(ne,{onClick:()=>i(!0),className:"flex items-center gap-2",children:[s.jsx(Un,{className:"h-4 w-4"}),"Create New Report"]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(we,{placeholder:"Search reports...",value:o,onChange:P=>l(P.target.value),className:"pl-10"})]}),s.jsxs(ct,{value:c,onValueChange:d,children:[s.jsx(at,{className:"w-48",children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"All",children:"All Status"}),s.jsx(pe,{value:"Draft",children:"Draft"}),s.jsx(pe,{value:"Submitted",children:"Submitted"}),s.jsx(pe,{value:"Under Investigation",children:"Under Investigation"}),s.jsx(pe,{value:"Approved",children:"Approved"}),s.jsx(pe,{value:"Rejected",children:"Rejected"})]})]}),s.jsxs(ct,{value:u,onValueChange:f,children:[s.jsx(at,{className:"w-48",children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"All",children:"All Types"}),s.jsx(pe,{value:"Lost",children:"Lost"}),s.jsx(pe,{value:"Stolen",children:"Stolen"}),s.jsx(pe,{value:"Damaged",children:"Damaged"}),s.jsx(pe,{value:"Destroyed",children:"Destroyed"})]})]})]}),a&&s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{children:"Create Loss/Damage Report"})}),s.jsxs(Ne,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"reportNumber",children:"Report Number *"}),s.jsx(we,{id:"reportNumber",value:x.reportNumber,onChange:P=>g({...x,reportNumber:P.target.value})})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"reportDate",children:"Report Date"}),s.jsx(we,{id:"reportDate",type:"date",value:x.reportDate,onChange:P=>g({...x,reportDate:P.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"department",children:"Department *"}),s.jsx(we,{id:"department",value:x.department,onChange:P=>g({...x,department:P.target.value})})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"incidentDate",children:"Incident Date"}),s.jsx(we,{id:"incidentDate",type:"date",value:x.incidentDate,onChange:P=>g({...x,incidentDate:P.target.value})})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Report Type *"}),s.jsxs(ct,{value:x.reportType,onValueChange:P=>g({...x,reportType:P}),children:[s.jsx(at,{children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"Lost",children:"Lost"}),s.jsx(pe,{value:"Stolen",children:"Stolen"}),s.jsx(pe,{value:"Damaged",children:"Damaged"}),s.jsx(pe,{value:"Destroyed",children:"Destroyed"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"incidentDescription",children:"Incident Description"}),s.jsx(Qa,{id:"incidentDescription",value:x.incidentDescription,onChange:P=>g({...x,incidentDescription:P.target.value}),placeholder:"Describe what happened, when, where, and circumstances"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(ae,{children:"Affected Items"}),s.jsx(ne,{type:"button",onClick:v,size:"sm",variant:"outline",children:"Add Item"})]}),s.jsx("div",{className:"space-y-2",children:(q=x.items)==null?void 0:q.map((P,K)=>s.jsxs("div",{className:"grid grid-cols-7 gap-2 p-2 border rounded",children:[s.jsx(we,{placeholder:"Property Number",value:P.propertyNumber,onChange:ee=>y(K,"propertyNumber",ee.target.value)}),s.jsx(we,{placeholder:"Description",value:P.description,onChange:ee=>y(K,"description",ee.target.value)}),s.jsx(we,{placeholder:"Qty",type:"number",value:P.quantity,onChange:ee=>y(K,"quantity",parseInt(ee.target.value)||0)}),s.jsx(we,{placeholder:"Unit Cost",type:"number",step:"0.01",value:P.unitCost,onChange:ee=>y(K,"unitCost",parseFloat(ee.target.value)||0)}),s.jsx(we,{placeholder:"Total Cost",type:"number",value:P.totalCost,readOnly:!0,className:"bg-muted"}),s.jsxs(ct,{value:P.condition,onValueChange:ee=>y(K,"condition",ee),children:[s.jsx(at,{children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"Lost",children:"Lost"}),s.jsx(pe,{value:"Stolen",children:"Stolen"}),s.jsx(pe,{value:"Damaged",children:"Damaged"}),s.jsx(pe,{value:"Destroyed",children:"Destroyed"})]})]}),s.jsx(ne,{type:"button",onClick:()=>b(K),size:"sm",variant:"destructive",children:""})]},K))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"actionsTaken",children:"Actions Taken"}),s.jsx(Qa,{id:"actionsTaken",value:x.actionsTaken,onChange:P=>g({...x,actionsTaken:P.target.value}),placeholder:"Describe immediate actions taken after the incident"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"recommendations",children:"Recommendations"}),s.jsx(Qa,{id:"recommendations",value:x.recommendations,onChange:P=>g({...x,recommendations:P.target.value}),placeholder:"Recommendations to prevent similar incidents"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"reportedBy",children:"Reported By"}),s.jsx(we,{id:"reportedBy",value:x.reportedBy,onChange:P=>g({...x,reportedBy:P.target.value})})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"investigatedBy",children:"Investigated By"}),s.jsx(we,{id:"investigatedBy",value:x.investigatedBy,onChange:P=>g({...x,investigatedBy:P.target.value})})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"approvedBy",children:"Approved By"}),s.jsx(we,{id:"approvedBy",value:x.approvedBy,onChange:P=>g({...x,approvedBy:P.target.value})})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{onClick:w,children:"Create Report"}),s.jsx(ne,{variant:"outline",onClick:()=>i(!1),children:"Cancel"})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:H.map(P=>s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx(Oe,{className:"text-lg",children:P.reportNumber}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs(Be,{variant:E(P.status),className:"flex items-center gap-1",children:[C(P.status),P.status]}),s.jsx(Be,{variant:M(P.reportType),children:P.reportType})]})]})}),s.jsxs(Ne,{children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Department:"})," ",P.department]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Incident Date:"})," ",P.incidentDate]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Items Affected:"})," ",P.items.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Loss:"})," ",P.totalLossAmount.toLocaleString()]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Reported By:"})," ",P.reportedBy]})]}),s.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[s.jsxs(ne,{onClick:()=>j(P),size:"sm",variant:"outline",children:[s.jsx(zt,{className:"h-4 w-4 mr-2"}),"Print Report"]}),P.status!=="Approved"&&P.status!=="Rejected"&&s.jsxs("div",{className:"flex gap-1",children:[P.status==="Draft"&&s.jsx(ne,{onClick:()=>N(P.id,"Submitted"),size:"sm",className:"flex-1",children:"Submit"}),P.status==="Submitted"&&s.jsx(ne,{onClick:()=>N(P.id,"Under Investigation"),size:"sm",className:"flex-1",children:"Investigate"}),P.status==="Under Investigation"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ne,{onClick:()=>N(P.id,"Approved"),size:"sm",className:"flex-1",children:"Approve"}),s.jsx(ne,{onClick:()=>N(P.id,"Rejected"),size:"sm",variant:"destructive",className:"flex-1",children:"Reject"})]})]})]})]})]},P.id))}),r&&s.jsx("div",{className:"print-only",children:s.jsxs("div",{ref:m,className:"max-w-4xl mx-auto p-8 bg-white text-black",children:[s.jsxs("div",{className:"text-center border-b-2 border-black pb-4 mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold",children:["REPORT OF ",r.reportType.toUpperCase(),", STOLEN, DAMAGED OR DESTROYED PROPERTY"]}),s.jsxs("p",{className:"text-lg",children:["Report No: ",r.reportNumber]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"REPORT DETAILS"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Department:"})," ",r.department]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Report Type:"})," ",r.reportType]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Report Date:"})," ",r.reportDate]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Incident Date:"})," ",r.incidentDate]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"PERSONNEL"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Reported By:"})," ",r.reportedBy]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Investigated By:"})," ",r.investigatedBy]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Approved By:"})," ",r.approvedBy]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"INCIDENT DESCRIPTION"}),s.jsx("p",{className:"text-justify",children:r.incidentDescription})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"AFFECTED ITEMS"}),s.jsxs("table",{className:"w-full border-collapse border border-black",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"border border-black p-2 text-left",children:"Property Number"}),s.jsx("th",{className:"border border-black p-2 text-left",children:"Description"}),s.jsx("th",{className:"border border-black p-2 text-center",children:"Qty"}),s.jsx("th",{className:"border border-black p-2 text-right",children:"Unit Cost"}),s.jsx("th",{className:"border border-black p-2 text-right",children:"Total Cost"}),s.jsx("th",{className:"border border-black p-2 text-center",children:"Status"})]})}),s.jsxs("tbody",{children:[r.items.map((P,K)=>s.jsxs("tr",{children:[s.jsx("td",{className:"border border-black p-2",children:P.propertyNumber}),s.jsx("td",{className:"border border-black p-2",children:P.description}),s.jsx("td",{className:"border border-black p-2 text-center",children:P.quantity}),s.jsxs("td",{className:"border border-black p-2 text-right",children:["",P.unitCost.toLocaleString()]}),s.jsxs("td",{className:"border border-black p-2 text-right",children:["",P.totalCost.toLocaleString()]}),s.jsx("td",{className:"border border-black p-2 text-center",children:P.condition})]},K)),s.jsxs("tr",{className:"font-bold bg-gray-100",children:[s.jsx("td",{colSpan:4,className:"border border-black p-2 text-right",children:"TOTAL LOSS AMOUNT:"}),s.jsxs("td",{className:"border border-black p-2 text-right",children:["",r.totalLossAmount.toLocaleString()]}),s.jsx("td",{className:"border border-black p-2"})]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"ACTIONS TAKEN"}),s.jsx("p",{className:"text-justify",children:r.actionsTaken})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"RECOMMENDATIONS"}),s.jsx("p",{className:"text-justify",children:r.recommendations})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-8 text-center mt-12",children:[s.jsx("div",{children:s.jsxs("div",{className:"border-t border-black pt-2",children:[s.jsx("p",{className:"text-sm",children:"Reported By"}),s.jsx("p",{className:"mt-8",children:r.reportedBy})]})}),s.jsx("div",{children:s.jsxs("div",{className:"border-t border-black pt-2",children:[s.jsx("p",{className:"text-sm",children:"Investigated By"}),s.jsx("p",{className:"mt-8",children:r.investigatedBy})]})}),s.jsx("div",{children:s.jsxs("div",{className:"border-t border-black pt-2",children:[s.jsx("p",{className:"text-sm",children:"Approved By"}),s.jsx("p",{className:"mt-8",children:r.approvedBy})]})})]})]})}),s.jsx("style",{children:`
        @media print {
          .print-only { display: block !important; }
          body * { visibility: hidden; }
          .print-only, .print-only * { visibility: visible; }
          .print-only { position: absolute; left: 0; top: 0; }
        }
        .print-only { display: none; }
      `})]})},xB=({data:e})=>{const t=()=>{window.print()};return s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 print:hidden",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Semi-Expandable Property Ledger Card"}),s.jsxs(ne,{onClick:t,className:"flex items-center gap-2",children:[s.jsx(zt,{className:"h-4 w-4"}),"Print"]})]}),s.jsxs(je,{className:"print:shadow-none print:border-2 print:border-black",children:[s.jsx(Ie,{className:"text-center border-b-2 border-black",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-xl font-bold uppercase",children:"SEMI-EXPANDABLE PROPERTY LEDGER CARD"}),s.jsx("p",{className:"text-sm",children:"Republic of the Philippines"}),s.jsx("p",{className:"text-sm font-semibold",children:"[Department/Agency Name]"})]})}),s.jsxs(Ne,{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Property Number:"}),s.jsx("p",{className:"font-mono text-lg",children:e.propertyNumber})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Description:"}),s.jsx("p",{className:"text-sm",children:e.description})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Unit:"}),s.jsx("p",{className:"text-sm",children:e.unit})]})]}),s.jsx("div",{className:"border-2 border-black",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-black",children:[s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Date"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Reference Number"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Received"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Issued"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Balance"}),s.jsx("th",{className:"p-2 text-center",children:"Recipient/Issuer"})]})}),s.jsxs("tbody",{children:[e.entries.map((r,n)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.date}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.referenceNumber}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.received||"-"}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.issued||"-"}),s.jsx("td",{className:"border-r border-black p-2 text-center font-semibold",children:r.balance}),s.jsx("td",{className:"p-2",children:r.recipient})]},n)),Array.from({length:Math.max(0,10-e.entries.length)}).map((r,n)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 h-8",children:""}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"p-2",children:""})]},`empty-${n}`))]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-8 pt-4 border-t-2 border-black",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Supply Officer"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Property Custodian"})]})]})]})]})]})},bB=({data:e})=>{const t=()=>{window.print()};return s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 print:hidden",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Inventory Transfer Report"}),s.jsxs(ne,{onClick:t,className:"flex items-center gap-2",children:[s.jsx(zt,{className:"h-4 w-4"}),"Print"]})]}),s.jsxs(je,{className:"print:shadow-none print:border-2 print:border-black",children:[s.jsx(Ie,{className:"text-center border-b-2 border-black",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-xl font-bold uppercase",children:"INVENTORY TRANSFER REPORT"}),s.jsx("p",{className:"text-sm",children:"Republic of the Philippines"}),s.jsx("p",{className:"text-sm font-semibold",children:"[Department/Agency Name]"})]})}),s.jsxs(Ne,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Transfer Number:"}),s.jsx("p",{className:"font-mono text-lg",children:e.transferNumber})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Date:"}),s.jsx("p",{className:"text-sm",children:e.date})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"From Department:"}),s.jsx("p",{className:"text-sm",children:e.fromDepartment})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"From Custodian:"}),s.jsx("p",{className:"text-sm",children:e.fromCustodian})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"To Department:"}),s.jsx("p",{className:"text-sm",children:e.toDepartment})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"To Custodian:"}),s.jsx("p",{className:"text-sm",children:e.toCustodian})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Reason for Transfer:"}),s.jsx("p",{className:"text-sm",children:e.reason})]})]})]}),s.jsx("div",{className:"border-2 border-black",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-black bg-gray-100",children:[s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Item No."}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Property Number"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Description"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Qty"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Unit"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Serial Number"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Condition"}),s.jsx("th",{className:"p-2 text-center",children:"Remarks"})]})}),s.jsx("tbody",{children:e.items.map((r,n)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 text-center",children:n+1}),s.jsx("td",{className:"border-r border-black p-2 text-center font-mono",children:r.propertyNumber}),s.jsx("td",{className:"border-r border-black p-2",children:r.description}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.quantity}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.unit}),s.jsx("td",{className:"border-r border-black p-2 text-center font-mono",children:r.serialNumber}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.condition}),s.jsx("td",{className:"p-2",children:r.remarks})]},n))})]})}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-8 pt-4 border-t-2 border-black",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Released by:"}),s.jsx("p",{className:"text-xs",children:"(Signature over Printed Name)"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Received by:"}),s.jsx("p",{className:"text-xs",children:"(Signature over Printed Name)"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Approved by:"}),s.jsx("p",{className:"text-xs",children:"Supply Officer"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Date"})]})]})]})]})]})},wB=({data:e})=>{const t=()=>{window.print()};return s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 print:hidden",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Report on Physical Count of Semi-Expandable Property"}),s.jsxs(ne,{onClick:t,className:"flex items-center gap-2",children:[s.jsx(zt,{className:"h-4 w-4"}),"Print"]})]}),s.jsxs(je,{className:"print:shadow-none print:border-2 print:border-black",children:[s.jsx(Ie,{className:"text-center border-b-2 border-black",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-lg font-bold uppercase",children:"REPORT ON THE PHYSICAL COUNT OF SEMI-EXPANDABLE PROPERTY"}),s.jsx("p",{className:"text-sm",children:"Republic of the Philippines"}),s.jsx("p",{className:"text-sm font-semibold",children:"[Department/Agency Name]"})]})}),s.jsxs(Ne,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Report Number:"}),s.jsx("p",{className:"font-mono text-lg",children:e.reportNumber})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Count Date:"}),s.jsx("p",{className:"text-sm",children:e.countDate})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Department:"}),s.jsx("p",{className:"text-sm",children:e.department})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Property Custodian:"}),s.jsx("p",{className:"text-sm",children:e.custodian})]})]}),s.jsx("div",{className:"space-y-3",children:s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Counted By:"}),s.jsx("div",{className:"text-sm space-y-1",children:e.countedBy.map((r,n)=>s.jsx("p",{children:r},n))})]})})]}),s.jsx("div",{className:"border-2 border-black",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-black bg-gray-100",children:[s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Item No."}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Property Number"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Description"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Book Qty"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Actual Qty"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Variance"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Condition"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Location"}),s.jsx("th",{className:"p-2 text-center",children:"Remarks"})]})}),s.jsx("tbody",{children:e.items.map((r,n)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 text-center",children:n+1}),s.jsx("td",{className:"border-r border-black p-2 text-center font-mono",children:r.propertyNumber}),s.jsx("td",{className:"border-r border-black p-2",children:r.description}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.bookQuantity}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.actualQuantity}),s.jsxs("td",{className:`border-r border-black p-2 text-center font-semibold ${r.variance!==0?r.variance>0?"text-green-600":"text-red-600":""}`,children:[r.variance>0?"+":"",r.variance]}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.condition}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.location}),s.jsx("td",{className:"p-2",children:r.remarks})]},n))}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"border-t-2 border-black bg-gray-100",children:[s.jsx("td",{colSpan:5,className:"border-r border-black p-2 text-center font-semibold",children:"TOTAL VARIANCE:"}),s.jsxs("td",{className:`border-r border-black p-2 text-center font-bold text-lg ${e.totalVariance!==0?e.totalVariance>0?"text-green-600":"text-red-600":""}`,children:[e.totalVariance>0?"+":"",e.totalVariance]}),s.jsx("td",{colSpan:3,className:"p-2"})]})})]})}),s.jsxs("div",{className:"mt-6 p-4 border border-gray-400",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"SUMMARY OF VARIANCES:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Overage: "}),s.jsxs("span",{className:"text-green-600",children:["+",e.items.filter(r=>r.variance>0).reduce((r,n)=>r+n.variance,0)]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Shortage: "}),s.jsx("span",{className:"text-red-600",children:e.items.filter(r=>r.variance<0).reduce((r,n)=>r+n.variance,0)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Net Variance: "}),s.jsxs("span",{className:e.totalVariance!==0?e.totalVariance>0?"text-green-600":"text-red-600":"",children:[e.totalVariance>0?"+":"",e.totalVariance]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6 mt-8 pt-4 border-t-2 border-black",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Inventory Committee Chairman"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Property Custodian"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Supply Officer"})]})]})]})]})]})},jB=({data:e})=>{const t=()=>{window.print()};return s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 print:hidden",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Report of Lost, Stolen, Damaged or Destroyed Property"}),s.jsxs(ne,{onClick:t,className:"flex items-center gap-2",children:[s.jsx(zt,{className:"h-4 w-4"}),"Print"]})]}),s.jsxs(je,{className:"print:shadow-none print:border-2 print:border-black",children:[s.jsx(Ie,{className:"text-center border-b-2 border-black",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-lg font-bold uppercase",children:"REPORT OF LOST, STOLEN, DAMAGED OR DESTROYED PROPERTY"}),s.jsx("p",{className:"text-sm",children:"Republic of the Philippines"}),s.jsx("p",{className:"text-sm font-semibold",children:"[Department/Agency Name]"})]})}),s.jsxs(Ne,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Report Number:"}),s.jsx("p",{className:"font-mono text-lg",children:e.reportNumber})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Report Date:"}),s.jsx("p",{className:"text-sm",children:e.reportDate})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Department:"}),s.jsx("p",{className:"text-sm",children:e.department})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Reported By:"}),s.jsx("p",{className:"text-sm",children:e.reportedBy})]})]}),s.jsx("div",{className:"space-y-3",children:s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Investigated By:"}),s.jsx("p",{className:"text-sm",children:e.investigatedBy})]})})]}),s.jsx("div",{className:"border-2 border-black",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-black bg-gray-100",children:[s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Item No."}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Property Number"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Description"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Qty"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Unit Cost"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Total Cost"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Date Acquired"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Date of Loss"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Cause"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Responsible Person"}),s.jsx("th",{className:"p-2 text-center",children:"Action Taken"})]})}),s.jsx("tbody",{children:e.items.map((r,n)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 text-center",children:n+1}),s.jsx("td",{className:"border-r border-black p-2 text-center font-mono",children:r.propertyNumber}),s.jsx("td",{className:"border-r border-black p-2",children:r.description}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.quantity}),s.jsxs("td",{className:"border-r border-black p-2 text-right",children:["",r.unitCost.toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsxs("td",{className:"border-r border-black p-2 text-right font-semibold",children:["",r.totalCost.toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.dateAcquired}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.dateOfLoss}),s.jsx("td",{className:"border-r border-black p-2",children:r.cause}),s.jsx("td",{className:"border-r border-black p-2",children:r.responsible}),s.jsx("td",{className:"p-2",children:r.actionTaken})]},n))}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"border-t-2 border-black bg-gray-100",children:[s.jsx("td",{colSpan:5,className:"border-r border-black p-2 text-center font-semibold",children:"TOTAL LOSS VALUE:"}),s.jsxs("td",{className:"border-r border-black p-2 text-right font-bold text-lg text-red-600",children:["",e.totalLoss.toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsx("td",{colSpan:5,className:"p-2"})]})})]})}),s.jsxs("div",{className:"mt-6 p-4 border border-gray-400",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"RECOMMENDATIONS:"}),s.jsx("div",{className:"space-y-2 text-sm",children:s.jsx("div",{className:"border-b border-gray-200 pb-8",children:s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Recommended actions based on investigation findings:"})})})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-8 pt-4 border-t-2 border-black",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Prepared by:"}),s.jsx("p",{className:"text-xs",children:"Supply Officer"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Noted by:"}),s.jsx("p",{className:"text-xs",children:"Property Custodian"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Approved by:"}),s.jsx("p",{className:"text-xs",children:"Head of Office"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Date"})]})]})]})]})]})},NB=({data:e})=>{const t=()=>{window.print()},r=n=>{switch(n){case"Repair":return"text-blue-600";case"Dispose":return"text-orange-600";case"Condemn":return"text-red-600";default:return""}};return s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 print:hidden",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Inventory and Inspection Report of Unserviceable Semi-Expandable Property"}),s.jsxs(ne,{onClick:t,className:"flex items-center gap-2",children:[s.jsx(zt,{className:"h-4 w-4"}),"Print"]})]}),s.jsxs(je,{className:"print:shadow-none print:border-2 print:border-black",children:[s.jsx(Ie,{className:"text-center border-b-2 border-black",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-lg font-bold uppercase",children:"INVENTORY AND INSPECTION REPORT OF UNSERVICEABLE SEMI-EXPANDABLE PROPERTY"}),s.jsx("p",{className:"text-sm",children:"Republic of the Philippines"}),s.jsx("p",{className:"text-sm font-semibold",children:"[Department/Agency Name]"})]})}),s.jsxs(Ne,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Report Number:"}),s.jsx("p",{className:"font-mono text-lg",children:e.reportNumber})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Report Date:"}),s.jsx("p",{className:"text-sm",children:e.reportDate})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Department:"}),s.jsx("p",{className:"text-sm",children:e.department})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Review Period:"}),s.jsx("p",{className:"text-sm",children:e.reviewPeriod})]})]}),s.jsx("div",{className:"space-y-3",children:s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Inspected By:"}),s.jsx("div",{className:"text-sm space-y-1",children:e.inspectedBy.map((n,a)=>s.jsx("p",{children:n},a))})]})})]}),s.jsx("div",{className:"border-2 border-black",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-black bg-gray-100",children:[s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Item No."}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Property Number"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Description"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Qty"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Unit Cost"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Total Cost"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Date Acquired"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Condition"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Defects/Issues"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Recommendation"}),s.jsx("th",{className:"p-2 text-center",children:"Estimated Repair Cost"})]})}),s.jsx("tbody",{children:e.items.map((n,a)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 text-center",children:a+1}),s.jsx("td",{className:"border-r border-black p-2 text-center font-mono",children:n.propertyNumber}),s.jsx("td",{className:"border-r border-black p-2",children:n.description}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:n.quantity}),s.jsxs("td",{className:"border-r border-black p-2 text-right",children:["",n.unitCost.toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsxs("td",{className:"border-r border-black p-2 text-right",children:["",n.totalCost.toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:n.dateAcquired}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:n.condition}),s.jsx("td",{className:"border-r border-black p-2",children:n.defects}),s.jsx("td",{className:`border-r border-black p-2 text-center font-semibold ${r(n.recommendation)}`,children:n.recommendation}),s.jsx("td",{className:"p-2 text-right",children:n.estimatedRepairCost?`${n.estimatedRepairCost.toLocaleString("en-PH",{minimumFractionDigits:2})}`:"-"})]},a))}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"border-t-2 border-black bg-gray-100",children:[s.jsx("td",{colSpan:5,className:"border-r border-black p-2 text-center font-semibold",children:"TOTAL VALUE OF UNSERVICEABLE PROPERTY:"}),s.jsxs("td",{className:"border-r border-black p-2 text-right font-bold text-lg text-orange-600",children:["",e.totalValue.toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsx("td",{colSpan:5,className:"p-2"})]})})]})}),s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 border border-gray-400",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-semibold text-blue-600",children:"FOR REPAIR"}),s.jsx("p",{className:"text-2xl font-bold",children:e.items.filter(n=>n.recommendation==="Repair").length}),s.jsx("p",{className:"text-sm text-gray-600",children:"items"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-semibold text-orange-600",children:"FOR DISPOSAL"}),s.jsx("p",{className:"text-2xl font-bold",children:e.items.filter(n=>n.recommendation==="Dispose").length}),s.jsx("p",{className:"text-sm text-gray-600",children:"items"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-semibold text-red-600",children:"FOR CONDEMNATION"}),s.jsx("p",{className:"text-2xl font-bold",children:e.items.filter(n=>n.recommendation==="Condemn").length}),s.jsx("p",{className:"text-sm text-gray-600",children:"items"})]})]}),s.jsxs("div",{className:"p-4 border border-gray-400",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"INSPECTOR'S NOTES:"}),s.jsx("div",{className:"space-y-2 text-sm",children:s.jsx("div",{className:"border-b border-gray-200 pb-8",children:s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Additional observations and recommendations:"})})})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6 mt-8 pt-4 border-t-2 border-black",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Inspection Committee Chairman"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Property Custodian"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Supply Officer"})]})]})]})]})]})},_B=({data:e})=>{const[t,r]=h.useState(""),[n,a]=h.useState(!1),{data:i=[],isLoading:o}=vt({queryKey:["custodian-summaries"],queryFn:()=>ss.getAllSummaries(),enabled:!0}),{data:l=[]}=vt({queryKey:["custodian-item-history",t,n],queryFn:()=>ss.getItemHistory(t,{includeReturned:n}),enabled:!!t}),c=i.find(u=>u.custodian.id===t),d=()=>{console.log("Exporting custodian report...")};return o?s.jsx("div",{className:"p-6",children:s.jsx(je,{children:s.jsx(Ne,{className:"p-6",children:s.jsx("div",{className:"text-center",children:"Loading custodian data..."})})})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Ha,{className:"h-8 w-8"}),"Custodian Information Report"]}),s.jsx("p",{className:"text-muted-foreground",children:"Comprehensive report showing all items and records for each custodian"})]}),s.jsxs(ne,{onClick:d,children:[s.jsx(Ug,{className:"h-4 w-4 mr-2"}),"Export Report"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(je,{children:s.jsx(Ne,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ha,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Custodians"}),s.jsx("p",{className:"text-2xl font-bold",children:i.length})]})]})})}),s.jsx(je,{children:s.jsx(Ne,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pr,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Items Assigned"}),s.jsx("p",{className:"text-2xl font-bold",children:i.reduce((u,f)=>u+f.total_items_assigned,0)})]})]})})}),s.jsx(je,{children:s.jsx(Ne,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wa,{className:"h-5 w-5 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Value Assigned"}),s.jsxs("p",{className:"text-2xl font-bold",children:["",i.reduce((u,f)=>u+f.total_value_assigned,0).toLocaleString()]})]})]})})}),s.jsx(je,{children:s.jsx(Ne,{className:"p4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pr,{className:"h-5 w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Currently Assigned"}),s.jsx("p",{className:"text-2xl font-bold",children:i.reduce((u,f)=>u+f.currently_assigned_items,0)})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsxs(Oe,{className:"flex items-center gap-2",children:[s.jsx(Kl,{className:"h-5 w-5"}),"All Custodians"]})}),s.jsx(Ne,{children:s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:i.map(u=>s.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${t===u.custodian.id?"bg-primary text-primary-foreground":"hover:bg-secondary"}`,onClick:()=>r(u.custodian.id),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:u.custodian.name}),s.jsx("p",{className:"text-sm opacity-75",children:u.custodian.custodian_no})]}),s.jsx(Be,{variant:u.custodian.is_active?"default":"secondary",children:u.currently_assigned_items})]}),s.jsxs("div",{className:"mt-2 text-xs opacity-75",children:[s.jsx("p",{children:u.custodian.department_name||"No Department"}),s.jsxs("p",{children:["",u.currently_assigned_value.toLocaleString()]})]})]},u.custodian.id))})})]})}),s.jsx("div",{className:"lg:col-span-2",children:c?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsxs(Oe,{className:"flex items-center justify-between",children:[s.jsx("span",{children:c.custodian.name}),s.jsx(Be,{variant:c.custodian.is_active?"default":"secondary",children:c.custodian.is_active?"Active":"Inactive"})]})}),s.jsx(Ne,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Custodian Number"}),s.jsx("p",{className:"font-mono",children:c.custodian.custodian_no})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Position"}),s.jsx("p",{children:c.custodian.position||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Department"}),s.jsx("p",{children:c.custodian.department_name||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Activity"}),s.jsx("p",{children:c.last_activity_date?On(new Date(c.last_activity_date),"MMM dd, yyyy"):"No activity"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(je,{children:s.jsx(Ne,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pr,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Items"}),s.jsx("p",{className:"text-2xl font-bold",children:c.currently_assigned_items})]})]})})}),s.jsx(je,{children:s.jsx(Ne,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wa,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Value"}),s.jsxs("p",{className:"text-2xl font-bold",children:["",c.currently_assigned_value.toLocaleString()]})]})]})})}),s.jsx(je,{children:s.jsx(Ne,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gr,{className:"h-5 w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Items"}),s.jsx("p",{className:"text-2xl font-bold",children:c.total_items_assigned})]})]})})}),s.jsx(je,{children:s.jsx(Ne,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wa,{className:"h-5 w-5 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Value"}),s.jsxs("p",{className:"text-2xl font-bold",children:["",c.total_value_assigned.toLocaleString()]})]})]})})})]}),s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsxs(Oe,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Item History"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(ct,{value:n?"all":"current",onValueChange:u=>a(u==="all"),children:[s.jsx(at,{className:"w-40",children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"current",children:"Current Only"}),s.jsx(pe,{value:"all",children:"All History"})]})]})})]})}),s.jsx(Ne,{children:l.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No item history found for this custodian."}):s.jsxs(Gt,{children:[s.jsx(sr,{children:s.jsxs(Ve,{children:[s.jsx(he,{children:"Property Number"}),s.jsx(he,{children:"Description"}),s.jsx(he,{children:"Category"}),s.jsx(he,{children:"Condition"}),s.jsx(he,{children:"Value"}),s.jsx(he,{children:"Slip Number"}),s.jsx(he,{children:"Date Issued"}),s.jsx(he,{children:"Status"})]})}),s.jsx(ar,{children:l.map(u=>s.jsxs(Ve,{children:[s.jsx(de,{className:"font-mono",children:u.property_number}),s.jsx(de,{children:u.description}),s.jsx(de,{children:s.jsx(Be,{variant:"outline",children:u.category})}),s.jsx(de,{children:s.jsx(Be,{variant:u.condition==="Serviceable"?"default":"destructive",children:u.condition})}),s.jsxs(de,{children:["",u.total_cost.toLocaleString()]}),s.jsx(de,{className:"font-mono",children:u.custodian_slip_number}),s.jsx(de,{children:u.date_issued?On(new Date(u.date_issued),"MMM dd, yyyy"):"-"}),s.jsx(de,{children:s.jsx(Be,{variant:u.is_currently_assigned?"default":"secondary",children:u.is_currently_assigned?"Currently Assigned":"Returned"})})]},u.id))})]})})]})]}):s.jsx(je,{children:s.jsx(Ne,{className:"p-6",children:s.jsx("div",{className:"text-center text-muted-foreground",children:"Select a custodian from the list to view detailed information"})})})})]})]})},SB={async getAll(e={}){const{page:t=1,limit:r=50,category:n,status:a,condition:i,search:o}=e,{from:l,to:c}=ff(t,r);let d=te.from("inventory_items").select(`
        *,
        suppliers:supplier_id(name),
        locations:location_id(name),
        fund_sources:fund_source_id(name)
      `,{count:"exact"}).range(l,c);n&&(d=d.eq("category",n)),a&&(d=d.eq("status",a)),i&&(d=d.eq("condition",i)),o&&(d=d.or(`property_number.ilike.%${o}%,description.ilike.%${o}%,brand.ilike.%${o}%`));const u=await d.order("created_at",{ascending:!1});if(u.error)return{data:[],pagination:{page:t,limit:r,total:0,totalPages:0},success:!1,error:u.error.message};const f=u.count||0,m=Math.ceil(f/r);return{data:u.data||[],pagination:{page:t,limit:r,total:f,totalPages:m},success:!0}},async getById(e){var r;const t=await te.from("inventory_items").select(`
        *,
        suppliers:supplier_id(name),
        locations:location_id(name),
        fund_sources:fund_source_id(name)
      `).eq("id",e).single();return{data:t.data,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async getByPropertyNumber(e){var r;const t=await te.from("inventory_items").select(`
        *,
        suppliers:supplier_id(name),
        locations:location_id(name),
        fund_sources:fund_source_id(name)
      `).eq("property_number",e).single();return{data:t.data,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async create(e){var r;const t=await te.from("inventory_items").insert({property_number:e.propertyNumber,description:e.description,brand:e.brand,model:e.model,serial_number:e.serialNumber,unit_of_measure:e.unitOfMeasure,quantity:e.quantity,unit_cost:e.unitCost,total_cost:e.totalCost,date_acquired:e.dateAcquired,supplier_id:e.supplier||null,condition:e.condition,location_id:e.location||null,custodian_id:e.custodian||null,custodian_position:e.custodianPosition,accountable_officer:e.accountableOfficer,fund_source_id:e.fundSource||null,remarks:e.remarks,last_inventory_date:e.lastInventoryDate,category:e.category,status:e.status}).select().single();return{data:t.data,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async update(e,t){var a;const r={};t.propertyNumber&&(r.property_number=t.propertyNumber),t.description&&(r.description=t.description),t.brand&&(r.brand=t.brand),t.model&&(r.model=t.model),t.serialNumber&&(r.serial_number=t.serialNumber),t.unitOfMeasure&&(r.unit_of_measure=t.unitOfMeasure),t.quantity!==void 0&&(r.quantity=t.quantity),t.unitCost!==void 0&&(r.unit_cost=t.unitCost),t.totalCost!==void 0&&(r.total_cost=t.totalCost),t.dateAcquired&&(r.date_acquired=t.dateAcquired),t.supplier&&(r.supplier_id=t.supplier),t.condition&&(r.condition=t.condition),t.location&&(r.location_id=t.location),t.custodian&&(r.custodian_id=t.custodian),t.custodianPosition&&(r.custodian_position=t.custodianPosition),t.accountableOfficer&&(r.accountable_officer=t.accountableOfficer),t.fundSource&&(r.fund_source_id=t.fundSource),t.remarks&&(r.remarks=t.remarks),t.lastInventoryDate&&(r.last_inventory_date=t.lastInventoryDate),t.category&&(r.category=t.category),t.status&&(r.status=t.status);const n=await te.from("inventory_items").update(r).eq("id",e).select().single();return{data:n.data,error:((a=n.error)==null?void 0:a.message)||null,success:!n.error}},async delete(e){var r;const t=await te.from("inventory_items").delete().eq("id",e);return{data:t.data,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async getStatistics(){try{const{count:e}=await te.from("inventory_items").select("*",{count:"exact",head:!0}),{data:t}=await te.from("inventory_items").select("total_cost"),r=(t==null?void 0:t.reduce((d,u)=>d+(u.total_cost||0),0))||0,{data:n}=await te.from("inventory_items").select("category").not("category","is",null),a=(n==null?void 0:n.reduce((d,u)=>(d[u.category]=(d[u.category]||0)+1,d),{}))||{},{data:i}=await te.from("inventory_items").select("status").not("status","is",null),o=(i==null?void 0:i.reduce((d,u)=>(d[u.status]=(d[u.status]||0)+1,d),{}))||{},{data:l}=await te.from("inventory_items").select("condition").not("condition","is",null),c=(l==null?void 0:l.reduce((d,u)=>(d[u.condition]=(d[u.condition]||0)+1,d),{}))||{};return{data:{totalItems:e||0,totalValue:r,byCategory:a,byStatus:o,byCondition:c},error:null,success:!0}}catch(e){return{data:null,error:e instanceof Error?e.message:"Unknown error",success:!1}}},async search(e,t={}){return this.getAll({...t,search:e})}},CB={async getAll(e={}){const{page:t=1,limit:r=50,isActive:n,search:a}=e,{from:i,to:o}=ff(t,r);let l=te.from("departments").select("*",{count:"exact"}).range(i,o);n!==void 0&&(l=l.eq("is_active",n)),a&&(l=l.or(`name.ilike.%${a}%,code.ilike.%${a}%,description.ilike.%${a}%`));const c=await l.order("name",{ascending:!0});if(c.error)return{data:[],pagination:{page:t,limit:r,total:0,totalPages:0},success:!1,error:c.error.message};const d=c.count||0,u=Math.ceil(d/r);return{data:c.data||[],pagination:{page:t,limit:r,total:d,totalPages:u},success:!0}},async getById(e){var r;const t=await te.from("departments").select("*").eq("id",e).single();return{data:t.data,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async create(e){var r;const t=await te.from("departments").insert(e).select().single();return{data:t.data,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async update(e,t){var n;const r=await te.from("departments").update(t).eq("id",e).select().single();return{data:r.data,error:((n=r.error)==null?void 0:n.message)||null,success:!r.error}},async delete(e){var r;const t=await te.from("departments").delete().eq("id",e);return{data:t.data,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}}},Wh={inventory:SB,departments:CB,propertyCards:Et},wd=({reportType:e,reportName:t,trigger:r})=>{const[n,a]=h.useState("live"),[i,o]=h.useState(null),[l,c]=h.useState(!1),[d,u]=h.useState(null),f=async()=>{c(!0),u(null);try{switch(e){case"Inventory Summary":case"Property Card":const p=await Wh.propertyCards.getAll({limit:1});if(p.success&&p.data.length>0){const g=p.data[0],w=await Wh.propertyCards.getEntries(g.id);o({...g,entries:w.data||[]})}break;case"Property Ledger":const x=await Wh.inventory.getAll({limit:1});if(x.success&&x.data.length>0){const g=x.data[0];o({propertyNumber:g.propertyNumber,description:g.description,unit:g.unitOfMeasure,entries:[{date:g.dateAcquired,referenceNumber:"INITIAL",received:g.quantity,issued:0,balance:g.quantity,recipient:"Stock Inventory"}]})}break;case"Custodian Report":u("Custodian reports not available");break;case"Transfer Report":u("Transfer reports not available");break;case"Physical Count Summary":u("Physical count reports not available");break;case"Loss Report Summary":u("Loss reports not available");break;case"Unserviceable Report":u("Unserviceable reports not available");break;case"Custodian Report":o({});break;default:u("Report type not implemented yet")}}catch(p){u(p instanceof Error?p.message:"Failed to fetch report data")}finally{c(!1)}};h.useEffect(()=>{n==="live"&&f()},[n,e]);const m=()=>{if(l)return s.jsxs("div",{className:"flex items-center justify-center p-8",children:[s.jsx(Nt,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading report data..."})]});if(d)return s.jsxs("div",{className:"p-8 text-center",children:[s.jsxs("p",{className:"text-red-600 mb-4",children:["Error: ",d]}),s.jsx(ne,{onClick:f,children:"Retry"})]});if(!i)return s.jsx("div",{className:"p-8 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"No data available for this report."})});switch(e){case"Inventory Summary":case"Property Card":return s.jsx(dE,{data:i});case"Property Ledger":return s.jsx(xB,{data:i});case"Custodian Report":return s.jsx(_B,{data:i});case"Transfer Report":return s.jsx(bB,{data:i});case"Physical Count Summary":return s.jsx(wB,{data:i});case"Loss Report Summary":return s.jsx(jB,{data:i});case"Unserviceable Report":return s.jsx(NB,{data:i});default:return s.jsx("div",{className:"p-8 text-center",children:"Report type not implemented yet."})}};return s.jsxs(Tr,{children:[s.jsx(y3,{asChild:!0,children:r||s.jsx(ne,{variant:"outline",children:t})}),s.jsxs(vr,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Ar,{children:s.jsx(Or,{children:t})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("label",{className:"text-sm font-medium",children:"Data Source:"}),s.jsxs(ct,{value:n,onValueChange:a,children:[s.jsx(at,{className:"w-48",children:s.jsx(dt,{})}),s.jsx(it,{children:s.jsx(pe,{value:"live",children:"Live Data"})})]}),n==="live"&&s.jsx(ne,{onClick:f,variant:"outline",size:"sm",children:"Refresh"})]}),m()]})]})]})},EB=[{id:"1",name:"Inventory Summary Report",type:"Inventory Summary",description:"Complete overview of all semi-expandable property items with their current status, location, and condition",frequency:"Monthly",status:"Available"},{id:"2",name:"Issued vs Unissued Items Report",type:"Inventory Summary",description:"Detailed breakdown of issued and unissued items with assignment status and custodian information",frequency:"Weekly",status:"Available"},{id:"3",name:"Semi-Expendable Property Ledger",type:"Property Ledger",description:"Detailed ledger showing all property movements, acquisitions, transfers, and disposals",frequency:"Quarterly",status:"Available"},{id:"4",name:"Property Transfer Summary",type:"Transfer Report",description:"Summary of all property transfers between departments including pending and completed transfers",frequency:"Monthly",status:"Available"},{id:"5",name:"Custodian Information Report",type:"Custodian Report",description:"Comprehensive report showing all items and records for each custodian, including current assignments and historical data",frequency:"Weekly",status:"Available"},{id:"6",name:"Physical Count Variance Report",type:"Physical Count Summary",description:"Analysis of physical count results showing variances between expected and actual quantities",frequency:"Annual",status:"Generating"},{id:"5",name:"Loss and Damage Summary",type:"Loss Report Summary",description:"Comprehensive report of lost, stolen, damaged, or destroyed property with financial impact",frequency:"Quarterly",status:"Available"},{id:"6",name:"Unserviceable Property Report",type:"Unserviceable Report",description:"Report on property items that are unserviceable and recommendations for disposal or repair",frequency:"Monthly",status:"Available"},{id:"7",name:"Custodian Accountability Report",type:"Custodian Report",description:"Report showing property assigned to each custodian and their current accountability status",frequency:"Quarterly",status:"Scheduled"}],kB=()=>{const[e]=h.useState(EB),[t,r]=h.useState("All"),[n,a]=h.useState("All"),[i,o]=h.useState({from:"",to:""}),[l,c]=h.useState("All"),{toast:d}=Fr(),u=x=>{d({title:"Download Started",description:`Downloading ${x.name}...`})},f=x=>{switch(x){case"Available":return"success";case"Generating":return"warning";case"Scheduled":return"secondary";default:return"secondary"}},m=x=>{switch(x){case"Inventory Summary":return s.jsx(Pr,{className:"h-5 w-5"});case"Property Ledger":return s.jsx(Gr,{className:"h-5 w-5"});case"Transfer Report":return s.jsx(zm,{className:"h-5 w-5"});case"Physical Count Summary":return s.jsx(Ld,{className:"h-5 w-5"});case"Loss Report Summary":return s.jsx(Hl,{className:"h-5 w-5"});case"Unserviceable Report":return s.jsx(Hl,{className:"h-5 w-5"});case"Custodian Report":return s.jsx(Gr,{className:"h-5 w-5"});default:return s.jsx(Gr,{className:"h-5 w-5"})}},p=e.filter(x=>{const g=t==="All"||x.type===t,w=n==="All"||x.status===n;return g&&w});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Reports & Analytics"}),s.jsxs(ne,{className:"flex items-center gap-2",children:[s.jsx(Md,{className:"h-4 w-4"}),"Schedule Report"]})]}),s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{children:"Report Filters"})}),s.jsx(Ne,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx(ae,{children:"Report Type"}),s.jsxs(ct,{value:t,onValueChange:r,children:[s.jsx(at,{children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"All",children:"All Types"}),s.jsx(pe,{value:"Inventory Summary",children:"Inventory Summary"}),s.jsx(pe,{value:"Property Ledger",children:"Property Ledger"}),s.jsx(pe,{value:"Transfer Report",children:"Transfer Report"}),s.jsx(pe,{value:"Physical Count Summary",children:"Physical Count"}),s.jsx(pe,{value:"Loss Report Summary",children:"Loss Report"}),s.jsx(pe,{value:"Unserviceable Report",children:"Unserviceable"}),s.jsx(pe,{value:"Custodian Report",children:"Custodian Report"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Status"}),s.jsxs(ct,{value:n,onValueChange:a,children:[s.jsx(at,{children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"All",children:"All Status"}),s.jsx(pe,{value:"Available",children:"Available"}),s.jsx(pe,{value:"Generating",children:"Generating"}),s.jsx(pe,{value:"Scheduled",children:"Scheduled"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Department"}),s.jsxs(ct,{value:l,onValueChange:c,children:[s.jsx(at,{children:s.jsx(dt,{})}),s.jsxs(it,{children:[s.jsx(pe,{value:"All",children:"All Departments"}),s.jsx(pe,{value:"IT",children:"IT Department"}),s.jsx(pe,{value:"HR",children:"Human Resources"}),s.jsx(pe,{value:"Finance",children:"Finance"}),s.jsx(pe,{value:"Operations",children:"Operations"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Date Range"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(we,{type:"date",value:i.from,onChange:x=>o({...i,from:x.target.value}),className:"flex-1"}),s.jsx(we,{type:"date",value:i.to,onChange:x=>o({...i,to:x.target.value}),className:"flex-1"})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(je,{children:s.jsx(Ne,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Available Reports"}),s.jsx("p",{className:"text-2xl font-bold",children:e.filter(x=>x.status==="Available").length})]}),s.jsx(Gr,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(je,{children:s.jsx(Ne,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Generating"}),s.jsx("p",{className:"text-2xl font-bold",children:e.filter(x=>x.status==="Generating").length})]}),s.jsx(Ld,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(je,{children:s.jsx(Ne,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled"}),s.jsx("p",{className:"text-2xl font-bold",children:e.filter(x=>x.status==="Scheduled").length})]}),s.jsx(Md,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(je,{children:s.jsx(Ne,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Reports"}),s.jsx("p",{className:"text-2xl font-bold",children:e.length})]}),s.jsx(zm,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:p.map(x=>s.jsxs(je,{className:"hover:shadow-lg transition-shadow",children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[m(x.type),s.jsxs("div",{children:[s.jsx(Oe,{className:"text-lg",children:x.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:x.type})]})]}),s.jsx(Be,{variant:f(x.status),children:x.status})]})}),s.jsxs(Ne,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:x.description}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Frequency:"}),s.jsx("span",{className:"font-medium",children:x.frequency})]}),x.lastGenerated&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Last Generated:"}),s.jsx("span",{className:"font-medium",children:x.lastGenerated})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(wd,{reportType:x.type,reportName:x.name,trigger:s.jsx(ne,{className:"flex-1",disabled:x.status==="Generating",children:x.status==="Generating"?"Generating...":"Generate"})}),s.jsx(ne,{onClick:()=>u(x),variant:"outline",size:"icon",disabled:x.status!=="Available",children:s.jsx(Ug,{className:"h-4 w-4"})})]})]})]},x.id))}),s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsx(Oe,{children:"Report Templates"})}),s.jsx(Ne,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(wd,{reportType:"Property Card",reportName:"Custom Property Card",trigger:s.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted cursor-pointer transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(Pr,{className:"h-5 w-5 text-primary"}),s.jsx("h3",{className:"font-medium",children:"Custom Property Card"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate a semi-expandable property card with specific property details"})]})}),s.jsx(wd,{reportType:"Property Ledger",reportName:"Property Ledger Card",trigger:s.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted cursor-pointer transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(Ld,{className:"h-5 w-5 text-primary"}),s.jsx("h3",{className:"font-medium",children:"Property Ledger Card"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate detailed property ledger showing all movements and transactions"})]})}),s.jsx(wd,{reportType:"Custodian Report",reportName:"Inventory Custodian Slip",trigger:s.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted cursor-pointer transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(Md,{className:"h-5 w-5 text-primary"}),s.jsx("h3",{className:"font-medium",children:"Custodian Slip"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate inventory custodian slip for property accountability"})]})})]})})]})]})};function AE(){const[e,t]=h.useState([]),[r,n]=h.useState(!0),[a,i]=h.useState(""),[o,l]=h.useState(""),[c,d]=h.useState(null),u=async()=>{const p=[];try{p.push({step:"env:VITE_SUPABASE_URL",ok:!0,info:"https://drlfakeottpbmxiudftz.supabase.co"}),p.push({step:"env:VITE_SUPABASE_ANON_KEY",ok:!0,info:"<present>"});const{data:x,error:g}=await te.from("property_cards").select("id").limit(1);g?p.push({step:"db:select property_cards",ok:!1,error:g.message}):p.push({step:"db:select property_cards",ok:!0,info:`${(x==null?void 0:x.length)||0} rows accessible`});const w=(await te.auth.getSession()).data.session;p.push({step:"auth:session",ok:!!w,info:w?`user ${w.user.id}`:"no session"});const v={entity_name:"Debug Entity",fund_cluster:"101",semi_expendable_property:"Debug Item",property_number:`DBG-${Date.now()}`,description:"Debug connectivity",date_acquired:new Date().toISOString().slice(0,10),remarks:"debug"},y=await te.from("property_cards").insert(v).select("id").single();y.error?p.push({step:"db:insert property_cards",ok:!1,error:y.error.message}):(p.push({step:"db:insert property_cards",ok:!0,info:`id ${y.data.id}`}),await te.from("property_cards").delete().eq("id",y.data.id))}catch(x){p.push({step:"unexpected",ok:!1,error:(x==null?void 0:x.message)||String(x)})}finally{t(p),n(!1)}};h.useEffect(()=>{u()},[]);const f=async()=>{d(null),n(!0);const{error:p}=await te.auth.signInWithPassword({email:a,password:o});d(p?p.message:"Signed in"),await u()},m=async()=>{d(null),n(!0),await te.auth.signOut(),d("Signed out"),await u()};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Supabase Debug"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Visit this page to verify environment, connectivity, auth session, and RLS inserts."}),s.jsxs("div",{className:"rounded border p-4 space-y-3",children:[s.jsx("div",{className:"font-medium",children:"Auth test"}),s.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[s.jsx("input",{className:"border rounded px-2 py-1",placeholder:"email",value:a,onChange:p=>i(p.target.value)}),s.jsx("input",{className:"border rounded px-2 py-1",placeholder:"password",type:"password",value:o,onChange:p=>l(p.target.value)}),s.jsx("button",{className:"border rounded px-3 py-1",onClick:f,children:"Sign in"}),s.jsx("button",{className:"border rounded px-3 py-1",onClick:m,children:"Sign out"})]}),c&&s.jsx("div",{className:"text-xs text-muted-foreground",children:c})]}),r?s.jsx("div",{children:"Running checks"}):s.jsx("div",{className:"space-y-2",children:e.map((p,x)=>s.jsxs("div",{className:`rounded border p-3 ${p.ok?"border-green-500/40 bg-green-500/5":"border-red-500/40 bg-red-500/5"}`,children:[s.jsx("div",{className:"font-medium",children:p.step}),p.info&&s.jsx("div",{className:"text-xs mt-1",children:p.info}),p.error&&s.jsx("div",{className:"text-xs mt-1 text-red-600",children:p.error})]},x))})]})}function PB(){const e=zn(),t=xs(),{toast:r}=Fr(),[n,a]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState([]),[f,m]=h.useState([]),[p,x]=h.useState([]),[g,w]=h.useState(""),v=e.hash?e.hash.substring(1):"suppliers",y=E=>{t(`${e.pathname}#${E}`,{replace:!0})},b=async()=>{a(!0);try{const[E,M,H,q,P]=await Promise.all([hr.getSuppliers(),hr.getFundSources(),hr.getDepartments(),hr.getCustodians(),hr.getSemiExpandableCategories()]);o(E),c(M),u(H),m(q),x(P)}catch(E){r({title:"Failed to load lookups",description:(E==null?void 0:E.message)||String(E),variant:"destructive"})}finally{a(!1)}};h.useEffect(()=>{b()},[]);const N=E=>E.filter(M=>(M.name||"").toLowerCase().includes(g.toLowerCase())||(M.code||"").toLowerCase().includes(g.toLowerCase())),j=(E,M,H)=>{const[q,P]=h.useState("idle"),[K,ee]=h.useState(null),[D,S]=h.useState({name:""}),A=E==="fund_sources"||E==="departments"||E==="custodians"||E==="semi_expandable_categories",O=E==="fund_sources",F=()=>{P("create"),ee(null),S(A?{name:"",code:""}:{name:""})},L=I=>{P("edit"),ee(I),S(A?{name:I.name,code:I.code}:{name:I.name})},J=()=>{P("idle"),ee(null),S({name:"",code:""})};return{mode:q,editing:K,form:D,setForm:S,startCreate:F,startEdit:L,save:async()=>{if(q==="edit"&&K){const I=await hr.update(E,K.id,D);H(M.map(V=>V.id===K.id?I:V))}else if(q==="create"){const I=await hr.create(E,D);H([I,...M])}J()},remove:async I=>{await hr.remove(E,I),H(M.filter(V=>V.id!==I))},cancel:J,hasCode:A,codeRequired:O}},C=({title:E,items:M,table:H,setItems:q})=>{var Q;const{mode:P,editing:K,form:ee,setForm:D,startCreate:S,startEdit:A,save:O,remove:F,cancel:L,hasCode:J,codeRequired:ce}=j(H,M,q),B=h.useMemo(()=>{if(H!=="custodians")return[];const R=((K?M.filter(X=>X.id!==K.id):M)||[]).map(X=>(X.code||"").trim()).filter(Boolean).map(X=>({c:X,n:X.match(/\d+/)?parseInt(X.match(/\d+/)[0],10):NaN}));return R.sort((X,ie)=>(isFinite(ie.n)?ie.n:-1)-(isFinite(X.n)?X.n:-1)),R.map(X=>X.c)},[H,M,K]),I=h.useMemo(()=>{if(H!=="custodians")return"";const se=B.map(R=>R.match(/\d+/)?parseInt(R.match(/\d+/)[0],10):NaN).filter(R=>Number.isFinite(R)),Z=se.length?Math.max(...se)+1:1;return`CUST-${String(Z).padStart(4,"0")}`},[H,B]),V=h.useMemo(()=>{if(H!=="custodians")return!1;const se=(ee.code||"").trim();if(!se)return!1;const R=`CUST-${(se.match(/\d+/)?se.match(/\d+/)[0]:se).padStart(4,"0")}`;return B.includes(se)||B.includes(R)},[H,ee.code,B]);return s.jsxs(je,{children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Oe,{children:E}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(we,{placeholder:"Search",value:g,onChange:se=>w(se.target.value)}),s.jsx(ne,{variant:"outline",onClick:b,disabled:n,children:"Refresh"}),s.jsx(ne,{onClick:S,children:"Add"})]})]})}),s.jsxs(Ne,{children:[P!=="idle"&&s.jsxs("div",{className:"mb-4 p-3 border rounded grid grid-cols-1 md:grid-cols-3 gap-2",children:[s.jsx(we,{placeholder:"Name",value:ee.name,onChange:se=>D({...ee,name:se.target.value})}),J&&s.jsx(we,{placeholder:H==="custodians"?"Custodian No (auto if blank)":ce?"Code (required)":"Code (optional)",value:ee.code||"",onChange:se=>D({...ee,code:se.target.value}),required:ce}),H==="custodians"&&P==="create"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ne,{variant:"outline",type:"button",onClick:()=>D({...ee,code:I}),children:"Use suggested"}),V&&s.jsx("span",{className:"text-xs text-red-600",children:"This number already exists"})]}),H==="custodians"&&s.jsx("div",{className:"text-xs text-muted-foreground col-span-1 md:col-span-3",children:s.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-1",children:[s.jsx("span",{children:"Existing Nos:"}),s.jsxs("span",{className:"max-w-full truncate",children:[B.slice(0,12).join(", ")||"None yet",B.length>12?"":""]}),s.jsx("span",{className:"ml-2",children:"Suggested next:"}),s.jsx("span",{className:"font-medium",children:I})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{onClick:O,disabled:!ee.name.trim()||ce&&!((Q=ee.code)!=null&&Q.trim())||H==="custodians"&&V,children:"Save"}),s.jsx(ne,{variant:"outline",onClick:L,children:"Cancel"})]})]}),s.jsxs("div",{className:"rounded border",children:[s.jsxs(Gt,{children:[s.jsx(sr,{children:s.jsxs(Ve,{children:[s.jsx(he,{className:"w-64",children:"Name"}),J&&s.jsx(he,{children:"Code"}),s.jsx(he,{className:"w-40 text-right",children:"Actions"})]})}),s.jsx(ar,{children:N(M).map(se=>s.jsxs(Ve,{children:[s.jsx(de,{children:se.name}),J&&s.jsx(de,{children:se.code||""}),s.jsx(de,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ne,{variant:"outline",size:"sm",onClick:()=>A(se),children:"Edit"}),s.jsx(ne,{variant:"destructive",size:"sm",onClick:()=>F(se.id),children:"Delete"})]})})]},se.id))})]}),N(M).length===0&&s.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No records"})]})]})]})};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Settings  Lookups"}),s.jsxs(kf,{value:v,onValueChange:y,children:[s.jsxs(kc,{children:[s.jsx(Hr,{value:"suppliers",children:"Suppliers"}),s.jsx(Hr,{value:"fundSources",children:"Fund Sources"}),s.jsx(Hr,{value:"departments",children:"Departments"}),s.jsx(Hr,{value:"custodians",children:"Custodians"}),s.jsx(Hr,{value:"semiExpandableCategories",children:"Semi Expandable Categories"})]}),s.jsx(Kr,{value:"suppliers",children:s.jsx(C,{title:"Suppliers",items:i,table:"suppliers",setItems:o})}),s.jsx(Kr,{value:"fundSources",children:s.jsx(C,{title:"Fund Sources",items:l,table:"fund_sources",setItems:c})}),s.jsx(Kr,{value:"departments",children:s.jsx(C,{title:"Departments",items:d,table:"departments",setItems:u})}),s.jsxs(Kr,{value:"custodians",children:[s.jsx(C,{title:"Custodians",items:f,table:"custodians",setItems:m}),f.length===0&&s.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Note:"})," If you don't see any custodians, make sure to run the SQL setup script in Supabase first. Check the ",s.jsx("code",{children:"database/custodians-setup.sql"})," file for the complete setup."]})})]}),s.jsx(Kr,{value:"semiExpandableCategories",children:s.jsx(C,{title:"Semi Expandable Categories",items:p,table:"semi_expandable_categories",setItems:x})})]})]})}function TB(){return s.jsx("div",{className:"py-6",children:s.jsx(AE,{})})}const RB=()=>{const e=zn();return h.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},OE=new pO({defaultOptions:{queries:{staleTime:WN,gcTime:DO,retry:1,refetchOnReconnect:!0,refetchOnWindowFocus:!0},mutations:{retry:1}}});RO({queryClient:OE,persister:OO,maxAge:MO,buster:"v1",hydrateOptions:{defaultOptions:{queries:{staleTime:WN}}},dehydrateOptions:{shouldDehydrateMutation:()=>!1,onDeleteOldestQuery:IO}});const IB=()=>s.jsx(bF,{defaultTheme:"system",storageKey:"semi-property-theme",children:s.jsx(gO,{client:OE,children:s.jsxs(OA,{children:[s.jsx(yR,{}),s.jsx(YR,{}),s.jsx(YL,{children:s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(jF,{}),s.jsx($A,{}),s.jsxs("div",{className:"flex",children:[s.jsx(_F,{}),s.jsx("main",{className:"flex-1 p-6",children:s.jsxs(qL,{children:[s.jsx(Ht,{path:"/",element:s.jsx(kF,{})}),s.jsx(Ht,{path:"/inventory",element:s.jsx(UU,{})}),s.jsx(Ht,{path:"/property-cards",element:s.jsx(YU,{})}),s.jsx(Ht,{path:"/property-cards-old",element:s.jsx(BU,{})}),s.jsx(Ht,{path:"/custodian-slips",element:s.jsx(JU,{})}),s.jsx(Ht,{path:"/custodian-slips-old",element:s.jsx(XU,{})}),s.jsx(Ht,{path:"/custodians",element:s.jsx(ZU,{})}),s.jsx(Ht,{path:"/transfers",element:s.jsx(gB,{})}),s.jsx(Ht,{path:"/physical-count",element:s.jsx(vB,{})}),s.jsx(Ht,{path:"/loss-reports",element:s.jsx(yB,{})}),s.jsx(Ht,{path:"/reports",element:s.jsx(kB,{})}),s.jsx(Ht,{path:"/login",element:s.jsx(TB,{})}),s.jsx(Ht,{path:"/debug",element:s.jsx(AE,{})}),s.jsx(Ht,{path:"/settings/lookups",element:s.jsx(PB,{})}),s.jsx(Ht,{path:"*",element:s.jsx(RB,{})})]})})]})]})})]})})});window.addEventListener("online",()=>{LO({"propertyCards.create":async({card:e})=>{await Et.create(e)},"propertyCards.update":async({id:e,updates:t})=>{await Et.update(e,t)},"propertyCards.delete":async({id:e})=>{await Et.delete(e)},"propertyCards.addEntry":async({propertyCardId:e,entry:t})=>{await Et.addEntry(e,t)},"propertyCards.updateEntry":async({propertyCardId:e,entryId:t,updates:r})=>{await Et.updateEntry(e,t,r)},"propertyCards.deleteEntry":async({propertyCardId:e,entryId:t})=>{await Et.deleteEntry(e,t)},"inventory.create":async({item:e})=>{await rr.create(e)},"inventory.update":async({id:e,updates:t})=>{await rr.update(e,t)},"inventory.delete":async({id:e})=>{await rr.delete(e)}}).then(({processed:e,failed:t})=>{(e||t)&&console.log(`[offline-queue] processed=${e} failed=${t}`)})});uj(document.getElementById("root")).render(s.jsx(IB,{}));
