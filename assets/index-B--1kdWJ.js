var Lv=e=>{throw TypeError(e)};var vh=(e,t,r)=>t.has(e)||Lv("Cannot "+r);var q=(e,t,r)=>(vh(e,t,"read from private field"),r?r.call(e):t.get(e)),qe=(e,t,r)=>t.has(e)?Lv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Pe=(e,t,r,n)=>(vh(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),tt=(e,t,r)=>(vh(e,t,"access private method"),r);var hd=(e,t,r,n)=>({set _(a){Pe(e,t,a,r)},get _(){return q(e,t,n)}});function sP(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function aP(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Z0={exports:{}},uf={},ew={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uc=Symbol.for("react.element"),iP=Symbol.for("react.portal"),oP=Symbol.for("react.fragment"),lP=Symbol.for("react.strict_mode"),cP=Symbol.for("react.profiler"),dP=Symbol.for("react.provider"),uP=Symbol.for("react.context"),fP=Symbol.for("react.forward_ref"),hP=Symbol.for("react.suspense"),mP=Symbol.for("react.memo"),pP=Symbol.for("react.lazy"),Fv=Symbol.iterator;function gP(e){return e===null||typeof e!="object"?null:(e=Fv&&e[Fv]||e["@@iterator"],typeof e=="function"?e:null)}var tw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rw=Object.assign,nw={};function ol(e,t,r){this.props=e,this.context=t,this.refs=nw,this.updater=r||tw}ol.prototype.isReactComponent={};ol.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ol.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function sw(){}sw.prototype=ol.prototype;function wg(e,t,r){this.props=e,this.context=t,this.refs=nw,this.updater=r||tw}var jg=wg.prototype=new sw;jg.constructor=wg;rw(jg,ol.prototype);jg.isPureReactComponent=!0;var $v=Array.isArray,aw=Object.prototype.hasOwnProperty,_g={current:null},iw={key:!0,ref:!0,__self:!0,__source:!0};function ow(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)aw.call(t,n)&&!iw.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Uc,type:e,key:i,ref:o,props:a,_owner:_g.current}}function yP(e,t){return{$$typeof:Uc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ng(e){return typeof e=="object"&&e!==null&&e.$$typeof===Uc}function vP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var qv=/\/+/g;function xh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vP(""+e.key):t.toString(36)}function Gd(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Uc:case iP:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+xh(o,0):n,$v(a)?(r="",e!=null&&(r=e.replace(qv,"$&/")+"/"),Gd(a,t,r,"",function(d){return d})):a!=null&&(Ng(a)&&(a=yP(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(qv,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",$v(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+xh(i,l);o+=Gd(i,t,r,c,a)}else if(c=gP(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+xh(i,l++),o+=Gd(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function md(e,t,r){if(e==null)return e;var n=[],a=0;return Gd(e,n,"","",function(i){return t.call(r,i,a++)}),n}function xP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qr={current:null},Yd={transition:null},bP={ReactCurrentDispatcher:qr,ReactCurrentBatchConfig:Yd,ReactCurrentOwner:_g};function lw(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:md,forEach:function(e,t,r){md(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return md(e,function(){t++}),t},toArray:function(e){return md(e,function(t){return t})||[]},only:function(e){if(!Ng(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ot.Component=ol;ot.Fragment=oP;ot.Profiler=cP;ot.PureComponent=wg;ot.StrictMode=lP;ot.Suspense=hP;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bP;ot.act=lw;ot.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=rw({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=_g.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)aw.call(t,c)&&!iw.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Uc,type:e.type,key:a,ref:i,props:n,_owner:o}};ot.createContext=function(e){return e={$$typeof:uP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dP,_context:e},e.Consumer=e};ot.createElement=ow;ot.createFactory=function(e){var t=ow.bind(null,e);return t.type=e,t};ot.createRef=function(){return{current:null}};ot.forwardRef=function(e){return{$$typeof:fP,render:e}};ot.isValidElement=Ng;ot.lazy=function(e){return{$$typeof:pP,_payload:{_status:-1,_result:e},_init:xP}};ot.memo=function(e,t){return{$$typeof:mP,type:e,compare:t===void 0?null:t}};ot.startTransition=function(e){var t=Yd.transition;Yd.transition={};try{e()}finally{Yd.transition=t}};ot.unstable_act=lw;ot.useCallback=function(e,t){return qr.current.useCallback(e,t)};ot.useContext=function(e){return qr.current.useContext(e)};ot.useDebugValue=function(){};ot.useDeferredValue=function(e){return qr.current.useDeferredValue(e)};ot.useEffect=function(e,t){return qr.current.useEffect(e,t)};ot.useId=function(){return qr.current.useId()};ot.useImperativeHandle=function(e,t,r){return qr.current.useImperativeHandle(e,t,r)};ot.useInsertionEffect=function(e,t){return qr.current.useInsertionEffect(e,t)};ot.useLayoutEffect=function(e,t){return qr.current.useLayoutEffect(e,t)};ot.useMemo=function(e,t){return qr.current.useMemo(e,t)};ot.useReducer=function(e,t,r){return qr.current.useReducer(e,t,r)};ot.useRef=function(e){return qr.current.useRef(e)};ot.useState=function(e){return qr.current.useState(e)};ot.useSyncExternalStore=function(e,t,r){return qr.current.useSyncExternalStore(e,t,r)};ot.useTransition=function(){return qr.current.useTransition()};ot.version="18.3.1";ew.exports=ot;var h=ew.exports;const pe=bg(h),Sg=sP({__proto__:null,default:pe},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wP=h,jP=Symbol.for("react.element"),_P=Symbol.for("react.fragment"),NP=Object.prototype.hasOwnProperty,SP=wP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CP={key:!0,ref:!0,__self:!0,__source:!0};function cw(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)NP.call(t,n)&&!CP.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:jP,type:e,key:i,ref:o,props:a,_owner:SP.current}}uf.Fragment=_P;uf.jsx=cw;uf.jsxs=cw;Z0.exports=uf;var s=Z0.exports,dw={exports:{}},vn={},uw={exports:{}},fw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,z){var ae=K.length;K.push(z);e:for(;0<ae;){var ge=ae-1>>>1,W=K[ge];if(0<a(W,z))K[ge]=z,K[ae]=W,ae=ge;else break e}}function r(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var z=K[0],ae=K.pop();if(ae!==z){K[0]=ae;e:for(var ge=0,W=K.length,M=W>>>1;ge<M;){var Y=2*(ge+1)-1,X=K[Y],ie=Y+1,ne=K[ie];if(0>a(X,ae))ie<W&&0>a(ne,X)?(K[ge]=ne,K[ie]=ae,ge=ie):(K[ge]=X,K[Y]=ae,ge=Y);else if(ie<W&&0>a(ne,ae))K[ge]=ne,K[ie]=ae,ge=ie;else break e}}return z}function a(K,z){var ae=K.sortIndex-z.sortIndex;return ae!==0?ae:K.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,m=3,p=!1,x=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(K){for(var z=r(d);z!==null;){if(z.callback===null)n(d);else if(z.startTime<=K)n(d),z.sortIndex=z.expirationTime,t(c,z);else break;z=r(d)}}function j(K){if(g=!1,b(K),!x)if(r(c)!==null)x=!0,T(_);else{var z=r(d);z!==null&&re(j,z.startTime-K)}}function _(K,z){x=!1,g&&(g=!1,v(D),D=-1),p=!0;var ae=m;try{for(b(z),f=r(c);f!==null&&(!(f.expirationTime>z)||K&&!L());){var ge=f.callback;if(typeof ge=="function"){f.callback=null,m=f.priorityLevel;var W=ge(f.expirationTime<=z);z=e.unstable_now(),typeof W=="function"?f.callback=W:f===r(c)&&n(c),b(z)}else n(c);f=r(c)}if(f!==null)var M=!0;else{var Y=r(d);Y!==null&&re(j,Y.startTime-z),M=!1}return M}finally{f=null,m=ae,p=!1}}var S=!1,E=null,D=-1,U=5,F=-1;function L(){return!(e.unstable_now()-F<U)}function $(){if(E!==null){var K=e.unstable_now();F=K;var z=!0;try{z=E(!0,K)}finally{z?R():(S=!1,E=null)}}else S=!1}var R;if(typeof y=="function")R=function(){y($)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,C=I.port2;I.port1.onmessage=$,R=function(){C.postMessage(null)}}else R=function(){w($,0)};function T(K){E=K,S||(S=!0,R())}function re(K,z){D=w(function(){K(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){x||p||(x=!0,T(_))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(K){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var ae=m;m=z;try{return K()}finally{m=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,z){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ae=m;m=K;try{return z()}finally{m=ae}},e.unstable_scheduleCallback=function(K,z,ae){var ge=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ge+ae:ge):ae=ge,K){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ae+W,K={id:u++,callback:z,priorityLevel:K,startTime:ae,expirationTime:W,sortIndex:-1},ae>ge?(K.sortIndex=ae,t(d,K),r(c)===null&&K===r(d)&&(g?(v(D),D=-1):g=!0,re(j,ae-ge))):(K.sortIndex=W,t(c,K),x||p||(x=!0,T(_))),K},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(K){var z=m;return function(){var ae=m;m=z;try{return K.apply(this,arguments)}finally{m=ae}}}})(fw);uw.exports=fw;var EP=uw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kP=h,yn=EP;function ve(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hw=new Set,lc={};function Bi(e,t){Ko(e,t),Ko(e+"Capture",t)}function Ko(e,t){for(lc[e]=t,e=0;e<t.length;e++)hw.add(t[e])}var Us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sm=Object.prototype.hasOwnProperty,PP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uv={},Bv={};function TP(e){return Sm.call(Bv,e)?!0:Sm.call(Uv,e)?!1:PP.test(e)?Bv[e]=!0:(Uv[e]=!0,!1)}function AP(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function IP(e,t,r,n){if(t===null||typeof t>"u"||AP(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ur(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){br[e]=new Ur(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];br[t]=new Ur(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){br[e]=new Ur(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){br[e]=new Ur(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){br[e]=new Ur(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){br[e]=new Ur(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){br[e]=new Ur(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){br[e]=new Ur(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){br[e]=new Ur(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cg=/[\-:]([a-z])/g;function Eg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cg,Eg);br[t]=new Ur(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cg,Eg);br[t]=new Ur(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cg,Eg);br[t]=new Ur(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){br[e]=new Ur(e,1,!1,e.toLowerCase(),null,!1,!1)});br.xlinkHref=new Ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){br[e]=new Ur(e,1,!1,e.toLowerCase(),null,!0,!0)});function kg(e,t,r,n){var a=br.hasOwnProperty(t)?br[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(IP(t,r,a,n)&&(r=null),n||a===null?TP(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ys=kP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pd=Symbol.for("react.element"),fo=Symbol.for("react.portal"),ho=Symbol.for("react.fragment"),Pg=Symbol.for("react.strict_mode"),Cm=Symbol.for("react.profiler"),mw=Symbol.for("react.provider"),pw=Symbol.for("react.context"),Tg=Symbol.for("react.forward_ref"),Em=Symbol.for("react.suspense"),km=Symbol.for("react.suspense_list"),Ag=Symbol.for("react.memo"),oa=Symbol.for("react.lazy"),gw=Symbol.for("react.offscreen"),Vv=Symbol.iterator;function jl(e){return e===null||typeof e!="object"?null:(e=Vv&&e[Vv]||e["@@iterator"],typeof e=="function"?e:null)}var Bt=Object.assign,bh;function $l(e){if(bh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);bh=t&&t[1]||""}return`
`+bh+e}var wh=!1;function jh(e,t){if(!e||wh)return"";wh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{wh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$l(e):""}function RP(e){switch(e.tag){case 5:return $l(e.type);case 16:return $l("Lazy");case 13:return $l("Suspense");case 19:return $l("SuspenseList");case 0:case 2:case 15:return e=jh(e.type,!1),e;case 11:return e=jh(e.type.render,!1),e;case 1:return e=jh(e.type,!0),e;default:return""}}function Pm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ho:return"Fragment";case fo:return"Portal";case Cm:return"Profiler";case Pg:return"StrictMode";case Em:return"Suspense";case km:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pw:return(e.displayName||"Context")+".Consumer";case mw:return(e._context.displayName||"Context")+".Provider";case Tg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ag:return t=e.displayName||null,t!==null?t:Pm(e.type)||"Memo";case oa:t=e._payload,e=e._init;try{return Pm(e(t))}catch{}}return null}function OP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pm(t);case 8:return t===Pg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function La(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function DP(e){var t=yw(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gd(e){e._valueTracker||(e._valueTracker=DP(e))}function vw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=yw(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function yu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Tm(e,t){var r=t.checked;return Bt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function zv(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=La(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xw(e,t){t=t.checked,t!=null&&kg(e,"checked",t,!1)}function Am(e,t){xw(e,t);var r=La(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Im(e,t.type,r):t.hasOwnProperty("defaultValue")&&Im(e,t.type,La(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wv(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Im(e,t,r){(t!=="number"||yu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ql=Array.isArray;function So(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+La(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Rm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ve(91));return Bt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ve(92));if(ql(r)){if(1<r.length)throw Error(ve(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:La(r)}}function bw(e,t){var r=La(t.value),n=La(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Qv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ww(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Om(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ww(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yd,jw=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yd=yd||document.createElement("div"),yd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function cc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MP=["Webkit","ms","Moz","O"];Object.keys(Ql).forEach(function(e){MP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ql[t]=Ql[e]})});function _w(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ql.hasOwnProperty(e)&&Ql[e]?(""+t).trim():t+"px"}function Nw(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=_w(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var LP=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dm(e,t){if(t){if(LP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ve(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ve(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ve(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ve(62))}}function Mm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lm=null;function Ig(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fm=null,Co=null,Eo=null;function Kv(e){if(e=zc(e)){if(typeof Fm!="function")throw Error(ve(280));var t=e.stateNode;t&&(t=gf(t),Fm(e.stateNode,e.type,t))}}function Sw(e){Co?Eo?Eo.push(e):Eo=[e]:Co=e}function Cw(){if(Co){var e=Co,t=Eo;if(Eo=Co=null,Kv(e),t)for(e=0;e<t.length;e++)Kv(t[e])}}function Ew(e,t){return e(t)}function kw(){}var _h=!1;function Pw(e,t,r){if(_h)return e(t,r);_h=!0;try{return Ew(e,t,r)}finally{_h=!1,(Co!==null||Eo!==null)&&(kw(),Cw())}}function dc(e,t){var r=e.stateNode;if(r===null)return null;var n=gf(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ve(231,t,typeof r));return r}var $m=!1;if(Us)try{var _l={};Object.defineProperty(_l,"passive",{get:function(){$m=!0}}),window.addEventListener("test",_l,_l),window.removeEventListener("test",_l,_l)}catch{$m=!1}function FP(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Kl=!1,vu=null,xu=!1,qm=null,$P={onError:function(e){Kl=!0,vu=e}};function qP(e,t,r,n,a,i,o,l,c){Kl=!1,vu=null,FP.apply($P,arguments)}function UP(e,t,r,n,a,i,o,l,c){if(qP.apply(this,arguments),Kl){if(Kl){var d=vu;Kl=!1,vu=null}else throw Error(ve(198));xu||(xu=!0,qm=d)}}function Vi(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Tw(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Gv(e){if(Vi(e)!==e)throw Error(ve(188))}function BP(e){var t=e.alternate;if(!t){if(t=Vi(e),t===null)throw Error(ve(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Gv(a),e;if(i===n)return Gv(a),t;i=i.sibling}throw Error(ve(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(ve(189))}}if(r.alternate!==n)throw Error(ve(190))}if(r.tag!==3)throw Error(ve(188));return r.stateNode.current===r?e:t}function Aw(e){return e=BP(e),e!==null?Iw(e):null}function Iw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Iw(e);if(t!==null)return t;e=e.sibling}return null}var Rw=yn.unstable_scheduleCallback,Yv=yn.unstable_cancelCallback,VP=yn.unstable_shouldYield,zP=yn.unstable_requestPaint,Qt=yn.unstable_now,WP=yn.unstable_getCurrentPriorityLevel,Rg=yn.unstable_ImmediatePriority,Ow=yn.unstable_UserBlockingPriority,bu=yn.unstable_NormalPriority,HP=yn.unstable_LowPriority,Dw=yn.unstable_IdlePriority,ff=null,ys=null;function QP(e){if(ys&&typeof ys.onCommitFiberRoot=="function")try{ys.onCommitFiberRoot(ff,e,void 0,(e.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:YP,KP=Math.log,GP=Math.LN2;function YP(e){return e>>>=0,e===0?32:31-(KP(e)/GP|0)|0}var vd=64,xd=4194304;function Ul(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wu(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Ul(l):(i&=o,i!==0&&(n=Ul(i)))}else o=r&~a,o!==0?n=Ul(o):i!==0&&(n=Ul(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Qn(t),a=1<<r,n|=e[r],t&=~a;return n}function XP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JP(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Qn(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=XP(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Um(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Mw(){var e=vd;return vd<<=1,!(vd&4194240)&&(vd=64),e}function Nh(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Bc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Qn(t),e[t]=r}function ZP(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Qn(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Og(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Qn(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var xt=0;function Lw(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Fw,Dg,$w,qw,Uw,Bm=!1,bd=[],Sa=null,Ca=null,Ea=null,uc=new Map,fc=new Map,ca=[],eT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xv(e,t){switch(e){case"focusin":case"focusout":Sa=null;break;case"dragenter":case"dragleave":Ca=null;break;case"mouseover":case"mouseout":Ea=null;break;case"pointerover":case"pointerout":uc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(t.pointerId)}}function Nl(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=zc(t),t!==null&&Dg(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function tT(e,t,r,n,a){switch(t){case"focusin":return Sa=Nl(Sa,e,t,r,n,a),!0;case"dragenter":return Ca=Nl(Ca,e,t,r,n,a),!0;case"mouseover":return Ea=Nl(Ea,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return uc.set(i,Nl(uc.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,fc.set(i,Nl(fc.get(i)||null,e,t,r,n,a)),!0}return!1}function Bw(e){var t=di(e.target);if(t!==null){var r=Vi(t);if(r!==null){if(t=r.tag,t===13){if(t=Tw(r),t!==null){e.blockedOn=t,Uw(e.priority,function(){$w(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Vm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Lm=n,r.target.dispatchEvent(n),Lm=null}else return t=zc(r),t!==null&&Dg(t),e.blockedOn=r,!1;t.shift()}return!0}function Jv(e,t,r){Xd(e)&&r.delete(t)}function rT(){Bm=!1,Sa!==null&&Xd(Sa)&&(Sa=null),Ca!==null&&Xd(Ca)&&(Ca=null),Ea!==null&&Xd(Ea)&&(Ea=null),uc.forEach(Jv),fc.forEach(Jv)}function Sl(e,t){e.blockedOn===t&&(e.blockedOn=null,Bm||(Bm=!0,yn.unstable_scheduleCallback(yn.unstable_NormalPriority,rT)))}function hc(e){function t(a){return Sl(a,e)}if(0<bd.length){Sl(bd[0],e);for(var r=1;r<bd.length;r++){var n=bd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Sa!==null&&Sl(Sa,e),Ca!==null&&Sl(Ca,e),Ea!==null&&Sl(Ea,e),uc.forEach(t),fc.forEach(t),r=0;r<ca.length;r++)n=ca[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ca.length&&(r=ca[0],r.blockedOn===null);)Bw(r),r.blockedOn===null&&ca.shift()}var ko=Ys.ReactCurrentBatchConfig,ju=!0;function nT(e,t,r,n){var a=xt,i=ko.transition;ko.transition=null;try{xt=1,Mg(e,t,r,n)}finally{xt=a,ko.transition=i}}function sT(e,t,r,n){var a=xt,i=ko.transition;ko.transition=null;try{xt=4,Mg(e,t,r,n)}finally{xt=a,ko.transition=i}}function Mg(e,t,r,n){if(ju){var a=Vm(e,t,r,n);if(a===null)Oh(e,t,n,_u,r),Xv(e,n);else if(tT(a,e,t,r,n))n.stopPropagation();else if(Xv(e,n),t&4&&-1<eT.indexOf(e)){for(;a!==null;){var i=zc(a);if(i!==null&&Fw(i),i=Vm(e,t,r,n),i===null&&Oh(e,t,n,_u,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Oh(e,t,n,null,r)}}var _u=null;function Vm(e,t,r,n){if(_u=null,e=Ig(n),e=di(e),e!==null)if(t=Vi(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Tw(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _u=e,null}function Vw(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WP()){case Rg:return 1;case Ow:return 4;case bu:case HP:return 16;case Dw:return 536870912;default:return 16}default:return 16}}var ja=null,Lg=null,Jd=null;function zw(){if(Jd)return Jd;var e,t=Lg,r=t.length,n,a="value"in ja?ja.value:ja.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return Jd=a.slice(e,1<n?1-n:void 0)}function Zd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wd(){return!0}function Zv(){return!1}function xn(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wd:Zv,this.isPropagationStopped=Zv,this}return Bt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=wd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=wd)},persist:function(){},isPersistent:wd}),t}var ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fg=xn(ll),Vc=Bt({},ll,{view:0,detail:0}),aT=xn(Vc),Sh,Ch,Cl,hf=Bt({},Vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$g,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cl&&(Cl&&e.type==="mousemove"?(Sh=e.screenX-Cl.screenX,Ch=e.screenY-Cl.screenY):Ch=Sh=0,Cl=e),Sh)},movementY:function(e){return"movementY"in e?e.movementY:Ch}}),ex=xn(hf),iT=Bt({},hf,{dataTransfer:0}),oT=xn(iT),lT=Bt({},Vc,{relatedTarget:0}),Eh=xn(lT),cT=Bt({},ll,{animationName:0,elapsedTime:0,pseudoElement:0}),dT=xn(cT),uT=Bt({},ll,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fT=xn(uT),hT=Bt({},ll,{data:0}),tx=xn(hT),mT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gT[e])?!!t[e]:!1}function $g(){return yT}var vT=Bt({},Vc,{key:function(e){if(e.key){var t=mT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$g,charCode:function(e){return e.type==="keypress"?Zd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xT=xn(vT),bT=Bt({},hf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rx=xn(bT),wT=Bt({},Vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$g}),jT=xn(wT),_T=Bt({},ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),NT=xn(_T),ST=Bt({},hf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),CT=xn(ST),ET=[9,13,27,32],qg=Us&&"CompositionEvent"in window,Gl=null;Us&&"documentMode"in document&&(Gl=document.documentMode);var kT=Us&&"TextEvent"in window&&!Gl,Ww=Us&&(!qg||Gl&&8<Gl&&11>=Gl),nx=" ",sx=!1;function Hw(e,t){switch(e){case"keyup":return ET.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qw(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mo=!1;function PT(e,t){switch(e){case"compositionend":return Qw(t);case"keypress":return t.which!==32?null:(sx=!0,nx);case"textInput":return e=t.data,e===nx&&sx?null:e;default:return null}}function TT(e,t){if(mo)return e==="compositionend"||!qg&&Hw(e,t)?(e=zw(),Jd=Lg=ja=null,mo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ww&&t.locale!=="ko"?null:t.data;default:return null}}var AT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ax(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!AT[e.type]:t==="textarea"}function Kw(e,t,r,n){Sw(n),t=Nu(t,"onChange"),0<t.length&&(r=new Fg("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Yl=null,mc=null;function IT(e){aj(e,0)}function mf(e){var t=yo(e);if(vw(t))return e}function RT(e,t){if(e==="change")return t}var Gw=!1;if(Us){var kh;if(Us){var Ph="oninput"in document;if(!Ph){var ix=document.createElement("div");ix.setAttribute("oninput","return;"),Ph=typeof ix.oninput=="function"}kh=Ph}else kh=!1;Gw=kh&&(!document.documentMode||9<document.documentMode)}function ox(){Yl&&(Yl.detachEvent("onpropertychange",Yw),mc=Yl=null)}function Yw(e){if(e.propertyName==="value"&&mf(mc)){var t=[];Kw(t,mc,e,Ig(e)),Pw(IT,t)}}function OT(e,t,r){e==="focusin"?(ox(),Yl=t,mc=r,Yl.attachEvent("onpropertychange",Yw)):e==="focusout"&&ox()}function DT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mf(mc)}function MT(e,t){if(e==="click")return mf(t)}function LT(e,t){if(e==="input"||e==="change")return mf(t)}function FT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gn=typeof Object.is=="function"?Object.is:FT;function pc(e,t){if(Gn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Sm.call(t,a)||!Gn(e[a],t[a]))return!1}return!0}function lx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cx(e,t){var r=lx(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lx(r)}}function Xw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jw(){for(var e=window,t=yu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=yu(e.document)}return t}function Ug(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $T(e){var t=Jw(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Xw(r.ownerDocument.documentElement,r)){if(n!==null&&Ug(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=cx(r,i);var o=cx(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qT=Us&&"documentMode"in document&&11>=document.documentMode,po=null,zm=null,Xl=null,Wm=!1;function dx(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wm||po==null||po!==yu(n)||(n=po,"selectionStart"in n&&Ug(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xl&&pc(Xl,n)||(Xl=n,n=Nu(zm,"onSelect"),0<n.length&&(t=new Fg("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=po)))}function jd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var go={animationend:jd("Animation","AnimationEnd"),animationiteration:jd("Animation","AnimationIteration"),animationstart:jd("Animation","AnimationStart"),transitionend:jd("Transition","TransitionEnd")},Th={},Zw={};Us&&(Zw=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function pf(e){if(Th[e])return Th[e];if(!go[e])return e;var t=go[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Zw)return Th[e]=t[r];return e}var ej=pf("animationend"),tj=pf("animationiteration"),rj=pf("animationstart"),nj=pf("transitionend"),sj=new Map,ux="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wa(e,t){sj.set(e,t),Bi(t,[e])}for(var Ah=0;Ah<ux.length;Ah++){var Ih=ux[Ah],UT=Ih.toLowerCase(),BT=Ih[0].toUpperCase()+Ih.slice(1);Wa(UT,"on"+BT)}Wa(ej,"onAnimationEnd");Wa(tj,"onAnimationIteration");Wa(rj,"onAnimationStart");Wa("dblclick","onDoubleClick");Wa("focusin","onFocus");Wa("focusout","onBlur");Wa(nj,"onTransitionEnd");Ko("onMouseEnter",["mouseout","mouseover"]);Ko("onMouseLeave",["mouseout","mouseover"]);Ko("onPointerEnter",["pointerout","pointerover"]);Ko("onPointerLeave",["pointerout","pointerover"]);Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bl));function fx(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,UP(n,t,void 0,e),e.currentTarget=null}function aj(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;fx(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;fx(a,l,d),i=c}}}if(xu)throw e=qm,xu=!1,qm=null,e}function Et(e,t){var r=t[Ym];r===void 0&&(r=t[Ym]=new Set);var n=e+"__bubble";r.has(n)||(ij(t,e,2,!1),r.add(n))}function Rh(e,t,r){var n=0;t&&(n|=4),ij(r,e,n,t)}var _d="_reactListening"+Math.random().toString(36).slice(2);function gc(e){if(!e[_d]){e[_d]=!0,hw.forEach(function(r){r!=="selectionchange"&&(VT.has(r)||Rh(r,!1,e),Rh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_d]||(t[_d]=!0,Rh("selectionchange",!1,t))}}function ij(e,t,r,n){switch(Vw(t)){case 1:var a=nT;break;case 4:a=sT;break;default:a=Mg}r=a.bind(null,t,r,e),a=void 0,!$m||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Oh(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=di(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Pw(function(){var d=i,u=Ig(r),f=[];e:{var m=sj.get(e);if(m!==void 0){var p=Fg,x=e;switch(e){case"keypress":if(Zd(r)===0)break e;case"keydown":case"keyup":p=xT;break;case"focusin":x="focus",p=Eh;break;case"focusout":x="blur",p=Eh;break;case"beforeblur":case"afterblur":p=Eh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ex;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=oT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=jT;break;case ej:case tj:case rj:p=dT;break;case nj:p=NT;break;case"scroll":p=aT;break;case"wheel":p=CT;break;case"copy":case"cut":case"paste":p=fT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=rx}var g=(t&4)!==0,w=!g&&e==="scroll",v=g?m!==null?m+"Capture":null:m;g=[];for(var y=d,b;y!==null;){b=y;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,v!==null&&(j=dc(y,v),j!=null&&g.push(yc(y,j,b)))),w)break;y=y.return}0<g.length&&(m=new p(m,x,null,r,u),f.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&r!==Lm&&(x=r.relatedTarget||r.fromElement)&&(di(x)||x[Bs]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(x=r.relatedTarget||r.toElement,p=d,x=x?di(x):null,x!==null&&(w=Vi(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=d),p!==x)){if(g=ex,j="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=rx,j="onPointerLeave",v="onPointerEnter",y="pointer"),w=p==null?m:yo(p),b=x==null?m:yo(x),m=new g(j,y+"leave",p,r,u),m.target=w,m.relatedTarget=b,j=null,di(u)===d&&(g=new g(v,y+"enter",x,r,u),g.target=b,g.relatedTarget=w,j=g),w=j,p&&x)t:{for(g=p,v=x,y=0,b=g;b;b=Yi(b))y++;for(b=0,j=v;j;j=Yi(j))b++;for(;0<y-b;)g=Yi(g),y--;for(;0<b-y;)v=Yi(v),b--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=Yi(g),v=Yi(v)}g=null}else g=null;p!==null&&hx(f,m,p,g,!1),x!==null&&w!==null&&hx(f,w,x,g,!0)}}e:{if(m=d?yo(d):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var _=RT;else if(ax(m))if(Gw)_=LT;else{_=DT;var S=OT}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(_=MT);if(_&&(_=_(e,d))){Kw(f,_,r,u);break e}S&&S(e,m,d),e==="focusout"&&(S=m._wrapperState)&&S.controlled&&m.type==="number"&&Im(m,"number",m.value)}switch(S=d?yo(d):window,e){case"focusin":(ax(S)||S.contentEditable==="true")&&(po=S,zm=d,Xl=null);break;case"focusout":Xl=zm=po=null;break;case"mousedown":Wm=!0;break;case"contextmenu":case"mouseup":case"dragend":Wm=!1,dx(f,r,u);break;case"selectionchange":if(qT)break;case"keydown":case"keyup":dx(f,r,u)}var E;if(qg)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else mo?Hw(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(Ww&&r.locale!=="ko"&&(mo||D!=="onCompositionStart"?D==="onCompositionEnd"&&mo&&(E=zw()):(ja=u,Lg="value"in ja?ja.value:ja.textContent,mo=!0)),S=Nu(d,D),0<S.length&&(D=new tx(D,e,null,r,u),f.push({event:D,listeners:S}),E?D.data=E:(E=Qw(r),E!==null&&(D.data=E)))),(E=kT?PT(e,r):TT(e,r))&&(d=Nu(d,"onBeforeInput"),0<d.length&&(u=new tx("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:d}),u.data=E))}aj(f,t)})}function yc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Nu(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=dc(e,r),i!=null&&n.unshift(yc(e,i,a)),i=dc(e,t),i!=null&&n.push(yc(e,i,a))),e=e.return}return n}function Yi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hx(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=dc(r,i),c!=null&&o.unshift(yc(r,c,l))):a||(c=dc(r,i),c!=null&&o.push(yc(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var zT=/\r\n?/g,WT=/\u0000|\uFFFD/g;function mx(e){return(typeof e=="string"?e:""+e).replace(zT,`
`).replace(WT,"")}function Nd(e,t,r){if(t=mx(t),mx(e)!==t&&r)throw Error(ve(425))}function Su(){}var Hm=null,Qm=null;function Km(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gm=typeof setTimeout=="function"?setTimeout:void 0,HT=typeof clearTimeout=="function"?clearTimeout:void 0,px=typeof Promise=="function"?Promise:void 0,QT=typeof queueMicrotask=="function"?queueMicrotask:typeof px<"u"?function(e){return px.resolve(null).then(e).catch(KT)}:Gm;function KT(e){setTimeout(function(){throw e})}function Dh(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),hc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);hc(t)}function ka(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var cl=Math.random().toString(36).slice(2),us="__reactFiber$"+cl,vc="__reactProps$"+cl,Bs="__reactContainer$"+cl,Ym="__reactEvents$"+cl,GT="__reactListeners$"+cl,YT="__reactHandles$"+cl;function di(e){var t=e[us];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Bs]||r[us]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=gx(e);e!==null;){if(r=e[us])return r;e=gx(e)}return t}e=r,r=e.parentNode}return null}function zc(e){return e=e[us]||e[Bs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ve(33))}function gf(e){return e[vc]||null}var Xm=[],vo=-1;function Ha(e){return{current:e}}function Tt(e){0>vo||(e.current=Xm[vo],Xm[vo]=null,vo--)}function Nt(e,t){vo++,Xm[vo]=e.current,e.current=t}var Fa={},kr=Ha(Fa),en=Ha(!1),Pi=Fa;function Go(e,t){var r=e.type.contextTypes;if(!r)return Fa;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function tn(e){return e=e.childContextTypes,e!=null}function Cu(){Tt(en),Tt(kr)}function yx(e,t,r){if(kr.current!==Fa)throw Error(ve(168));Nt(kr,t),Nt(en,r)}function oj(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ve(108,OP(e)||"Unknown",a));return Bt({},r,n)}function Eu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fa,Pi=kr.current,Nt(kr,e),Nt(en,en.current),!0}function vx(e,t,r){var n=e.stateNode;if(!n)throw Error(ve(169));r?(e=oj(e,t,Pi),n.__reactInternalMemoizedMergedChildContext=e,Tt(en),Tt(kr),Nt(kr,e)):Tt(en),Nt(en,r)}var Ts=null,yf=!1,Mh=!1;function lj(e){Ts===null?Ts=[e]:Ts.push(e)}function XT(e){yf=!0,lj(e)}function Qa(){if(!Mh&&Ts!==null){Mh=!0;var e=0,t=xt;try{var r=Ts;for(xt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ts=null,yf=!1}catch(a){throw Ts!==null&&(Ts=Ts.slice(e+1)),Rw(Rg,Qa),a}finally{xt=t,Mh=!1}}return null}var xo=[],bo=0,ku=null,Pu=0,Nn=[],Sn=0,Ti=null,Ms=1,Ls="";function si(e,t){xo[bo++]=Pu,xo[bo++]=ku,ku=e,Pu=t}function cj(e,t,r){Nn[Sn++]=Ms,Nn[Sn++]=Ls,Nn[Sn++]=Ti,Ti=e;var n=Ms;e=Ls;var a=32-Qn(n)-1;n&=~(1<<a),r+=1;var i=32-Qn(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Ms=1<<32-Qn(t)+a|r<<a|n,Ls=i+e}else Ms=1<<i|r<<a|n,Ls=e}function Bg(e){e.return!==null&&(si(e,1),cj(e,1,0))}function Vg(e){for(;e===ku;)ku=xo[--bo],xo[bo]=null,Pu=xo[--bo],xo[bo]=null;for(;e===Ti;)Ti=Nn[--Sn],Nn[Sn]=null,Ls=Nn[--Sn],Nn[Sn]=null,Ms=Nn[--Sn],Nn[Sn]=null}var hn=null,dn=null,Ot=!1,Vn=null;function dj(e,t){var r=kn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function xx(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,hn=e,dn=ka(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,hn=e,dn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ti!==null?{id:Ms,overflow:Ls}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=kn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,hn=e,dn=null,!0):!1;default:return!1}}function Jm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zm(e){if(Ot){var t=dn;if(t){var r=t;if(!xx(e,t)){if(Jm(e))throw Error(ve(418));t=ka(r.nextSibling);var n=hn;t&&xx(e,t)?dj(n,r):(e.flags=e.flags&-4097|2,Ot=!1,hn=e)}}else{if(Jm(e))throw Error(ve(418));e.flags=e.flags&-4097|2,Ot=!1,hn=e}}}function bx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;hn=e}function Sd(e){if(e!==hn)return!1;if(!Ot)return bx(e),Ot=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Km(e.type,e.memoizedProps)),t&&(t=dn)){if(Jm(e))throw uj(),Error(ve(418));for(;t;)dj(e,t),t=ka(t.nextSibling)}if(bx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ve(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){dn=ka(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}dn=null}}else dn=hn?ka(e.stateNode.nextSibling):null;return!0}function uj(){for(var e=dn;e;)e=ka(e.nextSibling)}function Yo(){dn=hn=null,Ot=!1}function zg(e){Vn===null?Vn=[e]:Vn.push(e)}var JT=Ys.ReactCurrentBatchConfig;function El(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ve(309));var n=r.stateNode}if(!n)throw Error(ve(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ve(284));if(!r._owner)throw Error(ve(290,e))}return e}function Cd(e,t){throw e=Object.prototype.toString.call(t),Error(ve(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wx(e){var t=e._init;return t(e._payload)}function fj(e){function t(v,y){if(e){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function r(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function a(v,y){return v=Ia(v,y),v.index=0,v.sibling=null,v}function i(v,y,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,y,b,j){return y===null||y.tag!==6?(y=Vh(b,v.mode,j),y.return=v,y):(y=a(y,b),y.return=v,y)}function c(v,y,b,j){var _=b.type;return _===ho?u(v,y,b.props.children,j,b.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===oa&&wx(_)===y.type)?(j=a(y,b.props),j.ref=El(v,y,b),j.return=v,j):(j=iu(b.type,b.key,b.props,null,v.mode,j),j.ref=El(v,y,b),j.return=v,j)}function d(v,y,b,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=zh(b,v.mode,j),y.return=v,y):(y=a(y,b.children||[]),y.return=v,y)}function u(v,y,b,j,_){return y===null||y.tag!==7?(y=Si(b,v.mode,j,_),y.return=v,y):(y=a(y,b),y.return=v,y)}function f(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Vh(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case pd:return b=iu(y.type,y.key,y.props,null,v.mode,b),b.ref=El(v,null,y),b.return=v,b;case fo:return y=zh(y,v.mode,b),y.return=v,y;case oa:var j=y._init;return f(v,j(y._payload),b)}if(ql(y)||jl(y))return y=Si(y,v.mode,b,null),y.return=v,y;Cd(v,y)}return null}function m(v,y,b,j){var _=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:l(v,y,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pd:return b.key===_?c(v,y,b,j):null;case fo:return b.key===_?d(v,y,b,j):null;case oa:return _=b._init,m(v,y,_(b._payload),j)}if(ql(b)||jl(b))return _!==null?null:u(v,y,b,j,null);Cd(v,b)}return null}function p(v,y,b,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return v=v.get(b)||null,l(y,v,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case pd:return v=v.get(j.key===null?b:j.key)||null,c(y,v,j,_);case fo:return v=v.get(j.key===null?b:j.key)||null,d(y,v,j,_);case oa:var S=j._init;return p(v,y,b,S(j._payload),_)}if(ql(j)||jl(j))return v=v.get(b)||null,u(y,v,j,_,null);Cd(y,j)}return null}function x(v,y,b,j){for(var _=null,S=null,E=y,D=y=0,U=null;E!==null&&D<b.length;D++){E.index>D?(U=E,E=null):U=E.sibling;var F=m(v,E,b[D],j);if(F===null){E===null&&(E=U);break}e&&E&&F.alternate===null&&t(v,E),y=i(F,y,D),S===null?_=F:S.sibling=F,S=F,E=U}if(D===b.length)return r(v,E),Ot&&si(v,D),_;if(E===null){for(;D<b.length;D++)E=f(v,b[D],j),E!==null&&(y=i(E,y,D),S===null?_=E:S.sibling=E,S=E);return Ot&&si(v,D),_}for(E=n(v,E);D<b.length;D++)U=p(E,v,D,b[D],j),U!==null&&(e&&U.alternate!==null&&E.delete(U.key===null?D:U.key),y=i(U,y,D),S===null?_=U:S.sibling=U,S=U);return e&&E.forEach(function(L){return t(v,L)}),Ot&&si(v,D),_}function g(v,y,b,j){var _=jl(b);if(typeof _!="function")throw Error(ve(150));if(b=_.call(b),b==null)throw Error(ve(151));for(var S=_=null,E=y,D=y=0,U=null,F=b.next();E!==null&&!F.done;D++,F=b.next()){E.index>D?(U=E,E=null):U=E.sibling;var L=m(v,E,F.value,j);if(L===null){E===null&&(E=U);break}e&&E&&L.alternate===null&&t(v,E),y=i(L,y,D),S===null?_=L:S.sibling=L,S=L,E=U}if(F.done)return r(v,E),Ot&&si(v,D),_;if(E===null){for(;!F.done;D++,F=b.next())F=f(v,F.value,j),F!==null&&(y=i(F,y,D),S===null?_=F:S.sibling=F,S=F);return Ot&&si(v,D),_}for(E=n(v,E);!F.done;D++,F=b.next())F=p(E,v,D,F.value,j),F!==null&&(e&&F.alternate!==null&&E.delete(F.key===null?D:F.key),y=i(F,y,D),S===null?_=F:S.sibling=F,S=F);return e&&E.forEach(function($){return t(v,$)}),Ot&&si(v,D),_}function w(v,y,b,j){if(typeof b=="object"&&b!==null&&b.type===ho&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case pd:e:{for(var _=b.key,S=y;S!==null;){if(S.key===_){if(_=b.type,_===ho){if(S.tag===7){r(v,S.sibling),y=a(S,b.props.children),y.return=v,v=y;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===oa&&wx(_)===S.type){r(v,S.sibling),y=a(S,b.props),y.ref=El(v,S,b),y.return=v,v=y;break e}r(v,S);break}else t(v,S);S=S.sibling}b.type===ho?(y=Si(b.props.children,v.mode,j,b.key),y.return=v,v=y):(j=iu(b.type,b.key,b.props,null,v.mode,j),j.ref=El(v,y,b),j.return=v,v=j)}return o(v);case fo:e:{for(S=b.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(v,y.sibling),y=a(y,b.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else t(v,y);y=y.sibling}y=zh(b,v.mode,j),y.return=v,v=y}return o(v);case oa:return S=b._init,w(v,y,S(b._payload),j)}if(ql(b))return x(v,y,b,j);if(jl(b))return g(v,y,b,j);Cd(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(v,y.sibling),y=a(y,b),y.return=v,v=y):(r(v,y),y=Vh(b,v.mode,j),y.return=v,v=y),o(v)):r(v,y)}return w}var Xo=fj(!0),hj=fj(!1),Tu=Ha(null),Au=null,wo=null,Wg=null;function Hg(){Wg=wo=Au=null}function Qg(e){var t=Tu.current;Tt(Tu),e._currentValue=t}function ep(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Po(e,t){Au=e,Wg=wo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Jr=!0),e.firstContext=null)}function An(e){var t=e._currentValue;if(Wg!==e)if(e={context:e,memoizedValue:t,next:null},wo===null){if(Au===null)throw Error(ve(308));wo=e,Au.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var ui=null;function Kg(e){ui===null?ui=[e]:ui.push(e)}function mj(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Kg(t)):(r.next=a.next,a.next=r),t.interleaved=r,Vs(e,n)}function Vs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var la=!1;function Gg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,mt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Vs(e,r)}return a=n.interleaved,a===null?(t.next=t,Kg(n)):(t.next=a.next,a.next=t),n.interleaved=t,Vs(e,r)}function eu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Og(e,r)}}function jx(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Iu(e,t,r,n){var a=e.updateQueue;la=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,u=d=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,g=l;switch(m=t,p=r,g.tag){case 1:if(x=g.payload,typeof x=="function"){f=x.call(p,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,m=typeof x=="function"?x.call(p,f,m):x,m==null)break e;f=Bt({},f,m);break e;case 2:la=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=f):u=u.next=p,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(c=f),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Ii|=o,e.lanes=o,e.memoizedState=f}}function _x(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ve(191,a));a.call(n)}}}var Wc={},vs=Ha(Wc),xc=Ha(Wc),bc=Ha(Wc);function fi(e){if(e===Wc)throw Error(ve(174));return e}function Yg(e,t){switch(Nt(bc,t),Nt(xc,e),Nt(vs,Wc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Om(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Om(t,e)}Tt(vs),Nt(vs,t)}function Jo(){Tt(vs),Tt(xc),Tt(bc)}function gj(e){fi(bc.current);var t=fi(vs.current),r=Om(t,e.type);t!==r&&(Nt(xc,e),Nt(vs,r))}function Xg(e){xc.current===e&&(Tt(vs),Tt(xc))}var qt=Ha(0);function Ru(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Lh=[];function Jg(){for(var e=0;e<Lh.length;e++)Lh[e]._workInProgressVersionPrimary=null;Lh.length=0}var tu=Ys.ReactCurrentDispatcher,Fh=Ys.ReactCurrentBatchConfig,Ai=0,Ut=null,ar=null,ur=null,Ou=!1,Jl=!1,wc=0,ZT=0;function _r(){throw Error(ve(321))}function Zg(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Gn(e[r],t[r]))return!1;return!0}function ey(e,t,r,n,a,i){if(Ai=i,Ut=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tu.current=e===null||e.memoizedState===null?nA:sA,e=r(n,a),Jl){i=0;do{if(Jl=!1,wc=0,25<=i)throw Error(ve(301));i+=1,ur=ar=null,t.updateQueue=null,tu.current=aA,e=r(n,a)}while(Jl)}if(tu.current=Du,t=ar!==null&&ar.next!==null,Ai=0,ur=ar=Ut=null,Ou=!1,t)throw Error(ve(300));return e}function ty(){var e=wc!==0;return wc=0,e}function as(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ur===null?Ut.memoizedState=ur=e:ur=ur.next=e,ur}function In(){if(ar===null){var e=Ut.alternate;e=e!==null?e.memoizedState:null}else e=ar.next;var t=ur===null?Ut.memoizedState:ur.next;if(t!==null)ur=t,ar=e;else{if(e===null)throw Error(ve(310));ar=e,e={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},ur===null?Ut.memoizedState=ur=e:ur=ur.next=e}return ur}function jc(e,t){return typeof t=="function"?t(e):t}function $h(e){var t=In(),r=t.queue;if(r===null)throw Error(ve(311));r.lastRenderedReducer=e;var n=ar,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Ai&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Ut.lanes|=u,Ii|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Gn(n,t.memoizedState)||(Jr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Ut.lanes|=i,Ii|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function qh(e){var t=In(),r=t.queue;if(r===null)throw Error(ve(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Gn(i,t.memoizedState)||(Jr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function yj(){}function vj(e,t){var r=Ut,n=In(),a=t(),i=!Gn(n.memoizedState,a);if(i&&(n.memoizedState=a,Jr=!0),n=n.queue,ry(wj.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||ur!==null&&ur.memoizedState.tag&1){if(r.flags|=2048,_c(9,bj.bind(null,r,n,a,t),void 0,null),fr===null)throw Error(ve(349));Ai&30||xj(r,t,a)}return a}function xj(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ut.updateQueue,t===null?(t={lastEffect:null,stores:null},Ut.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function bj(e,t,r,n){t.value=r,t.getSnapshot=n,jj(t)&&_j(e)}function wj(e,t,r){return r(function(){jj(t)&&_j(e)})}function jj(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Gn(e,r)}catch{return!0}}function _j(e){var t=Vs(e,1);t!==null&&Kn(t,e,1,-1)}function Nx(e){var t=as();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jc,lastRenderedState:e},t.queue=e,e=e.dispatch=rA.bind(null,Ut,e),[t.memoizedState,e]}function _c(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ut.updateQueue,t===null?(t={lastEffect:null,stores:null},Ut.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Nj(){return In().memoizedState}function ru(e,t,r,n){var a=as();Ut.flags|=e,a.memoizedState=_c(1|t,r,void 0,n===void 0?null:n)}function vf(e,t,r,n){var a=In();n=n===void 0?null:n;var i=void 0;if(ar!==null){var o=ar.memoizedState;if(i=o.destroy,n!==null&&Zg(n,o.deps)){a.memoizedState=_c(t,r,i,n);return}}Ut.flags|=e,a.memoizedState=_c(1|t,r,i,n)}function Sx(e,t){return ru(8390656,8,e,t)}function ry(e,t){return vf(2048,8,e,t)}function Sj(e,t){return vf(4,2,e,t)}function Cj(e,t){return vf(4,4,e,t)}function Ej(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kj(e,t,r){return r=r!=null?r.concat([e]):null,vf(4,4,Ej.bind(null,t,e),r)}function ny(){}function Pj(e,t){var r=In();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Zg(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Tj(e,t){var r=In();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Zg(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Aj(e,t,r){return Ai&21?(Gn(r,t)||(r=Mw(),Ut.lanes|=r,Ii|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Jr=!0),e.memoizedState=r)}function eA(e,t){var r=xt;xt=r!==0&&4>r?r:4,e(!0);var n=Fh.transition;Fh.transition={};try{e(!1),t()}finally{xt=r,Fh.transition=n}}function Ij(){return In().memoizedState}function tA(e,t,r){var n=Aa(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Rj(e))Oj(t,r);else if(r=mj(e,t,r,n),r!==null){var a=Fr();Kn(r,e,n,a),Dj(r,t,n)}}function rA(e,t,r){var n=Aa(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Rj(e))Oj(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Gn(l,o)){var c=t.interleaved;c===null?(a.next=a,Kg(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=mj(e,t,a,n),r!==null&&(a=Fr(),Kn(r,e,n,a),Dj(r,t,n))}}function Rj(e){var t=e.alternate;return e===Ut||t!==null&&t===Ut}function Oj(e,t){Jl=Ou=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Dj(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Og(e,r)}}var Du={readContext:An,useCallback:_r,useContext:_r,useEffect:_r,useImperativeHandle:_r,useInsertionEffect:_r,useLayoutEffect:_r,useMemo:_r,useReducer:_r,useRef:_r,useState:_r,useDebugValue:_r,useDeferredValue:_r,useTransition:_r,useMutableSource:_r,useSyncExternalStore:_r,useId:_r,unstable_isNewReconciler:!1},nA={readContext:An,useCallback:function(e,t){return as().memoizedState=[e,t===void 0?null:t],e},useContext:An,useEffect:Sx,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ru(4194308,4,Ej.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ru(4194308,4,e,t)},useInsertionEffect:function(e,t){return ru(4,2,e,t)},useMemo:function(e,t){var r=as();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=as();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=tA.bind(null,Ut,e),[n.memoizedState,e]},useRef:function(e){var t=as();return e={current:e},t.memoizedState=e},useState:Nx,useDebugValue:ny,useDeferredValue:function(e){return as().memoizedState=e},useTransition:function(){var e=Nx(!1),t=e[0];return e=eA.bind(null,e[1]),as().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ut,a=as();if(Ot){if(r===void 0)throw Error(ve(407));r=r()}else{if(r=t(),fr===null)throw Error(ve(349));Ai&30||xj(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Sx(wj.bind(null,n,i,e),[e]),n.flags|=2048,_c(9,bj.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=as(),t=fr.identifierPrefix;if(Ot){var r=Ls,n=Ms;r=(n&~(1<<32-Qn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=wc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ZT++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sA={readContext:An,useCallback:Pj,useContext:An,useEffect:ry,useImperativeHandle:kj,useInsertionEffect:Sj,useLayoutEffect:Cj,useMemo:Tj,useReducer:$h,useRef:Nj,useState:function(){return $h(jc)},useDebugValue:ny,useDeferredValue:function(e){var t=In();return Aj(t,ar.memoizedState,e)},useTransition:function(){var e=$h(jc)[0],t=In().memoizedState;return[e,t]},useMutableSource:yj,useSyncExternalStore:vj,useId:Ij,unstable_isNewReconciler:!1},aA={readContext:An,useCallback:Pj,useContext:An,useEffect:ry,useImperativeHandle:kj,useInsertionEffect:Sj,useLayoutEffect:Cj,useMemo:Tj,useReducer:qh,useRef:Nj,useState:function(){return qh(jc)},useDebugValue:ny,useDeferredValue:function(e){var t=In();return ar===null?t.memoizedState=e:Aj(t,ar.memoizedState,e)},useTransition:function(){var e=qh(jc)[0],t=In().memoizedState;return[e,t]},useMutableSource:yj,useSyncExternalStore:vj,useId:Ij,unstable_isNewReconciler:!1};function Fn(e,t){if(e&&e.defaultProps){t=Bt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function tp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Bt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var xf={isMounted:function(e){return(e=e._reactInternals)?Vi(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Fr(),a=Aa(e),i=Fs(n,a);i.payload=t,r!=null&&(i.callback=r),t=Pa(e,i,a),t!==null&&(Kn(t,e,a,n),eu(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Fr(),a=Aa(e),i=Fs(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Pa(e,i,a),t!==null&&(Kn(t,e,a,n),eu(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Fr(),n=Aa(e),a=Fs(r,n);a.tag=2,t!=null&&(a.callback=t),t=Pa(e,a,n),t!==null&&(Kn(t,e,n,r),eu(t,e,n))}};function Cx(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!pc(r,n)||!pc(a,i):!0}function Mj(e,t,r){var n=!1,a=Fa,i=t.contextType;return typeof i=="object"&&i!==null?i=An(i):(a=tn(t)?Pi:kr.current,n=t.contextTypes,i=(n=n!=null)?Go(e,a):Fa),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=xf,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ex(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&xf.enqueueReplaceState(t,t.state,null)}function rp(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Gg(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=An(i):(i=tn(t)?Pi:kr.current,a.context=Go(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(tp(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&xf.enqueueReplaceState(a,a.state,null),Iu(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Zo(e,t){try{var r="",n=t;do r+=RP(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Uh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function np(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var iA=typeof WeakMap=="function"?WeakMap:Map;function Lj(e,t,r){r=Fs(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Lu||(Lu=!0,hp=n),np(e,t)},r}function Fj(e,t,r){r=Fs(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){np(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){np(e,t),typeof n!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function kx(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new iA;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=bA.bind(null,e,t,r),t.then(e,e))}function Px(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Tx(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Fs(-1,1),t.tag=2,Pa(r,t,1))),r.lanes|=1),e)}var oA=Ys.ReactCurrentOwner,Jr=!1;function Rr(e,t,r,n){t.child=e===null?hj(t,null,r,n):Xo(t,e.child,r,n)}function Ax(e,t,r,n,a){r=r.render;var i=t.ref;return Po(t,a),n=ey(e,t,r,n,i,a),r=ty(),e!==null&&!Jr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,zs(e,t,a)):(Ot&&r&&Bg(t),t.flags|=1,Rr(e,t,n,a),t.child)}function Ix(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!uy(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,$j(e,t,i,n,a)):(e=iu(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:pc,r(o,n)&&e.ref===t.ref)return zs(e,t,a)}return t.flags|=1,e=Ia(i,n),e.ref=t.ref,e.return=t,t.child=e}function $j(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(pc(i,n)&&e.ref===t.ref)if(Jr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Jr=!0);else return t.lanes=e.lanes,zs(e,t,a)}return sp(e,t,r,n,a)}function qj(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nt(_o,ln),ln|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Nt(_o,ln),ln|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Nt(_o,ln),ln|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Nt(_o,ln),ln|=n;return Rr(e,t,a,r),t.child}function Uj(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function sp(e,t,r,n,a){var i=tn(r)?Pi:kr.current;return i=Go(t,i),Po(t,a),r=ey(e,t,r,n,i,a),n=ty(),e!==null&&!Jr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,zs(e,t,a)):(Ot&&n&&Bg(t),t.flags|=1,Rr(e,t,r,a),t.child)}function Rx(e,t,r,n,a){if(tn(r)){var i=!0;Eu(t)}else i=!1;if(Po(t,a),t.stateNode===null)nu(e,t),Mj(t,r,n),rp(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=An(d):(d=tn(r)?Pi:kr.current,d=Go(t,d));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Ex(t,o,n,d),la=!1;var m=t.memoizedState;o.state=m,Iu(t,n,o,a),c=t.memoizedState,l!==n||m!==c||en.current||la?(typeof u=="function"&&(tp(t,r,u,n),c=t.memoizedState),(l=la||Cx(t,r,l,n,m,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,pj(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Fn(t.type,l),o.props=d,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=An(c):(c=tn(r)?Pi:kr.current,c=Go(t,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Ex(t,o,n,c),la=!1,m=t.memoizedState,o.state=m,Iu(t,n,o,a);var x=t.memoizedState;l!==f||m!==x||en.current||la?(typeof p=="function"&&(tp(t,r,p,n),x=t.memoizedState),(d=la||Cx(t,r,d,n,m,x,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return ap(e,t,r,n,i,a)}function ap(e,t,r,n,a,i){Uj(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&vx(t,r,!1),zs(e,t,i);n=t.stateNode,oA.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Xo(t,e.child,null,i),t.child=Xo(t,null,l,i)):Rr(e,t,l,i),t.memoizedState=n.state,a&&vx(t,r,!0),t.child}function Bj(e){var t=e.stateNode;t.pendingContext?yx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yx(e,t.context,!1),Yg(e,t.containerInfo)}function Ox(e,t,r,n,a){return Yo(),zg(a),t.flags|=256,Rr(e,t,r,n),t.child}var ip={dehydrated:null,treeContext:null,retryLane:0};function op(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vj(e,t,r){var n=t.pendingProps,a=qt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Nt(qt,a&1),e===null)return Zm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=jf(o,n,0,null),e=Si(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=op(r),t.memoizedState=ip,e):sy(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return lA(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ia(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Ia(l,i):(i=Si(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?op(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=ip,n}return i=e.child,e=i.sibling,n=Ia(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function sy(e,t){return t=jf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ed(e,t,r,n){return n!==null&&zg(n),Xo(t,e.child,null,r),e=sy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lA(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Uh(Error(ve(422))),Ed(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=jf({mode:"visible",children:n.children},a,0,null),i=Si(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Xo(t,e.child,null,o),t.child.memoizedState=op(o),t.memoizedState=ip,i);if(!(t.mode&1))return Ed(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ve(419)),n=Uh(i,n,void 0),Ed(e,t,o,n)}if(l=(o&e.childLanes)!==0,Jr||l){if(n=fr,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Vs(e,a),Kn(n,e,a,-1))}return dy(),n=Uh(Error(ve(421))),Ed(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=wA.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,dn=ka(a.nextSibling),hn=t,Ot=!0,Vn=null,e!==null&&(Nn[Sn++]=Ms,Nn[Sn++]=Ls,Nn[Sn++]=Ti,Ms=e.id,Ls=e.overflow,Ti=t),t=sy(t,n.children),t.flags|=4096,t)}function Dx(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ep(e.return,t,r)}function Bh(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function zj(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Rr(e,t,n.children,r),n=qt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dx(e,r,t);else if(e.tag===19)Dx(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Nt(qt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ru(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Bh(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ru(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Bh(t,!0,r,null,i);break;case"together":Bh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ii|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ve(153));if(t.child!==null){for(e=t.child,r=Ia(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ia(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function cA(e,t,r){switch(t.tag){case 3:Bj(t),Yo();break;case 5:gj(t);break;case 1:tn(t.type)&&Eu(t);break;case 4:Yg(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Nt(Tu,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Nt(qt,qt.current&1),t.flags|=128,null):r&t.child.childLanes?Vj(e,t,r):(Nt(qt,qt.current&1),e=zs(e,t,r),e!==null?e.sibling:null);Nt(qt,qt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return zj(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Nt(qt,qt.current),n)break;return null;case 22:case 23:return t.lanes=0,qj(e,t,r)}return zs(e,t,r)}var Wj,lp,Hj,Qj;Wj=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};lp=function(){};Hj=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,fi(vs.current);var i=null;switch(r){case"input":a=Tm(e,a),n=Tm(e,n),i=[];break;case"select":a=Bt({},a,{value:void 0}),n=Bt({},n,{value:void 0}),i=[];break;case"textarea":a=Rm(e,a),n=Rm(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Su)}Dm(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(lc.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(lc.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Et("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Qj=function(e,t,r,n){r!==n&&(t.flags|=4)};function kl(e,t){if(!Ot)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Nr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function dA(e,t,r){var n=t.pendingProps;switch(Vg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(t),null;case 1:return tn(t.type)&&Cu(),Nr(t),null;case 3:return n=t.stateNode,Jo(),Tt(en),Tt(kr),Jg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Sd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vn!==null&&(gp(Vn),Vn=null))),lp(e,t),Nr(t),null;case 5:Xg(t);var a=fi(bc.current);if(r=t.type,e!==null&&t.stateNode!=null)Hj(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ve(166));return Nr(t),null}if(e=fi(vs.current),Sd(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[us]=t,n[vc]=i,e=(t.mode&1)!==0,r){case"dialog":Et("cancel",n),Et("close",n);break;case"iframe":case"object":case"embed":Et("load",n);break;case"video":case"audio":for(a=0;a<Bl.length;a++)Et(Bl[a],n);break;case"source":Et("error",n);break;case"img":case"image":case"link":Et("error",n),Et("load",n);break;case"details":Et("toggle",n);break;case"input":zv(n,i),Et("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Et("invalid",n);break;case"textarea":Hv(n,i),Et("invalid",n)}Dm(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Nd(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Nd(n.textContent,l,e),a=["children",""+l]):lc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Et("scroll",n)}switch(r){case"input":gd(n),Wv(n,i,!0);break;case"textarea":gd(n),Qv(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Su)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ww(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[us]=t,e[vc]=n,Wj(e,t,!1,!1),t.stateNode=e;e:{switch(o=Mm(r,n),r){case"dialog":Et("cancel",e),Et("close",e),a=n;break;case"iframe":case"object":case"embed":Et("load",e),a=n;break;case"video":case"audio":for(a=0;a<Bl.length;a++)Et(Bl[a],e);a=n;break;case"source":Et("error",e),a=n;break;case"img":case"image":case"link":Et("error",e),Et("load",e),a=n;break;case"details":Et("toggle",e),a=n;break;case"input":zv(e,n),a=Tm(e,n),Et("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Bt({},n,{value:void 0}),Et("invalid",e);break;case"textarea":Hv(e,n),a=Rm(e,n),Et("invalid",e);break;default:a=n}Dm(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Nw(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&jw(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&cc(e,c):typeof c=="number"&&cc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(lc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Et("scroll",e):c!=null&&kg(e,i,c,o))}switch(r){case"input":gd(e),Wv(e,n,!1);break;case"textarea":gd(e),Qv(e);break;case"option":n.value!=null&&e.setAttribute("value",""+La(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?So(e,!!n.multiple,i,!1):n.defaultValue!=null&&So(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Su)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Nr(t),null;case 6:if(e&&t.stateNode!=null)Qj(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ve(166));if(r=fi(bc.current),fi(vs.current),Sd(t)){if(n=t.stateNode,r=t.memoizedProps,n[us]=t,(i=n.nodeValue!==r)&&(e=hn,e!==null))switch(e.tag){case 3:Nd(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Nd(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[us]=t,t.stateNode=n}return Nr(t),null;case 13:if(Tt(qt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ot&&dn!==null&&t.mode&1&&!(t.flags&128))uj(),Yo(),t.flags|=98560,i=!1;else if(i=Sd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ve(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ve(317));i[us]=t}else Yo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Nr(t),i=!1}else Vn!==null&&(gp(Vn),Vn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||qt.current&1?or===0&&(or=3):dy())),t.updateQueue!==null&&(t.flags|=4),Nr(t),null);case 4:return Jo(),lp(e,t),e===null&&gc(t.stateNode.containerInfo),Nr(t),null;case 10:return Qg(t.type._context),Nr(t),null;case 17:return tn(t.type)&&Cu(),Nr(t),null;case 19:if(Tt(qt),i=t.memoizedState,i===null)return Nr(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)kl(i,!1);else{if(or!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ru(e),o!==null){for(t.flags|=128,kl(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Nt(qt,qt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Qt()>el&&(t.flags|=128,n=!0,kl(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ru(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),kl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ot)return Nr(t),null}else 2*Qt()-i.renderingStartTime>el&&r!==1073741824&&(t.flags|=128,n=!0,kl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qt(),t.sibling=null,r=qt.current,Nt(qt,n?r&1|2:r&1),t):(Nr(t),null);case 22:case 23:return cy(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ln&1073741824&&(Nr(t),t.subtreeFlags&6&&(t.flags|=8192)):Nr(t),null;case 24:return null;case 25:return null}throw Error(ve(156,t.tag))}function uA(e,t){switch(Vg(t),t.tag){case 1:return tn(t.type)&&Cu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jo(),Tt(en),Tt(kr),Jg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xg(t),null;case 13:if(Tt(qt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ve(340));Yo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Tt(qt),null;case 4:return Jo(),null;case 10:return Qg(t.type._context),null;case 22:case 23:return cy(),null;case 24:return null;default:return null}}var kd=!1,Cr=!1,fA=typeof WeakSet=="function"?WeakSet:Set,Re=null;function jo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){zt(e,t,n)}else r.current=null}function cp(e,t,r){try{r()}catch(n){zt(e,t,n)}}var Mx=!1;function hA(e,t){if(Hm=ju,e=Jw(),Ug(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,f=e,m=null;t:for(;;){for(var p;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===e)break t;if(m===r&&++d===a&&(l=o),m===i&&++u===n&&(c=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Qm={focusedElem:e,selectionRange:r},ju=!1,Re=t;Re!==null;)if(t=Re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Re=e;else for(;Re!==null;){t=Re;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,w=x.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Fn(t.type,g),w);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ve(163))}}catch(j){zt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Re=e;break}Re=t.return}return x=Mx,Mx=!1,x}function Zl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&cp(t,r,i)}a=a.next}while(a!==n)}}function bf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function dp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Kj(e){var t=e.alternate;t!==null&&(e.alternate=null,Kj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[us],delete t[vc],delete t[Ym],delete t[GT],delete t[YT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Gj(e){return e.tag===5||e.tag===3||e.tag===4}function Lx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function up(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Su));else if(n!==4&&(e=e.child,e!==null))for(up(e,t,r),e=e.sibling;e!==null;)up(e,t,r),e=e.sibling}function fp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(fp(e,t,r),e=e.sibling;e!==null;)fp(e,t,r),e=e.sibling}var gr=null,Un=!1;function Zs(e,t,r){for(r=r.child;r!==null;)Yj(e,t,r),r=r.sibling}function Yj(e,t,r){if(ys&&typeof ys.onCommitFiberUnmount=="function")try{ys.onCommitFiberUnmount(ff,r)}catch{}switch(r.tag){case 5:Cr||jo(r,t);case 6:var n=gr,a=Un;gr=null,Zs(e,t,r),gr=n,Un=a,gr!==null&&(Un?(e=gr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):gr.removeChild(r.stateNode));break;case 18:gr!==null&&(Un?(e=gr,r=r.stateNode,e.nodeType===8?Dh(e.parentNode,r):e.nodeType===1&&Dh(e,r),hc(e)):Dh(gr,r.stateNode));break;case 4:n=gr,a=Un,gr=r.stateNode.containerInfo,Un=!0,Zs(e,t,r),gr=n,Un=a;break;case 0:case 11:case 14:case 15:if(!Cr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&cp(r,t,o),a=a.next}while(a!==n)}Zs(e,t,r);break;case 1:if(!Cr&&(jo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){zt(r,t,l)}Zs(e,t,r);break;case 21:Zs(e,t,r);break;case 22:r.mode&1?(Cr=(n=Cr)||r.memoizedState!==null,Zs(e,t,r),Cr=n):Zs(e,t,r);break;default:Zs(e,t,r)}}function Fx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new fA),t.forEach(function(n){var a=jA.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function On(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:gr=l.stateNode,Un=!1;break e;case 3:gr=l.stateNode.containerInfo,Un=!0;break e;case 4:gr=l.stateNode.containerInfo,Un=!0;break e}l=l.return}if(gr===null)throw Error(ve(160));Yj(i,o,a),gr=null,Un=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){zt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Xj(t,e),t=t.sibling}function Xj(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(On(t,e),ss(e),n&4){try{Zl(3,e,e.return),bf(3,e)}catch(g){zt(e,e.return,g)}try{Zl(5,e,e.return)}catch(g){zt(e,e.return,g)}}break;case 1:On(t,e),ss(e),n&512&&r!==null&&jo(r,r.return);break;case 5:if(On(t,e),ss(e),n&512&&r!==null&&jo(r,r.return),e.flags&32){var a=e.stateNode;try{cc(a,"")}catch(g){zt(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&xw(a,i),Mm(l,o);var d=Mm(l,i);for(o=0;o<c.length;o+=2){var u=c[o],f=c[o+1];u==="style"?Nw(a,f):u==="dangerouslySetInnerHTML"?jw(a,f):u==="children"?cc(a,f):kg(a,u,f,d)}switch(l){case"input":Am(a,i);break;case"textarea":bw(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?So(a,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?So(a,!!i.multiple,i.defaultValue,!0):So(a,!!i.multiple,i.multiple?[]:"",!1))}a[vc]=i}catch(g){zt(e,e.return,g)}}break;case 6:if(On(t,e),ss(e),n&4){if(e.stateNode===null)throw Error(ve(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){zt(e,e.return,g)}}break;case 3:if(On(t,e),ss(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{hc(t.containerInfo)}catch(g){zt(e,e.return,g)}break;case 4:On(t,e),ss(e);break;case 13:On(t,e),ss(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(oy=Qt())),n&4&&Fx(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Cr=(d=Cr)||u,On(t,e),Cr=d):On(t,e),ss(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Re=e,u=e.child;u!==null;){for(f=Re=u;Re!==null;){switch(m=Re,p=m.child,m.tag){case 0:case 11:case 14:case 15:Zl(4,m,m.return);break;case 1:jo(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){zt(n,r,g)}}break;case 5:jo(m,m.return);break;case 22:if(m.memoizedState!==null){qx(f);continue}}p!==null?(p.return=m,Re=p):qx(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{a=f.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=_w("display",o))}catch(g){zt(e,e.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(g){zt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:On(t,e),ss(e),n&4&&Fx(e);break;case 21:break;default:On(t,e),ss(e)}}function ss(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Gj(r)){var n=r;break e}r=r.return}throw Error(ve(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(cc(a,""),n.flags&=-33);var i=Lx(e);fp(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Lx(e);up(e,l,o);break;default:throw Error(ve(161))}}catch(c){zt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mA(e,t,r){Re=e,Jj(e)}function Jj(e,t,r){for(var n=(e.mode&1)!==0;Re!==null;){var a=Re,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||kd;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Cr;l=kd;var d=Cr;if(kd=o,(Cr=c)&&!d)for(Re=a;Re!==null;)o=Re,c=o.child,o.tag===22&&o.memoizedState!==null?Ux(a):c!==null?(c.return=o,Re=c):Ux(a);for(;i!==null;)Re=i,Jj(i),i=i.sibling;Re=a,kd=l,Cr=d}$x(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Re=i):$x(e)}}function $x(e){for(;Re!==null;){var t=Re;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Cr||bf(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Cr)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Fn(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&_x(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}_x(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&hc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ve(163))}Cr||t.flags&512&&dp(t)}catch(m){zt(t,t.return,m)}}if(t===e){Re=null;break}if(r=t.sibling,r!==null){r.return=t.return,Re=r;break}Re=t.return}}function qx(e){for(;Re!==null;){var t=Re;if(t===e){Re=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Re=r;break}Re=t.return}}function Ux(e){for(;Re!==null;){var t=Re;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{bf(4,t)}catch(c){zt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){zt(t,a,c)}}var i=t.return;try{dp(t)}catch(c){zt(t,i,c)}break;case 5:var o=t.return;try{dp(t)}catch(c){zt(t,o,c)}}}catch(c){zt(t,t.return,c)}if(t===e){Re=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Re=l;break}Re=t.return}}var pA=Math.ceil,Mu=Ys.ReactCurrentDispatcher,ay=Ys.ReactCurrentOwner,Pn=Ys.ReactCurrentBatchConfig,mt=0,fr=null,tr=null,vr=0,ln=0,_o=Ha(0),or=0,Nc=null,Ii=0,wf=0,iy=0,ec=null,Yr=null,oy=0,el=1/0,ks=null,Lu=!1,hp=null,Ta=null,Pd=!1,_a=null,Fu=0,tc=0,mp=null,su=-1,au=0;function Fr(){return mt&6?Qt():su!==-1?su:su=Qt()}function Aa(e){return e.mode&1?mt&2&&vr!==0?vr&-vr:JT.transition!==null?(au===0&&(au=Mw()),au):(e=xt,e!==0||(e=window.event,e=e===void 0?16:Vw(e.type)),e):1}function Kn(e,t,r,n){if(50<tc)throw tc=0,mp=null,Error(ve(185));Bc(e,r,n),(!(mt&2)||e!==fr)&&(e===fr&&(!(mt&2)&&(wf|=r),or===4&&da(e,vr)),rn(e,n),r===1&&mt===0&&!(t.mode&1)&&(el=Qt()+500,yf&&Qa()))}function rn(e,t){var r=e.callbackNode;JP(e,t);var n=wu(e,e===fr?vr:0);if(n===0)r!==null&&Yv(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Yv(r),t===1)e.tag===0?XT(Bx.bind(null,e)):lj(Bx.bind(null,e)),QT(function(){!(mt&6)&&Qa()}),r=null;else{switch(Lw(n)){case 1:r=Rg;break;case 4:r=Ow;break;case 16:r=bu;break;case 536870912:r=Dw;break;default:r=bu}r=i_(r,Zj.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Zj(e,t){if(su=-1,au=0,mt&6)throw Error(ve(327));var r=e.callbackNode;if(To()&&e.callbackNode!==r)return null;var n=wu(e,e===fr?vr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=$u(e,n);else{t=n;var a=mt;mt|=2;var i=t_();(fr!==e||vr!==t)&&(ks=null,el=Qt()+500,Ni(e,t));do try{vA();break}catch(l){e_(e,l)}while(!0);Hg(),Mu.current=i,mt=a,tr!==null?t=0:(fr=null,vr=0,t=or)}if(t!==0){if(t===2&&(a=Um(e),a!==0&&(n=a,t=pp(e,a))),t===1)throw r=Nc,Ni(e,0),da(e,n),rn(e,Qt()),r;if(t===6)da(e,n);else{if(a=e.current.alternate,!(n&30)&&!gA(a)&&(t=$u(e,n),t===2&&(i=Um(e),i!==0&&(n=i,t=pp(e,i))),t===1))throw r=Nc,Ni(e,0),da(e,n),rn(e,Qt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ve(345));case 2:ai(e,Yr,ks);break;case 3:if(da(e,n),(n&130023424)===n&&(t=oy+500-Qt(),10<t)){if(wu(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Fr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Gm(ai.bind(null,e,Yr,ks),t);break}ai(e,Yr,ks);break;case 4:if(da(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Qn(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Qt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*pA(n/1960))-n,10<n){e.timeoutHandle=Gm(ai.bind(null,e,Yr,ks),n);break}ai(e,Yr,ks);break;case 5:ai(e,Yr,ks);break;default:throw Error(ve(329))}}}return rn(e,Qt()),e.callbackNode===r?Zj.bind(null,e):null}function pp(e,t){var r=ec;return e.current.memoizedState.isDehydrated&&(Ni(e,t).flags|=256),e=$u(e,t),e!==2&&(t=Yr,Yr=r,t!==null&&gp(t)),e}function gp(e){Yr===null?Yr=e:Yr.push.apply(Yr,e)}function gA(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Gn(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function da(e,t){for(t&=~iy,t&=~wf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Qn(t),n=1<<r;e[r]=-1,t&=~n}}function Bx(e){if(mt&6)throw Error(ve(327));To();var t=wu(e,0);if(!(t&1))return rn(e,Qt()),null;var r=$u(e,t);if(e.tag!==0&&r===2){var n=Um(e);n!==0&&(t=n,r=pp(e,n))}if(r===1)throw r=Nc,Ni(e,0),da(e,t),rn(e,Qt()),r;if(r===6)throw Error(ve(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ai(e,Yr,ks),rn(e,Qt()),null}function ly(e,t){var r=mt;mt|=1;try{return e(t)}finally{mt=r,mt===0&&(el=Qt()+500,yf&&Qa())}}function Ri(e){_a!==null&&_a.tag===0&&!(mt&6)&&To();var t=mt;mt|=1;var r=Pn.transition,n=xt;try{if(Pn.transition=null,xt=1,e)return e()}finally{xt=n,Pn.transition=r,mt=t,!(mt&6)&&Qa()}}function cy(){ln=_o.current,Tt(_o)}function Ni(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,HT(r)),tr!==null)for(r=tr.return;r!==null;){var n=r;switch(Vg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Cu();break;case 3:Jo(),Tt(en),Tt(kr),Jg();break;case 5:Xg(n);break;case 4:Jo();break;case 13:Tt(qt);break;case 19:Tt(qt);break;case 10:Qg(n.type._context);break;case 22:case 23:cy()}r=r.return}if(fr=e,tr=e=Ia(e.current,null),vr=ln=t,or=0,Nc=null,iy=wf=Ii=0,Yr=ec=null,ui!==null){for(t=0;t<ui.length;t++)if(r=ui[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}ui=null}return e}function e_(e,t){do{var r=tr;try{if(Hg(),tu.current=Du,Ou){for(var n=Ut.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ou=!1}if(Ai=0,ur=ar=Ut=null,Jl=!1,wc=0,ay.current=null,r===null||r.return===null){or=1,Nc=t,tr=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=vr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Px(o);if(p!==null){p.flags&=-257,Tx(p,o,l,i,t),p.mode&1&&kx(i,d,t),t=p,c=d;var x=t.updateQueue;if(x===null){var g=new Set;g.add(c),t.updateQueue=g}else x.add(c);break e}else{if(!(t&1)){kx(i,d,t),dy();break e}c=Error(ve(426))}}else if(Ot&&l.mode&1){var w=Px(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Tx(w,o,l,i,t),zg(Zo(c,l));break e}}i=c=Zo(c,l),or!==4&&(or=2),ec===null?ec=[i]:ec.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=Lj(i,c,t);jx(i,v);break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ta===null||!Ta.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=Fj(i,l,t);jx(i,j);break e}}i=i.return}while(i!==null)}n_(r)}catch(_){t=_,tr===r&&r!==null&&(tr=r=r.return);continue}break}while(!0)}function t_(){var e=Mu.current;return Mu.current=Du,e===null?Du:e}function dy(){(or===0||or===3||or===2)&&(or=4),fr===null||!(Ii&268435455)&&!(wf&268435455)||da(fr,vr)}function $u(e,t){var r=mt;mt|=2;var n=t_();(fr!==e||vr!==t)&&(ks=null,Ni(e,t));do try{yA();break}catch(a){e_(e,a)}while(!0);if(Hg(),mt=r,Mu.current=n,tr!==null)throw Error(ve(261));return fr=null,vr=0,or}function yA(){for(;tr!==null;)r_(tr)}function vA(){for(;tr!==null&&!VP();)r_(tr)}function r_(e){var t=a_(e.alternate,e,ln);e.memoizedProps=e.pendingProps,t===null?n_(e):tr=t,ay.current=null}function n_(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=uA(r,t),r!==null){r.flags&=32767,tr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{or=6,tr=null;return}}else if(r=dA(r,t,ln),r!==null){tr=r;return}if(t=t.sibling,t!==null){tr=t;return}tr=t=e}while(t!==null);or===0&&(or=5)}function ai(e,t,r){var n=xt,a=Pn.transition;try{Pn.transition=null,xt=1,xA(e,t,r,n)}finally{Pn.transition=a,xt=n}return null}function xA(e,t,r,n){do To();while(_a!==null);if(mt&6)throw Error(ve(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ve(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(ZP(e,i),e===fr&&(tr=fr=null,vr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Pd||(Pd=!0,i_(bu,function(){return To(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Pn.transition,Pn.transition=null;var o=xt;xt=1;var l=mt;mt|=4,ay.current=null,hA(e,r),Xj(r,e),$T(Qm),ju=!!Hm,Qm=Hm=null,e.current=r,mA(r),zP(),mt=l,xt=o,Pn.transition=i}else e.current=r;if(Pd&&(Pd=!1,_a=e,Fu=a),i=e.pendingLanes,i===0&&(Ta=null),QP(r.stateNode),rn(e,Qt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Lu)throw Lu=!1,e=hp,hp=null,e;return Fu&1&&e.tag!==0&&To(),i=e.pendingLanes,i&1?e===mp?tc++:(tc=0,mp=e):tc=0,Qa(),null}function To(){if(_a!==null){var e=Lw(Fu),t=Pn.transition,r=xt;try{if(Pn.transition=null,xt=16>e?16:e,_a===null)var n=!1;else{if(e=_a,_a=null,Fu=0,mt&6)throw Error(ve(331));var a=mt;for(mt|=4,Re=e.current;Re!==null;){var i=Re,o=i.child;if(Re.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Re=d;Re!==null;){var u=Re;switch(u.tag){case 0:case 11:case 15:Zl(8,u,i)}var f=u.child;if(f!==null)f.return=u,Re=f;else for(;Re!==null;){u=Re;var m=u.sibling,p=u.return;if(Kj(u),u===d){Re=null;break}if(m!==null){m.return=p,Re=m;break}Re=p}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Re=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Re=o;else e:for(;Re!==null;){if(i=Re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Re=v;break e}Re=i.return}}var y=e.current;for(Re=y;Re!==null;){o=Re;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Re=b;else e:for(o=y;Re!==null;){if(l=Re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:bf(9,l)}}catch(_){zt(l,l.return,_)}if(l===o){Re=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Re=j;break e}Re=l.return}}if(mt=a,Qa(),ys&&typeof ys.onPostCommitFiberRoot=="function")try{ys.onPostCommitFiberRoot(ff,e)}catch{}n=!0}return n}finally{xt=r,Pn.transition=t}}return!1}function Vx(e,t,r){t=Zo(r,t),t=Lj(e,t,1),e=Pa(e,t,1),t=Fr(),e!==null&&(Bc(e,1,t),rn(e,t))}function zt(e,t,r){if(e.tag===3)Vx(e,e,r);else for(;t!==null;){if(t.tag===3){Vx(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ta===null||!Ta.has(n))){e=Zo(r,e),e=Fj(t,e,1),t=Pa(t,e,1),e=Fr(),t!==null&&(Bc(t,1,e),rn(t,e));break}}t=t.return}}function bA(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Fr(),e.pingedLanes|=e.suspendedLanes&r,fr===e&&(vr&r)===r&&(or===4||or===3&&(vr&130023424)===vr&&500>Qt()-oy?Ni(e,0):iy|=r),rn(e,t)}function s_(e,t){t===0&&(e.mode&1?(t=xd,xd<<=1,!(xd&130023424)&&(xd=4194304)):t=1);var r=Fr();e=Vs(e,t),e!==null&&(Bc(e,t,r),rn(e,r))}function wA(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),s_(e,r)}function jA(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ve(314))}n!==null&&n.delete(t),s_(e,r)}var a_;a_=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||en.current)Jr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Jr=!1,cA(e,t,r);Jr=!!(e.flags&131072)}else Jr=!1,Ot&&t.flags&1048576&&cj(t,Pu,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;nu(e,t),e=t.pendingProps;var a=Go(t,kr.current);Po(t,r),a=ey(null,t,n,e,a,r);var i=ty();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,tn(n)?(i=!0,Eu(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Gg(t),a.updater=xf,t.stateNode=a,a._reactInternals=t,rp(t,n,e,r),t=ap(null,t,n,!0,i,r)):(t.tag=0,Ot&&i&&Bg(t),Rr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(nu(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=NA(n),e=Fn(n,e),a){case 0:t=sp(null,t,n,e,r);break e;case 1:t=Rx(null,t,n,e,r);break e;case 11:t=Ax(null,t,n,e,r);break e;case 14:t=Ix(null,t,n,Fn(n.type,e),r);break e}throw Error(ve(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Fn(n,a),sp(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Fn(n,a),Rx(e,t,n,a,r);case 3:e:{if(Bj(t),e===null)throw Error(ve(387));n=t.pendingProps,i=t.memoizedState,a=i.element,pj(e,t),Iu(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Zo(Error(ve(423)),t),t=Ox(e,t,n,r,a);break e}else if(n!==a){a=Zo(Error(ve(424)),t),t=Ox(e,t,n,r,a);break e}else for(dn=ka(t.stateNode.containerInfo.firstChild),hn=t,Ot=!0,Vn=null,r=hj(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Yo(),n===a){t=zs(e,t,r);break e}Rr(e,t,n,r)}t=t.child}return t;case 5:return gj(t),e===null&&Zm(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Km(n,a)?o=null:i!==null&&Km(n,i)&&(t.flags|=32),Uj(e,t),Rr(e,t,o,r),t.child;case 6:return e===null&&Zm(t),null;case 13:return Vj(e,t,r);case 4:return Yg(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Xo(t,null,n,r):Rr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Fn(n,a),Ax(e,t,n,a,r);case 7:return Rr(e,t,t.pendingProps,r),t.child;case 8:return Rr(e,t,t.pendingProps.children,r),t.child;case 12:return Rr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Nt(Tu,n._currentValue),n._currentValue=o,i!==null)if(Gn(i.value,o)){if(i.children===a.children&&!en.current){t=zs(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Fs(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ep(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ve(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),ep(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Rr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Po(t,r),a=An(a),n=n(a),t.flags|=1,Rr(e,t,n,r),t.child;case 14:return n=t.type,a=Fn(n,t.pendingProps),a=Fn(n.type,a),Ix(e,t,n,a,r);case 15:return $j(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Fn(n,a),nu(e,t),t.tag=1,tn(n)?(e=!0,Eu(t)):e=!1,Po(t,r),Mj(t,n,a),rp(t,n,a,r),ap(null,t,n,!0,e,r);case 19:return zj(e,t,r);case 22:return qj(e,t,r)}throw Error(ve(156,t.tag))};function i_(e,t){return Rw(e,t)}function _A(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(e,t,r,n){return new _A(e,t,r,n)}function uy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function NA(e){if(typeof e=="function")return uy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Tg)return 11;if(e===Ag)return 14}return 2}function Ia(e,t){var r=e.alternate;return r===null?(r=kn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function iu(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")uy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ho:return Si(r.children,a,i,t);case Pg:o=8,a|=8;break;case Cm:return e=kn(12,r,t,a|2),e.elementType=Cm,e.lanes=i,e;case Em:return e=kn(13,r,t,a),e.elementType=Em,e.lanes=i,e;case km:return e=kn(19,r,t,a),e.elementType=km,e.lanes=i,e;case gw:return jf(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mw:o=10;break e;case pw:o=9;break e;case Tg:o=11;break e;case Ag:o=14;break e;case oa:o=16,n=null;break e}throw Error(ve(130,e==null?e:typeof e,""))}return t=kn(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Si(e,t,r,n){return e=kn(7,e,n,t),e.lanes=r,e}function jf(e,t,r,n){return e=kn(22,e,n,t),e.elementType=gw,e.lanes=r,e.stateNode={isHidden:!1},e}function Vh(e,t,r){return e=kn(6,e,null,t),e.lanes=r,e}function zh(e,t,r){return t=kn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function SA(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nh(0),this.expirationTimes=Nh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nh(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function fy(e,t,r,n,a,i,o,l,c){return e=new SA(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=kn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gg(i),e}function CA(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function o_(e){if(!e)return Fa;e=e._reactInternals;e:{if(Vi(e)!==e||e.tag!==1)throw Error(ve(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(tn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ve(171))}if(e.tag===1){var r=e.type;if(tn(r))return oj(e,r,t)}return t}function l_(e,t,r,n,a,i,o,l,c){return e=fy(r,n,!0,e,a,i,o,l,c),e.context=o_(null),r=e.current,n=Fr(),a=Aa(r),i=Fs(n,a),i.callback=t??null,Pa(r,i,a),e.current.lanes=a,Bc(e,a,n),rn(e,n),e}function _f(e,t,r,n){var a=t.current,i=Fr(),o=Aa(a);return r=o_(r),t.context===null?t.context=r:t.pendingContext=r,t=Fs(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Pa(a,t,o),e!==null&&(Kn(e,a,o,i),eu(e,a,o)),o}function qu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function hy(e,t){zx(e,t),(e=e.alternate)&&zx(e,t)}function EA(){return null}var c_=typeof reportError=="function"?reportError:function(e){console.error(e)};function my(e){this._internalRoot=e}Nf.prototype.render=my.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ve(409));_f(e,t,null,null)};Nf.prototype.unmount=my.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ri(function(){_f(null,e,null,null)}),t[Bs]=null}};function Nf(e){this._internalRoot=e}Nf.prototype.unstable_scheduleHydration=function(e){if(e){var t=qw();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ca.length&&t!==0&&t<ca[r].priority;r++);ca.splice(r,0,e),r===0&&Bw(e)}};function py(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wx(){}function kA(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=qu(o);i.call(d)}}var o=l_(t,n,e,0,null,!1,!1,"",Wx);return e._reactRootContainer=o,e[Bs]=o.current,gc(e.nodeType===8?e.parentNode:e),Ri(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=qu(c);l.call(d)}}var c=fy(e,0,!1,null,null,!1,!1,"",Wx);return e._reactRootContainer=c,e[Bs]=c.current,gc(e.nodeType===8?e.parentNode:e),Ri(function(){_f(t,c,r,n)}),c}function Cf(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=qu(o);l.call(c)}}_f(t,o,e,a)}else o=kA(r,t,e,a,n);return qu(o)}Fw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ul(t.pendingLanes);r!==0&&(Og(t,r|1),rn(t,Qt()),!(mt&6)&&(el=Qt()+500,Qa()))}break;case 13:Ri(function(){var n=Vs(e,1);if(n!==null){var a=Fr();Kn(n,e,1,a)}}),hy(e,1)}};Dg=function(e){if(e.tag===13){var t=Vs(e,134217728);if(t!==null){var r=Fr();Kn(t,e,134217728,r)}hy(e,134217728)}};$w=function(e){if(e.tag===13){var t=Aa(e),r=Vs(e,t);if(r!==null){var n=Fr();Kn(r,e,t,n)}hy(e,t)}};qw=function(){return xt};Uw=function(e,t){var r=xt;try{return xt=e,t()}finally{xt=r}};Fm=function(e,t,r){switch(t){case"input":if(Am(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=gf(n);if(!a)throw Error(ve(90));vw(n),Am(n,a)}}}break;case"textarea":bw(e,r);break;case"select":t=r.value,t!=null&&So(e,!!r.multiple,t,!1)}};Ew=ly;kw=Ri;var PA={usingClientEntryPoint:!1,Events:[zc,yo,gf,Sw,Cw,ly]},Pl={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TA={bundleType:Pl.bundleType,version:Pl.version,rendererPackageName:Pl.rendererPackageName,rendererConfig:Pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Aw(e),e===null?null:e.stateNode},findFiberByHostInstance:Pl.findFiberByHostInstance||EA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Td.isDisabled&&Td.supportsFiber)try{ff=Td.inject(TA),ys=Td}catch{}}vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PA;vn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!py(t))throw Error(ve(200));return CA(e,t,null,r)};vn.createRoot=function(e,t){if(!py(e))throw Error(ve(299));var r=!1,n="",a=c_;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=fy(e,1,!1,null,null,r,!1,n,a),e[Bs]=t.current,gc(e.nodeType===8?e.parentNode:e),new my(t)};vn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ve(188)):(e=Object.keys(e).join(","),Error(ve(268,e)));return e=Aw(t),e=e===null?null:e.stateNode,e};vn.flushSync=function(e){return Ri(e)};vn.hydrate=function(e,t,r){if(!Sf(t))throw Error(ve(200));return Cf(null,e,t,!0,r)};vn.hydrateRoot=function(e,t,r){if(!py(e))throw Error(ve(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=c_;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=l_(t,null,e,1,r??null,a,!1,i,o),e[Bs]=t.current,gc(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Nf(t)};vn.render=function(e,t,r){if(!Sf(t))throw Error(ve(200));return Cf(null,e,t,!1,r)};vn.unmountComponentAtNode=function(e){if(!Sf(e))throw Error(ve(40));return e._reactRootContainer?(Ri(function(){Cf(null,null,e,!1,function(){e._reactRootContainer=null,e[Bs]=null})}),!0):!1};vn.unstable_batchedUpdates=ly;vn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Sf(r))throw Error(ve(200));if(e==null||e._reactInternals===void 0)throw Error(ve(38));return Cf(e,t,r,!1,n)};vn.version="18.3.1-next-f1338f8080-20240426";function d_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d_)}catch(e){console.error(e)}}d_(),dw.exports=vn;var Ka=dw.exports;const u_=bg(Ka);var f_,Hx=Ka;f_=Hx.createRoot,Hx.hydrateRoot;const AA=1,IA=1e6;let Wh=0;function RA(){return Wh=(Wh+1)%Number.MAX_SAFE_INTEGER,Wh.toString()}const Hh=new Map,Qx=e=>{if(Hh.has(e))return;const t=setTimeout(()=>{Hh.delete(e),rc({type:"REMOVE_TOAST",toastId:e})},IA);Hh.set(e,t)},OA=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,AA)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Qx(r):e.toasts.forEach(n=>{Qx(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},ou=[];let lu={toasts:[]};function rc(e){lu=OA(lu,e),ou.forEach(t=>{t(lu)})}function DA({...e}){const t=RA(),r=a=>rc({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>rc({type:"DISMISS_TOAST",toastId:t});return rc({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function Zn(){const[e,t]=h.useState(lu);return h.useEffect(()=>(ou.push(t),()=>{const r=ou.indexOf(t);r>-1&&ou.splice(r,1)}),[e]),{...e,toast:DA,dismiss:r=>rc({type:"DISMISS_TOAST",toastId:r})}}function je(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function Kx(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ws(...e){return t=>{let r=!1;const n=e.map(a=>{const i=Kx(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Kx(e[a],null)}}}}function Ke(...e){return h.useCallback(Ws(...e),e)}function MA(e,t){const r=h.createContext(t),n=i=>{const{children:o,...l}=i,c=h.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=h.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function Br(e,t=[]){let r=[];function n(i,o){const l=h.createContext(o),c=r.length;r=[...r,o];const d=f=>{var v;const{scope:m,children:p,...x}=f,g=((v=m==null?void 0:m[e])==null?void 0:v[c])||l,w=h.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:w,children:p})};d.displayName=i+"Provider";function u(f,m){var g;const p=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,x=h.useContext(p);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>h.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,LA(a,...t)]}function LA(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function $a(e){const t=$A(e),r=h.forwardRef((n,a)=>{const{children:i,...o}=n,l=h.Children.toArray(i),c=l.find(qA);if(c){const d=c.props.children,u=l.map(f=>f===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:f);return s.jsx(t,{...o,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var FA=$a("Slot");function $A(e){const t=h.forwardRef((r,n)=>{const{children:a,...i}=r;if(h.isValidElement(a)){const o=BA(a),l=UA(i,a.props);return a.type!==h.Fragment&&(l.ref=n?Ws(n,o):o),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var h_=Symbol("radix.slottable");function m_(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=h_,t}function qA(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===h_}function UA(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function BA(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ef(e){const t=e+"CollectionProvider",[r,n]=Br(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:w,children:v}=g,y=pe.useRef(null),b=pe.useRef(new Map).current;return s.jsx(a,{scope:w,itemMap:b,collectionRef:y,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=$a(l),d=pe.forwardRef((g,w)=>{const{scope:v,children:y}=g,b=i(l,v),j=Ke(w,b.collectionRef);return s.jsx(c,{ref:j,children:y})});d.displayName=l;const u=e+"CollectionItemSlot",f="data-radix-collection-item",m=$a(u),p=pe.forwardRef((g,w)=>{const{scope:v,children:y,...b}=g,j=pe.useRef(null),_=Ke(w,j),S=i(u,v);return pe.useEffect(()=>(S.itemMap.set(j,{ref:j,...b}),()=>void S.itemMap.delete(j))),s.jsx(m,{[f]:"",ref:_,children:y})});p.displayName=u;function x(g){const w=i(e+"CollectionConsumer",g);return pe.useCallback(()=>{const y=w.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((S,E)=>b.indexOf(S.ref.current)-b.indexOf(E.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:d,ItemSlot:p},x,n]}var VA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Oe=VA.reduce((e,t)=>{const r=$a(`Primitive.${t}`),n=h.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function gy(e,t){e&&Ka.flushSync(()=>e.dispatchEvent(t))}function Kt(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function zA(e,t=globalThis==null?void 0:globalThis.document){const r=Kt(e);h.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var WA="DismissableLayer",yp="dismissableLayer.update",HA="dismissableLayer.pointerDownOutside",QA="dismissableLayer.focusOutside",Gx,p_=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zi=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=h.useContext(p_),[u,f]=h.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=h.useState({}),x=Ke(t,E=>f(E)),g=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(w),y=u?g.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,j=y>=v,_=GA(E=>{const D=E.target,U=[...d.branches].some(F=>F.contains(D));!j||U||(a==null||a(E),o==null||o(E),E.defaultPrevented||l==null||l())},m),S=YA(E=>{const D=E.target;[...d.branches].some(F=>F.contains(D))||(i==null||i(E),o==null||o(E),E.defaultPrevented||l==null||l())},m);return zA(E=>{y===d.layers.size-1&&(n==null||n(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},m),h.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Gx=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Yx(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Gx)}},[u,m,r,d]),h.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Yx())},[u,d]),h.useEffect(()=>{const E=()=>p({});return document.addEventListener(yp,E),()=>document.removeEventListener(yp,E)},[]),s.jsx(Oe.div,{...c,ref:x,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:je(e.onFocusCapture,S.onFocusCapture),onBlurCapture:je(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:je(e.onPointerDownCapture,_.onPointerDownCapture)})});zi.displayName=WA;var KA="DismissableLayerBranch",g_=h.forwardRef((e,t)=>{const r=h.useContext(p_),n=h.useRef(null),a=Ke(t,n);return h.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Oe.div,{...e,ref:a})});g_.displayName=KA;function GA(e,t=globalThis==null?void 0:globalThis.document){const r=Kt(e),n=h.useRef(!1),a=h.useRef(()=>{});return h.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){y_(HA,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function YA(e,t=globalThis==null?void 0:globalThis.document){const r=Kt(e),n=h.useRef(!1);return h.useEffect(()=>{const a=i=>{i.target&&!n.current&&y_(QA,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Yx(){const e=new CustomEvent(yp);document.dispatchEvent(e)}function y_(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?gy(a,i):a.dispatchEvent(i)}var XA=zi,JA=g_,hr=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},ZA="Portal",dl=h.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=h.useState(!1);hr(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?u_.createPortal(s.jsx(Oe.div,{...n,ref:t}),o):null});dl.displayName=ZA;function eI(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var mr=e=>{const{present:t,children:r}=e,n=tI(t),a=typeof r=="function"?r({present:n.isPresent}):h.Children.only(r),i=Ke(n.ref,rI(a));return typeof r=="function"||n.isPresent?h.cloneElement(a,{ref:i}):null};mr.displayName="Presence";function tI(e){const[t,r]=h.useState(),n=h.useRef(null),a=h.useRef(e),i=h.useRef("none"),o=e?"mounted":"unmounted",[l,c]=eI(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const d=Ad(n.current);i.current=l==="mounted"?d:"none"},[l]),hr(()=>{const d=n.current,u=a.current;if(u!==e){const m=i.current,p=Ad(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&m!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),hr(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,f=p=>{const g=Ad(n.current).includes(p.animationName);if(p.target===t&&g&&(c("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=p=>{p.target===t&&(i.current=Ad(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function Ad(e){return(e==null?void 0:e.animationName)||"none"}function rI(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var nI=Sg[" useInsertionEffect ".trim().toString()]||hr;function Hs({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=sI({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const u=h.useRef(e!==void 0);h.useEffect(()=>{const f=u.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=h.useCallback(u=>{var f;if(l){const m=aI(u)?u(e):u;m!==e&&((f=o.current)==null||f.call(o,m))}else i(u)},[l,e,i,o]);return[c,d]}function sI({defaultProp:e,onChange:t}){const[r,n]=h.useState(e),a=h.useRef(r),i=h.useRef(t);return nI(()=>{i.current=t},[t]),h.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function aI(e){return typeof e=="function"}var v_=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),iI="VisuallyHidden",kf=h.forwardRef((e,t)=>s.jsx(Oe.span,{...e,ref:t,style:{...v_,...e.style}}));kf.displayName=iI;var oI=kf,yy="ToastProvider",[vy,lI,cI]=Ef("Toast"),[x_,mV]=Br("Toast",[cI]),[dI,Pf]=x_(yy),b_=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=h.useState(null),[d,u]=h.useState(0),f=h.useRef(!1),m=h.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${yy}\`. Expected non-empty \`string\`.`),s.jsx(vy.Provider,{scope:t,children:s.jsx(dI,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:h.useCallback(()=>u(p=>p+1),[]),onToastRemove:h.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};b_.displayName=yy;var w_="ToastViewport",uI=["F8"],vp="toast.viewportPause",xp="toast.viewportResume",j_=h.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=uI,label:a="Notifications ({hotkey})",...i}=e,o=Pf(w_,r),l=lI(r),c=h.useRef(null),d=h.useRef(null),u=h.useRef(null),f=h.useRef(null),m=Ke(t,f,o.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;h.useEffect(()=>{const w=v=>{var b;n.length!==0&&n.every(j=>v[j]||v.code===j)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n]),h.useEffect(()=>{const w=c.current,v=f.current;if(x&&w&&v){const y=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(vp);v.dispatchEvent(S),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(xp);v.dispatchEvent(S),o.isClosePausedRef.current=!1}},j=S=>{!w.contains(S.relatedTarget)&&b()},_=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",y),w.addEventListener("focusout",j),w.addEventListener("pointermove",y),w.addEventListener("pointerleave",_),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",y),w.removeEventListener("focusout",j),w.removeEventListener("pointermove",y),w.removeEventListener("pointerleave",_),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[x,o.isClosePausedRef]);const g=h.useCallback(({tabbingDirection:w})=>{const y=l().map(b=>{const j=b.ref.current,_=[j,...NI(j)];return w==="forwards"?_:_.reverse()});return(w==="forwards"?y.reverse():y).flat()},[l]);return h.useEffect(()=>{const w=f.current;if(w){const v=y=>{var _,S,E;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const D=document.activeElement,U=y.shiftKey;if(y.target===w&&U){(_=d.current)==null||_.focus();return}const $=g({tabbingDirection:U?"backwards":"forwards"}),R=$.findIndex(I=>I===D);Qh($.slice(R+1))?y.preventDefault():U?(S=d.current)==null||S.focus():(E=u.current)==null||E.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[l,g]),s.jsxs(JA,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&s.jsx(bp,{ref:d,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});Qh(w)}}),s.jsx(vy.Slot,{scope:r,children:s.jsx(Oe.ol,{tabIndex:-1,...i,ref:m})}),x&&s.jsx(bp,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});Qh(w)}})]})});j_.displayName=w_;var __="ToastFocusProxy",bp=h.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=Pf(__,r);return s.jsx(kf,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});bp.displayName=__;var Hc="Toast",fI="toast.swipeStart",hI="toast.swipeMove",mI="toast.swipeCancel",pI="toast.swipeEnd",N_=h.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=Hs({prop:n,defaultProp:a??!0,onChange:i,caller:Hc});return s.jsx(mr,{present:r||l,children:s.jsx(vI,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Kt(e.onPause),onResume:Kt(e.onResume),onSwipeStart:je(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:je(e.onSwipeMove,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:je(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:je(e.onSwipeEnd,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});N_.displayName=Hc;var[gI,yI]=x_(Hc,{onClose(){}}),vI=h.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...x}=e,g=Pf(Hc,r),[w,v]=h.useState(null),y=Ke(t,I=>v(I)),b=h.useRef(null),j=h.useRef(null),_=a||g.duration,S=h.useRef(0),E=h.useRef(_),D=h.useRef(0),{onToastAdd:U,onToastRemove:F}=g,L=Kt(()=>{var C;(w==null?void 0:w.contains(document.activeElement))&&((C=g.viewport)==null||C.focus()),o()}),$=h.useCallback(I=>{!I||I===1/0||(window.clearTimeout(D.current),S.current=new Date().getTime(),D.current=window.setTimeout(L,I))},[L]);h.useEffect(()=>{const I=g.viewport;if(I){const C=()=>{$(E.current),d==null||d()},T=()=>{const re=new Date().getTime()-S.current;E.current=E.current-re,window.clearTimeout(D.current),c==null||c()};return I.addEventListener(vp,T),I.addEventListener(xp,C),()=>{I.removeEventListener(vp,T),I.removeEventListener(xp,C)}}},[g.viewport,_,c,d,$]),h.useEffect(()=>{i&&!g.isClosePausedRef.current&&$(_)},[i,_,g.isClosePausedRef,$]),h.useEffect(()=>(U(),()=>F()),[U,F]);const R=h.useMemo(()=>w?A_(w):null,[w]);return g.viewport?s.jsxs(s.Fragment,{children:[R&&s.jsx(xI,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),s.jsx(gI,{scope:r,onClose:L,children:Ka.createPortal(s.jsx(vy.ItemSlot,{scope:r,children:s.jsx(XA,{asChild:!0,onEscapeKeyDown:je(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||L(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Oe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:je(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:je(e.onPointerDown,I=>{I.button===0&&(b.current={x:I.clientX,y:I.clientY})}),onPointerMove:je(e.onPointerMove,I=>{if(!b.current)return;const C=I.clientX-b.current.x,T=I.clientY-b.current.y,re=!!j.current,K=["left","right"].includes(g.swipeDirection),z=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ae=K?z(0,C):0,ge=K?0:z(0,T),W=I.pointerType==="touch"?10:2,M={x:ae,y:ge},Y={originalEvent:I,delta:M};re?(j.current=M,Id(hI,f,Y,{discrete:!1})):Xx(M,g.swipeDirection,W)?(j.current=M,Id(fI,u,Y,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(C)>W||Math.abs(T)>W)&&(b.current=null)}),onPointerUp:je(e.onPointerUp,I=>{const C=j.current,T=I.target;if(T.hasPointerCapture(I.pointerId)&&T.releasePointerCapture(I.pointerId),j.current=null,b.current=null,C){const re=I.currentTarget,K={originalEvent:I,delta:C};Xx(C,g.swipeDirection,g.swipeThreshold)?Id(pI,p,K,{discrete:!0}):Id(mI,m,K,{discrete:!0}),re.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),xI=e=>{const{__scopeToast:t,children:r,...n}=e,a=Pf(Hc,t),[i,o]=h.useState(!1),[l,c]=h.useState(!1);return jI(()=>o(!0)),h.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(dl,{asChild:!0,children:s.jsx(kf,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},bI="ToastTitle",S_=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Oe.div,{...n,ref:t})});S_.displayName=bI;var wI="ToastDescription",C_=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Oe.div,{...n,ref:t})});C_.displayName=wI;var E_="ToastAction",k_=h.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(T_,{altText:r,asChild:!0,children:s.jsx(xy,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${E_}\`. Expected non-empty \`string\`.`),null)});k_.displayName=E_;var P_="ToastClose",xy=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=yI(P_,r);return s.jsx(T_,{asChild:!0,children:s.jsx(Oe.button,{type:"button",...n,ref:t,onClick:je(e.onClick,a.onClose)})})});xy.displayName=P_;var T_=h.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Oe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function A_(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),_I(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...A_(n))}}),t}function Id(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?gy(a,i):a.dispatchEvent(i)}var Xx=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function jI(e=()=>{}){const t=Kt(e);hr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function _I(e){return e.nodeType===e.ELEMENT_NODE}function NI(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Qh(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var SI=b_,I_=j_,R_=N_,O_=S_,D_=C_,M_=k_,L_=xy;function F_(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=F_(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function $_(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=F_(e))&&(n&&(n+=" "),n+=t);return n}const Jx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Zx=$_,Qc=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Zx(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],f=i==null?void 0:i[d];if(u===null)return null;const m=Jx(u)||Jx(f);return a[d][m]}),l=r&&Object.entries(r).reduce((d,u)=>{let[f,m]=u;return m===void 0||(d[f]=m),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:f,className:m,...p}=u;return Object.entries(p).every(x=>{let[g,w]=x;return Array.isArray(w)?w.includes({...i,...l}[g]):{...i,...l}[g]===w})?[...d,f,m]:d},[]);return Zx(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),q_=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>h.createElement("svg",{ref:c,...EI,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:q_("lucide",a),...l},[...o.map(([d,u])=>h.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=(e,t)=>{const r=h.forwardRef(({className:n,...a},i)=>h.createElement(kI,{ref:i,iconNode:t,className:q_(`lucide-${CI(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=Ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=Ge("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=Ge("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=Ge("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=Ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=Ge("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=Ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=Ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=Ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=Ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=Ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=Ge("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=Ge("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=Ge("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=Ge("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=Ge("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=Ge("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=Ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=Ge("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=Ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=Ge("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=Ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=Ge("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=Ge("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=Ge("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Ge("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=Ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=Ge("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=Ge("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Ge("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=Ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=Ge("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=Ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=Ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=Ge("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=Ge("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=Ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=Ge("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=Ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=Ge("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=Ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),jy="-",$I=e=>{const t=UI(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(jy);return l[0]===""&&l.length!==1&&l.shift(),H_(l,t)||qI(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},H_=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?H_(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(jy);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},ab=/^\[(.+)\]$/,qI=e=>{if(ab.test(e)){const t=ab.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},UI=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return VI(Object.entries(e.classGroups),r).forEach(([i,o])=>{_p(o,n,i,t)}),n},_p=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:ib(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(BI(a)){_p(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{_p(o,ib(t,i),r,n)})})},ib=(e,t)=>{let r=e;return t.split(jy).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},BI=e=>e.isThemeGetter,VI=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,zI=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},Q_="!",WI=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,f;for(let w=0;w<l.length;w++){let v=l[w];if(d===0){if(v===a&&(n||l.slice(w,w+i)===t)){c.push(l.slice(u,w)),u=w+i;continue}if(v==="/"){f=w;continue}}v==="["?d++:v==="]"&&d--}const m=c.length===0?l:l.substring(u),p=m.startsWith(Q_),x=p?m.substring(1):m,g=f&&f>u?f-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},HI=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},QI=e=>({cache:zI(e.cacheSize),parseClassName:WI(e),...$I(e)}),KI=/\s+/,GI=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(KI);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=r(d);let x=!!p,g=n(x?m.substring(0,p):m);if(!g){if(!x){l=d+(l.length>0?" "+l:l);continue}if(g=n(m),!g){l=d+(l.length>0?" "+l:l);continue}x=!1}const w=HI(u).join(":"),v=f?w+Q_:w,y=v+g;if(i.includes(y))continue;i.push(y);const b=a(g,x);for(let j=0;j<b.length;++j){const _=b[j];i.push(v+_)}l=d+(l.length>0?" "+l:l)}return l};function YI(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=K_(t))&&(n&&(n+=" "),n+=r);return n}const K_=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=K_(e[n]))&&(r&&(r+=" "),r+=t);return r};function XI(e,...t){let r,n,a,i=o;function o(c){const d=t.reduce((u,f)=>f(u),e());return r=QI(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=GI(c,r);return a(c,u),u}return function(){return i(YI.apply(null,arguments))}}const Ct=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},G_=/^\[(?:([a-z-]+):)?(.+)\]$/i,JI=/^\d+\/\d+$/,ZI=new Set(["px","full","screen"]),eR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,nR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ns=e=>Ao(e)||ZI.has(e)||JI.test(e),ea=e=>ul(e,"length",fR),Ao=e=>!!e&&!Number.isNaN(Number(e)),Gh=e=>ul(e,"number",Ao),Tl=e=>!!e&&Number.isInteger(Number(e)),aR=e=>e.endsWith("%")&&Ao(e.slice(0,-1)),Ze=e=>G_.test(e),ta=e=>eR.test(e),iR=new Set(["length","size","percentage"]),oR=e=>ul(e,iR,Y_),lR=e=>ul(e,"position",Y_),cR=new Set(["image","url"]),dR=e=>ul(e,cR,mR),uR=e=>ul(e,"",hR),Al=()=>!0,ul=(e,t,r)=>{const n=G_.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},fR=e=>tR.test(e)&&!rR.test(e),Y_=()=>!1,hR=e=>nR.test(e),mR=e=>sR.test(e),pR=()=>{const e=Ct("colors"),t=Ct("spacing"),r=Ct("blur"),n=Ct("brightness"),a=Ct("borderColor"),i=Ct("borderRadius"),o=Ct("borderSpacing"),l=Ct("borderWidth"),c=Ct("contrast"),d=Ct("grayscale"),u=Ct("hueRotate"),f=Ct("invert"),m=Ct("gap"),p=Ct("gradientColorStops"),x=Ct("gradientColorStopPositions"),g=Ct("inset"),w=Ct("margin"),v=Ct("opacity"),y=Ct("padding"),b=Ct("saturate"),j=Ct("scale"),_=Ct("sepia"),S=Ct("skew"),E=Ct("space"),D=Ct("translate"),U=()=>["auto","contain","none"],F=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",Ze,t],$=()=>[Ze,t],R=()=>["",Ns,ea],I=()=>["auto",Ao,Ze],C=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],T=()=>["solid","dashed","dotted","double","none"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",Ze],ae=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ge=()=>[Ao,Ze];return{cacheSize:500,separator:":",theme:{colors:[Al],spacing:[Ns,ea],blur:["none","",ta,Ze],brightness:ge(),borderColor:[e],borderRadius:["none","","full",ta,Ze],borderSpacing:$(),borderWidth:R(),contrast:ge(),grayscale:z(),hueRotate:ge(),invert:z(),gap:$(),gradientColorStops:[e],gradientColorStopPositions:[aR,ea],inset:L(),margin:L(),opacity:ge(),padding:$(),saturate:ge(),scale:ge(),sepia:z(),skew:ge(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",Ze]}],container:["container"],columns:[{columns:[ta]}],"break-after":[{"break-after":ae()}],"break-before":[{"break-before":ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...C(),Ze]}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Tl,Ze]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ze]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Tl,Ze]}],"grid-cols":[{"grid-cols":[Al]}],"col-start-end":[{col:["auto",{span:["full",Tl,Ze]},Ze]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[Al]}],"row-start-end":[{row:["auto",{span:[Tl,Ze]},Ze]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ze]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ze]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ze,t]}],"min-w":[{"min-w":[Ze,t,"min","max","fit"]}],"max-w":[{"max-w":[Ze,t,"none","full","min","max","fit","prose",{screen:[ta]},ta]}],h:[{h:[Ze,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ze,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ze,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ze,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ta,ea]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Gh]}],"font-family":[{font:[Al]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ze]}],"line-clamp":[{"line-clamp":["none",Ao,Gh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ns,Ze]}],"list-image":[{"list-image":["none",Ze]}],"list-style-type":[{list:["none","disc","decimal",Ze]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...T(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ns,ea]}],"underline-offset":[{"underline-offset":["auto",Ns,Ze]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...C(),lR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",oR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},dR]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...T(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:T()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...T()]}],"outline-offset":[{"outline-offset":[Ns,Ze]}],"outline-w":[{outline:[Ns,ea]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Ns,ea]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ta,uR]}],"shadow-color":[{shadow:[Al]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...re(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":re()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ta,Ze]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ze]}],duration:[{duration:ge()}],ease:[{ease:["linear","in","out","in-out",Ze]}],delay:[{delay:ge()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ze]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Tl,Ze]}],"translate-x":[{"translate-x":[D]}],"translate-y":[{"translate-y":[D]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ze]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ze]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ze]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ns,ea,Gh]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},gR=XI(pR);function Ee(...e){return gR($_(e))}const yR=SI,X_=h.forwardRef(({className:e,...t},r)=>s.jsx(I_,{ref:r,className:Ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));X_.displayName=I_.displayName;const vR=Qc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),J_=h.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(R_,{ref:n,className:Ee(vR({variant:t}),e),...r}));J_.displayName=R_.displayName;const xR=h.forwardRef(({className:e,...t},r)=>s.jsx(M_,{ref:r,className:Ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));xR.displayName=M_.displayName;const Z_=h.forwardRef(({className:e,...t},r)=>s.jsx(L_,{ref:r,className:Ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(W_,{className:"h-4 w-4"})}));Z_.displayName=L_.displayName;const eN=h.forwardRef(({className:e,...t},r)=>s.jsx(O_,{ref:r,className:Ee("text-sm font-semibold",e),...t}));eN.displayName=O_.displayName;const tN=h.forwardRef(({className:e,...t},r)=>s.jsx(D_,{ref:r,className:Ee("text-sm opacity-90",e),...t}));tN.displayName=D_.displayName;function bR(){const{toasts:e}=Zn();return s.jsxs(yR,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(J_,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(eN,{children:r}),n&&s.jsx(tN,{children:n})]}),a,s.jsx(Z_,{})]},t)}),s.jsx(X_,{})]})}var ob=["light","dark"],wR="(prefers-color-scheme: dark)",jR=h.createContext(void 0),_R={setTheme:e=>{},themes:[]},NR=()=>{var e;return(e=h.useContext(jR))!=null?e:_R};h.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let d=i==="system",u=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=a?ob.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,g=!1,w=!0)=>{let v=o?o[x]:x,y=g?x+"|| ''":`'${v}'`,b="";return a&&w&&!g&&ob.includes(x)&&(b+=`d.style.colorScheme = '${x}';`),r==="class"?g||v?b+=`c.add(${y})`:b+="null":v&&(b+=`d[s](n,${y})`),b},p=e?`!function(){${u}${m(e)}}()`:n?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${wR}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${d?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return h.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var SR=e=>{switch(e){case"success":return kR;case"info":return TR;case"warning":return PR;case"error":return AR;default:return null}},CR=Array(12).fill(0),ER=({visible:e,className:t})=>pe.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},pe.createElement("div",{className:"sonner-spinner"},CR.map((r,n)=>pe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),kR=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),PR=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),TR=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),AR=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),IR=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},pe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),pe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),RR=()=>{let[e,t]=pe.useState(document.hidden);return pe.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Np=1,OR=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Np++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],pe.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(MR(c)&&!c.ok){a=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,u=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:d,description:u})}else if(t.success!==void 0){a=!1;let d=typeof t.success=="function"?await t.success(c):t.success,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:d,description:u})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let d=typeof t.error=="function"?await t.error(c):t.error,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:d,description:u})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>o.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Np++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Qr=new OR,DR=(e,t)=>{let r=(t==null?void 0:t.id)||Np++;return Qr.addToast({title:e,...t,id:r}),r},MR=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",LR=DR,FR=()=>Qr.toasts,$R=()=>Qr.getActiveToasts();Object.assign(LR,{success:Qr.success,info:Qr.info,warning:Qr.warning,error:Qr.error,custom:Qr.custom,message:Qr.message,promise:Qr.promise,dismiss:Qr.dismiss,loading:Qr.loading},{getHistory:FR,getToasts:$R});function qR(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}qR(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Rd(e){return e.label!==void 0}var UR=3,BR="32px",VR="16px",lb=4e3,zR=356,WR=14,HR=20,QR=200;function Dn(...e){return e.filter(Boolean).join(" ")}function KR(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var GR=e=>{var t,r,n,a,i,o,l,c,d,u,f;let{invert:m,toast:p,unstyled:x,interacting:g,setHeights:w,visibleToasts:v,heights:y,index:b,toasts:j,expanded:_,removeToast:S,defaultRichColors:E,closeButton:D,style:U,cancelButtonStyle:F,actionButtonStyle:L,className:$="",descriptionClassName:R="",duration:I,position:C,gap:T,loadingIcon:re,expandByDefault:K,classNames:z,icons:ae,closeButtonAriaLabel:ge="Close toast",pauseWhenPageIsHidden:W}=e,[M,Y]=pe.useState(null),[X,ie]=pe.useState(null),[ne,O]=pe.useState(!1),[ee,de]=pe.useState(!1),[ce,me]=pe.useState(!1),[He,ut]=pe.useState(!1),[J,Ne]=pe.useState(!1),[Ye,Me]=pe.useState(0),[dt,N]=pe.useState(0),P=pe.useRef(p.duration||I||lb),V=pe.useRef(null),se=pe.useRef(null),te=b===0,oe=b+1<=v,fe=p.type,De=p.dismissible!==!1,Be=p.className||"",Qe=p.descriptionClassName||"",jt=pe.useMemo(()=>y.findIndex(Ie=>Ie.toastId===p.id)||0,[y,p.id]),bt=pe.useMemo(()=>{var Ie;return(Ie=p.closeButton)!=null?Ie:D},[p.closeButton,D]),Wt=pe.useMemo(()=>p.duration||I||lb,[p.duration,I]),lt=pe.useRef(0),st=pe.useRef(0),on=pe.useRef(0),$e=pe.useRef(null),[St,ft]=C.split("-"),Pr=pe.useMemo(()=>y.reduce((Ie,We,Xe)=>Xe>=jt?Ie:Ie+We.height,0),[y,jt]),Ue=RR(),Lt=p.invert||m,Ft=fe==="loading";st.current=pe.useMemo(()=>jt*T+Pr,[jt,Pr]),pe.useEffect(()=>{P.current=Wt},[Wt]),pe.useEffect(()=>{O(!0)},[]),pe.useEffect(()=>{let Ie=se.current;if(Ie){let We=Ie.getBoundingClientRect().height;return N(We),w(Xe=>[{toastId:p.id,height:We,position:p.position},...Xe]),()=>w(Xe=>Xe.filter(It=>It.toastId!==p.id))}},[w,p.id]),pe.useLayoutEffect(()=>{if(!ne)return;let Ie=se.current,We=Ie.style.height;Ie.style.height="auto";let Xe=Ie.getBoundingClientRect().height;Ie.style.height=We,N(Xe),w(It=>It.find(wt=>wt.toastId===p.id)?It.map(wt=>wt.toastId===p.id?{...wt,height:Xe}:wt):[{toastId:p.id,height:Xe,position:p.position},...It])},[ne,p.title,p.description,w,p.id]);let At=pe.useCallback(()=>{de(!0),Me(st.current),w(Ie=>Ie.filter(We=>We.toastId!==p.id)),setTimeout(()=>{S(p)},QR)},[p,S,w,st]);pe.useEffect(()=>{if(p.promise&&fe==="loading"||p.duration===1/0||p.type==="loading")return;let Ie;return _||g||W&&Ue?(()=>{if(on.current<lt.current){let We=new Date().getTime()-lt.current;P.current=P.current-We}on.current=new Date().getTime()})():P.current!==1/0&&(lt.current=new Date().getTime(),Ie=setTimeout(()=>{var We;(We=p.onAutoClose)==null||We.call(p,p),At()},P.current)),()=>clearTimeout(Ie)},[_,g,p,fe,W,Ue,At]),pe.useEffect(()=>{p.delete&&At()},[At,p.delete]);function bn(){var Ie,We,Xe;return ae!=null&&ae.loading?pe.createElement("div",{className:Dn(z==null?void 0:z.loader,(Ie=p==null?void 0:p.classNames)==null?void 0:Ie.loader,"sonner-loader"),"data-visible":fe==="loading"},ae.loading):re?pe.createElement("div",{className:Dn(z==null?void 0:z.loader,(We=p==null?void 0:p.classNames)==null?void 0:We.loader,"sonner-loader"),"data-visible":fe==="loading"},re):pe.createElement(ER,{className:Dn(z==null?void 0:z.loader,(Xe=p==null?void 0:p.classNames)==null?void 0:Xe.loader),visible:fe==="loading"})}return pe.createElement("li",{tabIndex:0,ref:se,className:Dn($,Be,z==null?void 0:z.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,z==null?void 0:z.default,z==null?void 0:z[fe],(r=p==null?void 0:p.classNames)==null?void 0:r[fe]),"data-sonner-toast":"","data-rich-colors":(n=p.richColors)!=null?n:E,"data-styled":!(p.jsx||p.unstyled||x),"data-mounted":ne,"data-promise":!!p.promise,"data-swiped":J,"data-removed":ee,"data-visible":oe,"data-y-position":St,"data-x-position":ft,"data-index":b,"data-front":te,"data-swiping":ce,"data-dismissible":De,"data-type":fe,"data-invert":Lt,"data-swipe-out":He,"data-swipe-direction":X,"data-expanded":!!(_||K&&ne),style:{"--index":b,"--toasts-before":b,"--z-index":j.length-b,"--offset":`${ee?Ye:st.current}px`,"--initial-height":K?"auto":`${dt}px`,...U,...p.style},onDragEnd:()=>{me(!1),Y(null),$e.current=null},onPointerDown:Ie=>{Ft||!De||(V.current=new Date,Me(st.current),Ie.target.setPointerCapture(Ie.pointerId),Ie.target.tagName!=="BUTTON"&&(me(!0),$e.current={x:Ie.clientX,y:Ie.clientY}))},onPointerUp:()=>{var Ie,We,Xe,It;if(He||!De)return;$e.current=null;let wt=Number(((Ie=se.current)==null?void 0:Ie.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),pr=Number(((We=se.current)==null?void 0:We.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),wr=new Date().getTime()-((Xe=V.current)==null?void 0:Xe.getTime()),Ve=M==="x"?wt:pr,rt=Math.abs(Ve)/wr;if(Math.abs(Ve)>=HR||rt>.11){Me(st.current),(It=p.onDismiss)==null||It.call(p,p),ie(M==="x"?wt>0?"right":"left":pr>0?"down":"up"),At(),ut(!0),Ne(!1);return}me(!1),Y(null)},onPointerMove:Ie=>{var We,Xe,It,wt;if(!$e.current||!De||((We=window.getSelection())==null?void 0:We.toString().length)>0)return;let pr=Ie.clientY-$e.current.y,wr=Ie.clientX-$e.current.x,Ve=(Xe=e.swipeDirections)!=null?Xe:KR(C);!M&&(Math.abs(wr)>1||Math.abs(pr)>1)&&Y(Math.abs(wr)>Math.abs(pr)?"x":"y");let rt={x:0,y:0};M==="y"?(Ve.includes("top")||Ve.includes("bottom"))&&(Ve.includes("top")&&pr<0||Ve.includes("bottom")&&pr>0)&&(rt.y=pr):M==="x"&&(Ve.includes("left")||Ve.includes("right"))&&(Ve.includes("left")&&wr<0||Ve.includes("right")&&wr>0)&&(rt.x=wr),(Math.abs(rt.x)>0||Math.abs(rt.y)>0)&&Ne(!0),(It=se.current)==null||It.style.setProperty("--swipe-amount-x",`${rt.x}px`),(wt=se.current)==null||wt.style.setProperty("--swipe-amount-y",`${rt.y}px`)}},bt&&!p.jsx?pe.createElement("button",{"aria-label":ge,"data-disabled":Ft,"data-close-button":!0,onClick:Ft||!De?()=>{}:()=>{var Ie;At(),(Ie=p.onDismiss)==null||Ie.call(p,p)},className:Dn(z==null?void 0:z.closeButton,(a=p==null?void 0:p.classNames)==null?void 0:a.closeButton)},(i=ae==null?void 0:ae.close)!=null?i:IR):null,p.jsx||h.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:pe.createElement(pe.Fragment,null,fe||p.icon||p.promise?pe.createElement("div",{"data-icon":"",className:Dn(z==null?void 0:z.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||bn():null,p.type!=="loading"?p.icon||(ae==null?void 0:ae[fe])||SR(fe):null):null,pe.createElement("div",{"data-content":"",className:Dn(z==null?void 0:z.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},pe.createElement("div",{"data-title":"",className:Dn(z==null?void 0:z.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?pe.createElement("div",{"data-description":"",className:Dn(R,Qe,z==null?void 0:z.description,(d=p==null?void 0:p.classNames)==null?void 0:d.description)},typeof p.description=="function"?p.description():p.description):null),h.isValidElement(p.cancel)?p.cancel:p.cancel&&Rd(p.cancel)?pe.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||F,onClick:Ie=>{var We,Xe;Rd(p.cancel)&&De&&((Xe=(We=p.cancel).onClick)==null||Xe.call(We,Ie),At())},className:Dn(z==null?void 0:z.cancelButton,(u=p==null?void 0:p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,h.isValidElement(p.action)?p.action:p.action&&Rd(p.action)?pe.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||L,onClick:Ie=>{var We,Xe;Rd(p.action)&&((Xe=(We=p.action).onClick)==null||Xe.call(We,Ie),!Ie.defaultPrevented&&At())},className:Dn(z==null?void 0:z.actionButton,(f=p==null?void 0:p.classNames)==null?void 0:f.actionButton)},p.action.label):null))};function cb(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function YR(e,t){let r={};return[e,t].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?VR:BR;function c(d){["top","right","bottom","left"].forEach(u=>{r[`${o}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${o}-${d}`]=l:r[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),r}var XR=h.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:f,duration:m,style:p,visibleToasts:x=UR,toastOptions:g,dir:w=cb(),gap:v=WR,loadingIcon:y,icons:b,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:_}=e,[S,E]=pe.useState([]),D=pe.useMemo(()=>Array.from(new Set([n].concat(S.filter(W=>W.position).map(W=>W.position)))),[S,n]),[U,F]=pe.useState([]),[L,$]=pe.useState(!1),[R,I]=pe.useState(!1),[C,T]=pe.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),re=pe.useRef(null),K=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),z=pe.useRef(null),ae=pe.useRef(!1),ge=pe.useCallback(W=>{E(M=>{var Y;return(Y=M.find(X=>X.id===W.id))!=null&&Y.delete||Qr.dismiss(W.id),M.filter(({id:X})=>X!==W.id)})},[]);return pe.useEffect(()=>Qr.subscribe(W=>{if(W.dismiss){E(M=>M.map(Y=>Y.id===W.id?{...Y,delete:!0}:Y));return}setTimeout(()=>{u_.flushSync(()=>{E(M=>{let Y=M.findIndex(X=>X.id===W.id);return Y!==-1?[...M.slice(0,Y),{...M[Y],...W},...M.slice(Y+1)]:[W,...M]})})})}),[]),pe.useEffect(()=>{if(u!=="system"){T(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?T("dark"):T("light")),typeof window>"u")return;let W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:M})=>{T(M?"dark":"light")})}catch{W.addListener(({matches:Y})=>{try{T(Y?"dark":"light")}catch(X){console.error(X)}})}},[u]),pe.useEffect(()=>{S.length<=1&&$(!1)},[S]),pe.useEffect(()=>{let W=M=>{var Y,X;a.every(ie=>M[ie]||M.code===ie)&&($(!0),(Y=re.current)==null||Y.focus()),M.code==="Escape"&&(document.activeElement===re.current||(X=re.current)!=null&&X.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[a]),pe.useEffect(()=>{if(re.current)return()=>{z.current&&(z.current.focus({preventScroll:!0}),z.current=null,ae.current=!1)}},[re.current]),pe.createElement("section",{ref:t,"aria-label":`${j} ${K}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},D.map((W,M)=>{var Y;let[X,ie]=W.split("-");return S.length?pe.createElement("ol",{key:W,dir:w==="auto"?cb():w,tabIndex:-1,ref:re,className:l,"data-sonner-toaster":!0,"data-theme":C,"data-y-position":X,"data-lifted":L&&S.length>1&&!i,"data-x-position":ie,style:{"--front-toast-height":`${((Y=U[0])==null?void 0:Y.height)||0}px`,"--width":`${zR}px`,"--gap":`${v}px`,...p,...YR(c,d)},onBlur:ne=>{ae.current&&!ne.currentTarget.contains(ne.relatedTarget)&&(ae.current=!1,z.current&&(z.current.focus({preventScroll:!0}),z.current=null))},onFocus:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||ae.current||(ae.current=!0,z.current=ne.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{R||$(!1)},onDragEnd:()=>$(!1),onPointerDown:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},S.filter(ne=>!ne.position&&M===0||ne.position===W).map((ne,O)=>{var ee,de;return pe.createElement(GR,{key:ne.id,icons:b,index:O,toast:ne,defaultRichColors:f,duration:(ee=g==null?void 0:g.duration)!=null?ee:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:x,closeButton:(de=g==null?void 0:g.closeButton)!=null?de:o,interacting:R,position:W,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ge,toasts:S.filter(ce=>ce.position==ne.position),heights:U.filter(ce=>ce.position==ne.position),setHeights:F,expandByDefault:i,gap:v,loadingIcon:y,expanded:L,pauseWhenPageIsHidden:_,swipeDirections:e.swipeDirections})})):null}))});const JR=({...e})=>{const{theme:t="system"}=NR();return s.jsx(XR,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var ZR=Sg[" useId ".trim().toString()]||(()=>{}),e2=0;function xr(e){const[t,r]=h.useState(ZR());return hr(()=>{r(n=>n??String(e2++))},[e]),t?`radix-${t}`:""}const t2=["top","right","bottom","left"],Ba=Math.min,cn=Math.max,Bu=Math.round,Od=Math.floor,xs=e=>({x:e,y:e}),r2={left:"right",right:"left",bottom:"top",top:"bottom"},n2={start:"end",end:"start"};function Sp(e,t,r){return cn(e,Ba(t,r))}function Ks(e,t){return typeof e=="function"?e(t):e}function Gs(e){return e.split("-")[0]}function fl(e){return e.split("-")[1]}function _y(e){return e==="x"?"y":"x"}function Ny(e){return e==="y"?"height":"width"}const s2=new Set(["top","bottom"]);function ps(e){return s2.has(Gs(e))?"y":"x"}function Sy(e){return _y(ps(e))}function a2(e,t,r){r===void 0&&(r=!1);const n=fl(e),a=Sy(e),i=Ny(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Vu(o)),[o,Vu(o)]}function i2(e){const t=Vu(e);return[Cp(e),t,Cp(t)]}function Cp(e){return e.replace(/start|end/g,t=>n2[t])}const db=["left","right"],ub=["right","left"],o2=["top","bottom"],l2=["bottom","top"];function c2(e,t,r){switch(e){case"top":case"bottom":return r?t?ub:db:t?db:ub;case"left":case"right":return t?o2:l2;default:return[]}}function d2(e,t,r,n){const a=fl(e);let i=c2(Gs(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Cp)))),i}function Vu(e){return e.replace(/left|right|bottom|top/g,t=>r2[t])}function u2(e){return{top:0,right:0,bottom:0,left:0,...e}}function rN(e){return typeof e!="number"?u2(e):{top:e,right:e,bottom:e,left:e}}function zu(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function fb(e,t,r){let{reference:n,floating:a}=e;const i=ps(t),o=Sy(t),l=Ny(o),c=Gs(t),d=i==="y",u=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,m=n[l]/2-a[l]/2;let p;switch(c){case"top":p={x:u,y:n.y-a.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-a.width,y:f};break;default:p={x:n.x,y:n.y}}switch(fl(t)){case"start":p[o]-=m*(r&&d?-1:1);break;case"end":p[o]+=m*(r&&d?-1:1);break}return p}const f2=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:f}=fb(d,n,c),m=n,p={},x=0;for(let g=0;g<l.length;g++){const{name:w,fn:v}=l[g],{x:y,y:b,data:j,reset:_}=await v({x:u,y:f,initialPlacement:n,placement:m,strategy:a,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});u=y??u,f=b??f,p={...p,[w]:{...p[w],...j}},_&&x<=50&&(x++,typeof _=="object"&&(_.placement&&(m=_.placement),_.rects&&(d=_.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):_.rects),{x:u,y:f}=fb(d,m,c)),g=-1)}return{x:u,y:f,placement:m,strategy:a,middlewareData:p}};async function Ec(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=Ks(t,e),x=rN(p),w=l[m?f==="floating"?"reference":"floating":f],v=zu(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(w)))==null||r?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),y=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},_=zu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:b,strategy:c}):y);return{top:(v.top-_.top+x.top)/j.y,bottom:(_.bottom-v.bottom+x.bottom)/j.y,left:(v.left-_.left+x.left)/j.x,right:(_.right-v.right+x.right)/j.x}}const h2=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=Ks(e,t)||{};if(d==null)return{};const f=rN(u),m={x:r,y:n},p=Sy(a),x=Ny(p),g=await o.getDimensions(d),w=p==="y",v=w?"top":"left",y=w?"bottom":"right",b=w?"clientHeight":"clientWidth",j=i.reference[x]+i.reference[p]-m[p]-i.floating[x],_=m[p]-i.reference[p],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let E=S?S[b]:0;(!E||!await(o.isElement==null?void 0:o.isElement(S)))&&(E=l.floating[b]||i.floating[x]);const D=j/2-_/2,U=E/2-g[x]/2-1,F=Ba(f[v],U),L=Ba(f[y],U),$=F,R=E-g[x]-L,I=E/2-g[x]/2+D,C=Sp($,I,R),T=!c.arrow&&fl(a)!=null&&I!==C&&i.reference[x]/2-(I<$?F:L)-g[x]/2<0,re=T?I<$?I-$:I-R:0;return{[p]:m[p]+re,data:{[p]:C,centerOffset:I-C-re,...T&&{alignmentOffset:re}},reset:T}}}),m2=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...w}=Ks(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const v=Gs(a),y=ps(l),b=Gs(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),_=m||(b||!g?[Vu(l)]:i2(l)),S=x!=="none";!m&&S&&_.push(...d2(l,g,x,j));const E=[l,..._],D=await Ec(t,w),U=[];let F=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&U.push(D[v]),f){const I=a2(a,o,j);U.push(D[I[0]],D[I[1]])}if(F=[...F,{placement:a,overflows:U}],!U.every(I=>I<=0)){var L,$;const I=(((L=i.flip)==null?void 0:L.index)||0)+1,C=E[I];if(C&&(!(f==="alignment"?y!==ps(C):!1)||F.every(K=>K.overflows[0]>0&&ps(K.placement)===y)))return{data:{index:I,overflows:F},reset:{placement:C}};let T=($=F.filter(re=>re.overflows[0]<=0).sort((re,K)=>re.overflows[1]-K.overflows[1])[0])==null?void 0:$.placement;if(!T)switch(p){case"bestFit":{var R;const re=(R=F.filter(K=>{if(S){const z=ps(K.placement);return z===y||z==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(z=>z>0).reduce((z,ae)=>z+ae,0)]).sort((K,z)=>K[1]-z[1])[0])==null?void 0:R[0];re&&(T=re);break}case"initialPlacement":T=l;break}if(a!==T)return{reset:{placement:T}}}return{}}}};function hb(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function mb(e){return t2.some(t=>e[t]>=0)}const p2=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=Ks(e,t);switch(n){case"referenceHidden":{const i=await Ec(t,{...a,elementContext:"reference"}),o=hb(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:mb(o)}}}case"escaped":{const i=await Ec(t,{...a,altBoundary:!0}),o=hb(i,r.floating);return{data:{escapedOffsets:o,escaped:mb(o)}}}default:return{}}}}},nN=new Set(["left","top"]);async function g2(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=Gs(r),l=fl(r),c=ps(r)==="y",d=nN.has(o)?-1:1,u=i&&c?-1:1,f=Ks(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(p=l==="end"?x*-1:x),c?{x:p*u,y:m*d}:{x:m*d,y:p*u}}const y2=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await g2(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},v2=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:v,y}=w;return{x:v,y}}},...c}=Ks(e,t),d={x:r,y:n},u=await Ec(t,c),f=ps(Gs(a)),m=_y(f);let p=d[m],x=d[f];if(i){const w=m==="y"?"top":"left",v=m==="y"?"bottom":"right",y=p+u[w],b=p-u[v];p=Sp(y,p,b)}if(o){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=x+u[w],b=x-u[v];x=Sp(y,x,b)}const g=l.fn({...t,[m]:p,[f]:x});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[m]:i,[f]:o}}}}}},x2=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Ks(e,t),u={x:r,y:n},f=ps(a),m=_y(f);let p=u[m],x=u[f];const g=Ks(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=m==="y"?"height":"width",j=i.reference[m]-i.floating[b]+w.mainAxis,_=i.reference[m]+i.reference[b]-w.mainAxis;p<j?p=j:p>_&&(p=_)}if(d){var v,y;const b=m==="y"?"width":"height",j=nN.has(Gs(a)),_=i.reference[f]-i.floating[b]+(j&&((v=o.offset)==null?void 0:v[f])||0)+(j?0:w.crossAxis),S=i.reference[f]+i.reference[b]+(j?0:((y=o.offset)==null?void 0:y[f])||0)-(j?w.crossAxis:0);x<_?x=_:x>S&&(x=S)}return{[m]:p,[f]:x}}}},b2=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Ks(e,t),u=await Ec(t,d),f=Gs(a),m=fl(a),p=ps(a)==="y",{width:x,height:g}=i.floating;let w,v;f==="top"||f==="bottom"?(w=f,v=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=f,w=m==="end"?"top":"bottom");const y=g-u.top-u.bottom,b=x-u.left-u.right,j=Ba(g-u[w],y),_=Ba(x-u[v],b),S=!t.middlewareData.shift;let E=j,D=_;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(D=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(E=y),S&&!m){const F=cn(u.left,0),L=cn(u.right,0),$=cn(u.top,0),R=cn(u.bottom,0);p?D=x-2*(F!==0||L!==0?F+L:cn(u.left,u.right)):E=g-2*($!==0||R!==0?$+R:cn(u.top,u.bottom))}await c({...t,availableWidth:D,availableHeight:E});const U=await o.getDimensions(l.floating);return x!==U.width||g!==U.height?{reset:{rects:!0}}:{}}}};function Af(){return typeof window<"u"}function hl(e){return sN(e)?(e.nodeName||"").toLowerCase():"#document"}function mn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function js(e){var t;return(t=(sN(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function sN(e){return Af()?e instanceof Node||e instanceof mn(e).Node:!1}function Xn(e){return Af()?e instanceof Element||e instanceof mn(e).Element:!1}function ws(e){return Af()?e instanceof HTMLElement||e instanceof mn(e).HTMLElement:!1}function pb(e){return!Af()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof mn(e).ShadowRoot}const w2=new Set(["inline","contents"]);function Gc(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Jn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!w2.has(a)}const j2=new Set(["table","td","th"]);function _2(e){return j2.has(hl(e))}const N2=[":popover-open",":modal"];function If(e){return N2.some(t=>{try{return e.matches(t)}catch{return!1}})}const S2=["transform","translate","scale","rotate","perspective"],C2=["transform","translate","scale","rotate","perspective","filter"],E2=["paint","layout","strict","content"];function Cy(e){const t=Ey(),r=Xn(e)?Jn(e):e;return S2.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||C2.some(n=>(r.willChange||"").includes(n))||E2.some(n=>(r.contain||"").includes(n))}function k2(e){let t=Va(e);for(;ws(t)&&!rl(t);){if(Cy(t))return t;if(If(t))return null;t=Va(t)}return null}function Ey(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const P2=new Set(["html","body","#document"]);function rl(e){return P2.has(hl(e))}function Jn(e){return mn(e).getComputedStyle(e)}function Rf(e){return Xn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Va(e){if(hl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||pb(e)&&e.host||js(e);return pb(t)?t.host:t}function aN(e){const t=Va(e);return rl(t)?e.ownerDocument?e.ownerDocument.body:e.body:ws(t)&&Gc(t)?t:aN(t)}function kc(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=aN(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=mn(a);if(i){const l=Ep(o);return t.concat(o,o.visualViewport||[],Gc(a)?a:[],l&&r?kc(l):[])}return t.concat(a,kc(a,[],r))}function Ep(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function iN(e){const t=Jn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=ws(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=Bu(r)!==i||Bu(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function ky(e){return Xn(e)?e:e.contextElement}function Io(e){const t=ky(e);if(!ws(t))return xs(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=iN(t);let o=(i?Bu(r.width):r.width)/n,l=(i?Bu(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const T2=xs(0);function oN(e){const t=mn(e);return!Ey()||!t.visualViewport?T2:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function A2(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==mn(e)?!1:t}function Oi(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=ky(e);let o=xs(1);t&&(n?Xn(n)&&(o=Io(n)):o=Io(e));const l=A2(i,r,n)?oN(i):xs(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,f=a.height/o.y;if(i){const m=mn(i),p=n&&Xn(n)?mn(n):n;let x=m,g=Ep(x);for(;g&&n&&p!==x;){const w=Io(g),v=g.getBoundingClientRect(),y=Jn(g),b=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*w.x,j=v.top+(g.clientTop+parseFloat(y.paddingTop))*w.y;c*=w.x,d*=w.y,u*=w.x,f*=w.y,c+=b,d+=j,x=mn(g),g=Ep(x)}}return zu({width:u,height:f,x:c,y:d})}function Py(e,t){const r=Rf(e).scrollLeft;return t?t.left+r:Oi(js(e)).left+r}function lN(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:Py(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function I2(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=js(n),l=t?If(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=xs(1);const u=xs(0),f=ws(n);if((f||!f&&!i)&&((hl(n)!=="body"||Gc(o))&&(c=Rf(n)),ws(n))){const p=Oi(n);d=Io(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const m=o&&!f&&!i?lN(o,c,!0):xs(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+m.x,y:r.y*d.y-c.scrollTop*d.y+u.y+m.y}}function R2(e){return Array.from(e.getClientRects())}function O2(e){const t=js(e),r=Rf(e),n=e.ownerDocument.body,a=cn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=cn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Py(e);const l=-r.scrollTop;return Jn(n).direction==="rtl"&&(o+=cn(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function D2(e,t){const r=mn(e),n=js(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=Ey();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const M2=new Set(["absolute","fixed"]);function L2(e,t){const r=Oi(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=ws(e)?Io(e):xs(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function gb(e,t,r){let n;if(t==="viewport")n=D2(e,r);else if(t==="document")n=O2(js(e));else if(Xn(t))n=L2(t,r);else{const a=oN(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return zu(n)}function cN(e,t){const r=Va(e);return r===t||!Xn(r)||rl(r)?!1:Jn(r).position==="fixed"||cN(r,t)}function F2(e,t){const r=t.get(e);if(r)return r;let n=kc(e,[],!1).filter(l=>Xn(l)&&hl(l)!=="body"),a=null;const i=Jn(e).position==="fixed";let o=i?Va(e):e;for(;Xn(o)&&!rl(o);){const l=Jn(o),c=Cy(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&M2.has(a.position)||Gc(o)&&!c&&cN(e,o))?n=n.filter(u=>u!==o):a=l,o=Va(o)}return t.set(e,n),n}function $2(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?If(t)?[]:F2(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const f=gb(t,u,a);return d.top=cn(f.top,d.top),d.right=Ba(f.right,d.right),d.bottom=Ba(f.bottom,d.bottom),d.left=cn(f.left,d.left),d},gb(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function q2(e){const{width:t,height:r}=iN(e);return{width:t,height:r}}function U2(e,t,r){const n=ws(t),a=js(t),i=r==="fixed",o=Oi(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=xs(0);function d(){c.x=Py(a)}if(n||!n&&!i)if((hl(t)!=="body"||Gc(a))&&(l=Rf(t)),n){const p=Oi(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else a&&d();i&&!n&&a&&d();const u=a&&!n&&!i?lN(a,l):xs(0),f=o.left+l.scrollLeft-c.x-u.x,m=o.top+l.scrollTop-c.y-u.y;return{x:f,y:m,width:o.width,height:o.height}}function Yh(e){return Jn(e).position==="static"}function yb(e,t){if(!ws(e)||Jn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return js(e)===r&&(r=r.ownerDocument.body),r}function dN(e,t){const r=mn(e);if(If(e))return r;if(!ws(e)){let a=Va(e);for(;a&&!rl(a);){if(Xn(a)&&!Yh(a))return a;a=Va(a)}return r}let n=yb(e,t);for(;n&&_2(n)&&Yh(n);)n=yb(n,t);return n&&rl(n)&&Yh(n)&&!Cy(n)?r:n||k2(e)||r}const B2=async function(e){const t=this.getOffsetParent||dN,r=this.getDimensions,n=await r(e.floating);return{reference:U2(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function V2(e){return Jn(e).direction==="rtl"}const z2={convertOffsetParentRelativeRectToViewportRelativeRect:I2,getDocumentElement:js,getClippingRect:$2,getOffsetParent:dN,getElementRects:B2,getClientRects:R2,getDimensions:q2,getScale:Io,isElement:Xn,isRTL:V2};function uN(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function W2(e,t){let r=null,n;const a=js(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:f,width:m,height:p}=d;if(l||t(),!m||!p)return;const x=Od(f),g=Od(a.clientWidth-(u+m)),w=Od(a.clientHeight-(f+p)),v=Od(u),b={rootMargin:-x+"px "+-g+"px "+-w+"px "+-v+"px",threshold:cn(0,Ba(1,c))||1};let j=!0;function _(S){const E=S[0].intersectionRatio;if(E!==c){if(!j)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!uN(d,e.getBoundingClientRect())&&o(),j=!1}try{r=new IntersectionObserver(_,{...b,root:a.ownerDocument})}catch{r=new IntersectionObserver(_,b)}r.observe(e)}return o(!0),i}function H2(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=ky(e),u=a||i?[...d?kc(d):[],...kc(t)]:[];u.forEach(v=>{a&&v.addEventListener("scroll",r,{passive:!0}),i&&v.addEventListener("resize",r)});const f=d&&l?W2(d,r):null;let m=-1,p=null;o&&(p=new ResizeObserver(v=>{let[y]=v;y&&y.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let x,g=c?Oi(e):null;c&&w();function w(){const v=Oi(e);g&&!uN(g,v)&&r(),g=v,x=requestAnimationFrame(w)}return r(),()=>{var v;u.forEach(y=>{a&&y.removeEventListener("scroll",r),i&&y.removeEventListener("resize",r)}),f==null||f(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(x)}}const Q2=y2,K2=v2,G2=m2,Y2=b2,X2=p2,vb=h2,J2=x2,Z2=(e,t,r)=>{const n=new Map,a={platform:z2,...r},i={...a.platform,_c:n};return f2(e,t,{...a,platform:i})};var eO=typeof document<"u",tO=function(){},uu=eO?h.useLayoutEffect:tO;function Wu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Wu(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!Wu(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function fN(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function xb(e,t){const r=fN(e);return Math.round(t*r)/r}function Xh(e){const t=h.useRef(e);return uu(()=>{t.current=e}),t}function rO(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,f]=h.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=h.useState(n);Wu(m,n)||p(n);const[x,g]=h.useState(null),[w,v]=h.useState(null),y=h.useCallback(K=>{K!==S.current&&(S.current=K,g(K))},[]),b=h.useCallback(K=>{K!==E.current&&(E.current=K,v(K))},[]),j=i||x,_=o||w,S=h.useRef(null),E=h.useRef(null),D=h.useRef(u),U=c!=null,F=Xh(c),L=Xh(a),$=Xh(d),R=h.useCallback(()=>{if(!S.current||!E.current)return;const K={placement:t,strategy:r,middleware:m};L.current&&(K.platform=L.current),Z2(S.current,E.current,K).then(z=>{const ae={...z,isPositioned:$.current!==!1};I.current&&!Wu(D.current,ae)&&(D.current=ae,Ka.flushSync(()=>{f(ae)}))})},[m,t,r,L,$]);uu(()=>{d===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,f(K=>({...K,isPositioned:!1})))},[d]);const I=h.useRef(!1);uu(()=>(I.current=!0,()=>{I.current=!1}),[]),uu(()=>{if(j&&(S.current=j),_&&(E.current=_),j&&_){if(F.current)return F.current(j,_,R);R()}},[j,_,R,F,U]);const C=h.useMemo(()=>({reference:S,floating:E,setReference:y,setFloating:b}),[y,b]),T=h.useMemo(()=>({reference:j,floating:_}),[j,_]),re=h.useMemo(()=>{const K={position:r,left:0,top:0};if(!T.floating)return K;const z=xb(T.floating,u.x),ae=xb(T.floating,u.y);return l?{...K,transform:"translate("+z+"px, "+ae+"px)",...fN(T.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:z,top:ae}},[r,l,T.floating,u.x,u.y]);return h.useMemo(()=>({...u,update:R,refs:C,elements:T,floatingStyles:re}),[u,R,C,T,re])}const nO=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?vb({element:n.current,padding:a}).fn(r):{}:n?vb({element:n,padding:a}).fn(r):{}}}},sO=(e,t)=>({...Q2(e),options:[e,t]}),aO=(e,t)=>({...K2(e),options:[e,t]}),iO=(e,t)=>({...J2(e),options:[e,t]}),oO=(e,t)=>({...G2(e),options:[e,t]}),lO=(e,t)=>({...Y2(e),options:[e,t]}),cO=(e,t)=>({...X2(e),options:[e,t]}),dO=(e,t)=>({...nO(e),options:[e,t]});var uO="Arrow",hN=h.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(Oe.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});hN.displayName=uO;var fO=hN;function mN(e){const[t,r]=h.useState(void 0);return hr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Ty="Popper",[pN,Ga]=Br(Ty),[hO,gN]=pN(Ty),yN=e=>{const{__scopePopper:t,children:r}=e,[n,a]=h.useState(null);return s.jsx(hO,{scope:t,anchor:n,onAnchorChange:a,children:r})};yN.displayName=Ty;var vN="PopperAnchor",xN=h.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=gN(vN,r),o=h.useRef(null),l=Ke(t,o);return h.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(Oe.div,{...a,ref:l})});xN.displayName=vN;var Ay="PopperContent",[mO,pO]=pN(Ay),bN=h.forwardRef((e,t)=>{var ne,O,ee,de,ce,me;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:x,...g}=e,w=gN(Ay,r),[v,y]=h.useState(null),b=Ke(t,He=>y(He)),[j,_]=h.useState(null),S=mN(j),E=(S==null?void 0:S.width)??0,D=(S==null?void 0:S.height)??0,U=n+(i!=="center"?"-"+i:""),F=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(d)?d:[d],$=L.length>0,R={padding:F,boundary:L.filter(yO),altBoundary:$},{refs:I,floatingStyles:C,placement:T,isPositioned:re,middlewareData:K}=rO({strategy:"fixed",placement:U,whileElementsMounted:(...He)=>H2(...He,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[sO({mainAxis:a+D,alignmentAxis:o}),c&&aO({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?iO():void 0,...R}),c&&oO({...R}),lO({...R,apply:({elements:He,rects:ut,availableWidth:J,availableHeight:Ne})=>{const{width:Ye,height:Me}=ut.reference,dt=He.floating.style;dt.setProperty("--radix-popper-available-width",`${J}px`),dt.setProperty("--radix-popper-available-height",`${Ne}px`),dt.setProperty("--radix-popper-anchor-width",`${Ye}px`),dt.setProperty("--radix-popper-anchor-height",`${Me}px`)}}),j&&dO({element:j,padding:l}),vO({arrowWidth:E,arrowHeight:D}),m&&cO({strategy:"referenceHidden",...R})]}),[z,ae]=_N(T),ge=Kt(x);hr(()=>{re&&(ge==null||ge())},[re,ge]);const W=(ne=K.arrow)==null?void 0:ne.x,M=(O=K.arrow)==null?void 0:O.y,Y=((ee=K.arrow)==null?void 0:ee.centerOffset)!==0,[X,ie]=h.useState();return hr(()=>{v&&ie(window.getComputedStyle(v).zIndex)},[v]),s.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...C,transform:re?C.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(de=K.transformOrigin)==null?void 0:de.x,(ce=K.transformOrigin)==null?void 0:ce.y].join(" "),...((me=K.hide)==null?void 0:me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(mO,{scope:r,placedSide:z,onArrowChange:_,arrowX:W,arrowY:M,shouldHideArrow:Y,children:s.jsx(Oe.div,{"data-side":z,"data-align":ae,...g,ref:b,style:{...g.style,animation:re?void 0:"none"}})})})});bN.displayName=Ay;var wN="PopperArrow",gO={top:"bottom",right:"left",bottom:"top",left:"right"},jN=h.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=pO(wN,n),o=gO[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(fO,{...a,ref:r,style:{...a.style,display:"block"}})})});jN.displayName=wN;function yO(e){return e!==null}var vO=e=>({name:"transformOrigin",options:e,fn(t){var w,v,y;const{placement:r,rects:n,middlewareData:a}=t,o=((w=a.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=_N(r),f={start:"0%",center:"50%",end:"100%"}[u],m=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,p=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let x="",g="";return d==="bottom"?(x=o?f:`${m}px`,g=`${-c}px`):d==="top"?(x=o?f:`${m}px`,g=`${n.floating.height+c}px`):d==="right"?(x=`${-c}px`,g=o?f:`${p}px`):d==="left"&&(x=`${n.floating.width+c}px`,g=o?f:`${p}px`),{data:{x,y:g}}}});function _N(e){const[t,r="center"]=e.split("-");return[t,r]}var Iy=yN,Yc=xN,Of=bN,Df=jN,[Mf,pV]=Br("Tooltip",[Ga]),Ry=Ga(),NN="TooltipProvider",xO=700,bb="tooltip.open",[bO,SN]=Mf(NN),CN=e=>{const{__scopeTooltip:t,delayDuration:r=xO,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=h.useRef(!0),l=h.useRef(!1),c=h.useRef(0);return h.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),s.jsx(bO,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:h.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:h.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:h.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:i})};CN.displayName=NN;var EN="Tooltip",[gV,Lf]=Mf(EN),kp="TooltipTrigger",wO=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Lf(kp,r),i=SN(kp,r),o=Ry(r),l=h.useRef(null),c=Ke(t,l,a.onTriggerChange),d=h.useRef(!1),u=h.useRef(!1),f=h.useCallback(()=>d.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),s.jsx(Yc,{asChild:!0,...o,children:s.jsx(Oe.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:je(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:je(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:je(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:je(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:je(e.onBlur,a.onClose),onClick:je(e.onClick,a.onClose)})})});wO.displayName=kp;var jO="TooltipPortal",[yV,_O]=Mf(jO,{forceMount:void 0}),nl="TooltipContent",kN=h.forwardRef((e,t)=>{const r=_O(nl,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=Lf(nl,e.__scopeTooltip);return s.jsx(mr,{present:n||o.open,children:o.disableHoverableContent?s.jsx(PN,{side:a,...i,ref:t}):s.jsx(NO,{side:a,...i,ref:t})})}),NO=h.forwardRef((e,t)=>{const r=Lf(nl,e.__scopeTooltip),n=SN(nl,e.__scopeTooltip),a=h.useRef(null),i=Ke(t,a),[o,l]=h.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:f}=n,m=h.useCallback(()=>{l(null),f(!1)},[f]),p=h.useCallback((x,g)=>{const w=x.currentTarget,v={x:x.clientX,y:x.clientY},y=PO(v,w.getBoundingClientRect()),b=TO(v,y),j=AO(g.getBoundingClientRect()),_=RO([...b,...j]);l(_),f(!0)},[f]);return h.useEffect(()=>()=>m(),[m]),h.useEffect(()=>{if(c&&u){const x=w=>p(w,u),g=w=>p(w,c);return c.addEventListener("pointerleave",x),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",g)}}},[c,u,p,m]),h.useEffect(()=>{if(o){const x=g=>{const w=g.target,v={x:g.clientX,y:g.clientY},y=(c==null?void 0:c.contains(w))||(u==null?void 0:u.contains(w)),b=!IO(v,o);y?m():b&&(m(),d())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,u,o,d,m]),s.jsx(PN,{...e,ref:i})}),[SO,CO]=Mf(EN,{isInside:!1}),EO=m_("TooltipContent"),PN=h.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Lf(nl,r),d=Ry(r),{onClose:u}=c;return h.useEffect(()=>(document.addEventListener(bb,u),()=>document.removeEventListener(bb,u)),[u]),h.useEffect(()=>{if(c.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),s.jsx(zi,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:s.jsxs(Of,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(EO,{children:n}),s.jsx(SO,{scope:r,isInside:!0,children:s.jsx(oI,{id:c.contentId,role:"tooltip",children:a||n})})]})})});kN.displayName=nl;var TN="TooltipArrow",kO=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Ry(r);return CO(TN,r).isInside?null:s.jsx(Df,{...a,...n,ref:t})});kO.displayName=TN;function PO(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function TO(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function AO(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function IO(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,f=c.x,m=c.y;u>n!=m>n&&r<(f-d)*(n-u)/(m-u)+d&&(a=!a)}return a}function RO(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),OO(t)}function OO(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var DO=CN,AN=kN;const MO=DO,LO=h.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(AN,{ref:n,sideOffset:t,className:Ee("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));LO.displayName=AN.displayName;const FO=Qc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Dr=h.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:Ee(FO({variant:t}),e),...r}));Dr.displayName="Alert";const $O=h.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:Ee("mb-1 font-medium leading-none tracking-tight",e),...t}));$O.displayName="AlertTitle";const Mr=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Ee("text-sm [&_p]:leading-relaxed",e),...t}));Mr.displayName="AlertDescription";function qO(){const[e,t]=h.useState(navigator.onLine);return h.useEffect(()=>{const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r),window.addEventListener("offline",n),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}},[]),e?null:s.jsxs(Dr,{className:"mb-4 border-orange-200 bg-orange-50",children:[s.jsx(FI,{className:"h-4 w-4"}),s.jsx(Mr,{children:"You're currently offline. Some features may not work properly until your connection is restored."})]})}var ml=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},UO={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ha,xg,B0,BO=(B0=class{constructor(){qe(this,ha,UO);qe(this,xg,!1)}setTimeoutProvider(e){Pe(this,ha,e)}setTimeout(e,t){return q(this,ha).setTimeout(e,t)}clearTimeout(e){q(this,ha).clearTimeout(e)}setInterval(e,t){return q(this,ha).setInterval(e,t)}clearInterval(e){q(this,ha).clearInterval(e)}},ha=new WeakMap,xg=new WeakMap,B0),hi=new BO;function VO(e){setTimeout(e,0)}var Di=typeof window>"u"||"Deno"in globalThis;function yr(){}function zO(e,t){return typeof e=="function"?e(t):e}function Pp(e){return typeof e=="number"&&e>=0&&e!==1/0}function IN(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Oa(e,t){return typeof e=="function"?e(t):e}function _n(e,t){return typeof e=="function"?e(t):e}function wb(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Oy(o,t.options))return!1}else if(!Pc(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function jb(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Mi(t.options.mutationKey)!==Mi(i))return!1}else if(!Pc(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Oy(e,t){return((t==null?void 0:t.queryKeyHashFn)||Mi)(e)}function Mi(e){return JSON.stringify(e,(t,r)=>Tp(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Pc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Pc(e[r],t[r])):!1}var WO=Object.prototype.hasOwnProperty;function RN(e,t){if(e===t)return e;const r=_b(e)&&_b(t);if(!r&&!(Tp(e)&&Tp(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d],f=e[u],m=t[u];if(f===m){l[u]=f,(r?d<a:WO.call(e,u))&&c++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){l[u]=m;continue}const p=RN(f,m);l[u]=p,p===f&&c++}return a===o&&c===a?e:l}function Hu(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function _b(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Tp(e){if(!Nb(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Nb(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Nb(e){return Object.prototype.toString.call(e)==="[object Object]"}function HO(e){return new Promise(t=>{hi.setTimeout(t,e)})}function Ap(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?RN(e,t):t}function QO(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function KO(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Dy=Symbol();function ON(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Dy?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function DN(e,t){return typeof e=="function"?e(...t):!!e}var pi,ma,Mo,V0,GO=(V0=class extends ml{constructor(){super();qe(this,pi);qe(this,ma);qe(this,Mo);Pe(this,Mo,t=>{if(!Di&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){q(this,ma)||this.setEventListener(q(this,Mo))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,ma))==null||t.call(this),Pe(this,ma,void 0))}setEventListener(t){var r;Pe(this,Mo,t),(r=q(this,ma))==null||r.call(this),Pe(this,ma,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){q(this,pi)!==t&&(Pe(this,pi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof q(this,pi)=="boolean"?q(this,pi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},pi=new WeakMap,ma=new WeakMap,Mo=new WeakMap,V0),My=new GO;function Ip(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function YO(e){var r;let t;if((r=e.then(n=>(t=n,n),yr))==null||r.catch(yr),t!==void 0)return{data:t}}function MN(e){return e}function XO(e){return{mutationKey:e.options.mutationKey,state:e.state,...e.options.scope&&{scope:e.options.scope},...e.meta&&{meta:e.meta}}}function JO(e,t,r){var n;return{dehydratedAt:Date.now(),state:{...e.state,...e.state.data!==void 0&&{data:t(e.state.data)}},queryKey:e.queryKey,queryHash:e.queryHash,...e.state.status==="pending"&&{promise:(n=e.promise)==null?void 0:n.then(t).catch(a=>r(a)?Promise.reject(new Error("redacted")):Promise.reject(a))},...e.meta&&{meta:e.meta}}}function ZO(e){return e.state.isPaused}function eD(e){return e.state.status==="success"}function tD(e){return!0}function rD(e,t={}){var c,d,u,f;const r=t.shouldDehydrateMutation??((c=e.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateMutation)??ZO,n=e.getMutationCache().getAll().flatMap(m=>r(m)?[XO(m)]:[]),a=t.shouldDehydrateQuery??((d=e.getDefaultOptions().dehydrate)==null?void 0:d.shouldDehydrateQuery)??eD,i=t.shouldRedactErrors??((u=e.getDefaultOptions().dehydrate)==null?void 0:u.shouldRedactErrors)??tD,o=t.serializeData??((f=e.getDefaultOptions().dehydrate)==null?void 0:f.serializeData)??MN,l=e.getQueryCache().getAll().flatMap(m=>a(m)?[JO(m,o,i)]:[]);return{mutations:n,queries:l}}function nD(e,t,r){var c,d;if(typeof t!="object"||t===null)return;const n=e.getMutationCache(),a=e.getQueryCache(),i=((c=r==null?void 0:r.defaultOptions)==null?void 0:c.deserializeData)??((d=e.getDefaultOptions().hydrate)==null?void 0:d.deserializeData)??MN,o=t.mutations||[],l=t.queries||[];o.forEach(({state:u,...f})=>{var m,p;n.build(e,{...(m=e.getDefaultOptions().hydrate)==null?void 0:m.mutations,...(p=r==null?void 0:r.defaultOptions)==null?void 0:p.mutations,...f},u)}),l.forEach(({queryKey:u,state:f,queryHash:m,meta:p,promise:x,dehydratedAt:g})=>{var S,E;const w=x?YO(x):void 0,v=f.data===void 0?w==null?void 0:w.data:f.data,y=v===void 0?v:i(v);let b=a.get(m);const j=(b==null?void 0:b.state.status)==="pending",_=(b==null?void 0:b.state.fetchStatus)==="fetching";if(b){const D=w&&g!==void 0&&g>b.state.dataUpdatedAt;if(f.dataUpdatedAt>b.state.dataUpdatedAt||D){const{fetchStatus:U,...F}=f;b.setState({...F,data:y})}}else b=a.build(e,{...(S=e.getDefaultOptions().hydrate)==null?void 0:S.queries,...(E=r==null?void 0:r.defaultOptions)==null?void 0:E.queries,queryKey:u,queryHash:m,meta:p},{...f,data:y,fetchStatus:"idle",status:y!==void 0?"success":f.status});x&&!j&&!_&&(g===void 0||g>b.state.dataUpdatedAt)&&b.fetch(void 0,{initialPromise:Promise.resolve(x).then(i)})})}var sD=VO;function aD(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=sD;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var ir=aD(),Lo,pa,Fo,z0,iD=(z0=class extends ml{constructor(){super();qe(this,Lo,!0);qe(this,pa);qe(this,Fo);Pe(this,Fo,t=>{if(!Di&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){q(this,pa)||this.setEventListener(q(this,Fo))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,pa))==null||t.call(this),Pe(this,pa,void 0))}setEventListener(t){var r;Pe(this,Fo,t),(r=q(this,pa))==null||r.call(this),Pe(this,pa,t(this.setOnline.bind(this)))}setOnline(t){q(this,Lo)!==t&&(Pe(this,Lo,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return q(this,Lo)}},Lo=new WeakMap,pa=new WeakMap,Fo=new WeakMap,z0),Qu=new iD;function oD(e){return Math.min(1e3*2**e,3e4)}function LN(e){return(e??"online")==="online"?Qu.isOnline():!0}var Rp=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function FN(e){let t=!1,r=0,n;const a=Ip(),i=()=>a.status!=="pending",o=g=>{var w;if(!i()){const v=new Rp(g);m(v),(w=e.onCancel)==null||w.call(e,v)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>My.isFocused()&&(e.networkMode==="always"||Qu.isOnline())&&e.canRun(),u=()=>LN(e.networkMode)&&e.canRun(),f=g=>{i()||(n==null||n(),a.resolve(g))},m=g=>{i()||(n==null||n(),a.reject(g))},p=()=>new Promise(g=>{var w;n=v=>{(i()||d())&&g(v)},(w=e.onPause)==null||w.call(e)}).then(()=>{var g;n=void 0,i()||(g=e.onContinue)==null||g.call(e)}),x=()=>{if(i())return;let g;const w=r===0?e.initialPromise:void 0;try{g=w??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(f).catch(v=>{var S;if(i())return;const y=e.retry??(Di?0:3),b=e.retryDelay??oD,j=typeof b=="function"?b(r,v):b,_=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,v);if(t||!_){m(v);return}r++,(S=e.onFail)==null||S.call(e,r,v),HO(j).then(()=>d()?void 0:p()).then(()=>{t?m(v):x()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?x():p().then(x),a)}}var gi,W0,$N=(W0=class{constructor(){qe(this,gi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Pp(this.gcTime)&&Pe(this,gi,hi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Di?1/0:5*60*1e3))}clearGcTimeout(){q(this,gi)&&(hi.clearTimeout(q(this,gi)),Pe(this,gi,void 0))}},gi=new WeakMap,W0),yi,$o,jn,vi,cr,Mc,xi,$n,Cs,H0,lD=(H0=class extends $N{constructor(t){super();qe(this,$n);qe(this,yi);qe(this,$o);qe(this,jn);qe(this,vi);qe(this,cr);qe(this,Mc);qe(this,xi);Pe(this,xi,!1),Pe(this,Mc,t.defaultOptions),this.setOptions(t.options),this.observers=[],Pe(this,vi,t.client),Pe(this,jn,q(this,vi).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Pe(this,yi,Sb(this.options)),this.state=t.state??q(this,yi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=q(this,cr))==null?void 0:t.promise}setOptions(t){if(this.options={...q(this,Mc),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Sb(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),Pe(this,yi,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,jn).remove(this)}setData(t,r){const n=Ap(this.state.data,t,this.options);return tt(this,$n,Cs).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){tt(this,$n,Cs).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=q(this,cr))==null?void 0:n.promise;return(a=q(this,cr))==null||a.cancel(t),r?r.then(yr).catch(yr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,yi))}isActive(){return this.observers.some(t=>_n(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Dy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Oa(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!IN(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=q(this,cr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=q(this,cr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),q(this,jn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(q(this,cr)&&(q(this,xi)?q(this,cr).cancel({revert:!0}):q(this,cr).cancelRetry()),this.scheduleGc()),q(this,jn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||tt(this,$n,Cs).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,u,f,m,p,x,g,w,v,y,b;if(this.state.fetchStatus!=="idle"&&((c=q(this,cr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(q(this,cr))return q(this,cr).continueRetry(),q(this,cr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(_=>_.options.queryFn);j&&this.setOptions(j.options)}const n=new AbortController,a=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(Pe(this,xi,!0),n.signal)})},i=()=>{const j=ON(this.options,r),S=(()=>{const E={client:q(this,vi),queryKey:this.queryKey,meta:this.meta};return a(E),E})();return Pe(this,xi,!1),this.options.persister?this.options.persister(j,S,this):j(S)},l=(()=>{const j={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:q(this,vi),state:this.state,fetchFn:i};return a(j),j})();(d=this.options.behavior)==null||d.onFetch(l,this),Pe(this,$o,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&tt(this,$n,Cs).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),Pe(this,cr,FN({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:j=>{j instanceof Rp&&j.revert&&this.setState({...q(this,$o),fetchStatus:"idle"}),n.abort()},onFail:(j,_)=>{tt(this,$n,Cs).call(this,{type:"failed",failureCount:j,error:_})},onPause:()=>{tt(this,$n,Cs).call(this,{type:"pause"})},onContinue:()=>{tt(this,$n,Cs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const j=await q(this,cr).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(p=(m=q(this,jn).config).onSuccess)==null||p.call(m,j,this),(g=(x=q(this,jn).config).onSettled)==null||g.call(x,j,this.state.error,this),j}catch(j){if(j instanceof Rp){if(j.silent)return q(this,cr).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw tt(this,$n,Cs).call(this,{type:"error",error:j}),(v=(w=q(this,jn).config).onError)==null||v.call(w,j,this),(b=(y=q(this,jn).config).onSettled)==null||b.call(y,this.state.data,j,this),j}finally{this.scheduleGc()}}},yi=new WeakMap,$o=new WeakMap,jn=new WeakMap,vi=new WeakMap,cr=new WeakMap,Mc=new WeakMap,xi=new WeakMap,$n=new WeakSet,Cs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...qN(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Pe(this,$o,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),ir.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),q(this,jn).notify({query:this,type:"updated",action:t})})},H0);function qN(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:LN(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Sb(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var zr,ct,Lc,Ar,bi,qo,Is,ga,Fc,Uo,Bo,wi,ji,ya,Vo,gt,Vl,Op,Dp,Mp,Lp,Fp,$p,qp,UN,Q0,cD=(Q0=class extends ml{constructor(t,r){super();qe(this,gt);qe(this,zr);qe(this,ct);qe(this,Lc);qe(this,Ar);qe(this,bi);qe(this,qo);qe(this,Is);qe(this,ga);qe(this,Fc);qe(this,Uo);qe(this,Bo);qe(this,wi);qe(this,ji);qe(this,ya);qe(this,Vo,new Set);this.options=r,Pe(this,zr,t),Pe(this,ga,null),Pe(this,Is,Ip()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(q(this,ct).addObserver(this),Cb(q(this,ct),this.options)?tt(this,gt,Vl).call(this):this.updateResult(),tt(this,gt,Lp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Up(q(this,ct),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Up(q(this,ct),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,tt(this,gt,Fp).call(this),tt(this,gt,$p).call(this),q(this,ct).removeObserver(this)}setOptions(t){const r=this.options,n=q(this,ct);if(this.options=q(this,zr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof _n(this.options.enabled,q(this,ct))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");tt(this,gt,qp).call(this),q(this,ct).setOptions(this.options),r._defaulted&&!Hu(this.options,r)&&q(this,zr).getQueryCache().notify({type:"observerOptionsUpdated",query:q(this,ct),observer:this});const a=this.hasListeners();a&&Eb(q(this,ct),n,this.options,r)&&tt(this,gt,Vl).call(this),this.updateResult(),a&&(q(this,ct)!==n||_n(this.options.enabled,q(this,ct))!==_n(r.enabled,q(this,ct))||Oa(this.options.staleTime,q(this,ct))!==Oa(r.staleTime,q(this,ct)))&&tt(this,gt,Op).call(this);const i=tt(this,gt,Dp).call(this);a&&(q(this,ct)!==n||_n(this.options.enabled,q(this,ct))!==_n(r.enabled,q(this,ct))||i!==q(this,ya))&&tt(this,gt,Mp).call(this,i)}getOptimisticResult(t){const r=q(this,zr).getQueryCache().build(q(this,zr),t),n=this.createResult(r,t);return uD(this,n)&&(Pe(this,Ar,n),Pe(this,qo,this.options),Pe(this,bi,q(this,ct).state)),n}getCurrentResult(){return q(this,Ar)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&!this.options.experimental_prefetchInRender&&q(this,Is).status==="pending"&&q(this,Is).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,a))})}trackProp(t){q(this,Vo).add(t)}getCurrentQuery(){return q(this,ct)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=q(this,zr).defaultQueryOptions(t),n=q(this,zr).getQueryCache().build(q(this,zr),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return tt(this,gt,Vl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),q(this,Ar)))}createResult(t,r){var U;const n=q(this,ct),a=this.options,i=q(this,Ar),o=q(this,bi),l=q(this,qo),d=t!==n?t.state:q(this,Lc),{state:u}=t;let f={...u},m=!1,p;if(r._optimisticResults){const F=this.hasListeners(),L=!F&&Cb(t,r),$=F&&Eb(t,n,r,a);(L||$)&&(f={...f,...qN(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:x,errorUpdatedAt:g,status:w}=f;p=f.data;let v=!1;if(r.placeholderData!==void 0&&p===void 0&&w==="pending"){let F;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(F=i.data,v=!0):F=typeof r.placeholderData=="function"?r.placeholderData((U=q(this,Bo))==null?void 0:U.state.data,q(this,Bo)):r.placeholderData,F!==void 0&&(w="success",p=Ap(i==null?void 0:i.data,F,r),m=!0)}if(r.select&&p!==void 0&&!v)if(i&&p===(o==null?void 0:o.data)&&r.select===q(this,Fc))p=q(this,Uo);else try{Pe(this,Fc,r.select),p=r.select(p),p=Ap(i==null?void 0:i.data,p,r),Pe(this,Uo,p),Pe(this,ga,null)}catch(F){Pe(this,ga,F)}q(this,ga)&&(x=q(this,ga),p=q(this,Uo),g=Date.now(),w="error");const y=f.fetchStatus==="fetching",b=w==="pending",j=w==="error",_=b&&y,S=p!==void 0,D={status:w,fetchStatus:f.fetchStatus,isPending:b,isSuccess:w==="success",isError:j,isInitialLoading:_,isLoading:_,data:p,dataUpdatedAt:f.dataUpdatedAt,error:x,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:j&&!S,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:j&&S,isStale:Ly(t,r),refetch:this.refetch,promise:q(this,Is),isEnabled:_n(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const F=R=>{D.status==="error"?R.reject(D.error):D.data!==void 0&&R.resolve(D.data)},L=()=>{const R=Pe(this,Is,D.promise=Ip());F(R)},$=q(this,Is);switch($.status){case"pending":t.queryHash===n.queryHash&&F($);break;case"fulfilled":(D.status==="error"||D.data!==$.value)&&L();break;case"rejected":(D.status!=="error"||D.error!==$.reason)&&L();break}}return D}updateResult(){const t=q(this,Ar),r=this.createResult(q(this,ct),this.options);if(Pe(this,bi,q(this,ct).state),Pe(this,qo,this.options),q(this,bi).data!==void 0&&Pe(this,Bo,q(this,ct)),Hu(r,t))return;Pe(this,Ar,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!q(this,Vo).size)return!0;const o=new Set(i??q(this,Vo));return this.options.throwOnError&&o.add("error"),Object.keys(q(this,Ar)).some(l=>{const c=l;return q(this,Ar)[c]!==t[c]&&o.has(c)})};tt(this,gt,UN).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&tt(this,gt,Lp).call(this)}},zr=new WeakMap,ct=new WeakMap,Lc=new WeakMap,Ar=new WeakMap,bi=new WeakMap,qo=new WeakMap,Is=new WeakMap,ga=new WeakMap,Fc=new WeakMap,Uo=new WeakMap,Bo=new WeakMap,wi=new WeakMap,ji=new WeakMap,ya=new WeakMap,Vo=new WeakMap,gt=new WeakSet,Vl=function(t){tt(this,gt,qp).call(this);let r=q(this,ct).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(yr)),r},Op=function(){tt(this,gt,Fp).call(this);const t=Oa(this.options.staleTime,q(this,ct));if(Di||q(this,Ar).isStale||!Pp(t))return;const n=IN(q(this,Ar).dataUpdatedAt,t)+1;Pe(this,wi,hi.setTimeout(()=>{q(this,Ar).isStale||this.updateResult()},n))},Dp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(q(this,ct)):this.options.refetchInterval)??!1},Mp=function(t){tt(this,gt,$p).call(this),Pe(this,ya,t),!(Di||_n(this.options.enabled,q(this,ct))===!1||!Pp(q(this,ya))||q(this,ya)===0)&&Pe(this,ji,hi.setInterval(()=>{(this.options.refetchIntervalInBackground||My.isFocused())&&tt(this,gt,Vl).call(this)},q(this,ya)))},Lp=function(){tt(this,gt,Op).call(this),tt(this,gt,Mp).call(this,tt(this,gt,Dp).call(this))},Fp=function(){q(this,wi)&&(hi.clearTimeout(q(this,wi)),Pe(this,wi,void 0))},$p=function(){q(this,ji)&&(hi.clearInterval(q(this,ji)),Pe(this,ji,void 0))},qp=function(){const t=q(this,zr).getQueryCache().build(q(this,zr),this.options);if(t===q(this,ct))return;const r=q(this,ct);Pe(this,ct,t),Pe(this,Lc,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},UN=function(t){ir.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(q(this,Ar))}),q(this,zr).getQueryCache().notify({query:q(this,ct),type:"observerResultsUpdated"})})},Q0);function dD(e,t){return _n(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Cb(e,t){return dD(e,t)||e.state.data!==void 0&&Up(e,t,t.refetchOnMount)}function Up(e,t,r){if(_n(t.enabled,e)!==!1&&Oa(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Ly(e,t)}return!1}function Eb(e,t,r,n){return(e!==t||_n(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Ly(e,r)}function Ly(e,t){return _n(t.enabled,e)!==!1&&e.isStaleByTime(Oa(t.staleTime,e))}function uD(e,t){return!Hu(e.getCurrentResult(),t)}function kb(e){return{onFetch:(t,r)=>{var u,f,m,p,x;const n=t.options,a=(m=(f=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=ON(t.options,t.fetchOptions),y=async(b,j,_)=>{if(g)return Promise.reject();if(j==null&&b.pages.length)return Promise.resolve(b);const E=(()=>{const L={client:t.client,queryKey:t.queryKey,pageParam:j,direction:_?"backward":"forward",meta:t.options.meta};return w(L),L})(),D=await v(E),{maxPages:U}=t.options,F=_?KO:QO;return{pages:F(b.pages,D,U),pageParams:F(b.pageParams,j,U)}};if(a&&i.length){const b=a==="backward",j=b?fD:Pb,_={pages:i,pageParams:o},S=j(n,_);l=await y(_,S,b)}else{const b=e??i.length;do{const j=c===0?o[0]??n.initialPageParam:Pb(n,l);if(c>0&&j==null)break;l=await y(l,j),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,w;return(w=(g=t.options).persister)==null?void 0:w.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function Pb(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function fD(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var $c,ls,Ir,_i,cs,sa,K0,hD=(K0=class extends $N{constructor(t){super();qe(this,cs);qe(this,$c);qe(this,ls);qe(this,Ir);qe(this,_i);Pe(this,$c,t.client),this.mutationId=t.mutationId,Pe(this,Ir,t.mutationCache),Pe(this,ls,[]),this.state=t.state||BN(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){q(this,ls).includes(t)||(q(this,ls).push(t),this.clearGcTimeout(),q(this,Ir).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Pe(this,ls,q(this,ls).filter(r=>r!==t)),this.scheduleGc(),q(this,Ir).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){q(this,ls).length||(this.state.status==="pending"?this.scheduleGc():q(this,Ir).remove(this))}continue(){var t;return((t=q(this,_i))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,u,f,m,p,x,g,w,v,y,b,j,_,S,E,D,U;const r=()=>{tt(this,cs,sa).call(this,{type:"continue"})},n={client:q(this,$c),meta:this.options.meta,mutationKey:this.options.mutationKey};Pe(this,_i,FN({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(F,L)=>{tt(this,cs,sa).call(this,{type:"failed",failureCount:F,error:L})},onPause:()=>{tt(this,cs,sa).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,Ir).canRun(this)}));const a=this.state.status==="pending",i=!q(this,_i).canStart();try{if(a)r();else{tt(this,cs,sa).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=q(this,Ir).config).onMutate)==null?void 0:l.call(o,t,this,n));const L=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));L!==this.state.context&&tt(this,cs,sa).call(this,{type:"pending",context:L,variables:t,isPaused:i})}const F=await q(this,_i).start();return await((f=(u=q(this,Ir).config).onSuccess)==null?void 0:f.call(u,F,t,this.state.context,this,n)),await((p=(m=this.options).onSuccess)==null?void 0:p.call(m,F,t,this.state.context,n)),await((g=(x=q(this,Ir).config).onSettled)==null?void 0:g.call(x,F,null,this.state.variables,this.state.context,this,n)),await((v=(w=this.options).onSettled)==null?void 0:v.call(w,F,null,t,this.state.context,n)),tt(this,cs,sa).call(this,{type:"success",data:F}),F}catch(F){try{throw await((b=(y=q(this,Ir).config).onError)==null?void 0:b.call(y,F,t,this.state.context,this,n)),await((_=(j=this.options).onError)==null?void 0:_.call(j,F,t,this.state.context,n)),await((E=(S=q(this,Ir).config).onSettled)==null?void 0:E.call(S,void 0,F,this.state.variables,this.state.context,this,n)),await((U=(D=this.options).onSettled)==null?void 0:U.call(D,void 0,F,t,this.state.context,n)),F}finally{tt(this,cs,sa).call(this,{type:"error",error:F})}}finally{q(this,Ir).runNext(this)}}},$c=new WeakMap,ls=new WeakMap,Ir=new WeakMap,_i=new WeakMap,cs=new WeakSet,sa=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ir.batch(()=>{q(this,ls).forEach(n=>{n.onMutationUpdate(t)}),q(this,Ir).notify({mutation:this,type:"updated",action:t})})},K0);function BN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Rs,qn,qc,G0,mD=(G0=class extends ml{constructor(t={}){super();qe(this,Rs);qe(this,qn);qe(this,qc);this.config=t,Pe(this,Rs,new Set),Pe(this,qn,new Map),Pe(this,qc,0)}build(t,r,n){const a=new hD({client:t,mutationCache:this,mutationId:++hd(this,qc)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){q(this,Rs).add(t);const r=Dd(t);if(typeof r=="string"){const n=q(this,qn).get(r);n?n.push(t):q(this,qn).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(q(this,Rs).delete(t)){const r=Dd(t);if(typeof r=="string"){const n=q(this,qn).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&q(this,qn).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Dd(t);if(typeof r=="string"){const n=q(this,qn).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=Dd(t);if(typeof r=="string"){const a=(n=q(this,qn).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ir.batch(()=>{q(this,Rs).forEach(t=>{this.notify({type:"removed",mutation:t})}),q(this,Rs).clear(),q(this,qn).clear()})}getAll(){return Array.from(q(this,Rs))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>jb(r,n))}findAll(t={}){return this.getAll().filter(r=>jb(t,r))}notify(t){ir.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return ir.batch(()=>Promise.all(t.map(r=>r.continue().catch(yr))))}},Rs=new WeakMap,qn=new WeakMap,qc=new WeakMap,G0);function Dd(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Os,va,Wr,Ds,qs,fu,Bp,Y0,pD=(Y0=class extends ml{constructor(r,n){super();qe(this,qs);qe(this,Os);qe(this,va);qe(this,Wr);qe(this,Ds);Pe(this,Os,r),this.setOptions(n),this.bindMethods(),tt(this,qs,fu).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=q(this,Os).defaultMutationOptions(r),Hu(this.options,n)||q(this,Os).getMutationCache().notify({type:"observerOptionsUpdated",mutation:q(this,Wr),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Mi(n.mutationKey)!==Mi(this.options.mutationKey)?this.reset():((a=q(this,Wr))==null?void 0:a.state.status)==="pending"&&q(this,Wr).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=q(this,Wr))==null||r.removeObserver(this)}onMutationUpdate(r){tt(this,qs,fu).call(this),tt(this,qs,Bp).call(this,r)}getCurrentResult(){return q(this,va)}reset(){var r;(r=q(this,Wr))==null||r.removeObserver(this),Pe(this,Wr,void 0),tt(this,qs,fu).call(this),tt(this,qs,Bp).call(this)}mutate(r,n){var a;return Pe(this,Ds,n),(a=q(this,Wr))==null||a.removeObserver(this),Pe(this,Wr,q(this,Os).getMutationCache().build(q(this,Os),this.options)),q(this,Wr).addObserver(this),q(this,Wr).execute(r)}},Os=new WeakMap,va=new WeakMap,Wr=new WeakMap,Ds=new WeakMap,qs=new WeakSet,fu=function(){var n;const r=((n=q(this,Wr))==null?void 0:n.state)??BN();Pe(this,va,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Bp=function(r){ir.batch(()=>{var n,a,i,o,l,c,d,u;if(q(this,Ds)&&this.hasListeners()){const f=q(this,va).variables,m=q(this,va).context,p={client:q(this,Os),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=q(this,Ds)).onSuccess)==null||a.call(n,r.data,f,m,p),(o=(i=q(this,Ds)).onSettled)==null||o.call(i,r.data,null,f,m,p)):(r==null?void 0:r.type)==="error"&&((c=(l=q(this,Ds)).onError)==null||c.call(l,r.error,f,m,p),(u=(d=q(this,Ds)).onSettled)==null||u.call(d,void 0,r.error,f,m,p))}this.listeners.forEach(f=>{f(q(this,va))})})},Y0),ds,X0,gD=(X0=class extends ml{constructor(t={}){super();qe(this,ds);this.config=t,Pe(this,ds,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??Oy(a,r);let o=this.get(i);return o||(o=new lD({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){q(this,ds).has(t.queryHash)||(q(this,ds).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=q(this,ds).get(t.queryHash);r&&(t.destroy(),r===t&&q(this,ds).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ir.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return q(this,ds).get(t)}getAll(){return[...q(this,ds).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>wb(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>wb(t,n)):r}notify(t){ir.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){ir.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ir.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ds=new WeakMap,X0),Vt,xa,ba,zo,Wo,wa,Ho,Qo,J0,yD=(J0=class{constructor(e={}){qe(this,Vt);qe(this,xa);qe(this,ba);qe(this,zo);qe(this,Wo);qe(this,wa);qe(this,Ho);qe(this,Qo);Pe(this,Vt,e.queryCache||new gD),Pe(this,xa,e.mutationCache||new mD),Pe(this,ba,e.defaultOptions||{}),Pe(this,zo,new Map),Pe(this,Wo,new Map),Pe(this,wa,0)}mount(){hd(this,wa)._++,q(this,wa)===1&&(Pe(this,Ho,My.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,Vt).onFocus())})),Pe(this,Qo,Qu.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,Vt).onOnline())})))}unmount(){var e,t;hd(this,wa)._--,q(this,wa)===0&&((e=q(this,Ho))==null||e.call(this),Pe(this,Ho,void 0),(t=q(this,Qo))==null||t.call(this),Pe(this,Qo,void 0))}isFetching(e){return q(this,Vt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return q(this,xa).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=q(this,Vt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=q(this,Vt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Oa(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return q(this,Vt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=q(this,Vt).get(n.queryHash),i=a==null?void 0:a.state.data,o=zO(t,i);if(o!==void 0)return q(this,Vt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return ir.batch(()=>q(this,Vt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=q(this,Vt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=q(this,Vt);ir.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=q(this,Vt);return ir.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=ir.batch(()=>q(this,Vt).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(yr).catch(yr)}invalidateQueries(e,t={}){return ir.batch(()=>(q(this,Vt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=ir.batch(()=>q(this,Vt).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(yr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(yr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=q(this,Vt).build(this,t);return r.isStaleByTime(Oa(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(yr).catch(yr)}fetchInfiniteQuery(e){return e.behavior=kb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(yr).catch(yr)}ensureInfiniteQueryData(e){return e.behavior=kb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Qu.isOnline()?q(this,xa).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,Vt)}getMutationCache(){return q(this,xa)}getDefaultOptions(){return q(this,ba)}setDefaultOptions(e){Pe(this,ba,e)}setQueryDefaults(e,t){q(this,zo).set(Mi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...q(this,zo).values()],r={};return t.forEach(n=>{Pc(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){q(this,Wo).set(Mi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...q(this,Wo).values()],r={};return t.forEach(n=>{Pc(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...q(this,ba).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Oy(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Dy&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...q(this,ba).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){q(this,Vt).clear(),q(this,xa).clear()}},Vt=new WeakMap,xa=new WeakMap,ba=new WeakMap,zo=new WeakMap,Wo=new WeakMap,wa=new WeakMap,Ho=new WeakMap,Qo=new WeakMap,J0),VN=h.createContext(void 0),Xs=e=>{const t=h.useContext(VN);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},vD=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(VN.Provider,{value:e,children:t})),zN=h.createContext(!1),xD=()=>h.useContext(zN);zN.Provider;function bD(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var wD=h.createContext(bD()),jD=()=>h.useContext(wD),_D=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},ND=e=>{h.useEffect(()=>{e.clearReset()},[e])},SD=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||DN(r,[e.error,n])),CD=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},ED=(e,t)=>e.isLoading&&e.isFetching&&!t,kD=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Tb=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function PD(e,t,r){var f,m,p,x,g;const n=xD(),a=jD(),i=Xs(),o=i.defaultQueryOptions(e);(m=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,o),o._optimisticResults=n?"isRestoring":"optimistic",CD(o),_D(o,a),ND(a);const l=!i.getQueryCache().get(o.queryHash),[c]=h.useState(()=>new t(i,o)),d=c.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(w=>{const v=u?c.subscribe(ir.batchCalls(w)):yr;return c.updateResult(),v},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(o)},[o,c]),kD(o,d))throw Tb(o,c,a);if(SD({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((x=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||x.call(p,o,d),o.experimental_prefetchInRender&&!Di&&ED(d,n)){const w=l?Tb(o,c,a):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(yr).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function rr(e,t){return PD(e,cD)}function $s(e,t){const r=Xs(),[n]=h.useState(()=>new pD(r,e));h.useEffect(()=>{n.setOptions(e)},[n,e]);const a=h.useSyncExternalStore(h.useCallback(o=>n.subscribe(ir.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=h.useCallback((o,l)=>{n.mutate(o,l).catch(yr)},[n]);if(a.error&&DN(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}var TD=["added","removed","updated"];function Ab(e){return TD.includes(e)}async function AD({queryClient:e,persister:t,maxAge:r=1e3*60*60*24,buster:n="",hydrateOptions:a}){try{const i=await t.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>r,l=i.buster!==n;if(o||l)return t.removeClient();nD(e,i.clientState,a)}else return t.removeClient()}catch(i){throw await t.removeClient(),i}}async function Ib({queryClient:e,persister:t,buster:r="",dehydrateOptions:n}){const a={buster:r,timestamp:Date.now(),clientState:rD(e,n)};await t.persistClient(a)}function ID(e){const t=e.queryClient.getQueryCache().subscribe(n=>{Ab(n.type)&&Ib(e)}),r=e.queryClient.getMutationCache().subscribe(n=>{Ab(n.type)&&Ib(e)});return()=>{t(),r()}}function RD(e){let t=!1,r;const n=()=>{t=!0,r==null||r()},a=AD(e).then(()=>{t||(r=ID(e))});return[n,a]}var OD=({persistedClient:e})=>{const t=[...e.clientState.mutations],r=[...e.clientState.queries],n={...e,clientState:{mutations:t,queries:r}},a=[...r].sort((i,o)=>i.state.dataUpdatedAt-o.state.dataUpdatedAt);if(a.length>0){const i=a.shift();return n.clientState.queries=r.filter(o=>o!==i),n}};function Md(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var WN={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,a,i){function o(d,u){if(!a[d]){if(!n[d]){var f=typeof Md=="function"&&Md;if(!u&&f)return f(d,!0);if(l)return l(d,!0);var m=new Error("Cannot find module '"+d+"'");throw m.code="MODULE_NOT_FOUND",m}var p=a[d]={exports:{}};n[d][0].call(p.exports,function(x){var g=n[d][1][x];return o(g||x)},p,p.exports,r,n,a,i)}return a[d].exports}for(var l=typeof Md=="function"&&Md,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(r,n,a){(function(i){var o=i.MutationObserver||i.WebKitMutationObserver,l;if(o){var c=0,d=new o(x),u=i.document.createTextNode("");d.observe(u,{characterData:!0}),l=function(){u.data=c=++c%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var f=new i.MessageChannel;f.port1.onmessage=x,l=function(){f.port2.postMessage(0)}}else"document"in i&&"onreadystatechange"in i.document.createElement("script")?l=function(){var w=i.document.createElement("script");w.onreadystatechange=function(){x(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},i.document.documentElement.appendChild(w)}:l=function(){setTimeout(x,0)};var m,p=[];function x(){m=!0;for(var w,v,y=p.length;y;){for(v=p,p=[],w=-1;++w<y;)v[w]();y=p.length}m=!1}n.exports=g;function g(w){p.push(w)===1&&!m&&l()}}).call(this,typeof Er<"u"?Er:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,a){var i=r(1);function o(){}var l={},c=["REJECTED"],d=["FULFILLED"],u=["PENDING"];n.exports=f;function f(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,_!==o&&g(this,_)}f.prototype.catch=function(_){return this.then(null,_)},f.prototype.then=function(_,S){if(typeof _!="function"&&this.state===d||typeof S!="function"&&this.state===c)return this;var E=new this.constructor(o);if(this.state!==u){var D=this.state===d?_:S;p(E,D,this.outcome)}else this.queue.push(new m(E,_,S));return E};function m(_,S,E){this.promise=_,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(_){l.resolve(this.promise,_)},m.prototype.otherCallFulfilled=function(_){p(this.promise,this.onFulfilled,_)},m.prototype.callRejected=function(_){l.reject(this.promise,_)},m.prototype.otherCallRejected=function(_){p(this.promise,this.onRejected,_)};function p(_,S,E){i(function(){var D;try{D=S(E)}catch(U){return l.reject(_,U)}D===_?l.reject(_,new TypeError("Cannot resolve promise with itself")):l.resolve(_,D)})}l.resolve=function(_,S){var E=w(x,S);if(E.status==="error")return l.reject(_,E.value);var D=E.value;if(D)g(_,D);else{_.state=d,_.outcome=S;for(var U=-1,F=_.queue.length;++U<F;)_.queue[U].callFulfilled(S)}return _},l.reject=function(_,S){_.state=c,_.outcome=S;for(var E=-1,D=_.queue.length;++E<D;)_.queue[E].callRejected(S);return _};function x(_){var S=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof S=="function")return function(){S.apply(_,arguments)}}function g(_,S){var E=!1;function D($){E||(E=!0,l.reject(_,$))}function U($){E||(E=!0,l.resolve(_,$))}function F(){S(U,D)}var L=w(F);L.status==="error"&&D(L.value)}function w(_,S){var E={};try{E.value=_(S),E.status="success"}catch(D){E.status="error",E.value=D}return E}f.resolve=v;function v(_){return _ instanceof this?_:l.resolve(new this(o),_)}f.reject=y;function y(_){var S=new this(o);return l.reject(S,_)}f.all=b;function b(_){var S=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=_.length,D=!1;if(!E)return this.resolve([]);for(var U=new Array(E),F=0,L=-1,$=new this(o);++L<E;)R(_[L],L);return $;function R(I,C){S.resolve(I).then(T,function(re){D||(D=!0,l.reject($,re))});function T(re){U[C]=re,++F===E&&!D&&(D=!0,l.resolve($,U))}}}f.race=j;function j(_){var S=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=_.length,D=!1;if(!E)return this.resolve([]);for(var U=-1,F=new this(o);++U<E;)L(_[U]);return F;function L($){S.resolve($).then(function(R){D||(D=!0,l.resolve(F,R))},function(R){D||(D=!0,l.reject(F,R))})}}},{1:1}],3:[function(r,n,a){(function(i){typeof i.Promise!="function"&&(i.Promise=r(2))}).call(this,typeof Er<"u"?Er:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k};function o(k,B){if(!(k instanceof B))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=l();function d(){try{if(!c||!c.open)return!1;var k=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),B=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!k||B)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function u(k,B){k=k||[],B=B||{};try{return new Blob(k,B)}catch(Q){if(Q.name!=="TypeError")throw Q;for(var A=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,G=new A,Z=0;Z<k.length;Z+=1)G.append(k[Z]);return G.getBlob(B.type)}}typeof Promise>"u"&&r(3);var f=Promise;function m(k,B){B&&k.then(function(A){B(null,A)},function(A){B(A)})}function p(k,B,A){typeof B=="function"&&k.then(B),typeof A=="function"&&k.catch(A)}function x(k){return typeof k!="string"&&(console.warn(k+" used as a key, but it is not a string."),k=String(k)),k}function g(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var w="local-forage-detect-blob-support",v=void 0,y={},b=Object.prototype.toString,j="readonly",_="readwrite";function S(k){for(var B=k.length,A=new ArrayBuffer(B),G=new Uint8Array(A),Z=0;Z<B;Z++)G[Z]=k.charCodeAt(Z);return A}function E(k){return new f(function(B){var A=k.transaction(w,_),G=u([""]);A.objectStore(w).put(G,"key"),A.onabort=function(Z){Z.preventDefault(),Z.stopPropagation(),B(!1)},A.oncomplete=function(){var Z=navigator.userAgent.match(/Chrome\/(\d+)/),Q=navigator.userAgent.match(/Edge\//);B(Q||!Z||parseInt(Z[1],10)>=43)}}).catch(function(){return!1})}function D(k){return typeof v=="boolean"?f.resolve(v):E(k).then(function(B){return v=B,v})}function U(k){var B=y[k.name],A={};A.promise=new f(function(G,Z){A.resolve=G,A.reject=Z}),B.deferredOperations.push(A),B.dbReady?B.dbReady=B.dbReady.then(function(){return A.promise}):B.dbReady=A.promise}function F(k){var B=y[k.name],A=B.deferredOperations.pop();if(A)return A.resolve(),A.promise}function L(k,B){var A=y[k.name],G=A.deferredOperations.pop();if(G)return G.reject(B),G.promise}function $(k,B){return new f(function(A,G){if(y[k.name]=y[k.name]||W(),k.db)if(B)U(k),k.db.close();else return A(k.db);var Z=[k.name];B&&Z.push(k.version);var Q=c.open.apply(c,Z);B&&(Q.onupgradeneeded=function(ue){var ye=Q.result;try{ye.createObjectStore(k.storeName),ue.oldVersion<=1&&ye.createObjectStore(w)}catch(be){if(be.name==="ConstraintError")console.warn('The database "'+k.name+'" has been upgraded from version '+ue.oldVersion+" to version "+ue.newVersion+', but the storage "'+k.storeName+'" already exists.');else throw be}}),Q.onerror=function(ue){ue.preventDefault(),G(Q.error)},Q.onsuccess=function(){var ue=Q.result;ue.onversionchange=function(ye){ye.target.close()},A(ue),F(k)}})}function R(k){return $(k,!1)}function I(k){return $(k,!0)}function C(k,B){if(!k.db)return!0;var A=!k.db.objectStoreNames.contains(k.storeName),G=k.version<k.db.version,Z=k.version>k.db.version;if(G&&(k.version!==B&&console.warn('The database "'+k.name+`" can't be downgraded from version `+k.db.version+" to version "+k.version+"."),k.version=k.db.version),Z||A){if(A){var Q=k.db.version+1;Q>k.version&&(k.version=Q)}return!0}return!1}function T(k){return new f(function(B,A){var G=new FileReader;G.onerror=A,G.onloadend=function(Z){var Q=btoa(Z.target.result||"");B({__local_forage_encoded_blob:!0,data:Q,type:k.type})},G.readAsBinaryString(k)})}function re(k){var B=S(atob(k.data));return u([B],{type:k.type})}function K(k){return k&&k.__local_forage_encoded_blob}function z(k){var B=this,A=B._initReady().then(function(){var G=y[B._dbInfo.name];if(G&&G.dbReady)return G.dbReady});return p(A,k,k),A}function ae(k){U(k);for(var B=y[k.name],A=B.forages,G=0;G<A.length;G++){var Z=A[G];Z._dbInfo.db&&(Z._dbInfo.db.close(),Z._dbInfo.db=null)}return k.db=null,R(k).then(function(Q){return k.db=Q,C(k)?I(k):Q}).then(function(Q){k.db=B.db=Q;for(var ue=0;ue<A.length;ue++)A[ue]._dbInfo.db=Q}).catch(function(Q){throw L(k,Q),Q})}function ge(k,B,A,G){G===void 0&&(G=1);try{var Z=k.db.transaction(k.storeName,B);A(null,Z)}catch(Q){if(G>0&&(!k.db||Q.name==="InvalidStateError"||Q.name==="NotFoundError"))return f.resolve().then(function(){if(!k.db||Q.name==="NotFoundError"&&!k.db.objectStoreNames.contains(k.storeName)&&k.version<=k.db.version)return k.db&&(k.version=k.db.version+1),I(k)}).then(function(){return ae(k).then(function(){ge(k,B,A,G-1)})}).catch(A);A(Q)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function M(k){var B=this,A={db:null};if(k)for(var G in k)A[G]=k[G];var Z=y[A.name];Z||(Z=W(),y[A.name]=Z),Z.forages.push(B),B._initReady||(B._initReady=B.ready,B.ready=z);var Q=[];function ue(){return f.resolve()}for(var ye=0;ye<Z.forages.length;ye++){var be=Z.forages[ye];be!==B&&Q.push(be._initReady().catch(ue))}var _e=Z.forages.slice(0);return f.all(Q).then(function(){return A.db=Z.db,R(A)}).then(function(Ce){return A.db=Ce,C(A,B._defaultConfig.version)?I(A):Ce}).then(function(Ce){A.db=Z.db=Ce,B._dbInfo=A;for(var Fe=0;Fe<_e.length;Fe++){var nt=_e[Fe];nt!==B&&(nt._dbInfo.db=A.db,nt._dbInfo.version=A.version)}})}function Y(k,B){var A=this;k=x(k);var G=new f(function(Z,Q){A.ready().then(function(){ge(A._dbInfo,j,function(ue,ye){if(ue)return Q(ue);try{var be=ye.objectStore(A._dbInfo.storeName),_e=be.get(k);_e.onsuccess=function(){var Ce=_e.result;Ce===void 0&&(Ce=null),K(Ce)&&(Ce=re(Ce)),Z(Ce)},_e.onerror=function(){Q(_e.error)}}catch(Ce){Q(Ce)}})}).catch(Q)});return m(G,B),G}function X(k,B){var A=this,G=new f(function(Z,Q){A.ready().then(function(){ge(A._dbInfo,j,function(ue,ye){if(ue)return Q(ue);try{var be=ye.objectStore(A._dbInfo.storeName),_e=be.openCursor(),Ce=1;_e.onsuccess=function(){var Fe=_e.result;if(Fe){var nt=Fe.value;K(nt)&&(nt=re(nt));var pt=k(nt,Fe.key,Ce++);pt!==void 0?Z(pt):Fe.continue()}else Z()},_e.onerror=function(){Q(_e.error)}}catch(Fe){Q(Fe)}})}).catch(Q)});return m(G,B),G}function ie(k,B,A){var G=this;k=x(k);var Z=new f(function(Q,ue){var ye;G.ready().then(function(){return ye=G._dbInfo,b.call(B)==="[object Blob]"?D(ye.db).then(function(be){return be?B:T(B)}):B}).then(function(be){ge(G._dbInfo,_,function(_e,Ce){if(_e)return ue(_e);try{var Fe=Ce.objectStore(G._dbInfo.storeName);be===null&&(be=void 0);var nt=Fe.put(be,k);Ce.oncomplete=function(){be===void 0&&(be=null),Q(be)},Ce.onabort=Ce.onerror=function(){var pt=nt.error?nt.error:nt.transaction.error;ue(pt)}}catch(pt){ue(pt)}})}).catch(ue)});return m(Z,A),Z}function ne(k,B){var A=this;k=x(k);var G=new f(function(Z,Q){A.ready().then(function(){ge(A._dbInfo,_,function(ue,ye){if(ue)return Q(ue);try{var be=ye.objectStore(A._dbInfo.storeName),_e=be.delete(k);ye.oncomplete=function(){Z()},ye.onerror=function(){Q(_e.error)},ye.onabort=function(){var Ce=_e.error?_e.error:_e.transaction.error;Q(Ce)}}catch(Ce){Q(Ce)}})}).catch(Q)});return m(G,B),G}function O(k){var B=this,A=new f(function(G,Z){B.ready().then(function(){ge(B._dbInfo,_,function(Q,ue){if(Q)return Z(Q);try{var ye=ue.objectStore(B._dbInfo.storeName),be=ye.clear();ue.oncomplete=function(){G()},ue.onabort=ue.onerror=function(){var _e=be.error?be.error:be.transaction.error;Z(_e)}}catch(_e){Z(_e)}})}).catch(Z)});return m(A,k),A}function ee(k){var B=this,A=new f(function(G,Z){B.ready().then(function(){ge(B._dbInfo,j,function(Q,ue){if(Q)return Z(Q);try{var ye=ue.objectStore(B._dbInfo.storeName),be=ye.count();be.onsuccess=function(){G(be.result)},be.onerror=function(){Z(be.error)}}catch(_e){Z(_e)}})}).catch(Z)});return m(A,k),A}function de(k,B){var A=this,G=new f(function(Z,Q){if(k<0){Z(null);return}A.ready().then(function(){ge(A._dbInfo,j,function(ue,ye){if(ue)return Q(ue);try{var be=ye.objectStore(A._dbInfo.storeName),_e=!1,Ce=be.openKeyCursor();Ce.onsuccess=function(){var Fe=Ce.result;if(!Fe){Z(null);return}k===0||_e?Z(Fe.key):(_e=!0,Fe.advance(k))},Ce.onerror=function(){Q(Ce.error)}}catch(Fe){Q(Fe)}})}).catch(Q)});return m(G,B),G}function ce(k){var B=this,A=new f(function(G,Z){B.ready().then(function(){ge(B._dbInfo,j,function(Q,ue){if(Q)return Z(Q);try{var ye=ue.objectStore(B._dbInfo.storeName),be=ye.openKeyCursor(),_e=[];be.onsuccess=function(){var Ce=be.result;if(!Ce){G(_e);return}_e.push(Ce.key),Ce.continue()},be.onerror=function(){Z(be.error)}}catch(Ce){Z(Ce)}})}).catch(Z)});return m(A,k),A}function me(k,B){B=g.apply(this,arguments);var A=this.config();k=typeof k!="function"&&k||{},k.name||(k.name=k.name||A.name,k.storeName=k.storeName||A.storeName);var G=this,Z;if(!k.name)Z=f.reject("Invalid arguments");else{var Q=k.name===A.name&&G._dbInfo.db,ue=Q?f.resolve(G._dbInfo.db):R(k).then(function(ye){var be=y[k.name],_e=be.forages;be.db=ye;for(var Ce=0;Ce<_e.length;Ce++)_e[Ce]._dbInfo.db=ye;return ye});k.storeName?Z=ue.then(function(ye){if(ye.objectStoreNames.contains(k.storeName)){var be=ye.version+1;U(k);var _e=y[k.name],Ce=_e.forages;ye.close();for(var Fe=0;Fe<Ce.length;Fe++){var nt=Ce[Fe];nt._dbInfo.db=null,nt._dbInfo.version=be}var pt=new f(function(yt,Jt){var Ht=c.open(k.name,be);Ht.onerror=function(wn){var wl=Ht.result;wl.close(),Jt(wn)},Ht.onupgradeneeded=function(){var wn=Ht.result;wn.deleteObjectStore(k.storeName)},Ht.onsuccess=function(){var wn=Ht.result;wn.close(),yt(wn)}});return pt.then(function(yt){_e.db=yt;for(var Jt=0;Jt<Ce.length;Jt++){var Ht=Ce[Jt];Ht._dbInfo.db=yt,F(Ht._dbInfo)}}).catch(function(yt){throw(L(k,yt)||f.resolve()).catch(function(){}),yt})}}):Z=ue.then(function(ye){U(k);var be=y[k.name],_e=be.forages;ye.close();for(var Ce=0;Ce<_e.length;Ce++){var Fe=_e[Ce];Fe._dbInfo.db=null}var nt=new f(function(pt,yt){var Jt=c.deleteDatabase(k.name);Jt.onerror=function(){var Ht=Jt.result;Ht&&Ht.close(),yt(Jt.error)},Jt.onblocked=function(){console.warn('dropInstance blocked for database "'+k.name+'" until all open connections are closed')},Jt.onsuccess=function(){var Ht=Jt.result;Ht&&Ht.close(),pt(Ht)}});return nt.then(function(pt){be.db=pt;for(var yt=0;yt<_e.length;yt++){var Jt=_e[yt];F(Jt._dbInfo)}}).catch(function(pt){throw(L(k,pt)||f.resolve()).catch(function(){}),pt})})}return m(Z,B),Z}var He={_driver:"asyncStorage",_initStorage:M,_support:d(),iterate:X,getItem:Y,setItem:ie,removeItem:ne,clear:O,length:ee,key:de,keys:ce,dropInstance:me};function ut(){return typeof openDatabase=="function"}var J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ne="~~local_forage_type~",Ye=/^~~local_forage_type~([^~]+)~/,Me="__lfsc__:",dt=Me.length,N="arbf",P="blob",V="si08",se="ui08",te="uic8",oe="si16",fe="si32",De="ur16",Be="ui32",Qe="fl32",jt="fl64",bt=dt+N.length,Wt=Object.prototype.toString;function lt(k){var B=k.length*.75,A=k.length,G,Z=0,Q,ue,ye,be;k[k.length-1]==="="&&(B--,k[k.length-2]==="="&&B--);var _e=new ArrayBuffer(B),Ce=new Uint8Array(_e);for(G=0;G<A;G+=4)Q=J.indexOf(k[G]),ue=J.indexOf(k[G+1]),ye=J.indexOf(k[G+2]),be=J.indexOf(k[G+3]),Ce[Z++]=Q<<2|ue>>4,Ce[Z++]=(ue&15)<<4|ye>>2,Ce[Z++]=(ye&3)<<6|be&63;return _e}function st(k){var B=new Uint8Array(k),A="",G;for(G=0;G<B.length;G+=3)A+=J[B[G]>>2],A+=J[(B[G]&3)<<4|B[G+1]>>4],A+=J[(B[G+1]&15)<<2|B[G+2]>>6],A+=J[B[G+2]&63];return B.length%3===2?A=A.substring(0,A.length-1)+"=":B.length%3===1&&(A=A.substring(0,A.length-2)+"=="),A}function on(k,B){var A="";if(k&&(A=Wt.call(k)),k&&(A==="[object ArrayBuffer]"||k.buffer&&Wt.call(k.buffer)==="[object ArrayBuffer]")){var G,Z=Me;k instanceof ArrayBuffer?(G=k,Z+=N):(G=k.buffer,A==="[object Int8Array]"?Z+=V:A==="[object Uint8Array]"?Z+=se:A==="[object Uint8ClampedArray]"?Z+=te:A==="[object Int16Array]"?Z+=oe:A==="[object Uint16Array]"?Z+=De:A==="[object Int32Array]"?Z+=fe:A==="[object Uint32Array]"?Z+=Be:A==="[object Float32Array]"?Z+=Qe:A==="[object Float64Array]"?Z+=jt:B(new Error("Failed to get type for BinaryArray"))),B(Z+st(G))}else if(A==="[object Blob]"){var Q=new FileReader;Q.onload=function(){var ue=Ne+k.type+"~"+st(this.result);B(Me+P+ue)},Q.readAsArrayBuffer(k)}else try{B(JSON.stringify(k))}catch(ue){console.error("Couldn't convert value into a JSON string: ",k),B(null,ue)}}function $e(k){if(k.substring(0,dt)!==Me)return JSON.parse(k);var B=k.substring(bt),A=k.substring(dt,bt),G;if(A===P&&Ye.test(B)){var Z=B.match(Ye);G=Z[1],B=B.substring(Z[0].length)}var Q=lt(B);switch(A){case N:return Q;case P:return u([Q],{type:G});case V:return new Int8Array(Q);case se:return new Uint8Array(Q);case te:return new Uint8ClampedArray(Q);case oe:return new Int16Array(Q);case De:return new Uint16Array(Q);case fe:return new Int32Array(Q);case Be:return new Uint32Array(Q);case Qe:return new Float32Array(Q);case jt:return new Float64Array(Q);default:throw new Error("Unkown type: "+A)}}var St={serialize:on,deserialize:$e,stringToBuffer:lt,bufferToString:st};function ft(k,B,A,G){k.executeSql("CREATE TABLE IF NOT EXISTS "+B.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],A,G)}function Pr(k){var B=this,A={db:null};if(k)for(var G in k)A[G]=typeof k[G]!="string"?k[G].toString():k[G];var Z=new f(function(Q,ue){try{A.db=openDatabase(A.name,String(A.version),A.description,A.size)}catch(ye){return ue(ye)}A.db.transaction(function(ye){ft(ye,A,function(){B._dbInfo=A,Q()},function(be,_e){ue(_e)})},ue)});return A.serializer=St,Z}function Ue(k,B,A,G,Z,Q){k.executeSql(A,G,Z,function(ue,ye){ye.code===ye.SYNTAX_ERR?ue.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[B.storeName],function(be,_e){_e.rows.length?Q(be,ye):ft(be,B,function(){be.executeSql(A,G,Z,Q)},Q)},Q):Q(ue,ye)},Q)}function Lt(k,B){var A=this;k=x(k);var G=new f(function(Z,Q){A.ready().then(function(){var ue=A._dbInfo;ue.db.transaction(function(ye){Ue(ye,ue,"SELECT * FROM "+ue.storeName+" WHERE key = ? LIMIT 1",[k],function(be,_e){var Ce=_e.rows.length?_e.rows.item(0).value:null;Ce&&(Ce=ue.serializer.deserialize(Ce)),Z(Ce)},function(be,_e){Q(_e)})})}).catch(Q)});return m(G,B),G}function Ft(k,B){var A=this,G=new f(function(Z,Q){A.ready().then(function(){var ue=A._dbInfo;ue.db.transaction(function(ye){Ue(ye,ue,"SELECT * FROM "+ue.storeName,[],function(be,_e){for(var Ce=_e.rows,Fe=Ce.length,nt=0;nt<Fe;nt++){var pt=Ce.item(nt),yt=pt.value;if(yt&&(yt=ue.serializer.deserialize(yt)),yt=k(yt,pt.key,nt+1),yt!==void 0){Z(yt);return}}Z()},function(be,_e){Q(_e)})})}).catch(Q)});return m(G,B),G}function At(k,B,A,G){var Z=this;k=x(k);var Q=new f(function(ue,ye){Z.ready().then(function(){B===void 0&&(B=null);var be=B,_e=Z._dbInfo;_e.serializer.serialize(B,function(Ce,Fe){Fe?ye(Fe):_e.db.transaction(function(nt){Ue(nt,_e,"INSERT OR REPLACE INTO "+_e.storeName+" (key, value) VALUES (?, ?)",[k,Ce],function(){ue(be)},function(pt,yt){ye(yt)})},function(nt){if(nt.code===nt.QUOTA_ERR){if(G>0){ue(At.apply(Z,[k,be,A,G-1]));return}ye(nt)}})})}).catch(ye)});return m(Q,A),Q}function bn(k,B,A){return At.apply(this,[k,B,A,1])}function Ie(k,B){var A=this;k=x(k);var G=new f(function(Z,Q){A.ready().then(function(){var ue=A._dbInfo;ue.db.transaction(function(ye){Ue(ye,ue,"DELETE FROM "+ue.storeName+" WHERE key = ?",[k],function(){Z()},function(be,_e){Q(_e)})})}).catch(Q)});return m(G,B),G}function We(k){var B=this,A=new f(function(G,Z){B.ready().then(function(){var Q=B._dbInfo;Q.db.transaction(function(ue){Ue(ue,Q,"DELETE FROM "+Q.storeName,[],function(){G()},function(ye,be){Z(be)})})}).catch(Z)});return m(A,k),A}function Xe(k){var B=this,A=new f(function(G,Z){B.ready().then(function(){var Q=B._dbInfo;Q.db.transaction(function(ue){Ue(ue,Q,"SELECT COUNT(key) as c FROM "+Q.storeName,[],function(ye,be){var _e=be.rows.item(0).c;G(_e)},function(ye,be){Z(be)})})}).catch(Z)});return m(A,k),A}function It(k,B){var A=this,G=new f(function(Z,Q){A.ready().then(function(){var ue=A._dbInfo;ue.db.transaction(function(ye){Ue(ye,ue,"SELECT key FROM "+ue.storeName+" WHERE id = ? LIMIT 1",[k+1],function(be,_e){var Ce=_e.rows.length?_e.rows.item(0).key:null;Z(Ce)},function(be,_e){Q(_e)})})}).catch(Q)});return m(G,B),G}function wt(k){var B=this,A=new f(function(G,Z){B.ready().then(function(){var Q=B._dbInfo;Q.db.transaction(function(ue){Ue(ue,Q,"SELECT key FROM "+Q.storeName,[],function(ye,be){for(var _e=[],Ce=0;Ce<be.rows.length;Ce++)_e.push(be.rows.item(Ce).key);G(_e)},function(ye,be){Z(be)})})}).catch(Z)});return m(A,k),A}function pr(k){return new f(function(B,A){k.transaction(function(G){G.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Z,Q){for(var ue=[],ye=0;ye<Q.rows.length;ye++)ue.push(Q.rows.item(ye).name);B({db:k,storeNames:ue})},function(Z,Q){A(Q)})},function(G){A(G)})})}function wr(k,B){B=g.apply(this,arguments);var A=this.config();k=typeof k!="function"&&k||{},k.name||(k.name=k.name||A.name,k.storeName=k.storeName||A.storeName);var G=this,Z;return k.name?Z=new f(function(Q){var ue;k.name===A.name?ue=G._dbInfo.db:ue=openDatabase(k.name,"","",0),k.storeName?Q({db:ue,storeNames:[k.storeName]}):Q(pr(ue))}).then(function(Q){return new f(function(ue,ye){Q.db.transaction(function(be){function _e(pt){return new f(function(yt,Jt){be.executeSql("DROP TABLE IF EXISTS "+pt,[],function(){yt()},function(Ht,wn){Jt(wn)})})}for(var Ce=[],Fe=0,nt=Q.storeNames.length;Fe<nt;Fe++)Ce.push(_e(Q.storeNames[Fe]));f.all(Ce).then(function(){ue()}).catch(function(pt){ye(pt)})},function(be){ye(be)})})}):Z=f.reject("Invalid arguments"),m(Z,B),Z}var Ve={_driver:"webSQLStorage",_initStorage:Pr,_support:ut(),iterate:Ft,getItem:Lt,setItem:bn,removeItem:Ie,clear:We,length:Xe,key:It,keys:wt,dropInstance:wr};function rt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function jr(k,B){var A=k.name+"/";return k.storeName!==B.storeName&&(A+=k.storeName+"/"),A}function $t(){var k="_localforage_support_test";try{return localStorage.setItem(k,!0),localStorage.removeItem(k),!1}catch{return!0}}function xl(){return!$t()||localStorage.length>0}function ud(k){var B=this,A={};if(k)for(var G in k)A[G]=k[G];return A.keyPrefix=jr(k,B._defaultConfig),xl()?(B._dbInfo=A,A.serializer=St,f.resolve()):f.reject()}function hh(k){var B=this,A=B.ready().then(function(){for(var G=B._dbInfo.keyPrefix,Z=localStorage.length-1;Z>=0;Z--){var Q=localStorage.key(Z);Q.indexOf(G)===0&&localStorage.removeItem(Q)}});return m(A,k),A}function $k(k,B){var A=this;k=x(k);var G=A.ready().then(function(){var Z=A._dbInfo,Q=localStorage.getItem(Z.keyPrefix+k);return Q&&(Q=Z.serializer.deserialize(Q)),Q});return m(G,B),G}function qk(k,B){var A=this,G=A.ready().then(function(){for(var Z=A._dbInfo,Q=Z.keyPrefix,ue=Q.length,ye=localStorage.length,be=1,_e=0;_e<ye;_e++){var Ce=localStorage.key(_e);if(Ce.indexOf(Q)===0){var Fe=localStorage.getItem(Ce);if(Fe&&(Fe=Z.serializer.deserialize(Fe)),Fe=k(Fe,Ce.substring(ue),be++),Fe!==void 0)return Fe}}});return m(G,B),G}function Uk(k,B){var A=this,G=A.ready().then(function(){var Z=A._dbInfo,Q;try{Q=localStorage.key(k)}catch{Q=null}return Q&&(Q=Q.substring(Z.keyPrefix.length)),Q});return m(G,B),G}function Bk(k){var B=this,A=B.ready().then(function(){for(var G=B._dbInfo,Z=localStorage.length,Q=[],ue=0;ue<Z;ue++){var ye=localStorage.key(ue);ye.indexOf(G.keyPrefix)===0&&Q.push(ye.substring(G.keyPrefix.length))}return Q});return m(A,k),A}function Vk(k){var B=this,A=B.keys().then(function(G){return G.length});return m(A,k),A}function zk(k,B){var A=this;k=x(k);var G=A.ready().then(function(){var Z=A._dbInfo;localStorage.removeItem(Z.keyPrefix+k)});return m(G,B),G}function Wk(k,B,A){var G=this;k=x(k);var Z=G.ready().then(function(){B===void 0&&(B=null);var Q=B;return new f(function(ue,ye){var be=G._dbInfo;be.serializer.serialize(B,function(_e,Ce){if(Ce)ye(Ce);else try{localStorage.setItem(be.keyPrefix+k,_e),ue(Q)}catch(Fe){(Fe.name==="QuotaExceededError"||Fe.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ye(Fe),ye(Fe)}})})});return m(Z,A),Z}function Hk(k,B){if(B=g.apply(this,arguments),k=typeof k!="function"&&k||{},!k.name){var A=this.config();k.name=k.name||A.name,k.storeName=k.storeName||A.storeName}var G=this,Z;return k.name?Z=new f(function(Q){k.storeName?Q(jr(k,G._defaultConfig)):Q(k.name+"/")}).then(function(Q){for(var ue=localStorage.length-1;ue>=0;ue--){var ye=localStorage.key(ue);ye.indexOf(Q)===0&&localStorage.removeItem(ye)}}):Z=f.reject("Invalid arguments"),m(Z,B),Z}var Qk={_driver:"localStorageWrapper",_initStorage:ud,_support:rt(),iterate:qk,getItem:$k,setItem:Wk,removeItem:zk,clear:hh,length:Vk,key:Uk,keys:Bk,dropInstance:Hk},Kk=function(B,A){return B===A||typeof B=="number"&&typeof A=="number"&&isNaN(B)&&isNaN(A)},Gk=function(B,A){for(var G=B.length,Z=0;Z<G;){if(Kk(B[Z],A))return!0;Z++}return!1},Ov=Array.isArray||function(k){return Object.prototype.toString.call(k)==="[object Array]"},bl={},Dv={},Gi={INDEXEDDB:He,WEBSQL:Ve,LOCALSTORAGE:Qk},Yk=[Gi.INDEXEDDB._driver,Gi.WEBSQL._driver,Gi.LOCALSTORAGE._driver],fd=["dropInstance"],mh=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(fd),Xk={description:"",driver:Yk.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Jk(k,B){k[B]=function(){var A=arguments;return k.ready().then(function(){return k[B].apply(k,A)})}}function ph(){for(var k=1;k<arguments.length;k++){var B=arguments[k];if(B)for(var A in B)B.hasOwnProperty(A)&&(Ov(B[A])?arguments[0][A]=B[A].slice():arguments[0][A]=B[A])}return arguments[0]}var Zk=function(){function k(B){o(this,k);for(var A in Gi)if(Gi.hasOwnProperty(A)){var G=Gi[A],Z=G._driver;this[A]=Z,bl[Z]||this.defineDriver(G)}this._defaultConfig=ph({},Xk),this._config=ph({},this._defaultConfig,B),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return k.prototype.config=function(A){if((typeof A>"u"?"undefined":i(A))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var G in A){if(G==="storeName"&&(A[G]=A[G].replace(/\W/g,"_")),G==="version"&&typeof A[G]!="number")return new Error("Database version must be a number.");this._config[G]=A[G]}return"driver"in A&&A.driver?this.setDriver(this._config.driver):!0}else return typeof A=="string"?this._config[A]:this._config},k.prototype.defineDriver=function(A,G,Z){var Q=new f(function(ue,ye){try{var be=A._driver,_e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!A._driver){ye(_e);return}for(var Ce=mh.concat("_initStorage"),Fe=0,nt=Ce.length;Fe<nt;Fe++){var pt=Ce[Fe],yt=!Gk(fd,pt);if((yt||A[pt])&&typeof A[pt]!="function"){ye(_e);return}}var Jt=function(){for(var wl=function(rP){return function(){var nP=new Error("Method "+rP+" is not implemented by the current driver"),Mv=f.reject(nP);return m(Mv,arguments[arguments.length-1]),Mv}},gh=0,tP=fd.length;gh<tP;gh++){var yh=fd[gh];A[yh]||(A[yh]=wl(yh))}};Jt();var Ht=function(wl){bl[be]&&console.info("Redefining LocalForage driver: "+be),bl[be]=A,Dv[be]=wl,ue()};"_support"in A?A._support&&typeof A._support=="function"?A._support().then(Ht,ye):Ht(!!A._support):Ht(!0)}catch(wn){ye(wn)}});return p(Q,G,Z),Q},k.prototype.driver=function(){return this._driver||null},k.prototype.getDriver=function(A,G,Z){var Q=bl[A]?f.resolve(bl[A]):f.reject(new Error("Driver not found."));return p(Q,G,Z),Q},k.prototype.getSerializer=function(A){var G=f.resolve(St);return p(G,A),G},k.prototype.ready=function(A){var G=this,Z=G._driverSet.then(function(){return G._ready===null&&(G._ready=G._initDriver()),G._ready});return p(Z,A,A),Z},k.prototype.setDriver=function(A,G,Z){var Q=this;Ov(A)||(A=[A]);var ue=this._getSupportedDrivers(A);function ye(){Q._config.driver=Q.driver()}function be(Fe){return Q._extend(Fe),ye(),Q._ready=Q._initStorage(Q._config),Q._ready}function _e(Fe){return function(){var nt=0;function pt(){for(;nt<Fe.length;){var yt=Fe[nt];return nt++,Q._dbInfo=null,Q._ready=null,Q.getDriver(yt).then(be).catch(pt)}ye();var Jt=new Error("No available storage method found.");return Q._driverSet=f.reject(Jt),Q._driverSet}return pt()}}var Ce=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Ce.then(function(){var Fe=ue[0];return Q._dbInfo=null,Q._ready=null,Q.getDriver(Fe).then(function(nt){Q._driver=nt._driver,ye(),Q._wrapLibraryMethodsWithReady(),Q._initDriver=_e(ue)})}).catch(function(){ye();var Fe=new Error("No available storage method found.");return Q._driverSet=f.reject(Fe),Q._driverSet}),p(this._driverSet,G,Z),this._driverSet},k.prototype.supports=function(A){return!!Dv[A]},k.prototype._extend=function(A){ph(this,A)},k.prototype._getSupportedDrivers=function(A){for(var G=[],Z=0,Q=A.length;Z<Q;Z++){var ue=A[Z];this.supports(ue)&&G.push(ue)}return G},k.prototype._wrapLibraryMethodsWithReady=function(){for(var A=0,G=mh.length;A<G;A++)Jk(this,mh[A])},k.prototype.createInstance=function(A){return new k(A)},k}(),eP=new Zk;n.exports=eP},{3:3}]},{},[4])(4)})})(WN);var DD=WN.exports;const Ei=bg(DD);Ei.config({name:"semiproperty-guardian",storeName:"react-query-cache",description:"Persisted React Query cache for offline support"});const Jh="rq-cache-v1",MD={persistClient:async e=>{try{await Ei.setItem(Jh,e)}catch(t){console.warn("Failed to persist query client",t)}},restoreClient:async()=>{try{return await Ei.getItem(Jh)??void 0}catch(e){console.warn("Failed to restore query client",e);return}},removeClient:async()=>{try{await Ei.removeItem(Jh)}catch(e){console.warn("Failed to remove persisted query client",e)}}},HN=5*60*1e3,LD=24*60*60*1e3,FD=24*60*60*1e3,QN="offline-mutation-queue-v1";Ei.config({name:"semiproperty-guardian",storeName:"offline-queue"});async function KN(){return await Ei.getItem(QN)||[]}async function GN(e){await Ei.setItem(QN,e)}async function As(e,t){const r={id:`${e}-${Date.now()}-${Math.random().toString(36).slice(2)}`,name:e,payload:t,createdAt:Date.now()},n=await KN();return n.push(r),await GN(n),r}async function $D(e){if(!navigator.onLine)return{processed:0,failed:0};let t=await KN();if(!t.length)return{processed:0,failed:0};const r=[];let n=0,a=0;for(const i of t){const o=e[i.name];if(!o){r.push(i);continue}try{await o(i.payload),n+=1}catch(l){console.warn("Failed processing offline mutation",i.name,l),a+=1,r.push(i)}}return await GN(r),{processed:n,failed:a}}const qD="modulepreload",UD=function(e){return"/semi-property-guardian/"+e},Rb={},Xc=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=UD(c),c in Rb)return;Rb[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":qD,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},BD=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Xc(async()=>{const{default:n}=await Promise.resolve().then(()=>pl);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Fy extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class VD extends Fy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ob extends Fy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Db extends Fy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Vp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Vp||(Vp={}));var zD=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class WD{constructor(t,{headers:r={},customFetch:n,region:a=Vp.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=BD(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return zD(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(g=>{throw new VD(g)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new Ob(f);if(!f.ok)throw new Db(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return p==="application/json"?x=yield f.json():p==="application/octet-stream"?x=yield f.blob():p==="text/event-stream"?x=f:p==="multipart/form-data"?x=yield f.formData():x=yield f.text(),{data:x,error:null,response:f}}catch(a){return{data:null,error:a,response:a instanceof Db||a instanceof Ob?a.context:void 0}}})}}var Xr={},$y={},Ff={},Jc={},$f={},qf={},HD=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},sl=HD();const QD=sl.fetch,YN=sl.fetch.bind(sl),XN=sl.Headers,KD=sl.Request,GD=sl.Response,pl=Object.freeze(Object.defineProperty({__proto__:null,Headers:XN,Request:KD,Response:GD,default:YN,fetch:QD},Symbol.toStringTag,{value:"Module"})),YD=aP(pl);var Uf={};Object.defineProperty(Uf,"__esModule",{value:!0});let XD=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Uf.default=XD;var JN=Er&&Er.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qf,"__esModule",{value:!0});const JD=JN(YD),ZD=JN(Uf);let eM=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=JD.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,d;let u=null,f=null,m=null,p=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=y:f=JSON.parse(y))}const w=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&v&&v.length>1&&(m=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,p=406,x="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const w=await i.text();try{u=JSON.parse(w),Array.isArray(u)&&i.status===404&&(f=[],u=null,p=200,x="OK")}catch{i.status===404&&w===""?(p=204,x="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,p=200,x="OK"),u&&this.shouldThrowOnError)throw new ZD.default(u)}return{error:u,data:f,count:m,status:p,statusText:x}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};qf.default=eM;var tM=Er&&Er.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($f,"__esModule",{value:!0});const rM=tM(qf);let nM=class extends rM.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};$f.default=nM;var sM=Er&&Er.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jc,"__esModule",{value:!0});const aM=sM($f);let iM=class extends aM.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Jc.default=iM;var oM=Er&&Er.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ff,"__esModule",{value:!0});const Il=oM(Jc);let lM=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Il.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var a;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Il.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Il.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Il.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Il.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Ff.default=lM;var ZN=Er&&Er.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($y,"__esModule",{value:!0});const cM=ZN(Ff),dM=ZN(Jc);let uM=class eS{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new cM.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new eS(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([f,m])=>m!==void 0).map(([f,m])=>[f,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([f,m])=>{c.searchParams.append(f,m)})):(l="POST",d=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new dM.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};$y.default=uM;var gl=Er&&Er.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.PostgrestError=Xr.PostgrestBuilder=Xr.PostgrestTransformBuilder=Xr.PostgrestFilterBuilder=Xr.PostgrestQueryBuilder=Xr.PostgrestClient=void 0;const tS=gl($y);Xr.PostgrestClient=tS.default;const rS=gl(Ff);Xr.PostgrestQueryBuilder=rS.default;const nS=gl(Jc);Xr.PostgrestFilterBuilder=nS.default;const sS=gl($f);Xr.PostgrestTransformBuilder=sS.default;const aS=gl(qf);Xr.PostgrestBuilder=aS.default;const iS=gl(Uf);Xr.PostgrestError=iS.default;var fM=Xr.default={PostgrestClient:tS.default,PostgrestQueryBuilder:rS.default,PostgrestFilterBuilder:nS.default,PostgrestTransformBuilder:sS.default,PostgrestBuilder:aS.default,PostgrestError:iS.default};const{PostgrestClient:hM,PostgrestQueryBuilder:NV,PostgrestFilterBuilder:SV,PostgrestTransformBuilder:CV,PostgrestBuilder:EV,PostgrestError:kV}=fM;class mM{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const pM="2.15.5",gM=`realtime-js/${pM}`,yM="1.0.0",zp=1e4,vM=1e3,xM=100;var nc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(nc||(nc={}));var nr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(nr||(nr={}));var Bn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Bn||(Bn={}));var Wp;(function(e){e.websocket="websocket"})(Wp||(Wp={}));var ci;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ci||(ci={}));class bM{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class oS{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _t;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(_t||(_t={}));const Mb=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=wM(o,e,t,a),i),{})},wM=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?lS(i,o):Hp(o)},lS=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return SM(t,r)}switch(e){case _t.bool:return jM(t);case _t.float4:case _t.float8:case _t.int2:case _t.int4:case _t.int8:case _t.numeric:case _t.oid:return _M(t);case _t.json:case _t.jsonb:return NM(t);case _t.timestamp:return CM(t);case _t.abstime:case _t.date:case _t.daterange:case _t.int4range:case _t.int8range:case _t.money:case _t.reltime:case _t.text:case _t.time:case _t.timestamptz:case _t.timetz:case _t.tsrange:case _t.tstzrange:return Hp(t);default:return Hp(t)}},Hp=e=>e,jM=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},_M=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},NM=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},SM=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>lS(t,l))}return e},CM=e=>typeof e=="string"?e.replace(" ","T"):e,cS=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Zh{constructor(t,r,n={},a=zp){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Lb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Lb||(Lb={}));class sc{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=sc.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=sc.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=sc.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const f=i[d];if(f){const m=u.map(w=>w.presence_ref),p=f.map(w=>w.presence_ref),x=u.filter(w=>p.indexOf(w.presence_ref)<0),g=f.filter(w=>m.indexOf(w.presence_ref)<0);x.length>0&&(l[d]=x),g.length>0&&(c[d]=g)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const f=t[l].map(p=>p.presence_ref),m=u.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...m)}n(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Fb||(Fb={}));var ac;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ac||(ac={}));var Ps;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ps||(Ps={}));class qy{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=nr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Zh(this,Bn.join,this.params,this.timeout),this.rejoinTimer=new oS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nr.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=nr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=nr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bn.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new sc(this),this.broadcastEndpointURL=cS(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==nr.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[ac.PRESENCE]&&this.bindings[ac.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Ps.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Ps.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var x;if(this.socket.setAuth(),p===void 0){t==null||t(Ps.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(x=g==null?void 0:g.length)!==null&&x!==void 0?x:0,v=[];for(let y=0;y<w;y++){const b=g[y],{filter:{event:j,schema:_,table:S,filter:E}}=b,D=p&&p[y];if(D&&D.event===j&&D.schema===_&&D.table===S&&D.filter===E)v.push(Object.assign(Object.assign({},b),{id:D.id}));else{this.unsubscribe(),this.state=nr.errored,t==null||t(Ps.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Ps.SUBSCRIBED);return}}).receive("error",p=>{this.state=nr.errored,t==null||t(Ps.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ps.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===nr.joined&&t===ac.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=nr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Zh(this,Bn.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Zh(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>xM){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Bn;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var x,g,w;return((x=p.filter)===null||x===void 0?void 0:x.event)==="*"||((w=(g=p.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var x,g,w,v,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const j=p.id,_=(x=p.filter)===null||x===void 0?void 0:x.event;return j&&((g=r.ids)===null||g===void 0?void 0:g.includes(j))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const j=(y=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return j==="*"||j===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:g,table:w,commit_timestamp:v,type:y,errors:b}=x;m=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:v,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(x))}p.callback(m,n)})}_isClosed(){return this.state===nr.closed}_isJoined(){return this.state===nr.joined}_isJoining(){return this.state===nr.joining}_isLeaving(){return this.state===nr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&qy.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Bn.close,{},t)}_onError(t){this._on(Bn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Mb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Mb(t.columns,t.old_record)),r}}const em=()=>{},Ld={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},EM=[1e3,2e3,5e3,1e4],kM=1e4,PM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class TM{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zp,this.transport=null,this.heartbeatIntervalMs=Ld.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=em,this.ref=0,this.reconnectTimer=null,this.logger=em,this.conn=null,this.sendBuffer=[],this.serializer=new bM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>Xc(async()=>{const{default:l}=await Promise.resolve().then(()=>pl);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Wp.websocket}`,this.httpEndpoint=cS(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=mM.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yM}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case nc.connecting:return ci.Connecting;case nc.open:return ci.Open;case nc.closing:return ci.Closing;default:return ci.Closed}}isConnected(){return this.connectionState()===ci.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new qy(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(vM,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ld.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Bn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([PM],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:gM};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Bn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new oS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ld.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,d,u;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:zp,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Ld.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:em,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:f=>EM[f-1]||kM,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(f,m)=>m(JSON.stringify(f)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Uy extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function sr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class AM extends Uy{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qp extends Uy{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var IM=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const dS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Xc(async()=>{const{default:n}=await Promise.resolve().then(()=>pl);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},RM=()=>IM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xc(()=>Promise.resolve().then(()=>pl),void 0)).Response:Response}),Kp=e=>{if(Array.isArray(e))return e.map(r=>Kp(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Kp(n)}),t},OM=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Wi=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const tm=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),DM=(e,t,r)=>Wi(void 0,void 0,void 0,function*(){const n=yield RM();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new AM(tm(a),i,o))}).catch(a=>{t(new Qp(tm(a),a))}):t(new Qp(tm(e),e))}),MM=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(OM(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Zc(e,t,r,n,a,i){return Wi(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,MM(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>DM(c,l,n))})})}function Ku(e,t,r,n){return Wi(this,void 0,void 0,function*(){return Zc(e,"GET",t,r,n)})}function is(e,t,r,n,a){return Wi(this,void 0,void 0,function*(){return Zc(e,"POST",t,n,a,r)})}function Gp(e,t,r,n,a){return Wi(this,void 0,void 0,function*(){return Zc(e,"PUT",t,n,a,r)})}function LM(e,t,r,n){return Wi(this,void 0,void 0,function*(){return Zc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function uS(e,t,r,n,a){return Wi(this,void 0,void 0,function*(){return Zc(e,"DELETE",t,n,a,r)})}var Tr=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const FM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$b={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $M{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=dS(a)}uploadOrUpdate(t,r,n,a){return Tr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},$b),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),f=yield(t=="PUT"?Gp:is)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(sr(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Tr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Tr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:$b.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield Gp(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(sr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Tr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield is(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Uy("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}update(t,r,n){return Tr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Tr(this,void 0,void 0,function*(){try{return{data:yield is(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(sr(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Tr(this,void 0,void 0,function*(){try{return{data:{path:(yield is(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(sr(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Tr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield is(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(sr(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Tr(this,void 0,void 0,function*(){try{const a=yield is(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(sr(a))return{data:null,error:a};throw a}})}download(t,r){return Tr(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Ku(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(sr(l))return{data:null,error:l};throw l}})}info(t){return Tr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Ku(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Kp(n),error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}exists(t){return Tr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield LM(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(sr(n)&&n instanceof Qp){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return Tr(this,void 0,void 0,function*(){try{return{data:yield uS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(sr(r))return{data:null,error:r};throw r}})}list(t,r,n){return Tr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},FM),r),{prefix:t||""});return{data:yield is(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(sr(a))return{data:null,error:a};throw a}})}listV2(t,r){return Tr(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield is(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const qM="2.11.1",UM={"X-Client-Info":`storage-js/${qM}`};var Xi=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class BM{constructor(t,r={},n,a){const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},UM),r),this.fetch=dS(n)}listBuckets(){return Xi(this,void 0,void 0,function*(){try{return{data:yield Ku(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(sr(t))return{data:null,error:t};throw t}})}getBucket(t){return Xi(this,void 0,void 0,function*(){try{return{data:yield Ku(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(sr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Xi(this,void 0,void 0,function*(){try{return{data:yield is(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Xi(this,void 0,void 0,function*(){try{return{data:yield Gp(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Xi(this,void 0,void 0,function*(){try{return{data:yield is(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(sr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Xi(this,void 0,void 0,function*(){try{return{data:yield uS(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(sr(r))return{data:null,error:r};throw r}})}}class VM extends BM{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new $M(this.url,this.headers,t,this.fetch)}}const zM="2.57.2";let zl="";typeof Deno<"u"?zl="deno":typeof document<"u"?zl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zl="react-native":zl="node";const WM={"X-Client-Info":`supabase-js-${zl}/${zM}`},HM={headers:WM},QM={schema:"public"},KM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},GM={};var YM=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const XM=e=>{let t;return e?t=e:typeof fetch>"u"?t=YN:t=fetch,(...r)=>t(...r)},JM=()=>typeof Headers>"u"?XN:Headers,ZM=(e,t,r)=>{const n=XM(r),a=JM();return(i,o)=>YM(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var eL=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};function tL(e){return e.endsWith("/")?e:e+"/"}function rL(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:f}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>eL(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const fS="2.71.1",oo=30*1e3,Yp=3,rm=Yp*oo,nL="http://localhost:9999",sL="supabase.auth.token",aL={"X-Client-Info":`gotrue-js/${fS}`},Xp="X-Supabase-Api-Version",hS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iL=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oL=10*60*1e3;class By extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Je(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class lL extends By{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function cL(e){return Je(e)&&e.name==="AuthApiError"}class mS extends By{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ya extends By{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class aa extends Ya{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function dL(e){return Je(e)&&e.name==="AuthSessionMissingError"}class Fd extends Ya{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $d extends Ya{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class qd extends Ya{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uL(e){return Je(e)&&e.name==="AuthImplicitGrantRedirectError"}class qb extends Ya{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jp extends Ya{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function nm(e){return Je(e)&&e.name==="AuthRetryableFetchError"}class Ub extends Ya{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Zp extends Ya{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Bb=` 	
\r=`.split(""),fL=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Bb.length;t+=1)e[Bb[t].charCodeAt(0)]=-2;for(let t=0;t<Gu.length;t+=1)e[Gu[t].charCodeAt(0)]=t;return e})();function Vb(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Gu[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Gu[n]),t.queuedBits-=6}}function pS(e,t,r){const n=fL[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function zb(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{pL(o,n,r)};for(let o=0;o<e.length;o+=1)pS(e.charCodeAt(o),a,i);return t.join("")}function hL(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function mL(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}hL(n,t)}}function pL(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function gL(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)pS(e.charCodeAt(a),r,n);return new Uint8Array(t)}function yL(e){const t=[];return mL(e,r=>t.push(r)),new Uint8Array(t)}function vL(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>Vb(a,r,n)),Vb(null,r,n),t.join("")}function xL(e){return Math.round(Date.now()/1e3)+e}function bL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Mn=()=>typeof window<"u"&&typeof document<"u",ri={tested:!1,writable:!1},gS=()=>{if(!Mn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ri.tested)return ri.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ri.tested=!0,ri.writable=!0}catch{ri.tested=!0,ri.writable=!1}return ri.writable};function wL(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const yS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Xc(async()=>{const{default:n}=await Promise.resolve().then(()=>pl);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},jL=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",lo=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ni=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ra=async(e,t)=>{await e.removeItem(t)};class Bf{constructor(){this.promise=new Bf.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Bf.promiseConstructor=Promise;function sm(e){const t=e.split(".");if(t.length!==3)throw new Zp("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!iL.test(t[n]))throw new Zp("JWT not in base64url format");return{header:JSON.parse(zb(t[0])),payload:JSON.parse(zb(t[1])),signature:gL(t[2]),raw:{header:t[0],payload:t[1]}}}async function _L(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function NL(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function SL(e){return("0"+e.toString(16)).substr(-2)}function CL(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,SL).join("")}async function EL(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function kL(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await EL(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ji(e,t,r=!1){const n=CL();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await lo(e,`${t}-code-verifier`,a);const i=await kL(n);return[i,n===i?"plain":"s256"]}const PL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function TL(e){const t=e.headers.get(Xp);if(!t||!t.match(PL))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function AL(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function IL(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const RL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zi(e){if(!RL.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function am(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Wb(e){return JSON.parse(JSON.stringify(e))}var OL=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const ii=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),DL=[502,503,504];async function Hb(e){var t;if(!jL(e))throw new Jp(ii(e),0);if(DL.includes(e.status))throw new Jp(ii(e),e.status);let r;try{r=await e.json()}catch(i){throw new mS(ii(i),i)}let n;const a=TL(e);if(a&&a.getTime()>=hS["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Ub(ii(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new aa}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ub(ii(r),e.status,r.weak_password.reasons);throw new lL(ii(r),e.status||500,n)}const ML=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function at(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[Xp]||(i[Xp]=hS["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await LL(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function LL(e,t,r,n,a,i){const o=ML(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Jp(ii(c),0)}if(l.ok||await Hb(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Hb(c)}}function Es(e){var t;let r=null;UL(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=xL(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Qb(e){const t=Es(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ua(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function FL(e){return{data:e,error:null}}function $L(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=OL(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function qL(e){return e}function UL(e){return e.access_token&&e.refresh_token&&e.expires_in}const im=["global","local","others"];var BL=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class VL{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=yS(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=im[0]){if(im.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${im.join(", ")}`);try{return await at(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await at(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ua})}catch(n){if(Je(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=BL(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await at(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:$L,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Je(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await at(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ua})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await at(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:qL});if(u.error)throw u.error;const f=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Je(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Zi(t);try{return await at(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ua})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Zi(t);try{return await at(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ua})}catch(n){if(Je(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Zi(t);try{return await at(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ua})}catch(n){if(Je(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Zi(t.userId);try{const{data:r,error:n}=await at(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Je(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Zi(t.userId),Zi(t.id);try{return{data:await at(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}}}function Kb(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function zL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const eo={debug:!!(globalThis&&gS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class WL extends vS{}async function HL(e,t,r){eo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),eo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){eo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{eo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw eo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new WL(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(eo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}zL();const QL={url:nL,storageKey:sL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aL,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Gb(e,t,r){return await r()}const to={};class Tc{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Tc.nextInstanceID,Tc.nextInstanceID+=1,this.instanceID>0&&Mn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},QL),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new VL({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=yS(a.fetch),this.lock=a.lock||Gb,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Mn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=HL:this.lock=Gb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:gS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Kb(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Kb(this.memoryStorage)),Mn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=to[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){to[this.storageKey]=Object.assign(Object.assign({},to[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=to[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){to[this.storageKey]=Object.assign(Object.assign({},to[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fS}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=wL(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Mn()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),uL(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Je(r)?{error:r}:{error:new mS("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Es}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Je(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:u,password:f,options:m}=t;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await Ji(this.storage,this.storageKey)),i=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:x},xform:Es})}else if("phone"in t){const{phone:u,password:f,options:m}=t;i=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Es})}else throw new $d("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Je(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qb})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qb})}else throw new $d("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Fd}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Je(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,i,o,l,c,d,u,f,m,p;let x,g;if("message"in t)x=t.message,g=t.signature;else{const{chain:w,wallet:v,statement:y,options:b}=t;let j;if(Mn())if(typeof v=="object")j=v;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=v}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),y?{statement:y}:null));let E;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")E=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)E=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)x=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),g=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${_.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(x),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:w,error:v}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:vL(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Es});if(v)throw v;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Fd}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:v})}catch(w){if(Je(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const r=await ni(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await at(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Es});if(await ra(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Fd}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(Je(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Es}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Fd}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(Je(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ji(this.storage,this.storageKey));const{error:f}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new $d("You must provide either an email or phone number.")}catch(l){if(Je(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await at(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Es});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Je(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ji(this.storage,this.storageKey)),await at(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:FL})}catch(i){if(Je(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new aa;const{error:a}=await at(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Je(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await at(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await at(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new $d("You must provide either an email or phone number and a type")}catch(r){if(Je(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ni(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<rm:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await ni(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=am()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ua}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new aa}:await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:ua})})}catch(r){if(Je(r))return dL(r)&&(await this._removeSession(),await ra(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new aa;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ji(this.storage,this.storageKey));const{data:d,error:u}=await at(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:ua});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Je(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new aa;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=sm(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Je(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new aa;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Je(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Mn())throw new qd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new qd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new qb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new qb("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new qd("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let m=u+f;c&&(m=parseInt(c));const p=m-u;p*1e3<=oo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const x=m-f;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,u);const{data:g,error:w}=await this._getUser(i);if(w)throw w;const v={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(Je(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ni(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(cL(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await ra(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=bL(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ji(this.storage,this.storageKey,!0));try{return await at(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Je(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:f,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await at(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Mn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Je(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await at(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Je(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await NL(async a=>(a>0&&await _L(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await at(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Es})),(a,i)=>{const o=200*Math.pow(2,a);return i&&nm(i)&&Date.now()+o-n<oo})}catch(n){if(this._debug(r,"error",n),Je(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Mn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await ni(this.storage,this.storageKey);if(a&&this.userStorage){let o=await ni(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await lo(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:am()}else if(a&&!a.user&&!a.user){const o=await ni(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await ra(this.storage,this.storageKey+"-user"),await lo(this.storage,this.storageKey,a)):a.user=am()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<rm;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${rm}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),nm(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new aa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Bf;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new aa;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Je(i)){const o={session:null,error:i};return nm(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await lo(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=Wb(a);await lo(this.storage,this.storageKey,i)}else{const a=Wb(r);await lo(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ra(this.storage,this.storageKey),await ra(this.storage,this.storageKey+"-code-verifier"),await ra(this.storage,this.storageKey+"-user"),this.userStorage&&await ra(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Mn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),oo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/oo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${oo}ms, refresh threshold is ${Yp} ticks`),a<=Yp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof vS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ji(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await at(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Je(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await at(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Je(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await at(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(Je(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await at(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Je(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=sm(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+oL>a)return n;const{data:i,error:o}=await at(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:x}=await this.getSession();if(x||!p.session)return{data:null,error:x};n=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=sm(n);r!=null&&r.allowExpired||AL(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const u=IL(a.alg),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,yL(`${l}.${c}`)))throw new Zp("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}}}Tc.nextInstanceID=0;const KL=Tc;class GL extends KL{constructor(t){super(t)}}var YL=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(f){o(f)}}function c(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class XL{constructor(t,r,n){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=tL(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:QM,realtime:GM,auth:Object.assign(Object.assign({},KM),{storageKey:d}),global:HM},f=rL(n??{},u);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=ZM(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new hM(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new VM(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new WD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return YL(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:d},u,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new GL({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),u),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new TM(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const JL=(e,t,r)=>new XL(e,t,r);function ZL(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}ZL()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const eF="https://jiusoksloniuozxrdiok.supabase.co",tF="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImppdXNva3Nsb25pdW96eHJkaW9rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNTE0OTcsImV4cCI6MjA3MjcyNzQ5N30.lWiuA4leNFisvHD6yfEtczqk9kDXJhtCpmY5PfKqjJ8",H=JL(eF,tF),Vf=(e=1,t=50)=>{const r=(e-1)*t,n=r+t-1;return{from:r,to:n}},dr={mapRow(e){return{id:e.id,entityName:e.entity_name,fundCluster:e.fund_cluster,semiExpendableProperty:e.semi_expendable_property,propertyNumber:e.property_number,description:e.description,dateAcquired:e.date_acquired,remarks:e.remarks??void 0,createdAt:e.created_at,updatedAt:e.updated_at}},mapEntry(e){return{id:e.id,propertyCardId:e.property_card_id,date:e.date,reference:e.reference,receiptQty:e.receipt_qty,unitCost:Number(e.unit_cost||0),totalCost:Number(e.total_cost||0),issueItemNo:e.issue_item_no,issueQty:e.issue_qty,officeOfficer:e.office_officer,balanceQty:e.balance_qty,amount:Number(e.amount||0),createdAt:e.created_at,updatedAt:e.updated_at}},async getAll(e={}){const{page:t=1,limit:r=50,search:n}=e,{from:a,to:i}=Vf(t,r);let o=H.from("property_cards").select("*",{count:"exact"}).range(a,i);n&&(o=o.or(`property_number.ilike.%${n}%,description.ilike.%${n}%,entity_name.ilike.%${n}%`));const l=await o.order("created_at",{ascending:!1});if(l.error)return{data:[],pagination:{page:t,limit:r,total:0,totalPages:0},success:!1,error:l.error.message};const c=l.count||0,d=Math.ceil(c/r);return{data:(l.data||[]).map(u=>dr.mapRow(u)),pagination:{page:t,limit:r,total:c,totalPages:d},success:!0}},async getById(e){var r;const t=await H.from("property_cards").select("*").eq("id",e).single();return{data:t.data?dr.mapRow(t.data):null,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async getWithEntries(e){var n;const t=await H.from("property_cards").select(`
        *,
        entries:property_card_entries(*)
      `).eq("id",e).single();return{data:t.data?{...dr.mapRow(t.data),entries:(t.data.entries||[]).map(a=>dr.mapEntry(a))}:null,error:((n=t.error)==null?void 0:n.message)||null,success:!t.error}},async create(e){var r;if(!navigator.onLine)return await As("propertyCards.create",{card:e}),{data:{id:`temp-${Date.now()}`,entityName:e.entityName,fundCluster:e.fundCluster,semiExpendableProperty:e.semiExpendableProperty,propertyNumber:e.propertyNumber,description:e.description,dateAcquired:e.dateAcquired,remarks:e.remarks,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},error:null,success:!0};const t=await H.from("property_cards").insert({entity_name:e.entityName,fund_cluster:e.fundCluster,semi_expendable_property:e.semiExpendableProperty,property_number:e.propertyNumber,description:e.description,date_acquired:e.dateAcquired,remarks:e.remarks}).select().single();return{data:t.data?dr.mapRow(t.data):null,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async update(e,t){var a;if(!navigator.onLine)return await As("propertyCards.update",{id:e,updates:t}),{data:{id:e,entityName:t.entityName??"",fundCluster:t.fundCluster??"",semiExpendableProperty:t.semiExpendableProperty??"",propertyNumber:t.propertyNumber??"",description:t.description??"",dateAcquired:t.dateAcquired??new Date().toISOString(),remarks:t.remarks,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},error:null,success:!0};const r={};t.entityName&&(r.entity_name=t.entityName),t.fundCluster&&(r.fund_cluster=t.fundCluster),t.semiExpendableProperty&&(r.semi_expendable_property=t.semiExpendableProperty),t.propertyNumber&&(r.property_number=t.propertyNumber),t.description&&(r.description=t.description),t.dateAcquired&&(r.date_acquired=t.dateAcquired),t.remarks!==void 0&&(r.remarks=t.remarks);const n=await H.from("property_cards").update(r).eq("id",e).select().single();return{data:n.data?dr.mapRow(n.data):null,error:((a=n.error)==null?void 0:a.message)||null,success:!n.error}},async delete(e){var r;if(!navigator.onLine)return await As("propertyCards.delete",{id:e}),{data:null,error:null,success:!0};const t=await H.from("property_cards").delete().eq("id",e);return{data:t.data?dr.mapEntry(t.data):null,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async addEntry(e,t){var n;if(!navigator.onLine)return await As("propertyCards.addEntry",{propertyCardId:e,entry:t}),{data:{id:`temp-entry-${Date.now()}`,propertyCardId:e,date:t.date,reference:t.reference,receiptQty:t.receiptQty,unitCost:t.unitCost,totalCost:t.totalCost,issueItemNo:t.issueItemNo,issueQty:t.issueQty,officeOfficer:t.officeOfficer,balanceQty:t.balanceQty,amount:t.amount,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},error:null,success:!0};const r=await H.from("property_card_entries").insert({property_card_id:e,date:t.date,reference:t.reference,receipt_qty:t.receiptQty,unit_cost:t.unitCost,total_cost:t.totalCost,issue_item_no:t.issueItemNo,issue_qty:t.issueQty,office_officer:t.officeOfficer,balance_qty:t.balanceQty,amount:t.amount}).select().single();return{data:r.data?dr.mapEntry(r.data):null,error:((n=r.error)==null?void 0:n.message)||null,success:!r.error}},async updateEntry(e,t,r){var i;if(!navigator.onLine)return await As("propertyCards.updateEntry",{propertyCardId:e,entryId:t,updates:r}),{data:{id:t,propertyCardId:e,date:r.date??"",reference:r.reference??"",receiptQty:r.receiptQty??0,unitCost:r.unitCost??0,totalCost:r.totalCost??0,issueItemNo:r.issueItemNo??"",issueQty:r.issueQty??0,officeOfficer:r.officeOfficer??"",balanceQty:r.balanceQty??0,amount:r.amount??0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},error:null,success:!0};const n={};r.date&&(n.date=r.date),r.reference&&(n.reference=r.reference),r.receiptQty!==void 0&&(n.receipt_qty=r.receiptQty),r.unitCost!==void 0&&(n.unit_cost=r.unitCost),r.totalCost!==void 0&&(n.total_cost=r.totalCost),r.issueItemNo&&(n.issue_item_no=r.issueItemNo),r.issueQty!==void 0&&(n.issue_qty=r.issueQty),r.officeOfficer&&(n.office_officer=r.officeOfficer),r.balanceQty!==void 0&&(n.balance_qty=r.balanceQty),r.amount!==void 0&&(n.amount=r.amount);const a=await H.from("property_card_entries").update(n).eq("id",t).eq("property_card_id",e).select().single();return{data:a.data,error:((i=a.error)==null?void 0:i.message)||null,success:!a.error}},async deleteEntry(e,t){var n;if(!navigator.onLine)return await As("propertyCards.deleteEntry",{propertyCardId:e,entryId:t}),{data:null,error:null,success:!0};const r=await H.from("property_card_entries").delete().eq("id",t).eq("property_card_id",e);return{data:r.data,error:((n=r.error)==null?void 0:n.message)||null,success:!r.error}},async getEntries(e){var r;const t=await H.from("property_card_entries").select("*").eq("property_card_id",e).order("date",{ascending:!0});return{data:(t.data||[]).map(n=>dr.mapEntry(n)),error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async search(e,t={}){return this.getAll({...t,search:e})},async safeDelete(e){try{const{data:t,error:r}=await H.rpc("safe_delete_property_card",{card_id:e});if(r){if(r.code==="PGRST202"||r.message.includes("Could not find the function")){console.warn("safe_delete_property_card function not found, using fallback deletion");const n=await this.canDelete(e);if(!n.success||!n.data)return{data:null,error:"Cannot delete property card - it has custodian slip or transfer references",success:!1};const{data:a}=await H.from("property_card_entries").select("id").eq("property_card_id",e);if(a&&a.length>0){const o=a.map(l=>l.id);await H.from("custodian_slip_items").update({property_card_entry_id:null}).in("property_card_entry_id",o)}const{error:i}=await H.from("property_cards").delete().eq("id",e);return i?{data:null,error:i.message,success:!1}:{data:!0,error:null,success:!0}}return console.error("Safe delete property card error:",r),{data:null,error:r.message,success:!1}}return{data:t,error:null,success:!0}}catch(t){return console.error("Safe delete property card exception:",t),{data:null,error:t instanceof Error?t.message:"Unknown error occurred",success:!1}}},async canDelete(e){try{const{data:t,error:r}=await H.rpc("can_delete_property_card",{card_id:e});if(r){if(r.code==="PGRST202"||r.message.includes("Could not find the function")){console.warn("can_delete_property_card function not found, using fallback check");const{data:n}=await H.from("property_card_entries").select("id").eq("property_card_id",e).limit(1);if(!n||n.length===0)return{data:!0,error:null,success:!0};const a=n.map(o=>o.id),{data:i}=await H.from("custodian_slip_items").select("id").in("property_card_entry_id",a).limit(1);return{data:!i||i.length===0,error:null,success:!0}}return console.error("Can delete property card error:",r),{data:null,error:r.message,success:!1}}return{data:t,error:null,success:!0}}catch(t){return console.error("Can delete property card exception:",t),{data:null,error:t instanceof Error?t.message:"Unknown error occurred",success:!1}}}},Kr={async getAll(e={}){const{page:t=1,limit:r=1e3,status:n,condition:a,search:i,filter:o,valueFilter:l}=e,{from:c,to:d}=Vf(t,r);let u;o==="available"?u=H.from("inventory_items").select("*",{count:"planned"}).range(c,d).eq("status","Active").eq("condition","Serviceable").or("assignment_status.is.null,assignment_status.eq.Available"):o==="issued"?(console.log("Fetching issued items with filter:",o),u=H.from("inventory_items").select("*",{count:"planned"}).range(c,d).eq("status","Active").eq("condition","Serviceable").eq("assignment_status","Assigned")):u=H.from("inventory_items").select("*",{count:"planned"}).range(c,d),n&&(u=u.eq("status",n)),a&&(u=u.eq("condition",a)),l==="high-value"?u=u.eq("sub_category","High Value Expendable"):l==="low-value"&&(u=u.eq("sub_category","Small Value Expendable")),i&&(u=u.or(`property_number.ilike.%${i}%,description.ilike.%${i}%,brand.ilike.%${i}%`));const f=await u.order("created_at",{ascending:!1});if(f.error)return console.error("Error fetching inventory items:",f.error),{data:[],pagination:{page:t,limit:r,total:0,totalPages:0},success:!1,error:f.error.message};let m=f.data||[];o==="available"&&(m=m.filter(v=>!(v.assignment_status==="Assigned"||v.custodian&&v.custodian.trim()!==""))),console.log("Raw database response:",{filter:o,dataCount:m.length,totalCount:f.count,sampleItems:m.slice(0,3).map(v=>({id:v.id,property_number:v.property_number,assignment_status:v.assignment_status,custodian:v.custodian,sub_category:v.sub_category}))});const p=o==="available"?m.length:f.count||0,x=Math.ceil(p/r),g=new Set;if(m.length>0){const v=m.map(y=>y.id);for(let y=0;y<v.length;y+=100){const b=v.slice(y,y+100),{data:j}=await H.from("property_cards").select("inventory_item_id").in("inventory_item_id",b);j&&j.forEach(_=>g.add(_.inventory_item_id))}}const w=m.map(v=>({id:v.id,propertyNumber:v.property_number,description:v.description||(v.model?`${v.brand?v.brand+" ":""}${v.model}`:v.brand)||"",brand:v.brand||"",model:v.model||"",serialNumber:v.serial_number||"",unitOfMeasure:v.unit_of_measure,quantity:v.quantity,unitCost:v.unit_cost,totalCost:v.total_cost,dateAcquired:v.date_acquired,supplier:v.supplier_id||"",condition:v.condition,fundSource:v.fund_source_id||"",remarks:v.remarks||"",lastInventoryDate:v.last_inventory_date||"",semiExpandableCategory:v.semi_expandable_category||void 0,subCategory:v.sub_category||void 0,entityName:v.entity_name||void 0,status:v.status,custodian:v.custodian||"",custodianPosition:v.custodian_position||"",assignmentStatus:v.assignment_status||"Available",assignedDate:v.assigned_date||"",hasPropertyCard:g.has(v.id),createdAt:v.created_at,updatedAt:v.updated_at}));return console.log("Transformed data sample:",{totalItems:w.length,spHVItems:w.filter(v=>{var y;return(y=v.propertyNumber)==null?void 0:y.startsWith("SPHV")}),spLVItems:w.filter(v=>{var y;return(y=v.propertyNumber)==null?void 0:y.startsWith("SPLV")}),sampleTransformed:w.slice(0,3).map(v=>({propertyNumber:v.propertyNumber,subCategory:v.subCategory}))}),{data:w,pagination:{page:t,limit:r,total:p,totalPages:x},success:!0}},async getById(e){const t=await H.from("inventory_items").select("*").eq("id",e).single();return t.error?{data:null,error:t.error.message,success:!1}:{data:{id:t.data.id,propertyNumber:t.data.property_number,description:t.data.description||(t.data.model?`${t.data.brand?t.data.brand+" ":""}${t.data.model}`:t.data.brand)||"",brand:t.data.brand||"",model:t.data.model||"",serialNumber:t.data.serial_number||"",unitOfMeasure:t.data.unit_of_measure,quantity:t.data.quantity,unitCost:t.data.unit_cost,totalCost:t.data.total_cost,dateAcquired:t.data.date_acquired,supplier:t.data.supplier_id||"",condition:t.data.condition,fundSource:t.data.fund_source_id||"",remarks:t.data.remarks||"",lastInventoryDate:t.data.last_inventory_date||"",semiExpandableCategory:t.data.semi_expandable_category||void 0,subCategory:t.data.sub_category||void 0,entityName:t.data.entity_name||void 0,status:t.data.status,custodian:t.data.custodian||"",custodianPosition:t.data.custodian_position||"",assignmentStatus:t.data.assignment_status||"Available",assignedDate:t.data.assigned_date||"",createdAt:t.data.created_at,updatedAt:t.data.updated_at},error:null,success:!0}},async create(e){if(console.log("Creating inventory item with data:",e),!navigator.onLine)return await As("inventory.create",{item:e}),{data:{id:`temp-${Date.now()}`,...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},error:null,success:!0};if(e.propertyNumber){const{data:i,error:o}=await H.from("inventory_items").select("id, property_number").eq("property_number",e.propertyNumber).limit(1);if(o)return console.error("Error checking for duplicate property number:",o),{data:null,error:"Failed to validate property number uniqueness",success:!1};if(i&&i.length>0)return console.error("Duplicate property number detected:",e.propertyNumber),{data:null,error:`Property number ${e.propertyNumber} already exists. Please generate a new property number.`,success:!1}}let t=e.entityName;if(!t||t.trim()===""){const i=[];e.brand&&i.push(e.brand),e.model&&i.push(e.model),e.serialNumber&&i.push(e.serialNumber),t=i.join(" ").trim()||e.description||""}const r={property_number:e.propertyNumber,description:e.description,brand:e.brand||null,model:e.model||null,serial_number:e.serialNumber||null,unit_of_measure:e.unitOfMeasure||"piece",quantity:e.quantity||1,unit_cost:e.unitCost||0,total_cost:e.totalCost||0,date_acquired:e.dateAcquired,supplier_id:e.supplier||null,condition:e.condition||"Serviceable",fund_source_id:e.fundSource||null,remarks:e.remarks||null,last_inventory_date:e.lastInventoryDate||null,category:"Semi-Expandable",status:e.status||"Active",entity_name:t,estimated_useful_life_override:e.estimatedUsefulLifeOverride||null};e.subCategory&&(r.sub_category=e.subCategory),e.semiExpandableCategory&&(r.semi_expandable_category=e.semiExpandableCategory),r.assignment_status=e.assignmentStatus||"Available",e.custodian&&(r.custodian=e.custodian),e.custodianPosition&&(r.custodian_position=e.custodianPosition),console.log("Inserting data:",r);const n=await H.from("inventory_items").insert(r).select().single();return console.log("Supabase response:",n),n.error?(console.error("Error creating inventory item:",n.error),{data:null,error:n.error.message,success:!1}):{data:{id:n.data.id,propertyNumber:n.data.property_number,description:n.data.description||(n.data.model?`${n.data.brand?n.data.brand+" ":""}${n.data.model}`:n.data.brand)||"",brand:n.data.brand||"",model:n.data.model||"",serialNumber:n.data.serial_number||"",unitOfMeasure:n.data.unit_of_measure,quantity:n.data.quantity,unitCost:n.data.unit_cost,totalCost:n.data.total_cost,dateAcquired:n.data.date_acquired,supplier:n.data.supplier_id||"",condition:n.data.condition,semiExpandableCategory:n.data.semi_expandable_category||void 0,subCategory:n.data.sub_category,entityName:n.data.entity_name,fundSource:n.data.fund_source_id||"",remarks:n.data.remarks||"",lastInventoryDate:n.data.last_inventory_date||"",status:n.data.status,estimatedUsefulLife:n.data.estimated_useful_life,estimatedUsefulLifeOverride:n.data.estimated_useful_life_override,custodian:n.data.custodian||"",custodianPosition:n.data.custodian_position||"",assignmentStatus:n.data.assignment_status||"Available",assignedDate:n.data.assigned_date||"",createdAt:n.data.created_at,updatedAt:n.data.updated_at},error:null,success:!0}},async update(e,t){if(!navigator.onLine)return await As("inventory.update",{id:e,updates:t}),{data:{id:e,propertyNumber:t.propertyNumber??"",description:t.description??"",brand:t.brand??"",model:t.model??"",serialNumber:t.serialNumber??"",unitOfMeasure:t.unitOfMeasure??"",quantity:t.quantity??0,unitCost:t.unitCost??0,totalCost:t.totalCost??0,dateAcquired:t.dateAcquired??new Date().toISOString(),supplier:t.supplier??"",condition:t.condition??"",fundSource:t.fundSource??"",remarks:t.remarks??"",lastInventoryDate:t.lastInventoryDate??"",semiExpandableCategory:t.semiExpandableCategory,subCategory:t.subCategory,entityName:t.entityName,status:t.status??"Active",estimatedUsefulLife:0,estimatedUsefulLifeOverride:t.estimatedUsefulLifeOverride??null,custodian:"",custodianPosition:"",assignmentStatus:"Available",assignedDate:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},error:null,success:!0};const r={};t.propertyNumber&&(r.property_number=t.propertyNumber),t.description&&(r.description=t.description),t.brand&&(r.brand=t.brand),t.model&&(r.model=t.model),t.serialNumber&&(r.serial_number=t.serialNumber),t.unitOfMeasure&&(r.unit_of_measure=t.unitOfMeasure),t.quantity!==void 0&&(r.quantity=t.quantity),t.unitCost!==void 0&&(r.unit_cost=t.unitCost),t.totalCost!==void 0&&(r.total_cost=t.totalCost),t.dateAcquired&&(r.date_acquired=t.dateAcquired),t.supplier&&(r.supplier_id=t.supplier),t.condition&&(r.condition=t.condition),t.semiExpandableCategory!==void 0&&(r.semi_expandable_category=t.semiExpandableCategory||null),t.subCategory&&(r.sub_category=t.subCategory),t.entityName&&(r.entity_name=t.entityName),t.fundSource&&(r.fund_source_id=t.fundSource),t.remarks&&(r.remarks=t.remarks),t.lastInventoryDate&&(r.last_inventory_date=t.lastInventoryDate),t.status&&(r.status=t.status),t.estimatedUsefulLifeOverride!==void 0&&(r.estimated_useful_life_override=t.estimatedUsefulLifeOverride);const n=await H.from("inventory_items").update(r).eq("id",e).select().single();return n.error?{data:null,error:n.error.message,success:!1}:{data:{id:n.data.id,propertyNumber:n.data.property_number,description:n.data.description||(n.data.model?`${n.data.brand?n.data.brand+" ":""}${n.data.model}`:n.data.brand)||"",brand:n.data.brand||"",model:n.data.model||"",serialNumber:n.data.serial_number||"",unitOfMeasure:n.data.unit_of_measure,quantity:n.data.quantity,unitCost:n.data.unit_cost,totalCost:n.data.total_cost,dateAcquired:n.data.date_acquired,supplier:n.data.supplier_id||"",condition:n.data.condition,semiExpandableCategory:n.data.semi_expandable_category||void 0,subCategory:n.data.sub_category,entityName:n.data.entity_name,fundSource:n.data.fund_source_id||"",remarks:n.data.remarks||"",lastInventoryDate:n.data.last_inventory_date||"",status:n.data.status,estimatedUsefulLife:n.data.estimated_useful_life,estimatedUsefulLifeOverride:n.data.estimated_useful_life_override,custodian:n.data.custodian||"",custodianPosition:n.data.custodian_position||"",assignmentStatus:n.data.assignment_status||"Available",assignedDate:n.data.assigned_date||"",createdAt:n.data.created_at,updatedAt:n.data.updated_at},error:null,success:!0}},async delete(e){if(!navigator.onLine)return await As("inventory.delete",{id:e}),{data:null,error:null,success:!0};const{data:t,error:r}=await H.from("inventory_items").select("id, assignment_status, custodian").eq("id",e).single();if(r)return{data:null,error:r.message||"Failed to fetch item details",success:!1};if(t.assignment_status==="Assigned"||t.custodian&&t.custodian.trim()!=="")return{data:null,error:`This inventory item cannot be deleted because it is currently assigned to ${t.custodian||"a custodian"}. Please unassign the item from the custodian first before deleting.`,success:!1};const{data:a,error:i}=await H.rpc("safe_delete_inventory_item",{item_id:e});return i?i.message.includes("function")&&i.message.includes("does not exist")?{data:null,error:"Safe deletion function not found. Please run the database setup script first.",success:!1}:i.message.includes("Cannot delete inventory item")?{data:null,error:"This inventory item cannot be deleted because it is assigned to custodian slips or has property card entries.",success:!1}:{data:null,error:i.message,success:!1}:{data:a,error:null,success:!0}},async search(e,t={}){return this.getAll({...t,search:e})}};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ac(){return Ac=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ac.apply(this,arguments)}var Na;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Na||(Na={}));const Yb="popstate";function rF(e){e===void 0&&(e={});function t(a,i){let{pathname:o="/",search:l="",hash:c=""}=Hi(a.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),eg("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let o=a.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=a.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof i=="string"?i:Yu(i))}function n(a,i){Vy(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return sF(t,r,n,e)}function Yt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vy(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function nF(){return Math.random().toString(36).substr(2,8)}function Xb(e,t){return{usr:e.state,key:e.key,idx:t}}function eg(e,t,r,n){return r===void 0&&(r=null),Ac({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Hi(t):t,{state:r,key:t&&t.key||n||nF()})}function Yu(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Hi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function sF(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Na.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Ac({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function f(){l=Na.Pop;let w=u(),v=w==null?null:w-d;d=w,c&&c({action:l,location:g.location,delta:v})}function m(w,v){l=Na.Push;let y=eg(g.location,w,v);r&&r(y,w),d=u()+1;let b=Xb(y,d),j=g.createHref(y);try{o.pushState(b,"",j)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(j)}i&&c&&c({action:l,location:g.location,delta:1})}function p(w,v){l=Na.Replace;let y=eg(g.location,w,v);r&&r(y,w),d=u();let b=Xb(y,d),j=g.createHref(y);o.replaceState(b,"",j),i&&c&&c({action:l,location:g.location,delta:0})}function x(w){let v=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof w=="string"?w:Yu(w);return y=y.replace(/ $/,"%20"),Yt(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let g={get action(){return l},get location(){return e(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Yb,f),c=w,()=>{a.removeEventListener(Yb,f),c=null}},createHref(w){return t(a,w)},createURL:x,encodeLocation(w){let v=x(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:p,go(w){return o.go(w)}};return g}var Jb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Jb||(Jb={}));function aF(e,t,r){return r===void 0&&(r="/"),iF(e,t,r,!1)}function iF(e,t,r,n){let a=typeof t=="string"?Hi(t):t,i=zy(a.pathname||"/",r);if(i==null)return null;let o=xS(e);oF(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=vF(i);l=gF(o[c],d,n)}return l}function xS(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Yt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Da([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Yt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),xS(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:mF(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of bS(i.path))a(i,o,c)}),t}function bS(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=bS(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function oF(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:pF(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const lF=/^:[\w-]+$/,cF=3,dF=2,uF=1,fF=10,hF=-2,Zb=e=>e==="*";function mF(e,t){let r=e.split("/"),n=r.length;return r.some(Zb)&&(n+=hF),t&&(n+=dF),r.filter(a=>!Zb(a)).reduce((a,i)=>a+(lF.test(i)?cF:i===""?uF:fF),n)}function pF(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function gF(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",f=e0({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!f&&d&&r&&!n[n.length-1].route.index&&(f=e0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Da([i,f.pathname]),pathnameBase:jF(Da([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Da([i,f.pathnameBase]))}return o}function e0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=yF(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,f)=>{let{paramName:m,isOptional:p}=u;if(m==="*"){let g=l[f]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const x=l[f];return p&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function yF(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Vy(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function vF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vy(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function zy(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function xF(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Hi(e):e;return{pathname:r?r.startsWith("/")?r:bF(r,t):t,search:_F(n),hash:NF(a)}}function bF(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function om(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wF(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Wy(e,t){let r=wF(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Hy(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Hi(e):(a=Ac({},e),Yt(!a.pathname||!a.pathname.includes("?"),om("?","pathname","search",a)),Yt(!a.pathname||!a.pathname.includes("#"),om("#","pathname","hash",a)),Yt(!a.search||!a.search.includes("#"),om("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;a.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=xF(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Da=e=>e.join("/").replace(/\/\/+/g,"/"),jF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_F=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,NF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function SF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const wS=["post","put","patch","delete"];new Set(wS);const CF=["get",...wS];new Set(CF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ic(){return Ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ic.apply(this,arguments)}const Qy=h.createContext(null),EF=h.createContext(null),Xa=h.createContext(null),zf=h.createContext(null),Ja=h.createContext({outlet:null,matches:[],isDataRoute:!1}),jS=h.createContext(null);function kF(e,t){let{relative:r}=t===void 0?{}:t;yl()||Yt(!1);let{basename:n,navigator:a}=h.useContext(Xa),{hash:i,pathname:o,search:l}=NS(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Da([n,o])),a.createHref({pathname:c,search:l,hash:i})}function yl(){return h.useContext(zf)!=null}function es(){return yl()||Yt(!1),h.useContext(zf).location}function _S(e){h.useContext(Xa).static||h.useLayoutEffect(e)}function ts(){let{isDataRoute:e}=h.useContext(Ja);return e?UF():PF()}function PF(){yl()||Yt(!1);let e=h.useContext(Qy),{basename:t,future:r,navigator:n}=h.useContext(Xa),{matches:a}=h.useContext(Ja),{pathname:i}=es(),o=JSON.stringify(Wy(a,r.v7_relativeSplatPath)),l=h.useRef(!1);return _S(()=>{l.current=!0}),h.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let f=Hy(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Da([t,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[t,n,o,i,e])}function NS(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=h.useContext(Xa),{matches:a}=h.useContext(Ja),{pathname:i}=es(),o=JSON.stringify(Wy(a,n.v7_relativeSplatPath));return h.useMemo(()=>Hy(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function TF(e,t){return AF(e,t)}function AF(e,t,r,n){yl()||Yt(!1);let{navigator:a}=h.useContext(Xa),{matches:i}=h.useContext(Ja),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=es(),u;if(t){var f;let w=typeof t=="string"?Hi(t):t;c==="/"||(f=w.pathname)!=null&&f.startsWith(c)||Yt(!1),u=w}else u=d;let m=u.pathname||"/",p=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=aF(e,{pathname:p}),g=MF(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Da([c,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Da([c,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return t&&g?h.createElement(zf.Provider,{value:{location:Ic({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Na.Pop}},g):g}function IF(){let e=qF(),t=SF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),r?h.createElement("pre",{style:a},r):null,null)}const RF=h.createElement(IF,null);class OF extends h.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?h.createElement(Ja.Provider,{value:this.props.routeContext},h.createElement(jS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DF(e){let{routeContext:t,match:r,children:n}=e,a=h.useContext(Qy);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),h.createElement(Ja.Provider,{value:t},n)}function MF(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);u>=0||Yt(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:m,errors:p}=r,x=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||x){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,f,m)=>{let p,x=!1,g=null,w=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||RF,c&&(d<0&&m===0?(x=!0,w=null):d===m&&(x=!0,w=f.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,m+1)),y=()=>{let b;return p?b=g:x?b=w:f.route.Component?b=h.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=u,h.createElement(DF,{match:f,routeContext:{outlet:u,matches:v,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?h.createElement(OF,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var SS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(SS||{}),Xu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Xu||{});function LF(e){let t=h.useContext(Qy);return t||Yt(!1),t}function FF(e){let t=h.useContext(EF);return t||Yt(!1),t}function $F(e){let t=h.useContext(Ja);return t||Yt(!1),t}function CS(e){let t=$F(),r=t.matches[t.matches.length-1];return r.route.id||Yt(!1),r.route.id}function qF(){var e;let t=h.useContext(jS),r=FF(Xu.UseRouteError),n=CS(Xu.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function UF(){let{router:e}=LF(SS.UseNavigateStable),t=CS(Xu.UseNavigateStable),r=h.useRef(!1);return _S(()=>{r.current=!0}),h.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Ic({fromRouteId:t},i)))},[e,t])}function BF(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function t0(e){let{to:t,replace:r,state:n,relative:a}=e;yl()||Yt(!1);let{future:i,static:o}=h.useContext(Xa),{matches:l}=h.useContext(Ja),{pathname:c}=es(),d=ts(),u=Hy(t,Wy(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(u);return h.useEffect(()=>d(JSON.parse(f),{replace:r,state:n,relative:a}),[d,f,a,r,n]),null}function Sr(e){Yt(!1)}function VF(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Na.Pop,navigator:i,static:o=!1,future:l}=e;yl()&&Yt(!1);let c=t.replace(/^\/*/,"/"),d=h.useMemo(()=>({basename:c,navigator:i,static:o,future:Ic({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Hi(n));let{pathname:u="/",search:f="",hash:m="",state:p=null,key:x="default"}=n,g=h.useMemo(()=>{let w=zy(u,c);return w==null?null:{location:{pathname:w,search:f,hash:m,state:p,key:x},navigationType:a}},[c,u,f,m,p,x,a]);return g==null?null:h.createElement(Xa.Provider,{value:d},h.createElement(zf.Provider,{children:r,value:g}))}function zF(e){let{children:t,location:r}=e;return TF(tg(t),r)}new Promise(()=>{});function tg(e,t){t===void 0&&(t=[]);let r=[];return h.Children.forEach(e,(n,a)=>{if(!h.isValidElement(n))return;let i=[...t,a];if(n.type===h.Fragment){r.push.apply(r,tg(n.props.children,i));return}n.type!==Sr&&Yt(!1),!n.props.index||!n.props.children||Yt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=tg(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rg(){return rg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rg.apply(this,arguments)}function WF(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function HF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function QF(e,t){return e.button===0&&(!t||t==="_self")&&!HF(e)}function ng(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function KF(e,t){let r=ng(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const GF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],YF="6";try{window.__reactRouterVersion=YF}catch{}const XF="startTransition",r0=Sg[XF];function JF(e){let{basename:t,children:r,future:n,window:a}=e,i=h.useRef();i.current==null&&(i.current=rF({window:a,v5Compat:!0}));let o=i.current,[l,c]=h.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=h.useCallback(f=>{d&&r0?r0(()=>c(f)):c(f)},[c,d]);return h.useLayoutEffect(()=>o.listen(u),[o,u]),h.useEffect(()=>BF(n),[n]),h.createElement(VF,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const ZF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",e$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,t$=h.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:f}=t,m=WF(t,GF),{basename:p}=h.useContext(Xa),x,g=!1;if(typeof d=="string"&&e$.test(d)&&(x=d,ZF))try{let b=new URL(window.location.href),j=d.startsWith("//")?new URL(b.protocol+d):new URL(d),_=zy(j.pathname,p);j.origin===b.origin&&_!=null?d=_+j.search+j.hash:g=!0}catch{}let w=kF(d,{relative:a}),v=r$(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:f});function y(b){n&&n(b),b.defaultPrevented||v(b)}return h.createElement("a",rg({},m,{href:x||w,onClick:g||i?n:y,ref:r,target:c}))});var n0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(n0||(n0={}));var s0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(s0||(s0={}));function r$(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=ts(),d=es(),u=NS(e,{relative:o});return h.useCallback(f=>{if(QF(f,r)){f.preventDefault();let m=n!==void 0?n:Yu(d)===Yu(u);c(e,{replace:m,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,r,e,i,o,l])}function n$(e){let t=h.useRef(ng(e)),r=h.useRef(!1),n=es(),a=h.useMemo(()=>KF(n.search,r.current?null:t.current),[n.search]),i=ts(),o=h.useCallback((l,c)=>{const d=ng(typeof l=="function"?l(a):l);r.current=!0,i("?"+d,c)},[i,a]);return[a,o]}const Ky=Qc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),le=h.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?FA:"button";return s.jsx(o,{className:Ee(Ky({variant:t,size:r,className:e})),ref:i,...a})});le.displayName="Button";var s$=h.createContext(void 0);function ed(e){const t=h.useContext(s$);return e||t||"ltr"}var lm=0;function Wf(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??a0()),document.body.insertAdjacentElement("beforeend",e[1]??a0()),lm++,()=>{lm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),lm--}},[])}function a0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var cm="focusScope.autoFocusOnMount",dm="focusScope.autoFocusOnUnmount",i0={bubbles:!1,cancelable:!0},a$="FocusScope",td=h.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=h.useState(null),d=Kt(a),u=Kt(i),f=h.useRef(null),m=Ke(t,g=>c(g)),p=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(n){let g=function(b){if(p.paused||!l)return;const j=b.target;l.contains(j)?f.current=j:ia(f.current,{select:!0})},w=function(b){if(p.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||ia(f.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const _ of b)_.removedNodes.length>0&&ia(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const y=new MutationObserver(v);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),y.disconnect()}}},[n,l,p.paused]),h.useEffect(()=>{if(l){l0.add(p);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(cm,i0);l.addEventListener(cm,d),l.dispatchEvent(v),v.defaultPrevented||(i$(u$(ES(l)),{select:!0}),document.activeElement===g&&ia(l))}return()=>{l.removeEventListener(cm,d),setTimeout(()=>{const v=new CustomEvent(dm,i0);l.addEventListener(dm,u),l.dispatchEvent(v),v.defaultPrevented||ia(g??document.body,{select:!0}),l.removeEventListener(dm,u),l0.remove(p)},0)}}},[l,d,u,p]);const x=h.useCallback(g=>{if(!r&&!n||p.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(w&&v){const y=g.currentTarget,[b,j]=o$(y);b&&j?!g.shiftKey&&v===j?(g.preventDefault(),r&&ia(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),r&&ia(j,{select:!0})):v===y&&g.preventDefault()}},[r,n,p.paused]);return s.jsx(Oe.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});td.displayName=a$;function i$(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ia(n,{select:t}),document.activeElement!==r)return}function o$(e){const t=ES(e),r=o0(t,e),n=o0(t.reverse(),e);return[r,n]}function ES(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function o0(e,t){for(const r of e)if(!l$(r,{upTo:t}))return r}function l$(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function c$(e){return e instanceof HTMLInputElement&&"select"in e}function ia(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&c$(e)&&t&&e.select()}}var l0=d$();function d$(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=c0(e,t),e.unshift(t)},remove(t){var r;e=c0(e,t),(r=e[0])==null||r.resume()}}}function c0(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function u$(e){return e.filter(t=>t.tagName!=="A")}var um="rovingFocusGroup.onEntryFocus",f$={bubbles:!1,cancelable:!0},rd="RovingFocusGroup",[sg,kS,h$]=Ef(rd),[m$,Hf]=Br(rd,[h$]),[p$,g$]=m$(rd),PS=h.forwardRef((e,t)=>s.jsx(sg.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(sg.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(y$,{...e,ref:t})})}));PS.displayName=rd;var y$=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...f}=e,m=h.useRef(null),p=Ke(t,m),x=ed(i),[g,w]=Hs({prop:o,defaultProp:l??null,onChange:c,caller:rd}),[v,y]=h.useState(!1),b=Kt(d),j=kS(r),_=h.useRef(!1),[S,E]=h.useState(0);return h.useEffect(()=>{const D=m.current;if(D)return D.addEventListener(um,b),()=>D.removeEventListener(um,b)},[b]),s.jsx(p$,{scope:r,orientation:n,dir:x,loop:a,currentTabStopId:g,onItemFocus:h.useCallback(D=>w(D),[w]),onItemShiftTab:h.useCallback(()=>y(!0),[]),onFocusableItemAdd:h.useCallback(()=>E(D=>D+1),[]),onFocusableItemRemove:h.useCallback(()=>E(D=>D-1),[]),children:s.jsx(Oe.div,{tabIndex:v||S===0?-1:0,"data-orientation":n,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:je(e.onMouseDown,()=>{_.current=!0}),onFocus:je(e.onFocus,D=>{const U=!_.current;if(D.target===D.currentTarget&&U&&!v){const F=new CustomEvent(um,f$);if(D.currentTarget.dispatchEvent(F),!F.defaultPrevented){const L=j().filter(T=>T.focusable),$=L.find(T=>T.active),R=L.find(T=>T.id===g),C=[$,R,...L].filter(Boolean).map(T=>T.ref.current);IS(C,u)}}_.current=!1}),onBlur:je(e.onBlur,()=>y(!1))})})}),TS="RovingFocusGroupItem",AS=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=xr(),d=i||c,u=g$(TS,r),f=u.currentTabStopId===d,m=kS(r),{onFocusableItemAdd:p,onFocusableItemRemove:x,currentTabStopId:g}=u;return h.useEffect(()=>{if(n)return p(),()=>x()},[n,p,x]),s.jsx(sg.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:s.jsx(Oe.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:je(e.onMouseDown,w=>{n?u.onItemFocus(d):w.preventDefault()}),onFocus:je(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:je(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=b$(w,u.orientation,u.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=m().filter(j=>j.focusable).map(j=>j.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const j=b.indexOf(w.currentTarget);b=u.loop?w$(b,j+1):b.slice(j+1)}setTimeout(()=>IS(b))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:g!=null}):o})})});AS.displayName=TS;var v$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function x$(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function b$(e,t,r){const n=x$(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return v$[n]}function IS(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function w$(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var RS=PS,OS=AS,j$=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ro=new WeakMap,Ud=new WeakMap,Bd={},fm=0,DS=function(e){return e&&(e.host||DS(e.parentNode))},_$=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=DS(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},N$=function(e,t,r,n){var a=_$(t,Array.isArray(e)?e:[e]);Bd[r]||(Bd[r]=new WeakMap);var i=Bd[r],o=[],l=new Set,c=new Set(a),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};a.forEach(d);var u=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))u(m);else try{var p=m.getAttribute(n),x=p!==null&&p!=="false",g=(ro.get(m)||0)+1,w=(i.get(m)||0)+1;ro.set(m,g),i.set(m,w),o.push(m),g===1&&x&&Ud.set(m,!0),w===1&&m.setAttribute(r,"true"),x||m.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",m,v)}})};return u(t),l.clear(),fm++,function(){o.forEach(function(f){var m=ro.get(f)-1,p=i.get(f)-1;ro.set(f,m),i.set(f,p),m||(Ud.has(f)||f.removeAttribute(n),Ud.delete(f)),p||f.removeAttribute(r)}),fm--,fm||(ro=new WeakMap,ro=new WeakMap,Ud=new WeakMap,Bd={})}},Qf=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=j$(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),N$(n,a,r,"aria-hidden")):function(){return null}},fs=function(){return fs=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},fs.apply(this,arguments)};function MS(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function S$(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var hu="right-scroll-bar-position",mu="width-before-scroll-bar",C$="with-scroll-bars-hidden",E$="--removed-body-scroll-bar-size";function hm(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function k$(e,t){var r=h.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var P$=typeof window<"u"?h.useLayoutEffect:h.useEffect,d0=new WeakMap;function T$(e,t){var r=k$(null,function(n){return e.forEach(function(a){return hm(a,n)})});return P$(function(){var n=d0.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||hm(l,null)}),i.forEach(function(l){a.has(l)||hm(l,o)})}d0.set(r,e)},[e]),r}function A$(e){return e}function I$(e,t){t===void 0&&(t=A$);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return a}function R$(e){e===void 0&&(e={});var t=I$(null);return t.options=fs({async:!0,ssr:!1},e),t}var LS=function(e){var t=e.sideCar,r=MS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return h.createElement(n,fs({},r))};LS.isSideCarExport=!0;function O$(e,t){return e.useMedium(t),LS}var FS=R$(),mm=function(){},Kf=h.forwardRef(function(e,t){var r=h.useRef(null),n=h.useState({onScrollCapture:mm,onWheelCapture:mm,onTouchMoveCapture:mm}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,f=e.shards,m=e.sideCar,p=e.noRelative,x=e.noIsolation,g=e.inert,w=e.allowPinchZoom,v=e.as,y=v===void 0?"div":v,b=e.gapMode,j=MS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=m,S=T$([r,t]),E=fs(fs({},j),a);return h.createElement(h.Fragment,null,u&&h.createElement(_,{sideCar:FS,removeScrollBar:d,shards:f,noRelative:p,noIsolation:x,inert:g,setCallbacks:i,allowPinchZoom:!!w,lockRef:r,gapMode:b}),o?h.cloneElement(h.Children.only(l),fs(fs({},E),{ref:S})):h.createElement(y,fs({},E,{className:c,ref:S}),l))});Kf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Kf.classNames={fullWidth:mu,zeroRight:hu};var D$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function M$(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=D$();return t&&e.setAttribute("nonce",t),e}function L$(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function F$(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var $$=function(){var e=0,t=null;return{add:function(r){e==0&&(t=M$())&&(L$(t,r),F$(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},q$=function(){var e=$$();return function(t,r){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},$S=function(){var e=q$(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},U$={left:0,top:0,right:0,gap:0},pm=function(e){return parseInt(e||"",10)||0},B$=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[pm(r),pm(n),pm(a)]},V$=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return U$;var t=B$(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},z$=$S(),Ro="data-scroll-locked",W$=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(C$,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Ro,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hu,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(mu,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(hu," .").concat(hu,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(mu," .").concat(mu,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ro,`] {
    `).concat(E$,": ").concat(l,`px;
  }
`)},u0=function(){var e=parseInt(document.body.getAttribute(Ro)||"0",10);return isFinite(e)?e:0},H$=function(){h.useEffect(function(){return document.body.setAttribute(Ro,(u0()+1).toString()),function(){var e=u0()-1;e<=0?document.body.removeAttribute(Ro):document.body.setAttribute(Ro,e.toString())}},[])},Q$=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;H$();var i=h.useMemo(function(){return V$(a)},[a]);return h.createElement(z$,{styles:W$(i,!t,a,r?"":"!important")})},ag=!1;if(typeof window<"u")try{var Vd=Object.defineProperty({},"passive",{get:function(){return ag=!0,!0}});window.addEventListener("test",Vd,Vd),window.removeEventListener("test",Vd,Vd)}catch{ag=!1}var no=ag?{passive:!1}:!1,K$=function(e){return e.tagName==="TEXTAREA"},qS=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!K$(e)&&r[t]==="visible")},G$=function(e){return qS(e,"overflowY")},Y$=function(e){return qS(e,"overflowX")},f0=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=US(e,n);if(a){var i=BS(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},X$=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},J$=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},US=function(e,t){return e==="v"?G$(t):Y$(t)},BS=function(e,t){return e==="v"?X$(t):J$(t)},Z$=function(e,t){return e==="h"&&t==="rtl"?-1:1},e4=function(e,t,r,n,a){var i=Z$(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),d=!1,u=o>0,f=0,m=0;do{if(!l)break;var p=BS(e,l),x=p[0],g=p[1],w=p[2],v=g-w-i*x;(x||v)&&US(e,l)&&(f+=v,m+=x);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(f)<1||!a)||!u&&(Math.abs(m)<1||!a))&&(d=!0),d},zd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},h0=function(e){return[e.deltaX,e.deltaY]},m0=function(e){return e&&"current"in e?e.current:e},t4=function(e,t){return e[0]===t[0]&&e[1]===t[1]},r4=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},n4=0,so=[];function s4(e){var t=h.useRef([]),r=h.useRef([0,0]),n=h.useRef(),a=h.useState(n4++)[0],i=h.useState($S)[0],o=h.useRef(e);h.useEffect(function(){o.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=S$([e.lockRef.current],(e.shards||[]).map(m0),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=zd(g),y=r.current,b="deltaX"in g?g.deltaX:y[0]-v[0],j="deltaY"in g?g.deltaY:y[1]-v[1],_,S=g.target,E=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in g&&E==="h"&&S.type==="range")return!1;var D=f0(E,S);if(!D)return!0;if(D?_=E:(_=E==="v"?"h":"v",D=f0(E,S)),!D)return!1;if(!n.current&&"changedTouches"in g&&(b||j)&&(n.current=_),!_)return!0;var U=n.current||_;return e4(U,w,g,U==="h"?b:j,!0)},[]),c=h.useCallback(function(g){var w=g;if(!(!so.length||so[so.length-1]!==i)){var v="deltaY"in w?h0(w):zd(w),y=t.current.filter(function(_){return _.name===w.type&&(_.target===w.target||w.target===_.shadowParent)&&t4(_.delta,v)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(m0).filter(Boolean).filter(function(_){return _.contains(w.target)}),j=b.length>0?l(w,b[0]):!o.current.noIsolation;j&&w.cancelable&&w.preventDefault()}}},[]),d=h.useCallback(function(g,w,v,y){var b={name:g,delta:w,target:v,should:y,shadowParent:a4(v)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),u=h.useCallback(function(g){r.current=zd(g),n.current=void 0},[]),f=h.useCallback(function(g){d(g.type,h0(g),g.target,l(g,e.lockRef.current))},[]),m=h.useCallback(function(g){d(g.type,zd(g),g.target,l(g,e.lockRef.current))},[]);h.useEffect(function(){return so.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,no),document.addEventListener("touchmove",c,no),document.addEventListener("touchstart",u,no),function(){so=so.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,no),document.removeEventListener("touchmove",c,no),document.removeEventListener("touchstart",u,no)}},[]);var p=e.removeScrollBar,x=e.inert;return h.createElement(h.Fragment,null,x?h.createElement(i,{styles:r4(a)}):null,p?h.createElement(Q$,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function a4(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const i4=O$(FS,s4);var nd=h.forwardRef(function(e,t){return h.createElement(Kf,fs({},e,{ref:t,sideCar:i4}))});nd.classNames=Kf.classNames;var ig=["Enter"," "],o4=["ArrowDown","PageUp","Home"],VS=["ArrowUp","PageDown","End"],l4=[...o4,...VS],c4={ltr:[...ig,"ArrowRight"],rtl:[...ig,"ArrowLeft"]},d4={ltr:["ArrowLeft"],rtl:["ArrowRight"]},sd="Menu",[Rc,u4,f4]=Ef(sd),[Qi,zS]=Br(sd,[f4,Ga,Hf]),Gf=Ga(),WS=Hf(),[h4,Ki]=Qi(sd),[m4,ad]=Qi(sd),HS=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=Gf(t),[c,d]=h.useState(null),u=h.useRef(!1),f=Kt(i),m=ed(a);return h.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),s.jsx(Iy,{...l,children:s.jsx(h4,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:d,children:s.jsx(m4,{scope:t,onClose:h.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:m,modal:o,children:n})})})};HS.displayName=sd;var p4="MenuAnchor",Gy=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=Gf(r);return s.jsx(Yc,{...a,...n,ref:t})});Gy.displayName=p4;var Yy="MenuPortal",[g4,QS]=Qi(Yy,{forceMount:void 0}),KS=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=Ki(Yy,t);return s.jsx(g4,{scope:t,forceMount:r,children:s.jsx(mr,{present:r||i.open,children:s.jsx(dl,{asChild:!0,container:a,children:n})})})};KS.displayName=Yy;var Tn="MenuContent",[y4,Xy]=Qi(Tn),GS=h.forwardRef((e,t)=>{const r=QS(Tn,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Ki(Tn,e.__scopeMenu),o=ad(Tn,e.__scopeMenu);return s.jsx(Rc.Provider,{scope:e.__scopeMenu,children:s.jsx(mr,{present:n||i.open,children:s.jsx(Rc.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(v4,{...a,ref:t}):s.jsx(x4,{...a,ref:t})})})})}),v4=h.forwardRef((e,t)=>{const r=Ki(Tn,e.__scopeMenu),n=h.useRef(null),a=Ke(t,n);return h.useEffect(()=>{const i=n.current;if(i)return Qf(i)},[]),s.jsx(Jy,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:je(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),x4=h.forwardRef((e,t)=>{const r=Ki(Tn,e.__scopeMenu);return s.jsx(Jy,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),b4=$a("MenuContent.ScrollLock"),Jy=h.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:p,disableOutsideScroll:x,...g}=e,w=Ki(Tn,r),v=ad(Tn,r),y=Gf(r),b=WS(r),j=u4(r),[_,S]=h.useState(null),E=h.useRef(null),D=Ke(t,E,w.onContentChange),U=h.useRef(0),F=h.useRef(""),L=h.useRef(0),$=h.useRef(null),R=h.useRef("right"),I=h.useRef(0),C=x?nd:h.Fragment,T=x?{as:b4,allowPinchZoom:!0}:void 0,re=z=>{var ne,O;const ae=F.current+z,ge=j().filter(ee=>!ee.disabled),W=document.activeElement,M=(ne=ge.find(ee=>ee.ref.current===W))==null?void 0:ne.textValue,Y=ge.map(ee=>ee.textValue),X=I4(Y,ae,M),ie=(O=ge.find(ee=>ee.textValue===X))==null?void 0:O.ref.current;(function ee(de){F.current=de,window.clearTimeout(U.current),de!==""&&(U.current=window.setTimeout(()=>ee(""),1e3))})(ae),ie&&setTimeout(()=>ie.focus())};h.useEffect(()=>()=>window.clearTimeout(U.current),[]),Wf();const K=h.useCallback(z=>{var ge,W;return R.current===((ge=$.current)==null?void 0:ge.side)&&O4(z,(W=$.current)==null?void 0:W.area)},[]);return s.jsx(y4,{scope:r,searchRef:F,onItemEnter:h.useCallback(z=>{K(z)&&z.preventDefault()},[K]),onItemLeave:h.useCallback(z=>{var ae;K(z)||((ae=E.current)==null||ae.focus(),S(null))},[K]),onTriggerLeave:h.useCallback(z=>{K(z)&&z.preventDefault()},[K]),pointerGraceTimerRef:L,onPointerGraceIntentChange:h.useCallback(z=>{$.current=z},[]),children:s.jsx(C,{...T,children:s.jsx(td,{asChild:!0,trapped:a,onMountAutoFocus:je(i,z=>{var ae;z.preventDefault(),(ae=E.current)==null||ae.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(zi,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:p,children:s.jsx(RS,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:_,onCurrentTabStopIdChange:S,onEntryFocus:je(c,z=>{v.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(Of,{role:"menu","aria-orientation":"vertical","data-state":uC(w.open),"data-radix-menu-content":"",dir:v.dir,...y,...g,ref:D,style:{outline:"none",...g.style},onKeyDown:je(g.onKeyDown,z=>{const ge=z.target.closest("[data-radix-menu-content]")===z.currentTarget,W=z.ctrlKey||z.altKey||z.metaKey,M=z.key.length===1;ge&&(z.key==="Tab"&&z.preventDefault(),!W&&M&&re(z.key));const Y=E.current;if(z.target!==Y||!l4.includes(z.key))return;z.preventDefault();const ie=j().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);VS.includes(z.key)&&ie.reverse(),T4(ie)}),onBlur:je(e.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(U.current),F.current="")}),onPointerMove:je(e.onPointerMove,Oc(z=>{const ae=z.target,ge=I.current!==z.clientX;if(z.currentTarget.contains(ae)&&ge){const W=z.clientX>I.current?"right":"left";R.current=W,I.current=z.clientX}}))})})})})})})});GS.displayName=Tn;var w4="MenuGroup",Zy=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Oe.div,{role:"group",...n,ref:t})});Zy.displayName=w4;var j4="MenuLabel",YS=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Oe.div,{...n,ref:t})});YS.displayName=j4;var Ju="MenuItem",p0="menu.itemSelect",Yf=h.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=h.useRef(null),o=ad(Ju,e.__scopeMenu),l=Xy(Ju,e.__scopeMenu),c=Ke(t,i),d=h.useRef(!1),u=()=>{const f=i.current;if(!r&&f){const m=new CustomEvent(p0,{bubbles:!0,cancelable:!0});f.addEventListener(p0,p=>n==null?void 0:n(p),{once:!0}),gy(f,m),m.defaultPrevented?d.current=!1:o.onClose()}};return s.jsx(XS,{...a,ref:c,disabled:r,onClick:je(e.onClick,u),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),d.current=!0},onPointerUp:je(e.onPointerUp,f=>{var m;d.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:je(e.onKeyDown,f=>{const m=l.searchRef.current!=="";r||m&&f.key===" "||ig.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Yf.displayName=Ju;var XS=h.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=Xy(Ju,r),l=WS(r),c=h.useRef(null),d=Ke(t,c),[u,f]=h.useState(!1),[m,p]=h.useState("");return h.useEffect(()=>{const x=c.current;x&&p((x.textContent??"").trim())},[i.children]),s.jsx(Rc.ItemSlot,{scope:r,disabled:n,textValue:a??m,children:s.jsx(OS,{asChild:!0,...l,focusable:!n,children:s.jsx(Oe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:je(e.onPointerMove,Oc(x=>{n?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:je(e.onPointerLeave,Oc(x=>o.onItemLeave(x))),onFocus:je(e.onFocus,()=>f(!0)),onBlur:je(e.onBlur,()=>f(!1))})})})}),_4="MenuCheckboxItem",JS=h.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(nC,{scope:e.__scopeMenu,checked:r,children:s.jsx(Yf,{role:"menuitemcheckbox","aria-checked":Zu(r)?"mixed":r,...a,ref:t,"data-state":tv(r),onSelect:je(a.onSelect,()=>n==null?void 0:n(Zu(r)?!0:!r),{checkForDefaultPrevented:!1})})})});JS.displayName=_4;var ZS="MenuRadioGroup",[N4,S4]=Qi(ZS,{value:void 0,onValueChange:()=>{}}),eC=h.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=Kt(n);return s.jsx(N4,{scope:e.__scopeMenu,value:r,onValueChange:i,children:s.jsx(Zy,{...a,ref:t})})});eC.displayName=ZS;var tC="MenuRadioItem",rC=h.forwardRef((e,t)=>{const{value:r,...n}=e,a=S4(tC,e.__scopeMenu),i=r===a.value;return s.jsx(nC,{scope:e.__scopeMenu,checked:i,children:s.jsx(Yf,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":tv(i),onSelect:je(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});rC.displayName=tC;var ev="MenuItemIndicator",[nC,C4]=Qi(ev,{checked:!1}),sC=h.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=C4(ev,r);return s.jsx(mr,{present:n||Zu(i.checked)||i.checked===!0,children:s.jsx(Oe.span,{...a,ref:t,"data-state":tv(i.checked)})})});sC.displayName=ev;var E4="MenuSeparator",aC=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Oe.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});aC.displayName=E4;var k4="MenuArrow",iC=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=Gf(r);return s.jsx(Df,{...a,...n,ref:t})});iC.displayName=k4;var P4="MenuSub",[PV,oC]=Qi(P4),Wl="MenuSubTrigger",lC=h.forwardRef((e,t)=>{const r=Ki(Wl,e.__scopeMenu),n=ad(Wl,e.__scopeMenu),a=oC(Wl,e.__scopeMenu),i=Xy(Wl,e.__scopeMenu),o=h.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=h.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return h.useEffect(()=>u,[u]),h.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(Gy,{asChild:!0,...d,children:s.jsx(XS,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":uC(r.open),...e,ref:Ws(t,a.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:je(e.onPointerMove,Oc(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:je(e.onPointerLeave,Oc(f=>{var p,x;u();const m=(p=r.content)==null?void 0:p.getBoundingClientRect();if(m){const g=(x=r.content)==null?void 0:x.dataset.side,w=g==="right",v=w?-5:5,y=m[w?"left":"right"],b=m[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+v,y:f.clientY},{x:y,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:y,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:je(e.onKeyDown,f=>{var p;const m=i.searchRef.current!=="";e.disabled||m&&f.key===" "||c4[n.dir].includes(f.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),f.preventDefault())})})})});lC.displayName=Wl;var cC="MenuSubContent",dC=h.forwardRef((e,t)=>{const r=QS(Tn,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Ki(Tn,e.__scopeMenu),o=ad(Tn,e.__scopeMenu),l=oC(cC,e.__scopeMenu),c=h.useRef(null),d=Ke(t,c);return s.jsx(Rc.Provider,{scope:e.__scopeMenu,children:s.jsx(mr,{present:n||i.open,children:s.jsx(Rc.Slot,{scope:e.__scopeMenu,children:s.jsx(Jy,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:je(e.onFocusOutside,u=>{u.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:je(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:je(e.onKeyDown,u=>{var p;const f=u.currentTarget.contains(u.target),m=d4[o.dir].includes(u.key);f&&m&&(i.onOpenChange(!1),(p=l.trigger)==null||p.focus(),u.preventDefault())})})})})})});dC.displayName=cC;function uC(e){return e?"open":"closed"}function Zu(e){return e==="indeterminate"}function tv(e){return Zu(e)?"indeterminate":e?"checked":"unchecked"}function T4(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function A4(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function I4(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=A4(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function R4(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,f=c.x,m=c.y;u>n!=m>n&&r<(f-d)*(n-u)/(m-u)+d&&(a=!a)}return a}function O4(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return R4(r,t)}function Oc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var D4=HS,M4=Gy,L4=KS,F4=GS,$4=Zy,q4=YS,U4=Yf,B4=JS,V4=eC,z4=rC,W4=sC,H4=aC,Q4=iC,K4=lC,G4=dC,Xf="DropdownMenu",[Y4,TV]=Br(Xf,[zS]),Vr=zS(),[X4,fC]=Y4(Xf),hC=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=Vr(t),d=h.useRef(null),[u,f]=Hs({prop:a,defaultProp:i??!1,onChange:o,caller:Xf});return s.jsx(X4,{scope:t,triggerId:xr(),triggerRef:d,contentId:xr(),open:u,onOpenChange:f,onOpenToggle:h.useCallback(()=>f(m=>!m),[f]),modal:l,children:s.jsx(D4,{...c,open:u,onOpenChange:f,dir:n,modal:l,children:r})})};hC.displayName=Xf;var mC="DropdownMenuTrigger",pC=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=fC(mC,r),o=Vr(r);return s.jsx(M4,{asChild:!0,...o,children:s.jsx(Oe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Ws(t,i.triggerRef),onPointerDown:je(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:je(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});pC.displayName=mC;var J4="DropdownMenuPortal",gC=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Vr(t);return s.jsx(L4,{...n,...r})};gC.displayName=J4;var yC="DropdownMenuContent",vC=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=fC(yC,r),i=Vr(r),o=h.useRef(!1);return s.jsx(F4,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:je(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:je(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});vC.displayName=yC;var Z4="DropdownMenuGroup",e3=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Vr(r);return s.jsx($4,{...a,...n,ref:t})});e3.displayName=Z4;var t3="DropdownMenuLabel",xC=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Vr(r);return s.jsx(q4,{...a,...n,ref:t})});xC.displayName=t3;var r3="DropdownMenuItem",bC=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Vr(r);return s.jsx(U4,{...a,...n,ref:t})});bC.displayName=r3;var n3="DropdownMenuCheckboxItem",wC=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Vr(r);return s.jsx(B4,{...a,...n,ref:t})});wC.displayName=n3;var s3="DropdownMenuRadioGroup",a3=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Vr(r);return s.jsx(V4,{...a,...n,ref:t})});a3.displayName=s3;var i3="DropdownMenuRadioItem",jC=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Vr(r);return s.jsx(z4,{...a,...n,ref:t})});jC.displayName=i3;var o3="DropdownMenuItemIndicator",_C=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Vr(r);return s.jsx(W4,{...a,...n,ref:t})});_C.displayName=o3;var l3="DropdownMenuSeparator",NC=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Vr(r);return s.jsx(H4,{...a,...n,ref:t})});NC.displayName=l3;var c3="DropdownMenuArrow",d3=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Vr(r);return s.jsx(Q4,{...a,...n,ref:t})});d3.displayName=c3;var u3="DropdownMenuSubTrigger",SC=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Vr(r);return s.jsx(K4,{...a,...n,ref:t})});SC.displayName=u3;var f3="DropdownMenuSubContent",CC=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Vr(r);return s.jsx(G4,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});CC.displayName=f3;var h3=hC,m3=pC,p3=gC,EC=vC,kC=xC,PC=bC,TC=wC,AC=jC,IC=_C,RC=NC,OC=SC,DC=CC;const g3=h3,y3=m3,v3=h.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(OC,{ref:a,className:Ee("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(V_,{className:"ml-auto h-4 w-4"})]}));v3.displayName=OC.displayName;const x3=h.forwardRef(({className:e,...t},r)=>s.jsx(DC,{ref:r,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));x3.displayName=DC.displayName;const MC=h.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(p3,{children:s.jsx(EC,{ref:n,sideOffset:t,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));MC.displayName=EC.displayName;const pu=h.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(PC,{ref:n,className:Ee("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));pu.displayName=PC.displayName;const b3=h.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(TC,{ref:a,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(IC,{children:s.jsx(Qs,{className:"h-4 w-4"})})}),t]}));b3.displayName=TC.displayName;const w3=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(AC,{ref:n,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(IC,{children:s.jsx(RI,{className:"h-2 w-2 fill-current"})})}),t]}));w3.displayName=AC.displayName;const LC=h.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(kC,{ref:n,className:Ee("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));LC.displayName=kC.displayName;const FC=h.forwardRef(({className:e,...t},r)=>s.jsx(RC,{ref:r,className:Ee("-mx-1 my-1 h-px bg-muted",e),...t}));FC.displayName=RC.displayName;const $C=h.createContext(void 0);function j3({children:e,defaultTheme:t="system",storageKey:r="vite-ui-theme",...n}){const[a,i]=h.useState(()=>localStorage.getItem(r)||t),[o,l]=h.useState(()=>{if(typeof window>"u")return"light";const d=localStorage.getItem(r)||t;return d==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":d});h.useEffect(()=>{const d=window.document.documentElement;d.classList.remove("light","dark");let u;if(a==="system"){const f=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";u=f,d.classList.add(f)}else u=a,d.classList.add(a);l(u)},[a]),h.useEffect(()=>{if(a!=="system")return;const d=window.matchMedia("(prefers-color-scheme: dark)"),u=f=>{const m=window.document.documentElement;m.classList.remove("light","dark");const p=f.matches?"dark":"light";m.classList.add(p),l(p)};return d.addEventListener("change",u),()=>d.removeEventListener("change",u)},[a]);const c={theme:a,setTheme:d=>{localStorage.setItem(r,d),i(d)},resolvedTheme:o};return s.jsx($C.Provider,{...n,value:c,children:e})}const _3=()=>{const e=h.useContext($C);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},N3=()=>{const{theme:e,setTheme:t}=_3(),r=async()=>{await H.auth.signOut()};return s.jsx("header",{className:"bg-government-dark text-white shadow-formal",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Hn,{className:"h-8 w-8 text-accent"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold",children:"Semi-Expendable Property"}),s.jsx("p",{className:"text-sm text-white/80",children:"Inventory Management System"})]})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(g3,{children:[s.jsx(y3,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:e==="light"?s.jsx(sb,{className:"h-4 w-4"}):e==="dark"?s.jsx(rb,{className:"h-4 w-4"}):s.jsx(tb,{className:"h-4 w-4"})})}),s.jsxs(MC,{align:"end",children:[s.jsx(LC,{children:"Theme"}),s.jsx(FC,{}),s.jsxs(pu,{onClick:()=>t("light"),children:[s.jsx(sb,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Light"}),e==="light"&&s.jsx("span",{className:"ml-auto",children:""})]}),s.jsxs(pu,{onClick:()=>t("dark"),children:[s.jsx(rb,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Dark"}),e==="dark"&&s.jsx("span",{className:"ml-auto",children:""})]}),s.jsxs(pu,{onClick:()=>t("system"),children:[s.jsx(tb,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"System"}),e==="system"&&s.jsx("span",{className:"ml-auto",children:""})]})]})]}),s.jsxs(le,{variant:"outline",size:"sm",className:"text-white border-white/20 hover:bg-white/10",onClick:r,children:[s.jsx(LI,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})})},S3=[{name:"Dashboard",href:"/",icon:MI},{name:"Inventory",href:"/inventory",icon:un},{name:"Property Cards",href:"/property-cards",icon:Hn},{name:"Custodian Slips",href:"/custodian-slips",icon:OI},{name:"Custodians",href:"/custodians",icon:Ci},{name:"Transfers",href:"/transfers",icon:B_},{name:"Lookups",href:"/settings/lookups",icon:wp}],C3=()=>{const[e,t]=h.useState(!1),r=es();return s.jsxs("div",{className:Ee("bg-card border-r border-border transition-all duration-300",e?"w-16":"w-64"),children:[s.jsx("div",{className:"p-4 border-b border-border",children:s.jsx(le,{variant:"ghost",size:"sm",onClick:()=>t(!e),className:"ml-auto",children:e?s.jsx(V_,{className:"h-4 w-4"}):s.jsx(TI,{className:"h-4 w-4"})})}),s.jsx("nav",{className:"p-4 space-y-2",children:S3.map(n=>{const a=n.icon,i=r.pathname===n.href;return s.jsxs(t$,{to:n.href,className:Ee("flex items-center space-x-3 px-3 py-2 rounded-md transition-colors",i?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-secondary hover:text-secondary-foreground"),children:[s.jsx(a,{className:"h-5 w-5"}),!e&&s.jsx("span",{className:"text-sm font-medium",children:n.name})]},n.name)})})]})},E3=({active:e})=>e?s.jsx("div",{className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center gap-3 bg-background/80 backdrop-blur-sm",children:s.jsxs("div",{className:"flex flex-col items-center gap-2 rounded-lg bg-card/80 px-6 py-4 shadow-lg ring-1 ring-border",children:[s.jsx(Gt,{className:"h-8 w-8 animate-spin text-primary"}),s.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Refreshing data"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Please wait while the latest inventory and slip changes load."})]})}):null,k3=h.createContext({isRefreshing:!1,manualRefresh:async()=>{}}),g0=[["annex-property-cards"],["available-inventory-for-cards"],["annex-custodian-slips"],["available-inventory-for-slips"],["inventory-items"],["inventory-summary"],["dashboard-metrics"],["custodian-summary"],["custodian-summaries"],["custodian-item-history"],["custodian-current-items"],["transfers"]],P3=["inventory_items","property_cards","property_card_entries","custodian_slips","custodian_slip_items","property_transfers"],T3=({children:e})=>{const t=Xs(),[r,n]=h.useState(0),a=h.useRef(null),i=h.useCallback(()=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{n(c=>Math.max(c-1,0))},400)},[]),o=h.useCallback(async()=>{n(c=>c+1);try{await Promise.all(g0.map(c=>t.invalidateQueries({queryKey:c}))),await Promise.all(g0.map(c=>t.refetchQueries({queryKey:c,type:"active"})))}finally{i()}},[i,t]);h.useEffect(()=>{const c=H.channel("realtime:global-sync");return P3.forEach(d=>{c.on("postgres_changes",{event:"*",schema:"public",table:d},()=>{console.log(`[GlobalRealtimeSync] Change detected on ${d}, refreshing UI`),o()})}),c.subscribe(),()=>{H.removeChannel(c)}},[o]),h.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]);const l=h.useMemo(()=>({isRefreshing:r>0,manualRefresh:o}),[r,o]);return s.jsxs(k3.Provider,{value:l,children:[e,s.jsx(E3,{active:l.isRefreshing})]})},Te=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Ee("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Te.displayName="Card";const ze=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Ee("flex flex-col space-y-1.5 p-6",e),...t}));ze.displayName="CardHeader";const et=h.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:Ee("text-2xl font-semibold leading-none tracking-tight",e),...t}));et.displayName="CardTitle";const qC=h.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:Ee("text-sm text-muted-foreground",e),...t}));qC.displayName="CardDescription";const Ae=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Ee("p-6 pt-0",e),...t}));Ae.displayName="CardContent";const A3=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Ee("flex items-center p-6 pt-0",e),...t}));A3.displayName="CardFooter";const I3=async()=>{const[{data:e,error:t},{data:r,error:n}]=await Promise.all([H.from("inventory_items").select("id, total_cost, condition, status, assignment_status, custodian").range(0,499),H.from("inventory_items").select("description, property_number, created_at, updated_at").order("updated_at",{ascending:!1}).limit(8)]);if(t)throw t;if(n)throw n;const a=(e==null?void 0:e.length)||0,i=(e||[]).reduce((p,x)=>p+(Number(x.total_cost)||0),0),o=(e||[]).filter(p=>p.status==="Active"&&p.condition==="Serviceable"),l={},c={};(e||[]).forEach(p=>{l[p.condition]=(l[p.condition]||0)+1,c[p.status]=(c[p.status]||0)+1});const d=o.filter(p=>p.assignment_status==="Assigned"||p.custodian&&p.custodian!=="").length,u=o.filter(p=>!p.assignment_status||p.assignment_status==="Available"||!p.custodian||p.custodian==="").length,f=(e||[]).filter(p=>p.condition==="Unserviceable").length,m=(r||[]).map(p=>({action:`Item ${p.property_number} updated`,user:"system",time:new Date(p.updated_at||p.created_at).toLocaleString()}));return{totalItems:a,totalValue:i,byCondition:l,byStatus:c,issuedItems:d,unissuedItems:u,unserviceableItems:f,recentActivity:m}},R3=()=>{const e=ts();Zn();const t=Xs(),{data:r,isLoading:n,error:a}=rr({queryKey:["dashboard-stats"],queryFn:I3,staleTime:2*60*1e3,gcTime:24*60*60*1e3,retry:(c,d)=>navigator.onLine?c<2:!1}),i=r||{totalItems:0,totalValue:0,byCondition:{},byStatus:{},issuedItems:0,unissuedItems:0,unserviceableItems:0,recentActivity:[]};h.useEffect(()=>{const c=H.channel("realtime:dashboard-inventory").on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},()=>{console.log("[Realtime] Inventory items changed, refreshing dashboard..."),t.invalidateQueries({queryKey:["dashboard-stats"]})}).on("postgres_changes",{event:"*",schema:"public",table:"custodian_slip_items"},()=>{console.log("[Realtime] Custodian slip items changed, refreshing dashboard..."),t.invalidateQueries({queryKey:["dashboard-stats"]})}).subscribe();return()=>{H.removeChannel(c)}},[t]);const o=c=>{switch(c){case"Add New Item":e("/inventory");break;case"Generate Report":e("/reports");break;case"Process Transfer":e("/transfers");break;case"Physical Count":e("/physical-count");break}},l=c=>{switch(c){case"Serviceable":return"bg-green-500";case"For Repair":return"bg-yellow-500";case"Unserviceable":return"bg-red-600";case"Missing":return"bg-red-400";default:return"bg-gray-500"}};return n?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Gt,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading dashboard..."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString()]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs(Te,{children:[s.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(et,{className:"text-sm font-medium",children:"Total Items"}),s.jsx(un,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ae,{children:[s.jsx("div",{className:"text-2xl font-bold",children:i.totalItems.toLocaleString()}),s.jsx("p",{className:"text-xs text-muted-foreground",children:!navigator.onLine&&!r?"Offline - cached data":i.totalItems===0?"No items yet":"From database"})]})]}),s.jsxs(Te,{children:[s.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(et,{className:"text-sm font-medium",children:"Total Value"}),s.jsx(jp,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ae,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:["",i.totalValue.toLocaleString()]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:!navigator.onLine&&!r?"Offline - cached data":i.totalValue===0?"No value yet":"From database"})]})]}),s.jsxs(Te,{children:[s.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(et,{className:"text-sm font-medium",children:"Issued Items"}),s.jsx(Ci,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Ae,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.issuedItems.toLocaleString()}),s.jsx("p",{className:"text-xs text-muted-foreground",children:i.issuedItems===0?"No items issued yet":"Assigned to custodians"})]})]}),s.jsxs(Te,{children:[s.jsxs(ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(et,{className:"text-sm font-medium",children:"Available Items"}),s.jsx(un,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(Ae,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.unissuedItems.toLocaleString()}),s.jsx("p",{className:"text-xs text-muted-foreground",children:i.unissuedItems===0?"All items are issued":"Ready for assignment"})]})]})]}),s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsxs(et,{className:"flex items-center space-x-2",children:[s.jsx(Hn,{className:"h-5 w-5"}),s.jsx("span",{children:"Issued vs Unissued Items Summary"})]})}),s.jsxs(Ae,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"space-y-4",children:s.jsxs("button",{onClick:()=>e("/inventory?filter=issued"),className:"w-full flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200 hover:bg-green-100 hover:border-green-300 transition-colors cursor-pointer group",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ci,{className:"h-8 w-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Issued Items"}),s.jsx("p",{className:"text-sm text-green-600",children:"Assigned to custodians"}),s.jsx("p",{className:"text-xs text-green-500 group-hover:text-green-700",children:"Click to view "})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:i.issuedItems}),s.jsxs("div",{className:"text-sm text-green-600",children:[i.totalItems>0?Math.round(i.issuedItems/i.totalItems*100):0,"% of total"]})]})]})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("button",{onClick:()=>e("/inventory?filter=available"),className:"w-full flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200 hover:bg-blue-100 hover:border-blue-300 transition-colors cursor-pointer group",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(un,{className:"h-8 w-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"Available Items"}),s.jsx("p",{className:"text-sm text-blue-600",children:"Ready for assignment"}),s.jsx("p",{className:"text-xs text-blue-500 group-hover:text-blue-700",children:"Click to view "})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:i.unissuedItems}),s.jsxs("div",{className:"text-sm text-blue-600",children:[i.totalItems>0?Math.round(i.unissuedItems/i.totalItems*100):0,"% of total"]})]})]})})]}),i.totalItems>0&&s.jsxs("div",{className:"mt-6 p-4 bg-secondary rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-foreground",children:"Distribution"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[i.totalItems," total items"]})]}),s.jsx("div",{className:"w-full bg-muted rounded-full h-3",children:s.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden",children:[s.jsx("div",{className:"bg-green-500",style:{width:`${i.totalItems>0?i.issuedItems/i.totalItems*100:0}%`},title:`${i.issuedItems} issued items`}),s.jsx("div",{className:"bg-blue-500",style:{width:`${i.totalItems>0?i.unissuedItems/i.totalItems*100:0}%`},title:`${i.unissuedItems} available items`}),i.unserviceableItems>0&&s.jsx("div",{className:"bg-red-600",style:{width:`${i.totalItems>0?i.unserviceableItems/i.totalItems*100:0}%`},title:`${i.unserviceableItems} unserviceable items`})]})}),s.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-muted-foreground flex-wrap gap-2",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),s.jsxs("span",{children:["Issued (",i.issuedItems,")"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),s.jsxs("span",{children:["Available (",i.unissuedItems,")"]})]}),i.unserviceableItems>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-3 h-3 bg-red-600 rounded"}),s.jsxs("span",{children:["Unserviceable (",i.unserviceableItems,")"]})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{children:"Recent Activity"})}),s.jsx(Ae,{children:s.jsx("div",{className:"space-y-4",children:r.recentActivity.length>0?r.recentActivity.map((c,d)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:c.action}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",c.user,"  ",c.time]})]})]},d)):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"No recent activity"}),s.jsx("p",{className:"text-xs",children:"Add items to see activity here"})]})})})]}),s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{children:"Property Status Overview"})}),s.jsx(Ae,{children:s.jsx("div",{className:"space-y-4",children:Object.keys(r.byCondition).length>0?Object.entries(r.byCondition).map(([c,d])=>{const u=Object.values(r.byCondition).reduce((p,x)=>p+x,0),f=u>0?d/u*100:0,m=Math.max(f,5);return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:c}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-20 h-2 bg-muted rounded-full",children:s.jsx("div",{className:`h-2 rounded-full ${l(c)}`,style:{width:`${m}%`}})}),s.jsx("span",{className:"text-sm text-muted-foreground",children:d})]})]},c)}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"No property data"}),s.jsx("p",{className:"text-xs",children:"Add items to see status overview"})]})})})]})]}),s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{children:"Quick Actions"})}),s.jsx(Ae,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{title:"Add New Item",icon:un,description:"Register new property"},{title:"Generate Report",icon:Hn,description:"Create inventory reports"},{title:"Process Transfer",icon:B_,description:"Handle property transfers"},{title:"Physical Count",icon:Ci,description:"Conduct inventory count"}].map((c,d)=>{const u=c.icon;return s.jsxs("div",{onClick:()=>o(c.title),className:"p-4 border border-border rounded-lg hover:bg-muted cursor-pointer transition-colors",children:[s.jsx(u,{className:"h-6 w-6 text-primary mb-2"}),s.jsx("h3",{className:"font-medium text-sm",children:c.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:c.description})]},d)})})})]})]})},ke=h.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:Ee("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));ke.displayName="Input";const Lr=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:Ee("w-full caption-bottom text-sm",e),...t})}));Lr.displayName="Table";const nn=h.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:Ee("[&_tr]:border-b",e),...t}));nn.displayName="TableHeader";const sn=h.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:Ee("[&_tr:last-child]:border-0",e),...t}));sn.displayName="TableBody";const O3=h.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:Ee("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));O3.displayName="TableFooter";const ht=h.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:Ee("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ht.displayName="TableRow";const Se=h.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:Ee("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Se.displayName="TableHead";const xe=h.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:Ee("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));xe.displayName="TableCell";const D3=h.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:Ee("mt-4 text-sm text-muted-foreground",e),...t}));D3.displayName="TableCaption";const M3=Qc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function it({className:e,variant:t,...r}){return s.jsx("div",{className:Ee(M3({variant:t}),e),...r})}function og(e,[t,r]){return Math.min(r,Math.max(t,e))}function UC(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var L3=[" ","Enter","ArrowUp","ArrowDown"],F3=[" ","Enter"],Li="Select",[Jf,Zf,$3]=Ef(Li),[vl,AV]=Br(Li,[$3,Ga]),eh=Ga(),[q3,Za]=vl(Li),[U3,B3]=vl(Li),BC=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:m,required:p,form:x}=e,g=eh(t),[w,v]=h.useState(null),[y,b]=h.useState(null),[j,_]=h.useState(!1),S=ed(d),[E,D]=Hs({prop:n,defaultProp:a??!1,onChange:i,caller:Li}),[U,F]=Hs({prop:o,defaultProp:l,onChange:c,caller:Li}),L=h.useRef(null),$=w?x||!!w.closest("form"):!0,[R,I]=h.useState(new Set),C=Array.from(R).map(T=>T.props.value).join(";");return s.jsx(Iy,{...g,children:s.jsxs(q3,{required:p,scope:t,trigger:w,onTriggerChange:v,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:j,onValueNodeHasChildrenChange:_,contentId:xr(),value:U,onValueChange:F,open:E,onOpenChange:D,dir:S,triggerPointerDownPosRef:L,disabled:m,children:[s.jsx(Jf.Provider,{scope:t,children:s.jsx(U3,{scope:e.__scopeSelect,onNativeOptionAdd:h.useCallback(T=>{I(re=>new Set(re).add(T))},[]),onNativeOptionRemove:h.useCallback(T=>{I(re=>{const K=new Set(re);return K.delete(T),K})},[]),children:r})}),$?s.jsxs(f1,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:f,value:U,onChange:T=>F(T.target.value),disabled:m,form:x,children:[U===void 0?s.jsx("option",{value:""}):null,Array.from(R)]},C):null]})})};BC.displayName=Li;var VC="SelectTrigger",zC=h.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=eh(r),o=Za(VC,r),l=o.disabled||n,c=Ke(t,o.onTriggerChange),d=Zf(r),u=h.useRef("touch"),[f,m,p]=m1(g=>{const w=d().filter(b=>!b.disabled),v=w.find(b=>b.value===o.value),y=p1(w,g,v);y!==void 0&&o.onValueChange(y.value)}),x=g=>{l||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return s.jsx(Yc,{asChild:!0,...i,children:s.jsx(Oe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":h1(o.value)?"":void 0,...a,ref:c,onClick:je(a.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&x(g)}),onPointerDown:je(a.onPointerDown,g=>{u.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(x(g),g.preventDefault())}),onKeyDown:je(a.onKeyDown,g=>{const w=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(w&&g.key===" ")&&L3.includes(g.key)&&(x(),g.preventDefault())})})})});zC.displayName=VC;var WC="SelectValue",HC=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=Za(WC,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,f=Ke(t,c.onValueNodeChange);return hr(()=>{d(u)},[d,u]),s.jsx(Oe.span,{...l,ref:f,style:{pointerEvents:"none"},children:h1(c.value)?s.jsx(s.Fragment,{children:o}):i})});HC.displayName=WC;var V3="SelectIcon",QC=h.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Oe.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});QC.displayName=V3;var z3="SelectPortal",KC=e=>s.jsx(dl,{asChild:!0,...e});KC.displayName=z3;var Fi="SelectContent",GC=h.forwardRef((e,t)=>{const r=Za(Fi,e.__scopeSelect),[n,a]=h.useState();if(hr(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?Ka.createPortal(s.jsx(YC,{scope:e.__scopeSelect,children:s.jsx(Jf.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(XC,{...e,ref:t})});GC.displayName=Fi;var Ln=10,[YC,ei]=vl(Fi),W3="SelectContentImpl",H3=$a("SelectContent.RemoveScroll"),XC=h.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:x,hideWhenDetached:g,avoidCollisions:w,...v}=e,y=Za(Fi,r),[b,j]=h.useState(null),[_,S]=h.useState(null),E=Ke(t,ne=>j(ne)),[D,U]=h.useState(null),[F,L]=h.useState(null),$=Zf(r),[R,I]=h.useState(!1),C=h.useRef(!1);h.useEffect(()=>{if(b)return Qf(b)},[b]),Wf();const T=h.useCallback(ne=>{const[O,...ee]=$().map(me=>me.ref.current),[de]=ee.slice(-1),ce=document.activeElement;for(const me of ne)if(me===ce||(me==null||me.scrollIntoView({block:"nearest"}),me===O&&_&&(_.scrollTop=0),me===de&&_&&(_.scrollTop=_.scrollHeight),me==null||me.focus(),document.activeElement!==ce))return},[$,_]),re=h.useCallback(()=>T([D,b]),[T,D,b]);h.useEffect(()=>{R&&re()},[R,re]);const{onOpenChange:K,triggerPointerDownPosRef:z}=y;h.useEffect(()=>{if(b){let ne={x:0,y:0};const O=de=>{var ce,me;ne={x:Math.abs(Math.round(de.pageX)-(((ce=z.current)==null?void 0:ce.x)??0)),y:Math.abs(Math.round(de.pageY)-(((me=z.current)==null?void 0:me.y)??0))}},ee=de=>{ne.x<=10&&ne.y<=10?de.preventDefault():b.contains(de.target)||K(!1),document.removeEventListener("pointermove",O),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",O),document.addEventListener("pointerup",ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",O),document.removeEventListener("pointerup",ee,{capture:!0})}}},[b,K,z]),h.useEffect(()=>{const ne=()=>K(!1);return window.addEventListener("blur",ne),window.addEventListener("resize",ne),()=>{window.removeEventListener("blur",ne),window.removeEventListener("resize",ne)}},[K]);const[ae,ge]=m1(ne=>{const O=$().filter(ce=>!ce.disabled),ee=O.find(ce=>ce.ref.current===document.activeElement),de=p1(O,ne,ee);de&&setTimeout(()=>de.ref.current.focus())}),W=h.useCallback((ne,O,ee)=>{const de=!C.current&&!ee;(y.value!==void 0&&y.value===O||de)&&(U(ne),de&&(C.current=!0))},[y.value]),M=h.useCallback(()=>b==null?void 0:b.focus(),[b]),Y=h.useCallback((ne,O,ee)=>{const de=!C.current&&!ee;(y.value!==void 0&&y.value===O||de)&&L(ne)},[y.value]),X=n==="popper"?lg:JC,ie=X===lg?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:x,hideWhenDetached:g,avoidCollisions:w}:{};return s.jsx(YC,{scope:r,content:b,viewport:_,onViewportChange:S,itemRefCallback:W,selectedItem:D,onItemLeave:M,itemTextRefCallback:Y,focusSelectedItem:re,selectedItemText:F,position:n,isPositioned:R,searchRef:ae,children:s.jsx(nd,{as:H3,allowPinchZoom:!0,children:s.jsx(td,{asChild:!0,trapped:y.open,onMountAutoFocus:ne=>{ne.preventDefault()},onUnmountAutoFocus:je(a,ne=>{var O;(O=y.trigger)==null||O.focus({preventScroll:!0}),ne.preventDefault()}),children:s.jsx(zi,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ne=>ne.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(X,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:ne=>ne.preventDefault(),...v,...ie,onPlaced:()=>I(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:je(v.onKeyDown,ne=>{const O=ne.ctrlKey||ne.altKey||ne.metaKey;if(ne.key==="Tab"&&ne.preventDefault(),!O&&ne.key.length===1&&ge(ne.key),["ArrowUp","ArrowDown","Home","End"].includes(ne.key)){let de=$().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);if(["ArrowUp","End"].includes(ne.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(ne.key)){const ce=ne.target,me=de.indexOf(ce);de=de.slice(me+1)}setTimeout(()=>T(de)),ne.preventDefault()}})})})})})})});XC.displayName=W3;var Q3="SelectItemAlignedPosition",JC=h.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Za(Fi,r),o=ei(Fi,r),[l,c]=h.useState(null),[d,u]=h.useState(null),f=Ke(t,E=>u(E)),m=Zf(r),p=h.useRef(!1),x=h.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:v,focusSelectedItem:y}=o,b=h.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&w&&v){const E=i.trigger.getBoundingClientRect(),D=d.getBoundingClientRect(),U=i.valueNode.getBoundingClientRect(),F=v.getBoundingClientRect();if(i.dir!=="rtl"){const ce=F.left-D.left,me=U.left-ce,He=E.left-me,ut=E.width+He,J=Math.max(ut,D.width),Ne=window.innerWidth-Ln,Ye=og(me,[Ln,Math.max(Ln,Ne-J)]);l.style.minWidth=ut+"px",l.style.left=Ye+"px"}else{const ce=D.right-F.right,me=window.innerWidth-U.right-ce,He=window.innerWidth-E.right-me,ut=E.width+He,J=Math.max(ut,D.width),Ne=window.innerWidth-Ln,Ye=og(me,[Ln,Math.max(Ln,Ne-J)]);l.style.minWidth=ut+"px",l.style.right=Ye+"px"}const L=m(),$=window.innerHeight-Ln*2,R=g.scrollHeight,I=window.getComputedStyle(d),C=parseInt(I.borderTopWidth,10),T=parseInt(I.paddingTop,10),re=parseInt(I.borderBottomWidth,10),K=parseInt(I.paddingBottom,10),z=C+T+R+K+re,ae=Math.min(w.offsetHeight*5,z),ge=window.getComputedStyle(g),W=parseInt(ge.paddingTop,10),M=parseInt(ge.paddingBottom,10),Y=E.top+E.height/2-Ln,X=$-Y,ie=w.offsetHeight/2,ne=w.offsetTop+ie,O=C+T+ne,ee=z-O;if(O<=Y){const ce=L.length>0&&w===L[L.length-1].ref.current;l.style.bottom="0px";const me=d.clientHeight-g.offsetTop-g.offsetHeight,He=Math.max(X,ie+(ce?M:0)+me+re),ut=O+He;l.style.height=ut+"px"}else{const ce=L.length>0&&w===L[0].ref.current;l.style.top="0px";const He=Math.max(Y,C+g.offsetTop+(ce?W:0)+ie)+ee;l.style.height=He+"px",g.scrollTop=O-Y+g.offsetTop}l.style.margin=`${Ln}px 0`,l.style.minHeight=ae+"px",l.style.maxHeight=$+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,l,d,g,w,v,i.dir,n]);hr(()=>b(),[b]);const[j,_]=h.useState();hr(()=>{d&&_(window.getComputedStyle(d).zIndex)},[d]);const S=h.useCallback(E=>{E&&x.current===!0&&(b(),y==null||y(),x.current=!1)},[b,y]);return s.jsx(G3,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:S,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:s.jsx(Oe.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});JC.displayName=Q3;var K3="SelectPopperPosition",lg=h.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Ln,...i}=e,o=eh(r);return s.jsx(Of,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});lg.displayName=K3;var[G3,rv]=vl(Fi,{}),cg="SelectViewport",ZC=h.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=ei(cg,r),o=rv(cg,r),l=Ke(t,i.onViewportChange),c=h.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(Jf.Slot,{scope:r,children:s.jsx(Oe.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:je(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const p=Math.abs(c.current-u.scrollTop);if(p>0){const x=window.innerHeight-Ln*2,g=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),v=Math.max(g,w);if(v<x){const y=v+p,b=Math.min(x,y),j=y-b;f.style.height=b+"px",f.style.bottom==="0px"&&(u.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});ZC.displayName=cg;var e1="SelectGroup",[Y3,X3]=vl(e1),J3=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=xr();return s.jsx(Y3,{scope:r,id:a,children:s.jsx(Oe.div,{role:"group","aria-labelledby":a,...n,ref:t})})});J3.displayName=e1;var t1="SelectLabel",r1=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=X3(t1,r);return s.jsx(Oe.div,{id:a.id,...n,ref:t})});r1.displayName=t1;var ef="SelectItem",[Z3,n1]=vl(ef),s1=h.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=Za(ef,r),c=ei(ef,r),d=l.value===n,[u,f]=h.useState(i??""),[m,p]=h.useState(!1),x=Ke(t,y=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,y,n,a)}),g=xr(),w=h.useRef("touch"),v=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(Z3,{scope:r,value:n,disabled:a,textId:g,isSelected:d,onItemTextChange:h.useCallback(y=>{f(b=>b||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(Jf.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:s.jsx(Oe.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:x,onFocus:je(o.onFocus,()=>p(!0)),onBlur:je(o.onBlur,()=>p(!1)),onClick:je(o.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:je(o.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:je(o.onPointerDown,y=>{w.current=y.pointerType}),onPointerMove:je(o.onPointerMove,y=>{var b;w.current=y.pointerType,a?(b=c.onItemLeave)==null||b.call(c):w.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:je(o.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:je(o.onKeyDown,y=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&y.key===" "||(F3.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});s1.displayName=ef;var Hl="SelectItemText",a1=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=Za(Hl,r),l=ei(Hl,r),c=n1(Hl,r),d=B3(Hl,r),[u,f]=h.useState(null),m=Ke(t,v=>f(v),c.onItemTextChange,v=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,v,c.value,c.disabled)}),p=u==null?void 0:u.textContent,x=h.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=d;return hr(()=>(g(x),()=>w(x)),[g,w,x]),s.jsxs(s.Fragment,{children:[s.jsx(Oe.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ka.createPortal(i.children,o.valueNode):null]})});a1.displayName=Hl;var i1="SelectItemIndicator",o1=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return n1(i1,r).isSelected?s.jsx(Oe.span,{"aria-hidden":!0,...n,ref:t}):null});o1.displayName=i1;var dg="SelectScrollUpButton",l1=h.forwardRef((e,t)=>{const r=ei(dg,e.__scopeSelect),n=rv(dg,e.__scopeSelect),[a,i]=h.useState(!1),o=Ke(t,n.onScrollButtonChange);return hr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(d1,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});l1.displayName=dg;var ug="SelectScrollDownButton",c1=h.forwardRef((e,t)=>{const r=ei(ug,e.__scopeSelect),n=rv(ug,e.__scopeSelect),[a,i]=h.useState(!1),o=Ke(t,n.onScrollButtonChange);return hr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(d1,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});c1.displayName=ug;var d1=h.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=ei("SelectScrollButton",r),o=h.useRef(null),l=Zf(r),c=h.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return h.useEffect(()=>()=>c(),[c]),hr(()=>{var u;const d=l().find(f=>f.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(Oe.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:je(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:je(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:je(a.onPointerLeave,()=>{c()})})}),eq="SelectSeparator",u1=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Oe.div,{"aria-hidden":!0,...n,ref:t})});u1.displayName=eq;var fg="SelectArrow",tq=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=eh(r),i=Za(fg,r),o=ei(fg,r);return i.open&&o.position==="popper"?s.jsx(Df,{...a,...n,ref:t}):null});tq.displayName=fg;var rq="SelectBubbleInput",f1=h.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=h.useRef(null),i=Ke(n,a),o=UC(t);return h.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&u){const f=new Event("change",{bubbles:!0});u.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(Oe.select,{...r,style:{...v_,...r.style},ref:i,defaultValue:t})});f1.displayName=rq;function h1(e){return e===""||e===void 0}function m1(e){const t=Kt(e),r=h.useRef(""),n=h.useRef(0),a=h.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=h.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function p1(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=nq(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function nq(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var sq=BC,g1=zC,aq=HC,iq=QC,oq=KC,y1=GC,lq=ZC,v1=r1,x1=s1,cq=a1,dq=o1,b1=l1,w1=c1,j1=u1;const Dt=sq,Mt=aq,kt=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(g1,{ref:n,className:Ee("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(iq,{asChild:!0,children:s.jsx(Tf,{className:"h-4 w-4 opacity-50"})})]}));kt.displayName=g1.displayName;const _1=h.forwardRef(({className:e,...t},r)=>s.jsx(b1,{ref:r,className:Ee("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(AI,{className:"h-4 w-4"})}));_1.displayName=b1.displayName;const N1=h.forwardRef(({className:e,...t},r)=>s.jsx(w1,{ref:r,className:Ee("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Tf,{className:"h-4 w-4"})}));N1.displayName=w1.displayName;const Pt=h.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(oq,{children:s.jsxs(y1,{ref:a,className:Ee("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(_1,{}),s.jsx(lq,{className:Ee("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(N1,{})]})}));Pt.displayName=y1.displayName;const uq=h.forwardRef(({className:e,...t},r)=>s.jsx(v1,{ref:r,className:Ee("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));uq.displayName=v1.displayName;const we=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(x1,{ref:n,className:Ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(dq,{children:s.jsx(Qs,{className:"h-4 w-4"})})}),s.jsx(cq,{children:t})]}));we.displayName=x1.displayName;const fq=h.forwardRef(({className:e,...t},r)=>s.jsx(j1,{ref:r,className:Ee("-mx-1 my-1 h-px bg-muted",e),...t}));fq.displayName=j1.displayName;var th="Dialog",[S1,C1]=Br(th),[hq,rs]=S1(th),E1=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=h.useRef(null),c=h.useRef(null),[d,u]=Hs({prop:n,defaultProp:a??!1,onChange:i,caller:th});return s.jsx(hq,{scope:t,triggerRef:l,contentRef:c,contentId:xr(),titleId:xr(),descriptionId:xr(),open:d,onOpenChange:u,onOpenToggle:h.useCallback(()=>u(f=>!f),[u]),modal:o,children:r})};E1.displayName=th;var k1="DialogTrigger",P1=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=rs(k1,r),i=Ke(t,a.triggerRef);return s.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":av(a.open),...n,ref:i,onClick:je(e.onClick,a.onOpenToggle)})});P1.displayName=k1;var nv="DialogPortal",[mq,T1]=S1(nv,{forceMount:void 0}),A1=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=rs(nv,t);return s.jsx(mq,{scope:t,forceMount:r,children:h.Children.map(n,o=>s.jsx(mr,{present:r||i.open,children:s.jsx(dl,{asChild:!0,container:a,children:o})}))})};A1.displayName=nv;var tf="DialogOverlay",I1=h.forwardRef((e,t)=>{const r=T1(tf,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=rs(tf,e.__scopeDialog);return i.modal?s.jsx(mr,{present:n||i.open,children:s.jsx(gq,{...a,ref:t})}):null});I1.displayName=tf;var pq=$a("DialogOverlay.RemoveScroll"),gq=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=rs(tf,r);return s.jsx(nd,{as:pq,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Oe.div,{"data-state":av(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),$i="DialogContent",R1=h.forwardRef((e,t)=>{const r=T1($i,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=rs($i,e.__scopeDialog);return s.jsx(mr,{present:n||i.open,children:i.modal?s.jsx(yq,{...a,ref:t}):s.jsx(vq,{...a,ref:t})})});R1.displayName=$i;var yq=h.forwardRef((e,t)=>{const r=rs($i,e.__scopeDialog),n=h.useRef(null),a=Ke(t,r.contentRef,n);return h.useEffect(()=>{const i=n.current;if(i)return Qf(i)},[]),s.jsx(O1,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:je(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:je(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:je(e.onFocusOutside,i=>i.preventDefault())})}),vq=h.forwardRef((e,t)=>{const r=rs($i,e.__scopeDialog),n=h.useRef(!1),a=h.useRef(!1);return s.jsx(O1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),O1=h.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=rs($i,r),c=h.useRef(null),d=Ke(t,c);return Wf(),s.jsxs(s.Fragment,{children:[s.jsx(td,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(zi,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":av(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(bq,{titleId:l.titleId}),s.jsx(jq,{contentRef:c,descriptionId:l.descriptionId})]})]})}),sv="DialogTitle",D1=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=rs(sv,r);return s.jsx(Oe.h2,{id:a.titleId,...n,ref:t})});D1.displayName=sv;var M1="DialogDescription",L1=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=rs(M1,r);return s.jsx(Oe.p,{id:a.descriptionId,...n,ref:t})});L1.displayName=M1;var F1="DialogClose",$1=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=rs(F1,r);return s.jsx(Oe.button,{type:"button",...n,ref:t,onClick:je(e.onClick,()=>a.onOpenChange(!1))})});$1.displayName=F1;function av(e){return e?"open":"closed"}var q1="DialogTitleWarning",[xq,U1]=MA(q1,{contentName:$i,titleName:sv,docsSlug:"dialog"}),bq=({titleId:e})=>{const t=U1(q1),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},wq="DialogDescriptionWarning",jq=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${U1(wq).contentName}}.`;return h.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},iv=E1,B1=P1,ov=A1,rh=I1,nh=R1,lv=D1,cv=L1,dv=$1;const fn=iv,_q=B1,Nq=ov,V1=h.forwardRef(({className:e,...t},r)=>s.jsx(rh,{ref:r,className:Ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));V1.displayName=rh.displayName;const Zr=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Nq,{children:[s.jsx(V1,{}),s.jsxs(nh,{ref:n,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(dv,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(W_,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zr.displayName=nh.displayName;const pn=({className:e,...t})=>s.jsx("div",{className:Ee("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});pn.displayName="DialogHeader";const z1=({className:e,...t})=>s.jsx("div",{className:Ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});z1.displayName="DialogFooter";const gn=h.forwardRef(({className:e,...t},r)=>s.jsx(lv,{ref:r,className:Ee("text-lg font-semibold leading-none tracking-tight",e),...t}));gn.displayName=lv.displayName;const bs=h.forwardRef(({className:e,...t},r)=>s.jsx(cv,{ref:r,className:Ee("text-sm text-muted-foreground",e),...t}));bs.displayName=cv.displayName;var Sq="Label",W1=h.forwardRef((e,t)=>s.jsx(Oe.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));W1.displayName=Sq;var H1=W1;const Cq=Qc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),he=h.forwardRef(({className:e,...t},r)=>s.jsx(H1,{ref:r,className:Ee(Cq(),e),...t}));he.displayName=H1.displayName;var sh="Tabs",[Eq,IV]=Br(sh,[Hf]),Q1=Hf(),[kq,uv]=Eq(sh),K1=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=ed(l),[f,m]=Hs({prop:n,onChange:a,defaultProp:i??"",caller:sh});return s.jsx(kq,{scope:r,baseId:xr(),value:f,onValueChange:m,orientation:o,dir:u,activationMode:c,children:s.jsx(Oe.div,{dir:u,"data-orientation":o,...d,ref:t})})});K1.displayName=sh;var G1="TabsList",Y1=h.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=uv(G1,r),o=Q1(r);return s.jsx(RS,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Oe.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});Y1.displayName=G1;var X1="TabsTrigger",J1=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=uv(X1,r),l=Q1(r),c=tE(o.baseId,n),d=rE(o.baseId,n),u=n===o.value;return s.jsx(OS,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(Oe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:je(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:je(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:je(e.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!a&&f&&o.onValueChange(n)})})})});J1.displayName=X1;var Z1="TabsContent",eE=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=uv(Z1,r),c=tE(l.baseId,n),d=rE(l.baseId,n),u=n===l.value,f=h.useRef(u);return h.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(mr,{present:a||u,children:({present:m})=>s.jsx(Oe.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});eE.displayName=Z1;function tE(e,t){return`${e}-trigger-${t}`}function rE(e,t){return`${e}-content-${t}`}var Pq=K1,nE=Y1,sE=J1,aE=eE;const ah=Pq,id=h.forwardRef(({className:e,...t},r)=>s.jsx(nE,{ref:r,className:Ee("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));id.displayName=nE.displayName;const Cn=h.forwardRef(({className:e,...t},r)=>s.jsx(sE,{ref:r,className:Ee("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Cn.displayName=sE.displayName;const En=h.forwardRef(({className:e,...t},r)=>s.jsx(aE,{ref:r,className:Ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));En.displayName=aE.displayName;const ki=h.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:Ee("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));ki.displayName="Textarea";var ih="Popover",[iE,RV]=Br(ih,[Ga]),od=Ga(),[Tq,ti]=iE(ih),oE=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=od(t),c=h.useRef(null),[d,u]=h.useState(!1),[f,m]=Hs({prop:n,defaultProp:a??!1,onChange:i,caller:ih});return s.jsx(Iy,{...l,children:s.jsx(Tq,{scope:t,contentId:xr(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:d,onCustomAnchorAdd:h.useCallback(()=>u(!0),[]),onCustomAnchorRemove:h.useCallback(()=>u(!1),[]),modal:o,children:r})})};oE.displayName=ih;var lE="PopoverAnchor",Aq=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=ti(lE,r),i=od(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return h.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Yc,{...i,...n,ref:t})});Aq.displayName=lE;var cE="PopoverTrigger",dE=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=ti(cE,r),i=od(r),o=Ke(t,a.triggerRef),l=s.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":pE(a.open),...n,ref:o,onClick:je(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(Yc,{asChild:!0,...i,children:l})});dE.displayName=cE;var fv="PopoverPortal",[Iq,Rq]=iE(fv,{forceMount:void 0}),uE=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=ti(fv,t);return s.jsx(Iq,{scope:t,forceMount:r,children:s.jsx(mr,{present:r||i.open,children:s.jsx(dl,{asChild:!0,container:a,children:n})})})};uE.displayName=fv;var al="PopoverContent",fE=h.forwardRef((e,t)=>{const r=Rq(al,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=ti(al,e.__scopePopover);return s.jsx(mr,{present:n||i.open,children:i.modal?s.jsx(Dq,{...a,ref:t}):s.jsx(Mq,{...a,ref:t})})});fE.displayName=al;var Oq=$a("PopoverContent.RemoveScroll"),Dq=h.forwardRef((e,t)=>{const r=ti(al,e.__scopePopover),n=h.useRef(null),a=Ke(t,n),i=h.useRef(!1);return h.useEffect(()=>{const o=n.current;if(o)return Qf(o)},[]),s.jsx(nd,{as:Oq,allowPinchZoom:!0,children:s.jsx(hE,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:je(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:je(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:je(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Mq=h.forwardRef((e,t)=>{const r=ti(al,e.__scopePopover),n=h.useRef(!1),a=h.useRef(!1);return s.jsx(hE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),hE=h.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...f}=e,m=ti(al,r),p=od(r);return Wf(),s.jsx(td,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(zi,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:s.jsx(Of,{"data-state":pE(m.open),role:"dialog",id:m.contentId,...p,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),mE="PopoverClose",Lq=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=ti(mE,r);return s.jsx(Oe.button,{type:"button",...n,ref:t,onClick:je(e.onClick,()=>a.onOpenChange(!1))})});Lq.displayName=mE;var Fq="PopoverArrow",$q=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=od(r);return s.jsx(Df,{...a,...n,ref:t})});$q.displayName=Fq;function pE(e){return e?"open":"closed"}var qq=oE,Uq=dE,Bq=uE,gE=fE;const yE=qq,vE=Uq,hv=h.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(Bq,{children:s.jsx(gE,{ref:a,align:t,sideOffset:r,className:Ee("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));hv.displayName=gE.displayName;var y0=1,Vq=.9,zq=.8,Wq=.17,gm=.1,ym=.999,Hq=.9999,Qq=.99,Kq=/[\\\/_+.#"@\[\(\{&]/,Gq=/[\\\/_+.#"@\[\(\{&]/g,Yq=/[\s-]/,xE=/[\s-]/g;function hg(e,t,r,n,a,i,o){if(i===t.length)return a===e.length?y0:Qq;var l=`${a},${i}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(i),d=r.indexOf(c,a),u=0,f,m,p,x;d>=0;)f=hg(e,t,r,n,d+1,i+1,o),f>u&&(d===a?f*=y0:Kq.test(e.charAt(d-1))?(f*=zq,p=e.slice(a,d-1).match(Gq),p&&a>0&&(f*=Math.pow(ym,p.length))):Yq.test(e.charAt(d-1))?(f*=Vq,x=e.slice(a,d-1).match(xE),x&&a>0&&(f*=Math.pow(ym,x.length))):(f*=Wq,a>0&&(f*=Math.pow(ym,d-a))),e.charAt(d)!==t.charAt(i)&&(f*=Hq)),(f<gm&&r.charAt(d-1)===n.charAt(i+1)||n.charAt(i+1)===n.charAt(i)&&r.charAt(d-1)!==n.charAt(i))&&(m=hg(e,t,r,n,d+1,i+2,o),m*gm>f&&(f=m*gm)),f>u&&(u=f),d=r.indexOf(c,d+1);return o[l]=u,u}function v0(e){return e.toLowerCase().replace(xE," ")}function Xq(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,hg(e,t,v0(e),v0(t),0,0,{})}var Rl='[cmdk-group=""]',vm='[cmdk-group-items=""]',Jq='[cmdk-group-heading=""]',bE='[cmdk-item=""]',x0=`${bE}:not([aria-disabled="true"])`,mg="cmdk-item-select",co="data-value",Zq=(e,t,r)=>Xq(e,t,r),wE=h.createContext(void 0),ld=()=>h.useContext(wE),jE=h.createContext(void 0),mv=()=>h.useContext(jE),_E=h.createContext(void 0),NE=h.forwardRef((e,t)=>{let r=uo(()=>{var W,M;return{search:"",value:(M=(W=e.value)!=null?W:e.defaultValue)!=null?M:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=uo(()=>new Set),a=uo(()=>new Map),i=uo(()=>new Map),o=uo(()=>new Set),l=SE(e),{label:c,children:d,value:u,onValueChange:f,filter:m,shouldFilter:p,loop:x,disablePointerSelection:g=!1,vimBindings:w=!0,...v}=e,y=xr(),b=xr(),j=xr(),_=h.useRef(null),S=d5();qi(()=>{if(u!==void 0){let W=u.trim();r.current.value=W,E.emit()}},[u]),qi(()=>{S(6,R)},[]);let E=h.useMemo(()=>({subscribe:W=>(o.current.add(W),()=>o.current.delete(W)),snapshot:()=>r.current,setState:(W,M,Y)=>{var X,ie,ne,O;if(!Object.is(r.current[W],M)){if(r.current[W]=M,W==="search")$(),F(),S(1,L);else if(W==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ee=document.getElementById(j);ee?ee.focus():(X=document.getElementById(y))==null||X.focus()}if(S(7,()=>{var ee;r.current.selectedItemId=(ee=I())==null?void 0:ee.id,E.emit()}),Y||S(5,R),((ie=l.current)==null?void 0:ie.value)!==void 0){let ee=M??"";(O=(ne=l.current).onValueChange)==null||O.call(ne,ee);return}}E.emit()}},emit:()=>{o.current.forEach(W=>W())}}),[]),D=h.useMemo(()=>({value:(W,M,Y)=>{var X;M!==((X=i.current.get(W))==null?void 0:X.value)&&(i.current.set(W,{value:M,keywords:Y}),r.current.filtered.items.set(W,U(M,Y)),S(2,()=>{F(),E.emit()}))},item:(W,M)=>(n.current.add(W),M&&(a.current.has(M)?a.current.get(M).add(W):a.current.set(M,new Set([W]))),S(3,()=>{$(),F(),r.current.value||L(),E.emit()}),()=>{i.current.delete(W),n.current.delete(W),r.current.filtered.items.delete(W);let Y=I();S(4,()=>{$(),(Y==null?void 0:Y.getAttribute("id"))===W&&L(),E.emit()})}),group:W=>(a.current.has(W)||a.current.set(W,new Set),()=>{i.current.delete(W),a.current.delete(W)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:y,inputId:j,labelId:b,listInnerRef:_}),[]);function U(W,M){var Y,X;let ie=(X=(Y=l.current)==null?void 0:Y.filter)!=null?X:Zq;return W?ie(W,r.current.search,M):0}function F(){if(!r.current.search||l.current.shouldFilter===!1)return;let W=r.current.filtered.items,M=[];r.current.filtered.groups.forEach(X=>{let ie=a.current.get(X),ne=0;ie.forEach(O=>{let ee=W.get(O);ne=Math.max(ee,ne)}),M.push([X,ne])});let Y=_.current;C().sort((X,ie)=>{var ne,O;let ee=X.getAttribute("id"),de=ie.getAttribute("id");return((ne=W.get(de))!=null?ne:0)-((O=W.get(ee))!=null?O:0)}).forEach(X=>{let ie=X.closest(vm);ie?ie.appendChild(X.parentElement===ie?X:X.closest(`${vm} > *`)):Y.appendChild(X.parentElement===Y?X:X.closest(`${vm} > *`))}),M.sort((X,ie)=>ie[1]-X[1]).forEach(X=>{var ie;let ne=(ie=_.current)==null?void 0:ie.querySelector(`${Rl}[${co}="${encodeURIComponent(X[0])}"]`);ne==null||ne.parentElement.appendChild(ne)})}function L(){let W=C().find(Y=>Y.getAttribute("aria-disabled")!=="true"),M=W==null?void 0:W.getAttribute(co);E.setState("value",M||void 0)}function $(){var W,M,Y,X;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let ie=0;for(let ne of n.current){let O=(M=(W=i.current.get(ne))==null?void 0:W.value)!=null?M:"",ee=(X=(Y=i.current.get(ne))==null?void 0:Y.keywords)!=null?X:[],de=U(O,ee);r.current.filtered.items.set(ne,de),de>0&&ie++}for(let[ne,O]of a.current)for(let ee of O)if(r.current.filtered.items.get(ee)>0){r.current.filtered.groups.add(ne);break}r.current.filtered.count=ie}function R(){var W,M,Y;let X=I();X&&(((W=X.parentElement)==null?void 0:W.firstChild)===X&&((Y=(M=X.closest(Rl))==null?void 0:M.querySelector(Jq))==null||Y.scrollIntoView({block:"nearest"})),X.scrollIntoView({block:"nearest"}))}function I(){var W;return(W=_.current)==null?void 0:W.querySelector(`${bE}[aria-selected="true"]`)}function C(){var W;return Array.from(((W=_.current)==null?void 0:W.querySelectorAll(x0))||[])}function T(W){let M=C()[W];M&&E.setState("value",M.getAttribute(co))}function re(W){var M;let Y=I(),X=C(),ie=X.findIndex(O=>O===Y),ne=X[ie+W];(M=l.current)!=null&&M.loop&&(ne=ie+W<0?X[X.length-1]:ie+W===X.length?X[0]:X[ie+W]),ne&&E.setState("value",ne.getAttribute(co))}function K(W){let M=I(),Y=M==null?void 0:M.closest(Rl),X;for(;Y&&!X;)Y=W>0?l5(Y,Rl):c5(Y,Rl),X=Y==null?void 0:Y.querySelector(x0);X?E.setState("value",X.getAttribute(co)):re(W)}let z=()=>T(C().length-1),ae=W=>{W.preventDefault(),W.metaKey?z():W.altKey?K(1):re(1)},ge=W=>{W.preventDefault(),W.metaKey?T(0):W.altKey?K(-1):re(-1)};return h.createElement(Oe.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:W=>{var M;(M=v.onKeyDown)==null||M.call(v,W);let Y=W.nativeEvent.isComposing||W.keyCode===229;if(!(W.defaultPrevented||Y))switch(W.key){case"n":case"j":{w&&W.ctrlKey&&ae(W);break}case"ArrowDown":{ae(W);break}case"p":case"k":{w&&W.ctrlKey&&ge(W);break}case"ArrowUp":{ge(W);break}case"Home":{W.preventDefault(),T(0);break}case"End":{W.preventDefault(),z();break}case"Enter":{W.preventDefault();let X=I();if(X){let ie=new Event(mg);X.dispatchEvent(ie)}}}}},h.createElement("label",{"cmdk-label":"",htmlFor:D.inputId,id:D.labelId,style:f5},c),oh(e,W=>h.createElement(jE.Provider,{value:E},h.createElement(wE.Provider,{value:D},W))))}),e5=h.forwardRef((e,t)=>{var r,n;let a=xr(),i=h.useRef(null),o=h.useContext(_E),l=ld(),c=SE(e),d=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:o==null?void 0:o.forceMount;qi(()=>{if(!d)return l.item(a,o==null?void 0:o.id)},[d]);let u=CE(a,i,[e.value,e.children,i],e.keywords),f=mv(),m=za(S=>S.value&&S.value===u.current),p=za(S=>d||l.filter()===!1?!0:S.search?S.filtered.items.get(a)>0:!0);h.useEffect(()=>{let S=i.current;if(!(!S||e.disabled))return S.addEventListener(mg,x),()=>S.removeEventListener(mg,x)},[p,e.onSelect,e.disabled]);function x(){var S,E;g(),(E=(S=c.current).onSelect)==null||E.call(S,u.current)}function g(){f.setState("value",u.current,!0)}if(!p)return null;let{disabled:w,value:v,onSelect:y,forceMount:b,keywords:j,..._}=e;return h.createElement(Oe.div,{ref:Ws(i,t),..._,id:a,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!m,"data-disabled":!!w,"data-selected":!!m,onPointerMove:w||l.getDisablePointerSelection()?void 0:g,onClick:w?void 0:x},e.children)}),t5=h.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:a,...i}=e,o=xr(),l=h.useRef(null),c=h.useRef(null),d=xr(),u=ld(),f=za(p=>a||u.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);qi(()=>u.group(o),[]),CE(o,l,[e.value,e.heading,c]);let m=h.useMemo(()=>({id:o,forceMount:a}),[a]);return h.createElement(Oe.div,{ref:Ws(l,t),...i,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&h.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),oh(e,p=>h.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},h.createElement(_E.Provider,{value:m},p))))}),r5=h.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,a=h.useRef(null),i=za(o=>!o.search);return!r&&!i?null:h.createElement(Oe.div,{ref:Ws(a,t),...n,"cmdk-separator":"",role:"separator"})}),n5=h.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,a=e.value!=null,i=mv(),o=za(d=>d.search),l=za(d=>d.selectedItemId),c=ld();return h.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),h.createElement(Oe.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:d=>{a||i.setState("search",d.target.value),r==null||r(d.target.value)}})}),s5=h.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...a}=e,i=h.useRef(null),o=h.useRef(null),l=za(d=>d.selectedItemId),c=ld();return h.useEffect(()=>{if(o.current&&i.current){let d=o.current,u=i.current,f,m=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let p=d.offsetHeight;u.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return m.observe(d),()=>{cancelAnimationFrame(f),m.unobserve(d)}}},[]),h.createElement(Oe.div,{ref:Ws(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:c.listId},oh(e,d=>h.createElement("div",{ref:Ws(o,c.listInnerRef),"cmdk-list-sizer":""},d)))}),a5=h.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:i,container:o,...l}=e;return h.createElement(iv,{open:r,onOpenChange:n},h.createElement(ov,{container:o},h.createElement(rh,{"cmdk-overlay":"",className:a}),h.createElement(nh,{"aria-label":e.label,"cmdk-dialog":"",className:i},h.createElement(NE,{ref:t,...l}))))}),i5=h.forwardRef((e,t)=>za(r=>r.filtered.count===0)?h.createElement(Oe.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),o5=h.forwardRef((e,t)=>{let{progress:r,children:n,label:a="Loading...",...i}=e;return h.createElement(Oe.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},oh(e,o=>h.createElement("div",{"aria-hidden":!0},o)))}),an=Object.assign(NE,{List:s5,Item:e5,Input:n5,Group:t5,Separator:r5,Dialog:a5,Empty:i5,Loading:o5});function l5(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function c5(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function SE(e){let t=h.useRef(e);return qi(()=>{t.current=e}),t}var qi=typeof window>"u"?h.useEffect:h.useLayoutEffect;function uo(e){let t=h.useRef();return t.current===void 0&&(t.current=e()),t}function za(e){let t=mv(),r=()=>e(t.snapshot());return h.useSyncExternalStore(t.subscribe,r,r)}function CE(e,t,r,n=[]){let a=h.useRef(),i=ld();return qi(()=>{var o;let l=(()=>{var d;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=n.map(d=>d.trim());i.value(e,l,c),(o=t.current)==null||o.setAttribute(co,l),a.current=l}),a}var d5=()=>{let[e,t]=h.useState(),r=uo(()=>new Map);return qi(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,a)=>{r.current.set(n,a),t({})}};function u5(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function oh({asChild:e,children:t},r){return e&&h.isValidElement(t)?h.cloneElement(u5(t),{ref:t.ref},r(t.props.children)):r(t)}var f5={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const pv=h.forwardRef(({className:e,...t},r)=>s.jsx(an,{ref:r,className:Ee("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));pv.displayName=an.displayName;const gv=h.forwardRef(({className:e,...t},r)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(Yn,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(an.Input,{ref:r,className:Ee("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));gv.displayName=an.Input.displayName;const yv=h.forwardRef(({className:e,...t},r)=>s.jsx(an.List,{ref:r,className:Ee("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));yv.displayName=an.List.displayName;const vv=h.forwardRef((e,t)=>s.jsx(an.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));vv.displayName=an.Empty.displayName;const xv=h.forwardRef(({className:e,...t},r)=>s.jsx(an.Group,{ref:r,className:Ee("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));xv.displayName=an.Group.displayName;const h5=h.forwardRef(({className:e,...t},r)=>s.jsx(an.Separator,{ref:r,className:Ee("-mx-1 h-px bg-border",e),...t}));h5.displayName=an.Separator.displayName;const bv=h.forwardRef(({className:e,...t},r)=>s.jsx(an.Item,{ref:r,className:Ee("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));bv.displayName=an.Item.displayName;const Gr={async getSuppliers(){try{const{data:e,error:t}=await H.from("suppliers").select("id, name").eq("is_active",!0).order("name");return t?(console.error("Error fetching suppliers:",t),[]):e||[]}catch(e){return console.error("Network error fetching suppliers:",e),[]}},async getCustodians(){try{const{data:e,error:t}=await H.from("custodians").select("id, name, custodian_no").order("name");return t?(console.error("Error fetching custodians:",t),[]):(e||[]).map(r=>({id:r.id,name:r.name,code:r.custodian_no??void 0}))}catch(e){return console.error("Network error fetching custodians:",e),[]}},async getFundSources(){const{data:e,error:t}=await H.from("fund_sources").select("id, name, code").eq("is_active",!0).order("name");return t?(console.error("Error fetching fund sources:",t),[]):e||[]},async getUsers(){const{data:e,error:t}=await H.from("user_profiles").select("id, full_name").eq("is_active",!0).order("full_name");return t?(console.error("Error fetching users:",t),[]):(e||[]).map(r=>({id:r.id,name:r.full_name}))},async getDepartments(){const{data:e,error:t}=await H.from("departments").select("id, name, code").eq("is_active",!0).order("name");return t?(console.error("Error fetching departments:",t),[]):e||[]},async getSemiExpandableCategories(){const{data:e,error:t}=await H.from("semi_expandable_categories").select("id, name, code").eq("is_active",!0).order("name");return t?(console.error("Error fetching semi expandable categories:",t),[]):e||[]},async create(e,t){var l;const r={name:t.name},n=(l=t.code)==null?void 0:l.trim();if(e==="fund_sources"){if(!n)throw new Error("Code is required for fund sources");r.code=n}else if(e==="departments"||e==="semi_expandable_categories")n&&(r.code=n);else if(e==="custodians"){let c=n;if(!c){const{data:p,error:x}=await H.from("custodians").select("custodian_no").order("custodian_no",{ascending:!1}).limit(50);if(!x&&p){const g=p.map(v=>String(v.custodian_no||"").trim()).map(v=>v.match(/\d+/)?parseInt(v.match(/\d+/)[0],10):NaN).filter(v=>Number.isFinite(v)),w=g.length?Math.max(...g)+1:1;c=String(w).padStart(4,"0")}else c="0001"}const u=`CUST-${(c.match(/\d+/)?c.match(/\d+/)[0]:c).padStart(4,"0")}`,{data:f,error:m}=await H.from("custodians").select("id").in("custodian_no",[c,u]).limit(1);if(!m&&f&&f.length>0)throw new Error("Custodian number already exists. Please use a different number.");r.custodian_no=u,t.position!==void 0&&(r.position=t.position&&t.position.trim()!==""?t.position:null),t.department_id!==void 0&&(r.department_id=t.department_id&&t.department_id.trim()!==""?t.department_id:null)}const a=e==="fund_sources"||e==="departments"||e==="semi_expandable_categories"?"id, name, code":e==="custodians"?"id, name, custodian_no, position, department_id":"id, name",{data:i,error:o}=await H.from(e).insert(r).select(a).single();if(o)throw o.code==="23505"?e==="custodians"?new Error("Custodian number already exists. Please use a different number."):new Error("A record with this code already exists. Please use a different code."):o.code==="23502"&&e==="departments"?new Error("Department code is optional, but your database still requires it. Please run database/make-department-code-optional.sql in Supabase."):o;return e==="custodians"?{id:i.id,name:i.name,code:i.custodian_no}:i},async update(e,t,r){var c;const n={};r.name!==void 0&&(n.name=r.name);const a=(c=r.code)==null?void 0:c.trim();if(e==="fund_sources"||e==="departments"||e==="semi_expandable_categories")r.code!==void 0&&(n.code=a??null);else if(e==="custodians"){if(r.code!==void 0)if(a){const d=(a.match(/\d+/)?a.match(/\d+/)[0]:a).padStart(4,"0");n.custodian_no=`CUST-${d}`}else n.custodian_no=null;r.position!==void 0&&(n.position=r.position&&r.position.trim()!==""?r.position:null),r.department_id!==void 0&&(n.department_id=r.department_id&&r.department_id.trim()!==""?r.department_id:null)}const i=e==="fund_sources"||e==="departments"||e==="semi_expandable_categories"?"id, name, code":e==="custodians"?"id, name, custodian_no, position, department_id":"id, name",{data:o,error:l}=await H.from(e).update(n).eq("id",t).select(i).single();if(l)throw l;return e==="custodians"?{id:o.id,name:o.name,code:o.custodian_no}:o},async remove(e,t){if(e==="departments"){const{data:n,error:a}=await H.from("custodians").select("id").eq("department_id",t).limit(1);if(a)throw a;if(n&&n.length>0)throw new Error("Cannot delete department: It is currently assigned to custodians. Please reassign the custodians to a different department first.")}if(e==="custodians"){const{data:n,error:a}=await H.from("inventory_items").select("id").eq("custodian_id",t).limit(1);if(a)throw a;if(n&&n.length>0)throw new Error("Cannot delete custodian: They are assigned to inventory items. Please reassign the items first.")}const{error:r}=await H.from(e).delete().eq("id",t);if(r)throw r;return!0}};class Wd{static async generateNextPropertyNumber(t){const n=new Date().getFullYear().toString(),a=t==="Small Value Expendable"?"SPLV":"SPHV",i=`${a}-${n}-`;console.log(`Generating property number for ${t}:`,{prefix:a,year:n,searchPattern:i});try{const{data:o,error:l}=await H.from("inventory_items").select("property_number").like("property_number",`${i}%`).order("property_number",{ascending:!1});if(console.log("Database query result:",{data:o,error:l}),l){console.error("Error fetching property numbers:",l);const p=`${i}0001`;return console.log("Using fallback number:",p),p}if(!o||o.length===0){const p=`${i}0001`;return console.log("No existing numbers found, using first number:",p),p}let c=0;for(const p of o){const x=p.property_number;if(x.startsWith(i)){const g=x.split("-");if(g.length===3){const w=g[2],v=parseInt(w,10);!isNaN(v)&&v>c&&(c=v)}}}const d=c+1,u=d.toString().padStart(4,"0"),f=`${i}${u}`;if(console.log("Generated next number:",f,{highestSequence:c,nextSequence:d,totalExisting:o.length}),o.find(p=>p.property_number===f)){console.warn("Generated number already exists, trying next sequence");const x=(d+1).toString().padStart(4,"0"),g=`${i}${x}`;return console.log("Using next available number:",g),g}return f}catch(o){console.error("Error generating property number:",o);const l=`${i}0001`;return console.log("Using fallback number due to error:",l),l}}static parsePropertyNumber(t){const r=t.split("-");if(r.length===3){const[n,a,i]=r;return n!=="SPLV"&&n!=="SPHV"||!/^\d{4}$/.test(a)||!/^\d{4}$/.test(i)?null:{prefix:n,year:a,sequenceNumber:i,fullNumber:t}}if(r.length===4){const[n,a,i,o]=r;return n!=="SPLV"&&n!=="SPHV"||!/^\d{4}$/.test(a)||!/^(0[1-9]|1[0-2])$/.test(i)||!/^\d{4}$/.test(o)?null:{prefix:n,year:a,sequenceNumber:o,fullNumber:t}}return null}static getPrefixForSubCategory(t){return t==="Small Value Expendable"?"SPLV":"SPHV"}static isValidPropertyNumber(t){return this.parsePropertyNumber(t)!==null}static async checkPropertyNumberExists(t){try{const{data:r,error:n}=await H.from("inventory_items").select("id").eq("property_number",t).limit(1);return n?(console.error("Error checking property number existence:",n),!1):r&&r.length>0}catch(r){return console.error("Error checking property number existence:",r),!1}}static async generateUniquePropertyNumber(t){let r=0;const n=10;for(;r<n;){const a=await this.generateNextPropertyNumber(t);if(!await this.checkPropertyNumberExists(a))return console.log(`Generated unique property number: ${a} (attempt ${r+1})`),a;console.warn(`Property number ${a} already exists, trying next sequence`),r++}throw new Error(`Unable to generate unique property number after ${n} attempts`)}}function m5(e){const t=e.toLowerCase();return t.includes("server")||t.includes("computer")||t.includes("workstation")?{years:5,confidence:"high",reasoning:"IT equipment typically lasts 5 years"}:t.includes("vehicle")||t.includes("car")||t.includes("truck")?{years:8,confidence:"high",reasoning:"Vehicles typically last 8 years"}:t.includes("furniture")||t.includes("desk")||t.includes("chair")||t.includes("cabinet")?{years:10,confidence:"high",reasoning:"Furniture typically lasts 10 years"}:t.includes("air conditioning")||t.includes("hvac")||t.includes("cooling")?{years:15,confidence:"high",reasoning:"HVAC systems typically last 15 years"}:t.includes("generator")||t.includes("backup power")?{years:20,confidence:"high",reasoning:"Generators typically last 20 years"}:t.includes("refrigerator")||t.includes("freezer")?{years:12,confidence:"high",reasoning:"Refrigeration equipment typically lasts 12 years"}:t.includes("printer")||t.includes("copier")||t.includes("scanner")?{years:7,confidence:"medium",reasoning:"Office equipment typically lasts 7 years"}:t.includes("monitor")||t.includes("display")||t.includes("screen")?{years:5,confidence:"medium",reasoning:"Displays typically last 5 years"}:t.includes("laptop")||t.includes("notebook")?{years:4,confidence:"high",reasoning:"Laptops typically last 4 years"}:t.includes("tablet")||t.includes("ipad")?{years:3,confidence:"medium",reasoning:"Tablets typically last 3 years"}:t.includes("drill")||t.includes("saw")||t.includes("tool")?{years:8,confidence:"medium",reasoning:"Power tools typically last 8 years"}:t.includes("camera")||t.includes("video")||t.includes("recording")?{years:6,confidence:"medium",reasoning:"A/V equipment typically lasts 6 years"}:t.includes("fire")||t.includes("safety")||t.includes("alarm")?{years:10,confidence:"high",reasoning:"Safety equipment typically lasts 10 years"}:t.includes("paper")||t.includes("pen")||t.includes("supply")?{years:1,confidence:"low",reasoning:"Consumables typically last 1 year"}:{years:5,confidence:"low",reasoning:"Default estimate based on general equipment"}}function p5(e,t){let r=0,n="";return e>=1e5?(r=2,n="High-value items typically last longer"):e>=5e4?(r=1,n="Medium-high value items may last longer"):e>=1e4?(r=0,n="Standard value items"):e>=1e3?(r=-1,n="Lower value items may have shorter life"):(r=-2,n="Low value items typically have shorter life"),{years:Math.max(1,t+r),confidence:e>=1e4?"high":e>=1e3?"medium":"low",reasoning:n}}function g5(e){return{years:{"IT Equipment":5,Furniture:10,Vehicles:8,Machinery:15,Electronics:4,Tools:8,Appliances:12,"Safety Equipment":10,"Office Equipment":7,"Building Equipment":20}[e||""]||5,confidence:"medium",reasoning:`Category-based estimate for ${e||"unknown category"}`}}function y5(e){if(e.manualOverride&&e.manualOverride>0)return{years:e.manualOverride,months:Math.round(e.manualOverride*12),method:"manual",confidence:"high",reasoning:"Manual override provided by user"};const t=m5(e.description),r=p5(e.cost,t.years||5);if(t.confidence==="high"){const a=r.years||t.years||5;return{years:a,months:Math.round(a*12),method:"intelligent",confidence:r.confidence||"high",reasoning:`${t.reasoning}. ${r.reasoning}`}}if(e.category){const a=g5(e.category),i=r.years||a.years||5;return{years:i,months:Math.round(i*12),method:"category_fallback",confidence:r.confidence||"medium",reasoning:`${a.reasoning}. ${r.reasoning}`}}const n=r.years||5;return{years:n,months:Math.round(n*12),method:"intelligent",confidence:"low",reasoning:`Default estimate based on cost analysis. ${r.reasoning}`}}function v5(e){const t={intelligent:"AI Analysis",manual:"Manual Override",category_fallback:"Category-Based"},r={high:"High Confidence",medium:"Medium Confidence",low:"Low Confidence"};return`${e.years} years (${e.months} months) - ${t[e.method]} - ${r[e.confidence]}`}function x5(e){if(!e||e.trim()==="")return{valid:!0};const t=parseFloat(e);return isNaN(t)?{valid:!1,error:"Must be a valid number"}:t<=0?{valid:!1,error:"Must be greater than 0"}:t>50?{valid:!1,error:"Must be 50 years or less"}:{valid:!0,years:t}}var lh="Checkbox",[b5,OV]=Br(lh),[w5,wv]=b5(lh);function j5(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:f}=e,[m,p]=Hs({prop:r,defaultProp:a??!1,onChange:c,caller:lh}),[x,g]=h.useState(null),[w,v]=h.useState(null),y=h.useRef(!1),b=x?!!o||!!x.closest("form"):!0,j={checked:m,disabled:i,setChecked:p,control:x,setControl:g,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:y,required:d,defaultChecked:Ma(a)?!1:a,isFormControl:b,bubbleInput:w,setBubbleInput:v};return s.jsx(w5,{scope:t,...j,children:_5(f)?f(j):n})}var EE="CheckboxTrigger",kE=h.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:x}=wv(EE,e),g=Ke(a,u),w=h.useRef(c);return h.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const y=()=>f(w.current);return v.addEventListener("reset",y),()=>v.removeEventListener("reset",y)}},[i,f]),s.jsx(Oe.button,{type:"button",role:"checkbox","aria-checked":Ma(c)?"mixed":c,"aria-required":d,"data-state":RE(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:g,onKeyDown:je(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:je(r,v=>{f(y=>Ma(y)?!0:!y),x&&p&&(m.current=v.isPropagationStopped(),m.current||v.stopPropagation())})})});kE.displayName=EE;var jv=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...f}=e;return s.jsx(j5,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:m})=>s.jsxs(s.Fragment,{children:[s.jsx(kE,{...f,ref:t,__scopeCheckbox:r}),m&&s.jsx(IE,{__scopeCheckbox:r})]})})});jv.displayName=lh;var PE="CheckboxIndicator",TE=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=wv(PE,r);return s.jsx(mr,{present:n||Ma(i.checked)||i.checked===!0,children:s.jsx(Oe.span,{"data-state":RE(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});TE.displayName=PE;var AE="CheckboxBubbleInput",IE=h.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:f,bubbleInput:m,setBubbleInput:p}=wv(AE,e),x=Ke(r,p),g=UC(i),w=mN(n);h.useEffect(()=>{const y=m;if(!y)return;const b=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(b,"checked").set,S=!a.current;if(g!==i&&_){const E=new Event("click",{bubbles:S});y.indeterminate=Ma(i),_.call(y,Ma(i)?!1:i),y.dispatchEvent(E)}},[m,g,i,a]);const v=h.useRef(Ma(i)?!1:i);return s.jsx(Oe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??v.current,required:l,disabled:c,name:d,value:u,form:f,...t,tabIndex:-1,ref:x,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});IE.displayName=AE;function _5(e){return typeof e=="function"}function Ma(e){return e==="indeterminate"}function RE(e){return Ma(e)?"indeterminate":e?"checked":"unchecked"}const cd=h.forwardRef(({className:e,...t},r)=>s.jsx(jv,{ref:r,className:Ee("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(TE,{className:Ee("flex items-center justify-center text-current"),children:s.jsx(Qs,{className:"h-4 w-4"})})}));cd.displayName=jv.displayName;const N5=({item:e,onSave:t,onCancel:r,isSaving:n=!1})=>{var X,ie,ne;const[a,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(!0),[m,p]=h.useState({type:null}),[x,g]=h.useState({name:""}),[w,v]=h.useState(((X=e==null?void 0:e.estimatedUsefulLifeOverride)==null?void 0:X.toString())||""),[y,b]=h.useState(null),[j,_]=h.useState(""),[S,E]=h.useState(!1),[D,U]=h.useState(""),[F,L]=h.useState(""),[$,R]=h.useState(!1),I=async()=>{if(!x.name.trim()||!m.type)return;const O={supplier:"suppliers",fundSource:"fund_sources"},ee=await Gr.create(O[m.type],x);m.type==="supplier"&&i([ee,...a]),m.type==="fundSource"&&l([ee,...o]),g({name:""}),p({type:null})},[C,T]=h.useState({propertyNumber:(e==null?void 0:e.propertyNumber)||"",description:(e==null?void 0:e.description)||"",brand:(e==null?void 0:e.brand)||"",model:(e==null?void 0:e.model)||"",serialNumber:(e==null?void 0:e.serialNumber)||"",unitOfMeasure:(e==null?void 0:e.unitOfMeasure)||"piece",quantity:(e==null?void 0:e.quantity)||1,unitCost:(e==null?void 0:e.unitCost)||void 0,dateAcquired:(e==null?void 0:e.dateAcquired)||new Date().toISOString().split("T")[0],supplier:(e==null?void 0:e.supplier)||"",condition:(e==null?void 0:e.condition)||"Serviceable",fundSource:(e==null?void 0:e.fundSource)||"",remarks:(e==null?void 0:e.remarks)||"",semiExpandableCategory:(e==null?void 0:e.semiExpandableCategory)||"",subCategory:(e==null?void 0:e.subCategory)||void 0,status:(e==null?void 0:e.status)||"Active",lastInventoryDate:(e==null?void 0:e.lastInventoryDate)||"",entityName:(e==null?void 0:e.entityName)||"PROVINCIAL GOVERNMENT OF APAYAO"}),re=h.useMemo(()=>{var ee,de,ce;return[(ee=C.brand)==null?void 0:ee.trim(),(de=C.model)==null?void 0:de.trim(),(ce=C.serialNumber)==null?void 0:ce.trim()].filter(Boolean).join(" ")},[C.brand,C.model,C.serialNumber]),K=O=>{if(O!=null)return O<=5e3?"Small Value Expendable":"High Value Expendable"};h.useEffect(()=>{if(e!=null&&e.propertyNumber&&!F){const O=e.propertyNumber.split("-");(O[0]==="SPLV"||O[0]==="SPHV")&&L(O[0])}},[e==null?void 0:e.propertyNumber,F]);const z=async O=>{console.log("generatePropertyNumber called with subCategory:",O);const ee=Wd.getPrefixForSubCategory(O);L(ee);try{const de=await Wd.generateUniquePropertyNumber(O);console.log("Generated unique property number:",de),T(ce=>({...ce,propertyNumber:de})),console.log("Updated formData with property number:",de)}catch(de){console.error("Error generating unique property number:",de);try{const ce=await Wd.generateNextPropertyNumber(O);console.log("Generated fallback property number:",ce),T(me=>({...me,propertyNumber:ce}))}catch(ce){console.error("Fallback generation also failed:",ce);const me=new Date,He=me.getFullYear().toString(),ut=(me.getMonth()+1).toString().padStart(2,"0"),J=`${ee}-${He}-${ut}-0001`;console.log("Using final fallback number:",J),T(Ne=>({...Ne,propertyNumber:J}))}}};h.useEffect(()=>{if(C.unitCost!==void 0&&C.unitCost!==null&&C.unitCost>=.01){const O=K(C.unitCost);O&&T(ee=>ee.subCategory!==O?(console.log("Auto-determining sub-category:",O,"from unit cost:",C.unitCost),z(O),{...ee,subCategory:O}):ee)}else(C.unitCost===void 0||C.unitCost===null)&&T(O=>O.subCategory?(L(""),{...O,subCategory:void 0,propertyNumber:""}):O)},[C.unitCost]);const ae=O=>{if(!O)return"";const ee=O.split("-");if(ee.length!==4)return O;const[de,ce,me,He]=ee;return de!=="SPLV"&&de!=="SPHV"?F?`${F}-${ce}-${me}-${He}`:O:F&&de!==F?`${F}-${ce}-${me}-${He}`:O},ge=O=>{const ee=ae(O);T(de=>({...de,propertyNumber:ee}))},W=h.useMemo(()=>{const O=C.unitCost;return O==null?{isValid:!0,message:""}:O<.01?{isValid:!1,message:"Unit cost must be at least 0.01"}:{isValid:!0,message:""}},[C.unitCost]);h.useEffect(()=>{(async()=>{try{const[ee,de,ce]=await Promise.all([Gr.getSuppliers(),Gr.getFundSources(),Gr.getSemiExpandableCategories()]);i(ee),l(de),d(ce)}catch(ee){console.error("Error loading lookup data:",ee)}finally{f(!1)}})()},[]),h.useEffect(()=>{if(C.description&&C.unitCost!==void 0){const O=y5({description:C.description,cost:C.unitCost,category:"Semi-Expendable",manualOverride:w?parseFloat(w):void 0});b(O)}},[C.description,C.unitCost,w]);const M=O=>{v(O);const ee=x5(O);_(ee.error||"")},Y=O=>{if(O.preventDefault(),!C.semiExpandableCategory){_("Please select a Semi-Expendable Category");return}if(!C.unitCost||C.unitCost<.01){_("Please enter a valid unit cost (minimum 0.01)");return}if(!C.subCategory){const de=K(C.unitCost);if(de){T(ce=>({...ce,subCategory:de})),_("Please wait for property number to be generated..."),z(de).then(()=>{setTimeout(()=>{const ce={id:(e==null?void 0:e.id)||`INV-${Date.now()}`,...C,subCategory:de,totalCost:(C.quantity||0)*(C.unitCost||0),estimatedUsefulLifeOverride:w?parseFloat(w):null,createdAt:(e==null?void 0:e.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};t(ce,$)},500)});return}_("Unable to determine sub-category. Please check unit cost.");return}if(!W.isValid){_(W.message);return}if(!C.propertyNumber){_("Property number is required. Please wait for it to be generated or enter manually.");return}_("");const ee={id:(e==null?void 0:e.id)||`INV-${Date.now()}`,...C,totalCost:(C.quantity||0)*(C.unitCost||0),estimatedUsefulLifeOverride:w?parseFloat(w):null,createdAt:(e==null?void 0:e.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};t(ee,$)};return u?s.jsx(Te,{className:"max-w-4xl mx-auto",children:s.jsx(Ae,{className:"p-8 text-center",children:s.jsx("div",{className:"text-muted-foreground",children:"Loading form data..."})})}):s.jsxs(s.Fragment,{children:[s.jsxs(Te,{className:"max-w-4xl mx-auto",children:[s.jsx(ze,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsx(et,{children:e?"Edit Inventory Item":"Add New Inventory Item"})})}),s.jsx(Ae,{children:s.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-sm font-bold",children:"1"}),s.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Category Selection"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"semiExpandableCategory",className:"text-sm font-medium",children:"Semi-Expendable Category *"}),s.jsxs(yE,{open:S,onOpenChange:E,children:[s.jsx(vE,{asChild:!0,children:s.jsxs(le,{variant:"outline",role:"combobox","aria-expanded":S,className:"w-full justify-between h-auto min-h-10 py-2 bg-white",children:[s.jsx("span",{className:"truncate text-left flex-1 mr-2",children:C.semiExpandableCategory?((ie=c.find(O=>O.name===C.semiExpandableCategory))==null?void 0:ie.name)||C.semiExpandableCategory:"Select category..."}),s.jsx(z_,{className:"h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(hv,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:s.jsxs(pv,{children:[s.jsx(gv,{placeholder:"Search categories...",value:D,onValueChange:U}),s.jsxs(yv,{children:[s.jsx(vv,{children:"No category found."}),s.jsx(xv,{children:c.filter(O=>D===""||O.name.toLowerCase().includes(D.toLowerCase())).map(O=>s.jsxs(bv,{value:O.name,onSelect:()=>{T({...C,semiExpandableCategory:O.name}),E(!1),U("")},children:[s.jsx(Qs,{className:Ee("mr-2 h-4 w-4",C.semiExpandableCategory===O.name?"opacity-100":"opacity-0")}),O.name]},O.id))})]})]})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Search and select the appropriate semi-expendable category"})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-green-600 text-white flex items-center justify-center text-sm font-bold",children:"2"}),s.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Item Identification"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"brand",children:"Brand"}),s.jsx(ke,{id:"brand",value:C.brand,onChange:O=>T({...C,brand:O.target.value}),placeholder:"e.g., Dell, HP, Apple"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"model",children:"Model"}),s.jsx(ke,{id:"model",value:C.model,onChange:O=>T({...C,model:O.target.value}),placeholder:"e.g., OptiPlex 7090"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"serialNumber",children:"Serial Number"}),s.jsx(ke,{id:"serialNumber",value:C.serialNumber,onChange:O=>T({...C,serialNumber:O.target.value}),placeholder:"e.g., DL12345678"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"description",children:"Description (auto-generated) *"}),s.jsx(ke,{id:"description",value:re,disabled:!0,placeholder:"Auto-generated from Brand, Model, Serial Number",className:"bg-muted"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Description is automatically generated from Brand, Model, and Serial Number fields above"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"entityName",children:"Entity Name *"}),s.jsx(ke,{id:"entityName",value:C.entityName||"",onChange:O=>T({...C,entityName:O.target.value}),placeholder:"PROVINCIAL GOVERNMENT OF APAYAO",required:!0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended: PROVINCIAL GOVERNMENT OF APAYAO - This will be used as the entity name when creating property cards"})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-600 text-white flex items-center justify-center text-sm font-bold",children:"3"}),s.jsx("h3",{className:"text-lg font-semibold text-yellow-900",children:"Financial Information"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"quantity",children:"Quantity *"}),s.jsx(ke,{id:"quantity",type:"number",min:"1",value:C.quantity,onChange:O=>T({...C,quantity:parseInt(O.target.value)||1}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"unitOfMeasure",children:"Unit of Measure *"}),s.jsxs(Dt,{value:C.unitOfMeasure,onValueChange:O=>T({...C,unitOfMeasure:O}),children:[s.jsx(kt,{children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"piece",children:"Piece"}),s.jsx(we,{value:"set",children:"Set"}),s.jsx(we,{value:"unit",children:"Unit"}),s.jsx(we,{value:"lot",children:"Lot"}),s.jsx(we,{value:"pair",children:"Pair"}),s.jsx(we,{value:"dozen",children:"Dozen"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"unitCost",children:"Unit Cost *"}),s.jsx(ke,{id:"unitCost",type:"number",step:"0.01",min:"0.01",value:C.unitCost||"",onChange:O=>{const ee=parseFloat(O.target.value);isNaN(ee)?T({...C,unitCost:void 0}):T({...C,unitCost:ee})},onBlur:O=>{const ee=parseFloat(O.target.value);(!ee||ee<=0)&&T({...C,unitCost:.01})},required:!0,placeholder:"Enter amount (minimum 0.01)",className:W.isValid?"":"border-red-500"}),!W.isValid&&s.jsx("div",{className:"text-sm text-red-600",children:W.message}),C.unitCost!==void 0&&C.unitCost!==null&&C.unitCost>=.01&&s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:`px-2 py-1 rounded ${C.unitCost<=5e3?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:C.unitCost<=5e3?" Small Value (SPLV)":" High Value (SPHV)"}),s.jsx("span",{className:"text-muted-foreground",children:"Sub-category and property number will be auto-generated"})]}),(!C.unitCost||C.unitCost<.01)&&s.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Enter unit cost to automatically determine sub-category and generate property number"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{children:"Total Cost"}),s.jsxs("div",{className:"px-3 py-2 bg-muted rounded-md text-sm font-medium",children:["",((C.quantity||0)*(C.unitCost||0)).toFixed(2)]})]})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-purple-50 to-purple-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center text-sm font-bold",children:"4"}),s.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Property Details"}),s.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:"(Auto-determined from unit cost)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"subCategory",className:"text-sm font-medium",children:"Sub-Category"}),s.jsx("div",{className:`px-4 py-3 rounded-md text-sm font-medium flex items-center justify-between ${C.subCategory==="High Value Expendable"?"bg-blue-100 text-blue-800 border-2 border-blue-300":C.subCategory==="Small Value Expendable"?"bg-green-100 text-green-800 border-2 border-green-300":"bg-muted text-muted-foreground border-2 border-gray-200"}`,children:C.subCategory?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:C.subCategory==="High Value Expendable"?"":""}),s.jsx("span",{children:C.subCategory==="Small Value Expendable"?"Small Value Expendable (SPLV)":"High Value Expendable (SPHV)"})]}):s.jsx("span",{children:"Enter unit cost above to determine"})}),C.unitCost!==void 0&&C.unitCost!==null&&C.unitCost>=.01&&s.jsx("p",{className:"text-xs text-muted-foreground",children:C.unitCost<=5e3?" Determined as Small Value ( 5,000)":" Determined as High Value (> 5,000)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(he,{htmlFor:"propertyNumber",className:"text-sm font-medium",children:"Property Number *"}),C.subCategory&&s.jsx(le,{type:"button",variant:"outline",size:"sm",onClick:()=>{C.subCategory&&z(C.subCategory)},className:"text-xs h-7",children:" Regenerate"})]}),s.jsx(ke,{id:"propertyNumber",value:C.propertyNumber,onChange:O=>ge(O.target.value),required:!0,placeholder:C.subCategory?"Auto-generated from unit cost":"Enter unit cost to generate",className:C.subCategory?"bg-green-50 border-green-300 font-mono":"bg-muted"}),C.subCategory&&s.jsxs("p",{className:"text-xs text-green-700",children:[" Format: ",Wd.getPrefixForSubCategory(C.subCategory),"-YYYY-MM-NNNN"]})]})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-orange-50 to-orange-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-600 text-white flex items-center justify-center text-sm font-bold",children:"5"}),s.jsx("h3",{className:"text-lg font-semibold text-orange-900",children:"Acquisition Details"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"dateAcquired",children:"Date Acquired *"}),s.jsx(ke,{id:"dateAcquired",type:"date",value:C.dateAcquired,onChange:O=>T({...C,dateAcquired:O.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"supplier",children:"Supplier"}),s.jsxs(Dt,{value:C.supplier,onValueChange:O=>T({...C,supplier:O}),children:[s.jsx(kt,{children:s.jsx(Mt,{placeholder:"Select supplier"})}),s.jsxs(Pt,{children:[a.map(O=>s.jsx(we,{value:O.id,children:O.name},O.id)),s.jsx("div",{className:"p-2",children:s.jsx(le,{type:"button",variant:"outline",size:"sm",onClick:()=>p({type:"supplier"}),children:"+ Add supplier"})})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"fundSource",children:"Fund Source"}),s.jsxs(Dt,{value:C.fundSource,onValueChange:O=>T({...C,fundSource:O}),children:[s.jsx(kt,{children:s.jsx(Mt,{placeholder:"Select fund source"})}),s.jsxs(Pt,{children:[o.map(O=>s.jsx(we,{value:O.id,children:O.name},O.id)),s.jsx("div",{className:"p-2",children:s.jsx(le,{type:"button",variant:"outline",size:"sm",onClick:()=>p({type:"fundSource"}),children:"+ Add fund source"})})]})]})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-red-50 to-red-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-red-600 text-white flex items-center justify-center text-sm font-bold",children:"6"}),s.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Status and Condition"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"condition",children:"Condition *"}),s.jsxs(Dt,{value:C.condition,onValueChange:O=>T({...C,condition:O}),children:[s.jsx(kt,{children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"Serviceable",children:"Serviceable"}),s.jsx(we,{value:"Unserviceable",children:"Unserviceable"}),s.jsx(we,{value:"For Repair",children:"For Repair"}),s.jsx(we,{value:"Lost",children:"Lost"}),s.jsx(we,{value:"Stolen",children:"Stolen"}),s.jsx(we,{value:"Damaged",children:"Damaged"}),s.jsx(we,{value:"Destroyed",children:"Destroyed"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"status",children:"Status *"}),s.jsxs(Dt,{value:C.status,onValueChange:O=>T({...C,status:O}),children:[s.jsx(kt,{children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"Active",children:"Active"}),s.jsx(we,{value:"Transferred",children:"Transferred"}),s.jsx(we,{value:"Disposed",children:"Disposed"}),s.jsx(we,{value:"Missing",children:"Missing"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"lastInventoryDate",children:"Last Inventory Date"}),s.jsx(ke,{id:"lastInventoryDate",type:"date",value:C.lastInventoryDate,onChange:O=>T({...C,lastInventoryDate:O.target.value})})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-gray-50 to-gray-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 text-white flex items-center justify-center text-sm font-bold",children:"7"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Additional Information"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"remarks",children:"Remarks"}),s.jsx(ki,{id:"remarks",value:C.remarks,onChange:O=>T({...C,remarks:O.target.value}),rows:3,placeholder:"Additional notes or comments about this item"})]})]}),!e&&s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-teal-50 to-teal-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-teal-600 text-white flex items-center justify-center text-sm font-bold",children:"8"}),s.jsx("h3",{className:"text-lg font-semibold text-teal-900",children:"Property Card Creation"})]}),s.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-background rounded-md border",children:[s.jsx(cd,{id:"autoCreatePropertyCard",checked:$,onCheckedChange:O=>R(O===!0)}),s.jsxs("div",{className:"space-y-1 flex-1",children:[s.jsx(he,{htmlFor:"autoCreatePropertyCard",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Automatically create property card"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"If checked, a property card will be created automatically using the entity name and fund source from this inventory item. You can still edit the property card later if needed."}),$&&s.jsxs("div",{className:"mt-2 p-2 bg-teal-50 rounded text-xs",children:[s.jsx("p",{className:"font-medium text-teal-800",children:"Property card will be created with:"}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1 text-teal-700",children:[s.jsxs("li",{children:["Entity Name: ",C.entityName||"PROVINCIAL GOVERNMENT OF APAYAO"]}),s.jsxs("li",{children:["Fund Cluster: ",C.fundSource?((ne=o.find(O=>O.id===C.fundSource))==null?void 0:ne.name)||"From selected fund source":"General Fund (default)"]}),s.jsxs("li",{children:["Property Number: ",C.propertyNumber||"Will use generated number"]})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4 p-5 border rounded-lg bg-gradient-to-br from-indigo-50 to-indigo-100/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-600 text-white flex items-center justify-center text-sm font-bold",children:e?"8":"9"}),s.jsx("h3",{className:"text-lg font-semibold text-indigo-900",children:"Estimated Useful Life"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Intelligent calculation based on description and cost, with manual override option"}),y&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-background rounded-md border",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:[y.years," years (",y.months," months)"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:v5(y)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-green-600",children:y.method==="manual"?"Manual Override":y.method==="intelligent"?"AI Analysis":"Category-Based"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[y.confidence," confidence"]})]})]}),y.reasoning&&s.jsxs("div",{className:"text-xs text-muted-foreground p-2 bg-muted rounded",children:[s.jsx("strong",{children:"Reasoning:"})," ",y.reasoning]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(he,{htmlFor:"estimatedLifeOverride",children:"Manual Override (Optional)"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ke,{id:"estimatedLifeOverride",type:"number",step:"0.1",min:"0.1",max:"50",value:w,onChange:O=>M(O.target.value),placeholder:"Enter years (e.g., 5.5)",className:j?"border-red-500":""}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"years"})]}),j&&s.jsx("div",{className:"text-sm text-red-600",children:j}),!j&&w&&s.jsx("div",{className:"text-sm text-green-600",children:" Manual override will be used instead of intelligent calculation"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(le,{type:"button",variant:"outline",onClick:r,disabled:n,children:"Cancel"}),s.jsx(le,{type:"submit",disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),e?"Updating...":"Adding..."]}):e?"Update Item":"Add Item"})]})]})})]}),s.jsx(fn,{open:!!m.type,onOpenChange:()=>p({type:null}),children:s.jsxs(Zr,{children:[s.jsx(pn,{children:s.jsxs(gn,{children:["Add ",m.type==="supplier"?"Supplier":"Fund Source"]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[s.jsx(ke,{placeholder:"Name",value:x.name,onChange:O=>g({...x,name:O.target.value})}),s.jsx(ke,{placeholder:"Code (optional)",value:x.code||"",onChange:O=>g({...x,code:O.target.value})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(le,{variant:"outline",onClick:()=>p({type:null}),children:"Cancel"}),s.jsx(le,{onClick:I,disabled:!x.name.trim(),children:"Save"})]})]})})]})};var OE="AlertDialog",[S5,DV]=Br(OE,[C1]),Js=C1(),DE=e=>{const{__scopeAlertDialog:t,...r}=e,n=Js(t);return s.jsx(iv,{...n,...r,modal:!0})};DE.displayName=OE;var C5="AlertDialogTrigger",E5=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Js(r);return s.jsx(B1,{...a,...n,ref:t})});E5.displayName=C5;var k5="AlertDialogPortal",ME=e=>{const{__scopeAlertDialog:t,...r}=e,n=Js(t);return s.jsx(ov,{...n,...r})};ME.displayName=k5;var P5="AlertDialogOverlay",LE=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Js(r);return s.jsx(rh,{...a,...n,ref:t})});LE.displayName=P5;var Oo="AlertDialogContent",[T5,A5]=S5(Oo),I5=m_("AlertDialogContent"),FE=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Js(r),o=h.useRef(null),l=Ke(t,o),c=h.useRef(null);return s.jsx(xq,{contentName:Oo,titleName:$E,docsSlug:"alert-dialog",children:s.jsx(T5,{scope:r,cancelRef:c,children:s.jsxs(nh,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:je(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(I5,{children:n}),s.jsx(O5,{contentRef:o})]})})})});FE.displayName=Oo;var $E="AlertDialogTitle",qE=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Js(r);return s.jsx(lv,{...a,...n,ref:t})});qE.displayName=$E;var UE="AlertDialogDescription",BE=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Js(r);return s.jsx(cv,{...a,...n,ref:t})});BE.displayName=UE;var R5="AlertDialogAction",VE=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Js(r);return s.jsx(dv,{...a,...n,ref:t})});VE.displayName=R5;var zE="AlertDialogCancel",WE=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=A5(zE,r),i=Js(r),o=Ke(t,a);return s.jsx(dv,{...i,...n,ref:o})});WE.displayName=zE;var O5=({contentRef:e})=>{const t=`\`${Oo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Oo}\` by passing a \`${UE}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Oo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return h.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},D5=DE,M5=ME,HE=LE,QE=FE,KE=VE,GE=WE,YE=qE,XE=BE;const L5=D5,F5=M5,JE=h.forwardRef(({className:e,...t},r)=>s.jsx(HE,{className:Ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));JE.displayName=HE.displayName;const ZE=h.forwardRef(({className:e,...t},r)=>s.jsxs(F5,{children:[s.jsx(JE,{}),s.jsx(QE,{ref:r,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));ZE.displayName=QE.displayName;const ek=({className:e,...t})=>s.jsx("div",{className:Ee("flex flex-col space-y-2 text-center sm:text-left",e),...t});ek.displayName="AlertDialogHeader";const tk=({className:e,...t})=>s.jsx("div",{className:Ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});tk.displayName="AlertDialogFooter";const rk=h.forwardRef(({className:e,...t},r)=>s.jsx(YE,{ref:r,className:Ee("text-lg font-semibold",e),...t}));rk.displayName=YE.displayName;const nk=h.forwardRef(({className:e,...t},r)=>s.jsx(XE,{ref:r,className:Ee("text-sm text-muted-foreground",e),...t}));nk.displayName=XE.displayName;const sk=h.forwardRef(({className:e,...t},r)=>s.jsx(KE,{ref:r,className:Ee(Ky(),e),...t}));sk.displayName=KE.displayName;const ak=h.forwardRef(({className:e,...t},r)=>s.jsx(GE,{ref:r,className:Ee(Ky({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));ak.displayName=GE.displayName;function ns(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ui(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const ik=6048e5,$5=864e5;let q5={};function ch(){return q5}function Dc(e,t){var l,c,d,u;const r=ch(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=ns(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function rf(e){return Dc(e,{weekStartsOn:1})}function ok(e){const t=ns(e),r=t.getFullYear(),n=Ui(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=rf(n),i=Ui(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=rf(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function b0(e){const t=ns(e);return t.setHours(0,0,0,0),t}function w0(e){const t=ns(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function U5(e,t){const r=b0(e),n=b0(t),a=+r-w0(r),i=+n-w0(n);return Math.round((a-i)/$5)}function B5(e){const t=ok(e),r=Ui(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),rf(r)}function V5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function z5(e){if(!V5(e)&&typeof e!="number")return!1;const t=ns(e);return!isNaN(Number(t))}function W5(e){const t=ns(e),r=Ui(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const H5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Q5=(e,t,r)=>{let n;const a=H5[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function xm(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const K5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},G5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Y5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},X5={date:xm({formats:K5,defaultWidth:"full"}),time:xm({formats:G5,defaultWidth:"full"}),dateTime:xm({formats:Y5,defaultWidth:"full"})},J5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Z5=(e,t,r,n)=>J5[e];function Ol(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const eU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},aU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},iU=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},oU={ordinalNumber:iU,era:Ol({values:eU,defaultWidth:"wide"}),quarter:Ol({values:tU,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ol({values:rU,defaultWidth:"wide"}),day:Ol({values:nU,defaultWidth:"wide"}),dayPeriod:Ol({values:sU,defaultWidth:"wide",formattingValues:aU,defaultFormattingWidth:"wide"})};function Dl(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?cU(l,f=>f.test(o)):lU(l,f=>f.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function lU(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function cU(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function dU(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const uU=/^(\d+)(th|st|nd|rd)?/i,fU=/\d+/i,hU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mU={any:[/^b/i,/^(a|c)/i]},pU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gU={any:[/1/i,/2/i,/3/i,/4/i]},yU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},bU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},jU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_U={ordinalNumber:dU({matchPattern:uU,parsePattern:fU,valueCallback:e=>parseInt(e,10)}),era:Dl({matchPatterns:hU,defaultMatchWidth:"wide",parsePatterns:mU,defaultParseWidth:"any"}),quarter:Dl({matchPatterns:pU,defaultMatchWidth:"wide",parsePatterns:gU,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Dl({matchPatterns:yU,defaultMatchWidth:"wide",parsePatterns:vU,defaultParseWidth:"any"}),day:Dl({matchPatterns:xU,defaultMatchWidth:"wide",parsePatterns:bU,defaultParseWidth:"any"}),dayPeriod:Dl({matchPatterns:wU,defaultMatchWidth:"any",parsePatterns:jU,defaultParseWidth:"any"})},NU={code:"en-US",formatDistance:Q5,formatLong:X5,formatRelative:Z5,localize:oU,match:_U,options:{weekStartsOn:0,firstWeekContainsDate:1}};function SU(e){const t=ns(e);return U5(t,W5(t))+1}function CU(e){const t=ns(e),r=+rf(t)-+B5(t);return Math.round(r/ik)+1}function lk(e,t){var u,f,m,p;const r=ns(e),n=r.getFullYear(),a=ch(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(m=a.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=Ui(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Dc(o,t),c=Ui(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=Dc(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function EU(e,t){var l,c,d,u;const r=ch(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=lk(e,t),i=Ui(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Dc(i,t)}function kU(e,t){const r=ns(e),n=+Dc(r,t)-+EU(r,t);return Math.round(n/ik)+1}function vt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const na={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return vt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):vt(r+1,2)},d(e,t){return vt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return vt(e.getHours()%12||12,t.length)},H(e,t){return vt(e.getHours(),t.length)},m(e,t){return vt(e.getMinutes(),t.length)},s(e,t){return vt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return vt(a,t.length)}},ao={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},j0={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return na.y(e,t)},Y:function(e,t,r,n){const a=lk(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return vt(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):vt(i,t.length)},R:function(e,t){const r=ok(e);return vt(r,t.length)},u:function(e,t){const r=e.getFullYear();return vt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return vt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return vt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return na.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return vt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=kU(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):vt(a,t.length)},I:function(e,t,r){const n=CU(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):vt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):na.d(e,t)},D:function(e,t,r){const n=SU(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):vt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return vt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return vt(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return vt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=ao.noon:n===0?a=ao.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=ao.evening:n>=12?a=ao.afternoon:n>=4?a=ao.morning:a=ao.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return na.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):na.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):vt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):vt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):na.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):na.s(e,t)},S:function(e,t){return na.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return N0(n);case"XXXX":case"XX":return oi(n);case"XXXXX":case"XXX":default:return oi(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return N0(n);case"xxxx":case"xx":return oi(n);case"xxxxx":case"xxx":default:return oi(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_0(n,":");case"OOOO":default:return"GMT"+oi(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_0(n,":");case"zzzz":default:return"GMT"+oi(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return vt(n,t.length)},T:function(e,t,r){const n=e.getTime();return vt(n,t.length)}};function _0(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+vt(i,2)}function N0(e,t){return e%60===0?(e>0?"-":"+")+vt(Math.abs(e)/60,2):oi(e,t)}function oi(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=vt(Math.trunc(n/60),2),i=vt(n%60,2);return r+a+t+i}const S0=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},ck=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},PU=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return S0(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",S0(n,t)).replace("{{time}}",ck(a,t))},TU={p:ck,P:PU},AU=/^D+$/,IU=/^Y+$/,RU=["D","DD","YY","YYYY"];function OU(e){return AU.test(e)}function DU(e){return IU.test(e)}function MU(e,t,r){const n=LU(e,t,r);if(console.warn(n),RU.includes(e))throw new RangeError(n)}function LU(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const FU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$U=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qU=/^'([^]*?)'?$/,UU=/''/g,BU=/[a-zA-Z]/;function hs(e,t,r){var u,f,m,p;const n=ch(),a=n.locale??NU,i=n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,l=ns(e);if(!z5(l))throw new RangeError("Invalid time value");let c=t.match($U).map(x=>{const g=x[0];if(g==="p"||g==="P"){const w=TU[g];return w(x,a.formatLong)}return x}).join("").match(FU).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const g=x[0];if(g==="'")return{isToken:!1,value:VU(x)};if(j0[g])return{isToken:!0,value:x};if(g.match(BU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:x}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(x=>{if(!x.isToken)return x.value;const g=x.value;(DU(g)||OU(g))&&MU(g,t,String(e));const w=j0[g[0]];return w(l,g,a.localize,d)}).join("")}function VU(e){const t=e.match(qU);return t?t[1].replace(UU,"'"):e}class zU{async createPropertyCardFromInventory(t){var c;const{data:r,error:n}=await H.from("inventory_items").select("*").eq("id",t.inventoryItemId).single();if(n||!r)throw new Error(`Inventory item not found: ${n==null?void 0:n.message}`);const a=(r.description||(r.model?`${r.brand?r.brand+" ":""}${r.model}`:r.brand)||"").trim(),i={entity_name:t.entityName,fund_cluster:t.fundCluster,semi_expendable_property:r.description||a,property_number:r.property_number,description:a,date_acquired:r.date_acquired,remarks:r.remarks};i.inventory_item_id=t.inventoryItemId;const{data:o,error:l}=await H.from("property_cards").insert(i).select().single();if(l)throw new Error(`Failed to create property card: ${l.message}`);return t.initialEntry&&await this.addPropertyCardEntry(o.id,{...t.initialEntry,reference:((c=t.initialEntry.reference)==null?void 0:c.trim())||"",issueItemNo:"",issueQty:0,officeOfficer:"",balanceQty:t.initialEntry.receiptQty,amount:t.initialEntry.totalCost},t.inventoryItemId),this.mapToAnnexPropertyCard(o)}async createCustodianSlip(t){var o;if(console.log("Creating custodian slip(s) with inventory items:",((o=t.inventoryItemIds)==null?void 0:o.length)||0),!t.inventoryItemIds||t.inventoryItemIds.length===0)throw new Error("No inventory items provided for the custodian slip");console.log("Validating inventory items and property cards...");const r=[];for(const l of t.inventoryItemIds){const{data:c,error:d}=await H.from("inventory_items").select("*").eq("id",l).single();if(d||!c)throw new Error(`Inventory item ${l} not found`);if(c.assignment_status==="Assigned"||c.custodian)throw new Error(`Inventory item ${c.property_number} is already assigned to ${c.custodian}`);if(c.condition!=="Serviceable")throw new Error(`Inventory item ${c.property_number} is not serviceable (${c.condition})`);console.log(`Processing inventory item: ${c.property_number} (${l})`),r.push(c)}console.log("All validations passed, grouping items by sub-category...");const n={};for(const l of r){const c=l.sub_category||"Unknown";n[c]||(n[c]=[]),n[c].push(l)}console.log(`Grouped items into ${Object.keys(n).length} sub-category(ies):`,Object.keys(n));const a=[],i=[];try{for(const l of Object.keys(n)){const c=n[l];console.log(`Creating slip for ${l} with ${c.length} item(s)`);const d=l==="Small Value Expendable"?"SPLV":"SPHV",{data:u,error:f}=await H.rpc("generate_ics_number",{sub_category_prefix:d});let m=u;if(f){console.error("Error generating ICS number:",f);const{data:j}=await H.rpc("generate_ics_number",{sub_category_prefix:null});console.log("Using fallback ICS number:",j),m=j||null}const p={slip_number:m||null,custodian_name:t.custodianName,designation:t.designation,office:t.office,date_issued:t.dateIssued,issued_by:t.issuedBy,received_by:t.receivedBy,slip_status:"Draft"};console.log("Inserting custodian slip:",p);const{data:x,error:g}=await H.from("custodian_slips").insert(p).select().single();if(g)throw console.error("Error creating custodian slip:",g),new Error(`Failed to create custodian slip: ${g.message}`);console.log("Custodian slip created successfully:",x.id);const w=[],v=[],y=[],b=[];try{for(const j of c){const _=j.quantity||1,S=j.unit_cost||0,E=_*S,D=(j.description||(j.model?`${j.brand?j.brand+" ":""}${j.model}`:j.brand)||"").trim(),U={slip_id:x.id,inventory_item_id:j.id,property_number:j.property_number,description:D,quantity:_,unit:j.unit_of_measure,unit_cost:S,total_cost:E,amount:E,date_issued:t.dateIssued},{data:F,error:L}=await H.from("custodian_slip_items").insert(U).select().single();if(L||!F)throw console.error(`Failed to create slip item for ${j.id}:`,L),new Error(`Failed to add ${j.property_number} to the custodian slip. ${(L==null?void 0:L.message)||""}`.trim());v.push(F.id);const{data:$,error:R}=await H.from("property_cards").select("*").eq("inventory_item_id",j.id).single();if(R||!$)throw console.warn(`Property card not found for inventory item ${j.id}`),new Error(`Property card not found for ${j.property_number}. Please create the property card first.`);const{data:I}=await H.from("property_card_entries").select("id").eq("property_card_id",$.id).limit(1);(!I||I.length===0)&&await this.addPropertyCardEntry($.id,{date:j.date_acquired,reference:"Initial Receipt",receiptQty:j.quantity,unitCost:Number(j.unit_cost||0),totalCost:Number(j.total_cost||(j.quantity||1)*Number(j.unit_cost||0)),issueItemNo:"",issueQty:0,officeOfficer:"",balanceQty:j.quantity,amount:Number(j.total_cost||0),remarks:"",relatedSlipId:void 0,relatedTransferId:void 0},j.id);let C=0;const{data:T}=await H.from("property_card_entries").select("balance_qty").eq("property_card_id",$.id).order("date",{ascending:!1}).limit(1).single();T&&typeof T.balance_qty=="number"&&(C=T.balance_qty);const re=j.quantity||1,K=Math.max(0,(C||0)-re),z=await this.addPropertyCardEntry($.id,{date:t.dateIssued,reference:`ICS ${x.slip_number||m||"PENDING"}`,receiptQty:0,unitCost:0,totalCost:0,issueItemNo:j.property_number||"",issueQty:re,officeOfficer:`${t.custodianName} (${t.designation})`,balanceQty:K,amount:0,remarks:`Issued via ICS ${x.slip_number||m||"PENDING"}`,relatedSlipId:x.id,relatedTransferId:void 0},j.id);b.push(z.id),await H.from("custodian_slip_items").update({property_card_entry_id:z.id}).eq("id",F.id);const{error:ae}=await H.from("inventory_items").update({custodian:t.custodianName,custodian_position:t.designation,assignment_status:"Assigned",assigned_date:t.dateIssued,ics_number:x.slip_number||m,ics_date:t.dateIssued,updated_at:new Date().toISOString()}).eq("id",j.id);if(ae)throw console.warn(`Failed to update inventory assignment for ${j.property_number}:`,ae),new Error(`Could not update inventory record for ${j.property_number}. ${ae.message}`);y.push(j.id),w.push(this.mapToAnnexCustodianSlipItem({...F,property_card_entry_id:z.id}))}}catch(j){throw console.error("Encountered error while processing slip items, rolling back slip:",j),await this.rollbackCustodianSlipCreation(x.id,v,b,y),j}if(console.log(`Created ${w.length} slip items for custodian slip ${x.id}`),w.length!==c.length)throw console.error(`Mismatch between requested items (${c.length}) and created slip items (${w.length}). Rolling back slip ${x.id}.`),await this.rollbackCustodianSlipCreation(x.id,v,b,y),new Error("Failed to add all selected items to the custodian slip. No changes were saved.");i.push({slipId:x.id,slipItemIds:[...v],propertyCardEntryIds:[...b],inventoryItemIds:[...y]}),a.push({...this.mapToAnnexCustodianSlip(x),items:w})}}catch(l){console.error("Custodian slip creation failed across categories. Rolling back previous slips.",l);for(const c of i.reverse())await this.rollbackCustodianSlipCreation(c.slipId,c.slipItemIds,c.propertyCardEntryIds,c.inventoryItemIds);throw l}return a.length===1?(console.log("Single slip created, returning as single object"),a[0]):(console.log(`${a.length} slips created (separated by sub-category)`),a)}async rollbackCustodianSlipCreation(t,r,n,a){try{n.length>0&&await H.from("property_card_entries").delete().in("id",n),r.length>0&&await H.from("custodian_slip_items").delete().in("id",r),a.length>0&&await H.from("inventory_items").update({custodian:null,custodian_position:null,assignment_status:"Available",assigned_date:null,ics_number:null,ics_date:null,updated_at:new Date().toISOString()}).in("id",a),await H.from("custodian_slips").delete().eq("id",t)}catch(i){console.error("Failed to fully roll back custodian slip creation:",i)}}async addPropertyCardEntry(t,r,n){let a=n;if(!a){const{data:c}=await H.from("property_cards").select("inventory_item_id").eq("id",t).single();c&&(a=c.inventory_item_id)}const i={property_card_id:t,date:r.date,reference:r.reference,receipt_qty:r.receiptQty,unit_cost:r.unitCost,total_cost:r.totalCost,issue_item_no:r.issueItemNo,issue_qty:r.issueQty,office_officer:r.officeOfficer,balance_qty:r.balanceQty,amount:r.amount,remarks:r.remarks,related_slip_id:r.relatedSlipId,related_transfer_id:r.relatedTransferId};a&&(i.inventory_item_id=a);const{data:o,error:l}=await H.from("property_card_entries").insert(i).select().single();if(l)throw new Error(`Failed to add property card entry: ${l.message}`);return this.mapToAnnexSPCEntry(o)}async findPropertyCardByInventoryItem(t){try{console.log(`Searching for property card with inventory_item_id: ${t}`);const{data:r,error:n}=await H.from("property_cards").select("*").eq("inventory_item_id",t).single();return console.log("Property card query result - data:",r,"error:",n),n?n.message.includes('column "inventory_item_id" does not exist')?(console.warn("inventory_item_id column not found in property_cards table. Please run the database migration."),null):(console.error("Error finding property card by inventory item:",n),null):r?(console.log("Found property card:",r),this.mapToAnnexPropertyCard(r)):(console.log("No property card found for inventory item:",t),null)}catch(r){return console.error("Unexpected error finding property card:",r),null}}async getPropertyCardWithEntries(t){const{data:r,error:n}=await H.from("property_cards").select("*").eq("id",t).single();if(n||!r)return null;const{data:a,error:i}=await H.from("property_card_entries").select("*").eq("property_card_id",t).order("date",{ascending:!0});return i?(console.error("Failed to fetch property card entries:",i),this.mapToAnnexPropertyCard(r)):{...this.mapToAnnexPropertyCard(r),entries:a.map(o=>this.mapToAnnexSPCEntry(o))}}async getCustodianSlipWithItems(t){const{data:r,error:n}=await H.from("custodian_slips").select("*").eq("id",t).single();if(n||!r)return null;const{data:a,error:i}=await H.from("custodian_slip_items").select("*").eq("slip_id",t).order("created_at",{ascending:!0});return i?(console.error("Failed to fetch custodian slip items:",i),this.mapToAnnexCustodianSlip(r)):{...this.mapToAnnexCustodianSlip(r),items:a.map(o=>this.mapToAnnexCustodianSlipItem(o))}}mapToAnnexPropertyCard(t){return{id:t.id,entityName:t.entity_name,fundCluster:t.fund_cluster,semiExpendableProperty:t.semi_expendable_property,propertyNumber:t.property_number,description:t.description,dateAcquired:t.date_acquired,remarks:t.remarks,inventoryItemId:t.inventory_item_id,entries:[],createdAt:t.created_at,updatedAt:t.updated_at}}mapToAnnexSPCEntry(t){return{id:t.id,propertyCardId:t.property_card_id,date:t.date,reference:t.reference,receiptQty:t.receipt_qty||0,unitCost:t.unit_cost||0,totalCost:t.total_cost||0,issueItemNo:t.issue_item_no||"",issueQty:t.issue_qty||0,officeOfficer:t.office_officer||"",balanceQty:t.balance_qty||0,amount:t.amount||0,remarks:t.remarks,relatedSlipId:t.related_slip_id,relatedTransferId:t.related_transfer_id,createdAt:t.created_at,updatedAt:t.updated_at}}mapToAnnexCustodianSlip(t){return{id:t.id,slipNumber:t.slip_number,custodianName:t.custodian_name,designation:t.designation,office:t.office,dateIssued:t.date_issued,issuedBy:t.issued_by,receivedBy:t.received_by,items:[],createdAt:t.created_at,updatedAt:t.updated_at}}mapToAnnexCustodianSlipItem(t){return{id:t.id,slipId:t.slip_id,inventoryItemId:t.inventory_item_id,propertyNumber:t.property_number,description:t.description,quantity:t.quantity,unit:t.unit,unitCost:t.unit_cost||0,totalCost:t.total_cost||0,amount:t.amount||0,itemNumber:t.item_number||"",estimatedUsefulLife:t.estimated_useful_life||"",dateIssued:t.date_issued,propertyCardEntryId:t.property_card_entry_id,createdAt:t.created_at,updatedAt:t.updated_at}}}const Do=new zU,WU=()=>{const[e,t]=h.useState(!1),[r,n]=h.useState(),[a,i]=h.useState(null),[o,l]=h.useState(!1),[c,d]=h.useState(""),[u,f]=h.useState(!1),[m,p]=h.useState(null),{toast:x}=Zn(),g=Xs(),[w]=n$(),v=ts();h.useEffect(()=>{const J=H.channel("realtime:inventory-page").on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},()=>{console.log("[Realtime] Inventory item changed, refreshing..."),g.invalidateQueries({queryKey:["inventory-items"]}),g.invalidateQueries({queryKey:["inventory-items-high-value"]}),g.invalidateQueries({queryKey:["inventory-items-low-value"]}),g.invalidateQueries({queryKey:["inventory-items-filtered"]}),g.refetchQueries({queryKey:["inventory-items-high-value"]}),g.refetchQueries({queryKey:["inventory-items-low-value"]}),g.refetchQueries({queryKey:["inventory-items-filtered"]})}).on("postgres_changes",{event:"*",schema:"public",table:"property_cards"},()=>{console.log("[Realtime] Property cards changed, refreshing inventory..."),g.invalidateQueries({queryKey:["inventory-items"]}),g.invalidateQueries({queryKey:["inventory-items-high-value"]}),g.invalidateQueries({queryKey:["inventory-items-low-value"]}),g.invalidateQueries({queryKey:["inventory-items-filtered"]}),g.refetchQueries({queryKey:["inventory-items-high-value"]}),g.refetchQueries({queryKey:["inventory-items-low-value"]}),g.refetchQueries({queryKey:["inventory-items-filtered"]})}).on("postgres_changes",{event:"*",schema:"public",table:"custodian_slip_items"},()=>{console.log("[Realtime] Custodian slip items changed, refreshing inventory..."),g.invalidateQueries({queryKey:["inventory-items"]}),g.invalidateQueries({queryKey:["inventory-items-high-value"]}),g.invalidateQueries({queryKey:["inventory-items-low-value"]}),g.invalidateQueries({queryKey:["inventory-items-filtered"]}),g.refetchQueries({queryKey:["inventory-items-high-value"]}),g.refetchQueries({queryKey:["inventory-items-low-value"]}),g.refetchQueries({queryKey:["inventory-items-filtered"]})}).subscribe();return()=>{H.removeChannel(J)}},[g]);const y=w.get("filter"),b=w.get("valueFilter"),j=J=>{const Ne=new URLSearchParams;J!=="all"&&Ne.set("filter",J),b&&Ne.set("valueFilter",b),v(`/inventory${Ne.toString()?"?"+Ne.toString():""}`)},_=J=>{const Ne=new URLSearchParams;y&&Ne.set("filter",y),J!=="all"&&Ne.set("valueFilter",J),v(`/inventory${Ne.toString()?"?"+Ne.toString():""}`)},{data:S=[],isLoading:E,isFetching:D,error:U}=rr({queryKey:["inventory-items-high-value",c,y],queryFn:async()=>{console.log("Fetching high value items, searchTerm:",c,"filter:",y);const J=c.trim()?await Kr.search(c,{filter:y,valueFilter:"high-value"}):await Kr.getAll({filter:y,valueFilter:"high-value"});return console.log("High value inventory response:",J),J.success?J.data:[]},staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchInterval:!1,retry:(J,Ne)=>navigator.onLine?J<2:!1}),{data:F=[],isLoading:L,isFetching:$,error:R}=rr({queryKey:["inventory-items-low-value",c,y],queryFn:async()=>{console.log("Fetching low value items, searchTerm:",c,"filter:",y);const J=c.trim()?await Kr.search(c,{filter:y,valueFilter:"low-value"}):await Kr.getAll({filter:y,valueFilter:"low-value"});return console.log("Low value inventory response:",J),J.success?J.data:[]},staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchInterval:!1,retry:(J,Ne)=>navigator.onLine?J<2:!1}),{data:I=[],isLoading:C,isFetching:T,error:re}=rr({queryKey:["inventory-items-filtered",c,y,b],queryFn:async()=>{console.log("Fetching filtered inventory items, searchTerm:",c,"filter:",y,"valueFilter:",b);const J=c.trim()?await Kr.search(c,{filter:y,valueFilter:b}):await Kr.getAll({filter:y,valueFilter:b});return console.log("Filtered inventory response:",J),J.success?J.data:[]},staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchInterval:!1,retry:(J,Ne)=>navigator.onLine?J<2:!1,enabled:!!b}),K=b?I:[],z=b?C:!1,ae=b?T:D||$,ge=b?re:null,W=$s({mutationFn:async({item:J,autoCreatePropertyCard:Ne})=>{const Ye=await Kr.create(J);if(!Ye.success||!Ye.data)throw new Error(Ye.error||"Failed to create inventory item");const Me=Ye.data;if(console.log("[Inventory] Checking auto-create:",{autoCreatePropertyCard:Ne,hasId:!!Me.id}),Ne&&Me.id){console.log("[Inventory] Auto-create enabled, creating property card...");try{let dt="General Fund";if(J.fundSource){console.log("[Inventory] Fetching fund source:",J.fundSource);const V=(await Gr.getFundSources()).find(se=>se.id===J.fundSource);V&&(dt=V.name,console.log("[Inventory] Found fund source:",dt))}console.log("[Inventory] Creating property card with:",{inventoryItemId:Me.id,entityName:J.entityName||"PROVINCIAL GOVERNMENT OF APAYAO",fundCluster:dt,propertyNumber:Me.propertyNumber});const N=await Do.createPropertyCardFromInventory({inventoryItemId:Me.id,entityName:J.entityName||"PROVINCIAL GOVERNMENT OF APAYAO",fundCluster:dt,initialEntry:{date:Me.dateAcquired||new Date().toISOString().split("T")[0],reference:"Initial Receipt",receiptQty:Me.quantity||1,unitCost:Me.unitCost||0,totalCost:Me.totalCost||(Me.quantity||1)*(Me.unitCost||0)}});return console.log("[Inventory]  Property card created successfully:",{id:N.id,propertyNumber:N.propertyNumber}),{data:Me,propertyCardCreated:!0,propertyCardId:N.id,success:!0,error:null}}catch(dt){console.error("[Inventory]  Error auto-creating property card:",dt);const N=dt instanceof Error?dt.message:String(dt);return console.error("[Inventory] Error details:",{message:N,stack:dt instanceof Error?dt.stack:void 0}),{data:Me,propertyCardCreated:!1,propertyCardError:N,success:!0,error:null}}}return console.log("[Inventory] Auto-create not enabled or no item ID"),{data:Me,propertyCardCreated:!1,success:!0,error:null}},onSuccess:async J=>{if(await Promise.all([g.invalidateQueries({queryKey:["inventory-items"]}),g.invalidateQueries({queryKey:["inventory-items-high-value"]}),g.invalidateQueries({queryKey:["inventory-items-low-value"]}),g.invalidateQueries({queryKey:["inventory-items-filtered"]}),g.invalidateQueries({queryKey:["available-inventory-for-slips"]}),g.invalidateQueries({queryKey:["dashboard-stats"]}),g.invalidateQueries({queryKey:["annex-property-cards"]}),g.invalidateQueries({queryKey:["available-inventory-for-cards"]}),g.invalidateQueries({queryKey:["inventory-items-for-property-cards"]})]),await Promise.all([g.refetchQueries({queryKey:["inventory-items-high-value"]}),g.refetchQueries({queryKey:["inventory-items-low-value"]}),g.refetchQueries({queryKey:["inventory-items-filtered"]}),g.refetchQueries({queryKey:["annex-property-cards"]}),g.refetchQueries({queryKey:["dashboard-stats"]})]),!J.data)return;const Ne=J.data;J.propertyCardCreated?(console.log("Property card was created successfully, showing success message"),x({title:"Inventory Item & Property Card Created Successfully",description:`Item ${Ne.propertyNumber} has been added and a property card was automatically created. You can now assign this item to a custodian.`,action:s.jsx(le,{variant:"outline",size:"sm",onClick:()=>v("/property-cards"),children:"View Property Cards"})})):J.propertyCardError?x({title:"Inventory Item Created",description:`Item ${Ne.propertyNumber} was created, but property card creation failed: ${J.propertyCardError}. You can create it manually.`,variant:"destructive",action:s.jsx(le,{variant:"outline",size:"sm",onClick:()=>v("/property-cards",{state:{prefillItem:{propertyNumber:Ne.propertyNumber,description:Ne.description}}}),children:"Create Property Card"})}):x({title:"Inventory Item Created Successfully",description:`Item ${Ne.propertyNumber} has been added. To assign this item to a custodian, you'll need to create a property card first.`,action:s.jsx(le,{variant:"outline",size:"sm",onClick:()=>v("/property-cards",{state:{prefillItem:{propertyNumber:Ne.propertyNumber,description:Ne.description}}}),children:"Create Property Card"})})},onError:()=>{x({title:"Error",description:"Failed to create inventory item",variant:"destructive"})}}),M=$s({mutationFn:({id:J,updates:Ne})=>Kr.update(J,Ne),onSuccess:async()=>{await Promise.all([g.invalidateQueries({queryKey:["inventory-items"]}),g.invalidateQueries({queryKey:["inventory-items-high-value"]}),g.invalidateQueries({queryKey:["inventory-items-low-value"]}),g.invalidateQueries({queryKey:["inventory-items-filtered"]}),g.invalidateQueries({queryKey:["available-inventory-for-slips"]}),g.invalidateQueries({queryKey:["dashboard-stats"]}),g.invalidateQueries({queryKey:["annex-property-cards"]})]),await Promise.all([g.refetchQueries({queryKey:["inventory-items-high-value"]}),g.refetchQueries({queryKey:["inventory-items-low-value"]}),g.refetchQueries({queryKey:["inventory-items-filtered"]}),g.refetchQueries({queryKey:["dashboard-stats"]})]),x({title:"Success",description:"Inventory item updated successfully"})},onError:()=>{x({title:"Error",description:"Failed to update inventory item",variant:"destructive"})}}),Y=$s({mutationFn:J=>Kr.delete(J),onSuccess:async()=>{await Promise.all([g.invalidateQueries({queryKey:["inventory-items"]}),g.invalidateQueries({queryKey:["inventory-items-high-value"]}),g.invalidateQueries({queryKey:["inventory-items-low-value"]}),g.invalidateQueries({queryKey:["inventory-items-filtered"]}),g.invalidateQueries({queryKey:["available-inventory-for-slips"]}),g.invalidateQueries({queryKey:["annex-property-cards"]}),g.invalidateQueries({queryKey:["property-cards"]}),g.invalidateQueries({queryKey:["dashboard-stats"]})]),await Promise.all([g.refetchQueries({queryKey:["inventory-items-high-value"]}),g.refetchQueries({queryKey:["inventory-items-low-value"]}),g.refetchQueries({queryKey:["inventory-items-filtered"]}),g.refetchQueries({queryKey:["dashboard-stats"]})]),x({title:"Success",description:"Inventory item deleted successfully"})},onError:J=>{const Ne=(J==null?void 0:J.message)||(J==null?void 0:J.error)||"Failed to delete inventory item";x({title:"Cannot Delete Item",description:Ne,variant:"destructive"})}}),X=async(J,Ne)=>{console.log("[Inventory] handleSave called",{isEditing:!!r,autoCreatePropertyCard:Ne,propertyNumber:J.propertyNumber});try{r?await M.mutateAsync({id:J.id,updates:J}):(console.log("[Inventory] Creating new item with autoCreatePropertyCard:",Ne),await W.mutateAsync({item:J,autoCreatePropertyCard:Ne})),t(!1),n(void 0)}catch(Ye){console.error("[Inventory] Error in handleSave:",Ye)}},ie=J=>{i(J),l(!0)},ne=J=>{n(J),t(!0)},O=J=>{if(J.assignmentStatus==="Assigned"||J.custodian&&J.custodian.trim()!==""){x({title:"Cannot Delete Item",description:`This item cannot be deleted because it is currently assigned to ${J.custodian||"a custodian"}. Please unassign the item from the custodian first before deleting.`,variant:"destructive"});return}p(J),f(!0)},ee=J=>J.assignmentStatus==="Assigned"||J.custodian&&J.custodian.trim()!=="",de=async()=>{if(m)try{await Y.mutateAsync(m.id),f(!1),p(null)}catch{}},ce=(()=>{let J;return Ne=>{clearTimeout(J),J=setTimeout(()=>{d(Ne)},300)}})(),me=J=>{switch(J){case"Serviceable":return"bg-green-100 text-green-800";case"For Repair":return"bg-yellow-100 text-yellow-800";case"Unserviceable":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},He=J=>{switch(J){case"Active":return"bg-green-100 text-green-800";case"Transferred":return"bg-blue-100 text-blue-800";case"Disposed":return"bg-gray-100 text-gray-800";case"Missing":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ut=J=>J.condition!=="Serviceable"?{status:"Unavailable",reason:`Condition: ${J.condition}`,color:"bg-red-100 text-red-800"}:J.status!=="Active"?{status:"Unavailable",reason:`Status: ${J.status}`,color:"bg-gray-100 text-gray-800"}:J.assignmentStatus==="Assigned"?{status:"Assigned",reason:"Assigned via custodian slip",color:"bg-blue-100 text-blue-800"}:{status:"Available",reason:"Ready for assignment",color:"bg-green-100 text-green-800"};if(e)return s.jsx(N5,{item:r,onSave:X,onCancel:()=>{t(!1),n(void 0)},isSaving:W.isPending||M.isPending});if((z||E||L)&&K.length===0&&S.length===0&&F.length===0)return s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Gt,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading inventory..."})]});if((ge||U||R)&&navigator.onLine){const J=ge instanceof Error?ge.message:U instanceof Error?U.message:R instanceof Error?R.message:String(ge||U||R||"Unknown error");return s.jsxs("div",{className:"text-center py-8",children:[s.jsxs(Dr,{className:"max-w-md mx-auto",children:[s.jsx(qa,{className:"h-4 w-4"}),s.jsxs(Mr,{children:["Error: ",J]})]}),s.jsx(le,{onClick:()=>window.location.reload(),className:"mt-4",children:"Retry"})]})}return ge&&!navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs(Dr,{className:"max-w-md mx-auto",children:[s.jsx(qa,{className:"h-4 w-4"}),s.jsx(Mr,{children:"You're offline. Some features may not work until your connection is restored."})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-muted-foreground",children:"Previously loaded inventory data will appear when available."})})]}):s.jsxs("div",{className:"space-y-6 relative",children:[ae&&!z&&s.jsx("div",{className:"absolute inset-0 bg-background/50 backdrop-blur-sm z-40 flex items-center justify-center pointer-events-none",children:s.jsxs("div",{className:"flex flex-col items-center gap-2 bg-background border rounded-lg shadow-lg p-4",children:[s.jsx(Gt,{className:"h-6 w-6 animate-spin text-primary"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Refreshing inventory..."})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(le,{variant:"outline",size:"sm",onClick:()=>v("/inventory"),className:"flex items-center space-x-2",disabled:W.isPending||M.isPending||Y.isPending,children:[s.jsx(U_,{className:"h-4 w-4"}),s.jsx("span",{children:y||b?"Clear Filters":"View All Items"})]}),s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:y==="issued"?"Issued Items":y==="available"?"Available Items":"Inventory Management"})]}),s.jsxs(le,{onClick:()=>t(!0),className:"bg-primary hover:bg-primary-dark",disabled:W.isPending||M.isPending||Y.isPending,children:[s.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Add New Item"]})]}),(y||b)&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[y==="issued"&&b==="high-value"&&"Showing high value items (above 5,000) that have been issued to custodians",y==="issued"&&b==="low-value"&&"Showing low value items (5,000 or less) that have been issued to custodians",y==="available"&&b==="high-value"&&"Showing high value items (above 5,000) available for assignment",y==="available"&&b==="low-value"&&"Showing low value items (5,000 or less) available for assignment",y==="issued"&&!b&&"Showing only items that have been issued to custodians",y==="available"&&!b&&"Showing only items available for assignment",!y&&b==="high-value"&&"Showing only high value items (above 5,000)",!y&&b==="low-value"&&"Showing only low value items (5,000 or less)"]})]})}),(()=>{const J=(Ne,Ye)=>s.jsx("div",{className:"rounded-md border",children:s.jsxs(Lr,{children:[s.jsx(nn,{children:s.jsxs(ht,{children:[s.jsx(Se,{children:"Property Number"}),s.jsx(Se,{children:"Description"}),s.jsx(Se,{children:"Custodian"}),s.jsx(Se,{children:"Condition"}),s.jsx(Se,{children:"Status"}),s.jsx(Se,{children:"Availability"}),s.jsx(Se,{children:"Total Cost"}),s.jsx(Se,{children:"Actions"})]})}),s.jsx(sn,{children:Ye?s.jsx(ht,{children:s.jsx(xe,{colSpan:8,className:"text-center py-8",children:s.jsx(Gt,{className:"h-6 w-6 animate-spin mx-auto"})})}):Ne.map(Me=>s.jsxs(ht,{children:[s.jsx(xe,{className:"font-medium",children:Me.propertyNumber}),s.jsxs(xe,{className:"max-w-xs",children:[s.jsx("div",{className:"truncate",title:Me.description,children:Me.description}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[Me.brand," ",Me.model]})]}),s.jsxs(xe,{children:[s.jsx("div",{children:Me.custodian||"-"}),Me.custodianPosition&&s.jsx("div",{className:"text-xs text-muted-foreground",children:Me.custodianPosition})]}),s.jsx(xe,{children:s.jsx(it,{className:me(Me.condition),children:Me.condition})}),s.jsx(xe,{children:s.jsx(it,{className:He(Me.status),children:Me.status})}),s.jsx(xe,{children:s.jsxs("div",{className:"flex flex-col gap-1",children:[(()=>{const dt=ut(Me);return s.jsx(it,{className:dt.color,title:dt.reason,children:dt.status})})(),Me.hasPropertyCard===!1&&s.jsx(it,{variant:"outline",className:"text-xs text-amber-600 border-amber-300 bg-amber-50",children:" No Property Card"})]})}),s.jsxs(xe,{children:["",Me.totalCost.toLocaleString()]}),s.jsx(xe,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(le,{variant:"ghost",size:"sm",onClick:()=>ie(Me),title:"View Details",disabled:W.isPending||M.isPending||Y.isPending,children:s.jsx(Kc,{className:"h-4 w-4"})}),s.jsx(le,{variant:"ghost",size:"sm",onClick:()=>ne(Me),title:"Edit",disabled:W.isPending||M.isPending||Y.isPending,children:s.jsx(nb,{className:"h-4 w-4"})}),s.jsx(le,{variant:"ghost",size:"sm",onClick:()=>O(Me),title:ee(Me)?"Cannot delete: Item is assigned to a custodian":"Delete",className:"text-destructive hover:text-destructive",disabled:Y.isPending||W.isPending||M.isPending||ee(Me),children:Y.isPending&&(m==null?void 0:m.id)===Me.id?s.jsx(Gt,{className:"h-4 w-4 animate-spin"}):s.jsx(Sc,{className:"h-4 w-4"})})]})})]},Me.id))})]})});return b?s.jsxs(Te,{children:[s.jsxs(ze,{children:[s.jsx(et,{children:y==="issued"?"Issued Semi-Expendable Property Items":y==="available"?"Available Semi-Expendable Property Items":"Semi-Expendable Property Items"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Yn,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),s.jsx(ke,{placeholder:"Search by property number, description, or custodian...",value:c,onChange:Ne=>{d(Ne.target.value),ce(Ne.target.value)},className:"pl-10"})]}),s.jsxs(Dt,{value:y||"all",onValueChange:j,children:[s.jsx(kt,{className:"w-40",children:s.jsx(Mt,{placeholder:"Status..."})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"all",children:"All Items"}),s.jsx(we,{value:"available",children:"Available"}),s.jsx(we,{value:"issued",children:"Issued"})]})]}),s.jsxs(Dt,{value:b||"all",onValueChange:_,children:[s.jsx(kt,{className:"w-48",children:s.jsx(Mt,{placeholder:"Value Filter..."})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"all",children:"All Values"}),s.jsx(we,{value:"high-value",children:"High Value (>5,000)"}),s.jsx(we,{value:"low-value",children:"Low Value (5,000)"})]})]})]})]}),s.jsxs(Ae,{children:[J(K,z),K.length===0&&!z&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground",children:"No inventory items found."}),c&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search terms."})]})]})]}):s.jsxs(Te,{children:[s.jsxs(ze,{children:[s.jsx(et,{children:y==="issued"?"Issued Semi-Expendable Property Items":y==="available"?"Available Semi-Expendable Property Items":"Semi-Expendable Property Items"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Yn,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),s.jsx(ke,{placeholder:"Search by property number, description, or custodian...",value:c,onChange:Ne=>{d(Ne.target.value),ce(Ne.target.value)},className:"pl-10"})]}),s.jsxs(Dt,{value:y||"all",onValueChange:j,children:[s.jsx(kt,{className:"w-40",children:s.jsx(Mt,{placeholder:"Status..."})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"all",children:"All Items"}),s.jsx(we,{value:"available",children:"Available"}),s.jsx(we,{value:"issued",children:"Issued"})]})]})]})]}),s.jsx(Ae,{children:s.jsxs(ah,{defaultValue:"high-value",className:"w-full",children:[s.jsxs(id,{className:"grid w-full grid-cols-2",children:[s.jsxs(Cn,{value:"high-value",className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"High Value"}),s.jsx(it,{variant:"secondary",className:"ml-auto",children:E?"...":S.length})]}),s.jsxs(Cn,{value:"low-value",className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Low Value"}),s.jsx(it,{variant:"secondary",className:"ml-auto",children:L?"...":F.length})]})]}),s.jsxs(En,{value:"high-value",className:"mt-4",children:[s.jsx("div",{className:"mb-4 text-sm text-muted-foreground",children:"Items above 5,000 - High Value Expendable"}),J(S,E),S.length===0&&!E&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground",children:"No high value items found."}),c&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search terms."})]})]}),s.jsxs(En,{value:"low-value",className:"mt-4",children:[s.jsx("div",{className:"mb-4 text-sm text-muted-foreground",children:"Items 5,000 or less - Small Value Expendable"}),J(F,L),F.length===0&&!L&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground",children:"No low value items found."}),c&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search terms."})]})]})]})})]})})(),s.jsx(fn,{open:o,onOpenChange:l,children:s.jsxs(Zr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(pn,{children:[s.jsxs(gn,{className:"flex items-center gap-2",children:[s.jsx(un,{className:"h-5 w-5"}),"Inventory Item Details"]}),s.jsx(bs,{children:"Complete information about this inventory item"})]}),a&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{className:"text-lg",children:"Basic Information"})}),s.jsxs(Ae,{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Property Number"}),s.jsx("p",{className:"font-mono font-semibold",children:a.propertyNumber})]}),s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Description"}),s.jsx("p",{children:a.description})]}),a.semiExpandableCategory&&s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Semi-Expandable Category"}),s.jsx("p",{children:a.semiExpandableCategory})]}),a.subCategory&&s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Sub-Category"}),s.jsx(it,{variant:"outline",children:a.subCategory})]}),s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Status"}),s.jsx(it,{className:He(a.status),children:a.status})]}),s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),s.jsx(it,{className:me(a.condition),children:a.condition})]})]})]}),s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{className:"text-lg",children:"Item Details"})}),s.jsxs(Ae,{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Brand"}),s.jsx("p",{children:a.brand||"-"})]}),s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Model"}),s.jsx("p",{children:a.model||"-"})]}),s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Serial Number"}),s.jsx("p",{className:"font-mono",children:a.serialNumber||"-"})]}),s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Quantity"}),s.jsxs("p",{children:[a.quantity," ",a.unitOfMeasure]})]})]})]}),s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsxs(et,{className:"text-lg flex items-center gap-2",children:[s.jsx(du,{className:"h-5 w-5"}),"Financial Information"]})}),s.jsxs(Ae,{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Unit Cost"}),s.jsxs("p",{className:"font-semibold",children:["",a.unitCost.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Total Cost"}),s.jsxs("p",{className:"font-semibold text-lg",children:["",a.totalCost.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),a.dateAcquired&&s.jsxs("div",{children:[s.jsxs(he,{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(cu,{className:"h-3 w-3"}),"Date Acquired"]}),s.jsx("p",{children:hs(new Date(a.dateAcquired),"MMMM dd, yyyy")})]})]})]}),(a.custodian||a.assignmentStatus)&&s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsxs(et,{className:"text-lg flex items-center gap-2",children:[s.jsx(by,{className:"h-5 w-5"}),"Assignment Information"]})}),s.jsxs(Ae,{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Custodian"}),s.jsx("p",{children:a.custodian||"-"}),a.custodianPosition&&s.jsx("p",{className:"text-sm text-muted-foreground",children:a.custodianPosition})]}),s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Assignment Status"}),(()=>{const J=ut(a);return s.jsx(it,{className:J.color,children:J.status})})(),a.hasPropertyCard===!1&&s.jsx(it,{variant:"outline",className:"ml-2 text-xs text-amber-600 border-amber-300 bg-amber-50",children:" No Property Card"})]}),a.assignedDate&&s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Assigned Date"}),s.jsx("p",{children:hs(new Date(a.assignedDate),"MMMM dd, yyyy")})]})]})]}),(a.remarks||a.entityName||a.lastInventoryDate)&&s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{className:"text-lg",children:"Additional Information"})}),s.jsxs(Ae,{className:"space-y-4",children:[a.entityName&&s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Entity Name"}),s.jsx("p",{children:a.entityName})]}),a.lastInventoryDate&&s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Last Inventory Date"}),s.jsx("p",{children:hs(new Date(a.lastInventoryDate),"MMMM dd, yyyy")})]}),a.remarks&&s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Remarks"}),s.jsx("p",{className:"whitespace-pre-wrap",children:a.remarks})]})]})]}),s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{className:"text-lg",children:"System Information"})}),s.jsxs(Ae,{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Created At"}),s.jsx("p",{className:"text-sm",children:hs(new Date(a.createdAt),"MMMM dd, yyyy HH:mm")})]}),s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),s.jsx("p",{className:"text-sm",children:hs(new Date(a.updatedAt),"MMMM dd, yyyy HH:mm")})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(le,{variant:"outline",onClick:()=>l(!1),disabled:W.isPending||M.isPending||Y.isPending,children:"Close"}),s.jsxs(le,{onClick:()=>{l(!1),ne(a)},disabled:W.isPending||M.isPending||Y.isPending,children:[s.jsx(nb,{className:"h-4 w-4 mr-2"}),"Edit Item"]})]})]})]})}),s.jsx(L5,{open:u,onOpenChange:f,children:s.jsxs(ZE,{children:[s.jsxs(ek,{children:[s.jsx(rk,{children:"Are you sure?"}),s.jsx(nk,{children:m&&ee(m)?s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-destructive font-semibold",children:" This item cannot be deleted because it is currently under custody."}),s.jsxs("p",{children:["The item ",s.jsxs("span",{className:"font-semibold",children:['"',m.propertyNumber," - ",m.description,'"']})," is assigned to ",s.jsx("span",{className:"font-semibold",children:m.custodian||"a custodian"}),"."]}),s.jsx("p",{children:"Please unassign the item from the custodian first before deleting it."})]}):s.jsxs("p",{children:["This action cannot be undone. This will permanently delete the inventory item",m&&s.jsxs("span",{className:"font-semibold",children:[' "',m.propertyNumber," - ",m.description,'"']})," from the system."]})})]}),s.jsxs(tk,{children:[s.jsx(ak,{disabled:Y.isPending,children:"Cancel"}),m&&!ee(m)&&s.jsx(sk,{onClick:de,disabled:Y.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:Y.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Sc,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]})})]})},dk=({data:e})=>{const t=()=>{window.print()},r=pe.useMemo(()=>{let n=0,a=0;return(e.entries||[]).map(i=>{const o=Number(i.receiptQty||0),l=Number(i.issueQty||0),c=Number(i.totalCost||i.amount||0),d=0;return n=n+o-l,a=a+c-d,{...i,balanceQty:i.balanceQty!=null?i.balanceQty:n,amount:i.amount!=null?i.amount:i.totalCost!=null?i.totalCost:a}})},[e.entries]);return s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 print:hidden",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Semi-Expendable Property Card"}),s.jsxs(le,{onClick:t,className:"flex items-center gap-2",children:[s.jsx($r,{className:"h-4 w-4"}),"Print"]})]}),s.jsxs(Te,{className:"print:shadow-none print:border-2 print:border-black",children:[s.jsx(ze,{className:"border-b-2 border-black p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute right-0 top-0 text-[11px]",children:"Annex A.1"}),s.jsx("div",{className:"text-center",children:s.jsx("h1",{className:"text-base font-bold uppercase tracking-wide",children:"SEMI-EXPANDABLE PROPERTY CARD"})})]})}),s.jsxs(Ae,{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Entity Name :"}),s.jsx("div",{className:"flex-1 border-b border-black leading-4",children:e.entityName})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Fund Cluster:"}),s.jsx("div",{className:"flex-1 border-b border-black leading-4",children:e.fundCluster})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Semi-expendable Property:"}),s.jsx("div",{className:"flex-1 border-b border-black leading-4",children:e.semiExpendableProperty})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Semi-expendable Property Number:"}),s.jsx("div",{className:"flex-1 border-b border-black leading-4",children:e.propertyNumber})]})]}),s.jsx("div",{className:"text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Description :"}),s.jsx("div",{className:"flex-1 border-b border-black leading-4",children:e.description})]})}),s.jsx("div",{className:"border-2 border-black",children:s.jsxs("table",{className:"w-full text-[11px] border-collapse",children:[s.jsxs("thead",{children:[s.jsxs("tr",{className:"border-b-2 border-black",children:[s.jsx("th",{className:"border-r border-black p-1 text-center w-[8%]",children:"Date"}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[12%]",children:"Reference"}),s.jsx("th",{className:"border-r border-black p-1 text-center",colSpan:3,children:"Receipt"}),s.jsx("th",{className:"border-r border-black p-1 text-center",colSpan:3,children:"Issue/Transfer/Disposal"}),s.jsx("th",{className:"border-r border-black p-1 text-center",colSpan:2,children:"Balance"}),s.jsx("th",{className:"p-1 text-center w-[14%]",children:"Remarks"})]}),s.jsxs("tr",{className:"border-b border-black",children:[s.jsx("th",{className:"border-r border-black p-1"}),s.jsx("th",{className:"border-r border-black p-1"}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[6%]",children:"Qty."}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[10%]",children:"Unit Cost"}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[10%]",children:"Total Cost"}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[8%]",children:"Item No."}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[6%]",children:"Qty."}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[14%]",children:"Office/Officer"}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[6%]",children:"Qty."}),s.jsx("th",{className:"border-r border-black p-1 text-center w-[10%]",children:"Amount"}),s.jsx("th",{className:"p-1"})]})]}),s.jsxs("tbody",{children:[r.map((n,a)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.date}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.reference}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.receiptQty!=null?n.receiptQty:""}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.unitCost!=null?`${Number(n.unitCost).toFixed(2)}`:""}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.totalCost!=null?`${Number(n.totalCost).toFixed(2)}`:""}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.issueItemNo||""}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.issueQty!=null&&n.issueQty!==0?n.issueQty:""}),s.jsx("td",{className:"border-r border-black p-2 align-top",children:n.officeOfficer||""}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.balanceQty!=null?n.balanceQty:""}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.amount!=null?`${Number(n.amount).toFixed(2)}`:""}),s.jsx("td",{className:"p-2 align-top",children:n.remarks||""})]},a)),Array.from({length:Math.max(0,15-e.entries.length)}).map((n,a)=>s.jsx("tr",{className:"border-b border-gray-300",children:Array.from({length:11}).map((i,o)=>s.jsx("td",{className:`${o<10?"border-r border-black":""} p-3 h-8`,children:" "},o))},`empty-${a}`))]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-6 pt-4 border-t-2 border-black",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-[11px] font-semibold",children:"Property and/or Supply Custodian"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-[11px] font-semibold",children:"Accountable Officer"})]})]})]})]})]})};var _v="Progress",Nv=100,[HU,MV]=Br(_v),[QU,KU]=HU(_v),uk=h.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=GU,...o}=e;(a||a===0)&&!C0(a)&&console.error(YU(`${a}`,"Progress"));const l=C0(a)?a:Nv;n!==null&&!E0(n,l)&&console.error(XU(`${n}`,"Progress"));const c=E0(n,l)?n:null,d=nf(c)?i(c,l):void 0;return s.jsx(QU,{scope:r,value:c,max:l,children:s.jsx(Oe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":nf(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":mk(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});uk.displayName=_v;var fk="ProgressIndicator",hk=h.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=KU(fk,r);return s.jsx(Oe.div,{"data-state":mk(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});hk.displayName=fk;function GU(e,t){return`${Math.round(e/t*100)}%`}function mk(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function nf(e){return typeof e=="number"}function C0(e){return nf(e)&&!isNaN(e)&&e>0}function E0(e,t){return nf(e)&&!isNaN(e)&&e<=t&&e>=0}function YU(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Nv}\`.`}function XU(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Nv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var pk=uk,JU=hk;const pg=h.forwardRef(({className:e,value:t,...r},n)=>s.jsx(pk,{ref:n,className:Ee("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:s.jsx(JU,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));pg.displayName=pk.displayName;const bm=[{id:"general-fund",name:"General Fund",entityName:"PROVINCIAL GOVERNMENT OF APAYAO",fundCluster:"General Fund",description:"Standard property cards for general fund items",rules:{fundSource:"general"}},{id:"custom",name:"Custom Template",entityName:"",fundCluster:"",description:"Create a custom template",rules:{}}],ZU=({isOpen:e,onClose:t,onSuccess:r,inventoryItems:n})=>{const[a,i]=h.useState("selection"),[o,l]=h.useState([]),[c,d]=h.useState(null),[u,f]=h.useState(bm[2]),[m,p]=h.useState([]),[x,g]=h.useState(!1),[w,v]=h.useState(0);h.useEffect(()=>{e&&(i("selection"),l([]),d(null),p([]),g(!1),v(0))},[e]),h.useMemo(()=>n.filter(C=>o.includes(C.id)),[n,o]),h.useEffect(()=>{if(c&&o.length>0){const C=o.map(T=>(n.find(re=>re.id===T),{itemId:T,entityName:c.entityName,fundCluster:c.fundCluster,isOverridden:!1}));p(C)}},[c,o,n]);const y=async C=>{try{const{data:T}=await H.from("fund_sources").select("name").eq("id",C).single();return(T==null?void 0:T.name)||null}catch(T){return console.error("Error fetching fund source:",T),null}},b=async C=>{const T=n.find(z=>z.id===C);if(!T)return;let re=(c==null?void 0:c.entityName)||"",K=(c==null?void 0:c.fundCluster)||"";if(T.entityName&&(re=T.entityName),T.fundSource){const z=await y(T.fundSource);z&&(K=z)}return{entityName:re,fundCluster:K}},j=C=>{l(T=>T.includes(C)?T.filter(re=>re!==C):[...T,C])},_=C=>{const T=bm.find(re=>re.id===C);d(T||null)},S=(C,T)=>{f(re=>({...re,[C]:T}))},E=(C,T,re)=>{p(K=>K.map(z=>z.itemId===C?{...z,[T]:re,isOverridden:!0}:z))},D=async()=>{const C=await Promise.all(o.map(async T=>{const re=await b(T);return{itemId:T,entityName:(re==null?void 0:re.entityName)||(c==null?void 0:c.entityName)||"",fundCluster:(re==null?void 0:re.fundCluster)||(c==null?void 0:c.fundCluster)||"",isOverridden:!1}}));p(C)},U=async()=>{g(!0),v(0);try{for(let C=0;C<m.length;C++){const T=m[C],re=n.find(ae=>ae.id===T.itemId);if(!re)continue;const K=re.description||(re.model?`${re.brand?re.brand+" ":""}${re.model}`:re.brand)||"",{error:z}=await H.from("property_cards").insert({entity_name:T.entityName,fund_cluster:T.fundCluster,semi_expendable_property:K,property_number:re.propertyNumber,description:K,date_acquired:re.dateAcquired,remarks:re.remarks,inventory_item_id:re.id});z?console.error(`Error creating property card for ${re.propertyNumber}:`,z):v(C+1)}r(),t()}catch(C){console.error("Error creating property cards:",C)}finally{g(!1)}},F=()=>{const C=["selection","template","configuration","overrides","preview","processing"],T=C.indexOf(a);T<C.length-1&&i(C[T+1])},L=()=>{const C=["selection","template","configuration","overrides","preview","processing"],T=C.indexOf(a);T>0&&i(C[T-1])},$=()=>{switch(a){case"selection":return o.length>0;case"template":return c!==null;case"configuration":return!0;case"overrides":return!0;case"preview":return!0;default:return!1}},R=()=>{switch(a){case"selection":return"Select Inventory Items";case"template":return"Choose Template";case"configuration":return"Configure Common Settings";case"overrides":return"Customize Individual Items";case"preview":return"Preview & Confirm";case"processing":return"Creating Property Cards";default:return""}},I=()=>{switch(a){case"selection":return s.jsx(Ci,{className:"h-5 w-5"});case"template":return s.jsx(Hn,{className:"h-5 w-5"});case"configuration":return s.jsx(wp,{className:"h-5 w-5"});case"overrides":return s.jsx(wp,{className:"h-5 w-5"});case"preview":return s.jsx(Kc,{className:"h-5 w-5"});case"processing":return s.jsx(Ra,{className:"h-5 w-5"});default:return null}};return s.jsx(fn,{open:e,onOpenChange:t,children:s.jsxs(Zr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(pn,{children:s.jsxs(gn,{className:"flex items-center gap-2",children:[I(),"Bulk Create Property Cards - ",R()]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Step ",["selection","template","configuration","overrides","preview","processing"].indexOf(a)+1," of 6"]}),s.jsxs("span",{children:[o.length," items selected"]})]}),s.jsx(pg,{value:(["selection","template","configuration","overrides","preview","processing"].indexOf(a)+1)*16.67,className:"h-2"})]}),s.jsxs("div",{className:"space-y-6",children:[a==="selection"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(Dr,{children:s.jsx(Mr,{children:"Select the inventory items you want to create property cards for. You can select multiple items at once."})}),s.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto",children:n.map(C=>{const T=C.description||(C.model?`${C.brand?C.brand+" ":""}${C.model}`:C.brand)||"";return s.jsxs("div",{className:"flex items-center space-x-2 p-2 border rounded",children:[s.jsx(cd,{id:C.id,checked:o.includes(C.id),onCheckedChange:()=>j(C.id)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(he,{htmlFor:C.id,className:"font-medium",children:[C.propertyNumber," - ",T]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[C.category,"  ",C.condition,"  ",C.fundSource?"Has Fund Source":"No Fund Source"]})]})]},C.id)})})]}),a==="template"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(Dr,{children:s.jsx(Mr,{children:"Choose a template to apply common settings to all selected items. You can customize individual items later."})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:bm.map(C=>s.jsxs(Te,{className:`cursor-pointer transition-colors ${(c==null?void 0:c.id)===C.id?"ring-2 ring-primary":""}`,onClick:()=>_(C.id),children:[s.jsxs(ze,{children:[s.jsx(et,{className:"text-lg",children:C.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:C.description})]}),s.jsx(Ae,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Entity:"})," ",C.entityName||"Custom"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Fund Cluster:"})," ",C.fundCluster||"Custom"]})]})})]},C.id))}),(c==null?void 0:c.id)==="custom"&&s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{children:"Custom Template"})}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(he,{htmlFor:"customEntityName",children:"Entity Name"}),s.jsx(ke,{id:"customEntityName",value:u.entityName,onChange:C=>S("entityName",C.target.value),placeholder:"Enter entity name"})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"customFundCluster",children:"Fund Cluster"}),s.jsx(ke,{id:"customFundCluster",value:u.fundCluster,onChange:C=>S("fundCluster",C.target.value),placeholder:"Enter fund cluster"})]})]})]})]}),a==="configuration"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(Dr,{children:s.jsx(Mr,{children:"Configure common settings that will be applied to all selected items. You can customize individual items in the next step."})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{htmlFor:"commonEntityName",children:"Entity Name"}),s.jsx(ke,{id:"commonEntityName",value:(c==null?void 0:c.entityName)||"",onChange:C=>{const T={...c,entityName:C.target.value};d(T)},placeholder:"Enter entity name"})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"commonFundCluster",children:"Fund Cluster"}),s.jsx(ke,{id:"commonFundCluster",value:(c==null?void 0:c.fundCluster)||"",onChange:C=>{const T={...c,fundCluster:C.target.value};d(T)},placeholder:"Enter fund cluster"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(le,{onClick:D,variant:"outline",children:"Auto-Assign from Inventory Data"}),s.jsx(le,{onClick:()=>{p(C=>C.map(T=>({...T,entityName:(c==null?void 0:c.entityName)||"",fundCluster:(c==null?void 0:c.fundCluster)||"",isOverridden:!1})))},variant:"outline",children:"Apply Template to All Items"})]})]}),a==="overrides"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(Dr,{children:s.jsx(Mr,{children:"Review and customize individual items. Items marked with overrides will use their custom values instead of the template."})}),s.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:m.map(C=>{const T=n.find(K=>K.id===C.itemId),re=(T==null?void 0:T.description)||(T!=null&&T.model?`${T!=null&&T.brand?T.brand+" ":""}${T.model}`:T==null?void 0:T.brand)||"";return s.jsx(Te,{className:C.isOverridden?"ring-2 ring-orange-200":"",children:s.jsxs(Ae,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium",children:[T==null?void 0:T.propertyNumber," - ",re]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:T==null?void 0:T.category})]}),C.isOverridden&&s.jsx(it,{variant:"secondary",children:"Customized"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{htmlFor:`entity-${C.itemId}`,children:"Entity Name"}),s.jsx(ke,{id:`entity-${C.itemId}`,value:C.entityName,onChange:K=>E(C.itemId,"entityName",K.target.value),placeholder:"Enter entity name"})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:`fund-${C.itemId}`,children:"Fund Cluster"}),s.jsx(ke,{id:`fund-${C.itemId}`,value:C.fundCluster,onChange:K=>E(C.itemId,"fundCluster",K.target.value),placeholder:"Enter fund cluster"})]})]})]})},C.itemId)})})]}),a==="preview"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(Dr,{children:s.jsx(Mr,{children:"Review all property cards that will be created. Make sure all information is correct before proceeding."})}),s.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:m.map(C=>{const T=n.find(K=>K.id===C.itemId),re=(T==null?void 0:T.description)||(T!=null&&T.model?`${T!=null&&T.brand?T.brand+" ":""}${T.model}`:T==null?void 0:T.brand)||"";return s.jsx(Te,{children:s.jsxs(Ae,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-medium",children:[T==null?void 0:T.propertyNumber," - ",re]}),C.isOverridden&&s.jsx(it,{variant:"secondary",children:"Customized"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Entity Name:"})," ",C.entityName]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Fund Cluster:"})," ",C.fundCluster]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Property Number:"})," ",T==null?void 0:T.propertyNumber]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Description:"})," ",re]})]})]})},C.itemId)})})]}),a==="processing"&&s.jsx("div",{className:"space-y-4 text-center",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-lg font-medium",children:"Creating Property Cards..."}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[w," of ",m.length," cards created"]}),s.jsx(pg,{value:w/m.length*100,className:"h-2"})]})})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs(le,{variant:"outline",onClick:L,disabled:a==="selection"||a==="processing",children:[s.jsx(U_,{className:"h-4 w-4 mr-2"}),"Previous"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(le,{variant:"outline",onClick:t,children:"Cancel"}),a==="preview"?s.jsxs(le,{onClick:U,disabled:x,children:[s.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Create ",m.length," Property Cards"]}):s.jsxs(le,{onClick:F,disabled:!$()||a==="processing",children:["Next",s.jsx(PI,{className:"h-4 w-4 ml-2"})]})]})]})]})})},eB=()=>{const e=es();ts();const[t,r]=h.useState(""),[n,a]=h.useState(!1),[i,o]=h.useState(null),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,m]=h.useState({entityName:"",fundCluster:"",inventoryItemId:""}),[p,x]=h.useState(!1),[g,w]=h.useState(!1),[v,y]=h.useState(null),[b,j]=h.useState(!1),_=async O=>{try{const{data:ee}=await H.from("fund_sources").select("name").eq("id",O).single();return(ee==null?void 0:ee.name)||null}catch(ee){return console.error("Error fetching fund source:",ee),null}},[S,E]=h.useState(!1),D=h.useMemo(()=>"",[]);h.useEffect(()=>{n&&(D?(m(O=>({...O,entityName:D})),x(!0)):x(!1))},[n,D]);const{toast:U}=Zn(),F=Xs(),L=h.useRef(null);h.useEffect(()=>{const O=H.channel("realtime:property-cards-annex").on("postgres_changes",{event:"*",schema:"public",table:"property_cards"},()=>{console.log("[Realtime] Property card changed, refreshing..."),F.invalidateQueries({queryKey:["annex-property-cards"]})}).on("postgres_changes",{event:"*",schema:"public",table:"property_card_entries"},()=>{console.log("[Realtime] Property card entries changed, refreshing..."),F.invalidateQueries({queryKey:["annex-property-cards"]})}).on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},()=>{console.log("[Realtime] Inventory items changed, refreshing property cards and available items..."),F.invalidateQueries({queryKey:["annex-property-cards"]}),F.invalidateQueries({queryKey:["inventory-items-for-property-cards"]})}).subscribe();return()=>{H.removeChannel(O)}},[F]);const{data:$=[],isLoading:R,error:I}=rr({queryKey:["annex-property-cards"],queryFn:async()=>{console.log("[PropertyCardsAnnex] Fetching property cards...");const{data:O,error:ee}=await H.from("property_cards").select("*").order("created_at",{ascending:!1});if(ee)throw console.error("[PropertyCardsAnnex] Error fetching property cards:",ee),ee;const de=(O||[]).map(J=>J.inventory_item_id).filter(Boolean);let ce={};if(de.length>0){const{data:J,error:Ne}=await H.from("inventory_items").select("id, assignment_status, custodian, property_number, sub_category, unit_cost").in("id",de);!Ne&&J&&(ce=J.reduce((Ye,Me)=>(Ye[Me.id]=Me,Ye),{}))}const me=O||[];if(I)throw console.error("[PropertyCardsAnnex] Error fetching property cards:",I),I;console.log("[PropertyCardsAnnex] Fetched property cards:",(me==null?void 0:me.length)||0);const ut=(me||[]).sort((J,Ne)=>{const Ye=new Date(J.created_at).getTime(),Me=new Date(Ne.created_at).getTime();return Ye!==Me?Me-Ye:(Ne.property_number||"").localeCompare(J.property_number||"")}).map(J=>{const Ne=J.inventory_item_id?ce[J.inventory_item_id]:null,Ye=Ne==null?void 0:Ne.sub_category,Me=(Ne==null?void 0:Ne.unit_cost)||0,dt=Ye==="High Value Expendable"||!Ye&&Me>5e3;return{id:J.id,entityName:J.entity_name,fundCluster:J.fund_cluster,semiExpendableProperty:J.semi_expendable_property,propertyNumber:J.property_number,description:J.description,dateAcquired:J.date_acquired,remarks:J.remarks,inventoryItemId:J.inventory_item_id,entries:[],createdAt:J.created_at,updatedAt:J.updated_at,assignmentStatus:Ne==null?void 0:Ne.assignment_status,custodian:Ne==null?void 0:Ne.custodian,subCategory:Ye||(dt?"High Value Expendable":"Small Value Expendable"),unitCost:Me,isHighValue:dt}});return console.log("[PropertyCardsAnnex] Mapped property cards:",ut.length),ut},staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,retry:(O,ee)=>navigator.onLine?O<2:!1}),{data:C=[]}=rr({queryKey:["available-inventory-for-cards",$.length],queryFn:async()=>{console.log("[PropertyCardsAnnex] Fetching available inventory items for property card creation..."),console.log("[PropertyCardsAnnex] Current property cards count:",$.length);const{data:O,error:ee}=await H.from("inventory_items").select("*").eq("status","Active").eq("condition","Serviceable").order("created_at",{ascending:!1});if(ee){console.error("[PropertyCardsAnnex] Error fetching available inventory:",ee);const me=await Kr.getAll();if(me.success){const He=$.map(J=>J.inventoryItemId).filter(Boolean);console.log("[PropertyCardsAnnex] Existing card items (fallback):",He);const ut=me.data.filter(J=>J.condition==="Serviceable"&&!He.includes(J.id)&&J.status==="Active"&&(!J.assignmentStatus||J.assignmentStatus==="Available"));return console.log("[PropertyCardsAnnex] Filtered inventory items (fallback):",ut.length),ut}return[]}console.log("[PropertyCardsAnnex] Raw inventory items fetched:",(O==null?void 0:O.length)||0);const de=$.map(me=>me.inventoryItemId).filter(Boolean);console.log("[PropertyCardsAnnex] Existing card items:",de);const ce=O.filter(me=>{const He=de.includes(me.id);return He&&console.log(`[PropertyCardsAnnex] Filtering out item ${me.property_number} - already has property card`),!He}).map(me=>({id:me.id,propertyNumber:me.property_number,description:me.description||"",brand:me.brand||"",model:me.model||"",serialNumber:me.serial_number||"",entityName:me.entity_name||"",unitOfMeasure:me.unit_of_measure||"piece",quantity:me.quantity||1,unitCost:me.unit_cost||0,totalCost:me.total_cost||0,dateAcquired:me.date_acquired||new Date().toISOString().split("T")[0],supplier:me.supplier_id||"",condition:me.condition||"Serviceable",location:me.location||"",custodian:me.custodian||"",custodianPosition:me.custodian_position||"",accountableOfficer:me.custodian||"",fundSource:me.fund_source_id||"",remarks:me.remarks||"",lastInventoryDate:me.last_inventory_date||void 0,category:me.category||"Semi-Expendable",status:me.status||"Active",assignmentStatus:me.assignment_status||"Available",assignedDate:me.assigned_date||void 0,createdAt:me.created_at||new Date().toISOString(),updatedAt:me.updated_at||new Date().toISOString()}));return console.log("[PropertyCardsAnnex] Available inventory items after filtering:",ce.length),ce.length>0&&console.log("[PropertyCardsAnnex] Sample items:",ce.slice(0,3).map(me=>({propertyNumber:me.propertyNumber,description:me.description,condition:me.condition,status:me.status,assignmentStatus:me.assignmentStatus}))),ce},enabled:n&&!R,staleTime:0,refetchOnMount:!0});h.useEffect(()=>{var ee;const O=(ee=e.state)==null?void 0:ee.prefillItem;if(console.log("Checking for prefill item:",O),O)if(console.log("Prefill item found, opening creation dialog"),a(!0),C.length>0){const de=C.find(ce=>ce.propertyNumber===O.propertyNumber);console.log("Matching inventory item:",de),de&&(m(ce=>({...ce,inventoryItemId:de.id})),u([de.id]))}else console.log("No inventory items available yet, will retry when loaded")},[e.state,C]);const T=$s({mutationFn:async O=>await Do.createPropertyCardFromInventory(O),onSuccess:()=>{U({title:"Success",description:"Property card created successfully"}),F.invalidateQueries({queryKey:["annex-property-cards"]}),F.invalidateQueries({queryKey:["available-inventory-for-cards"]}),a(!1),m({entityName:"",fundCluster:"",inventoryItemId:""})},onError:O=>{U({title:"Error",description:O.message,variant:"destructive"})}}),re=$s({mutationFn:async O=>{const ee=await dr.canDelete(O);if(!ee.success||!ee.data)throw new Error("This property card cannot be deleted because it has custodian slip references.");const de=await dr.safeDelete(O);if(!de.success)throw new Error(de.error||"Failed to delete property card");return de.data},onSuccess:()=>{U({title:"Success",description:"Property card deleted successfully"}),F.invalidateQueries({queryKey:["annex-property-cards"]}),y(null),E(!1)},onError:O=>{U({title:"Error",description:O.message,variant:"destructive"})}}),K=async O=>{const ee=await Do.getPropertyCardWithEntries(O);if(!ee)return null;let de={...ee};try{const{data:ce}=await H.from("inventory_items").select("*").eq("id",ee.inventoryItemId).single();ce&&(de={...de,brand:ce.brand,model:ce.model,serialNumber:ce.serial_number,quantity:ce.quantity,unitOfMeasure:ce.unit_of_measure,unitCost:ce.unit_cost,totalCost:ce.total_cost,semiExpandableCategory:ce.semi_expandable_category,subCategory:ce.sub_category,condition:ce.condition,status:ce.status,supplier:ce.supplier,fundSource:ce.fund_source})}catch(ce){console.error("Error fetching inventory details:",ce)}if(!de.entries||de.entries.length===0)try{const{data:ce}=await H.from("custodian_slip_items").select("*, custodian_slips(slip_number, date_issued)").eq("inventory_item_id",de.inventoryItemId),me=(ce||[]).map(J=>{var Ne,Ye;return{id:J.id,propertyCardId:de.id,date:J.date_issued,reference:`ICS ${((Ne=J.custodian_slips)==null?void 0:Ne.slip_number)||""}`.trim(),receiptQty:J.quantity||0,unitCost:Number(J.unit_cost||0),totalCost:Number(J.total_cost||0),issueItemNo:"",issueQty:0,officeOfficer:"",balanceQty:J.quantity||0,amount:Number(J.total_cost||0),remarks:`Issued via ICS ${((Ye=J.custodian_slips)==null?void 0:Ye.slip_number)||""}`.trim(),relatedSlipId:J.slip_id,relatedTransferId:null,createdAt:J.created_at,updatedAt:J.updated_at}}),{data:He}=await H.from("transfer_items").select("*, property_transfers(itr_number, to_department, to_custodian)").eq("property_number",de.propertyNumber),ut=(He||[]).map(J=>{var Ne,Ye,Me;return{id:J.id,propertyCardId:de.id,date:de.updatedAt||J.created_at,reference:`ITR ${((Ne=J.property_transfers)==null?void 0:Ne.itr_number)||""}`.trim(),receiptQty:0,unitCost:0,totalCost:0,issueItemNo:J.property_number||"",issueQty:J.quantity||1,officeOfficer:((Ye=J.property_transfers)==null?void 0:Ye.to_custodian)||((Me=J.property_transfers)==null?void 0:Me.to_department)||"",balanceQty:0,amount:0,remarks:"Transferred",relatedSlipId:null,relatedTransferId:J.transfer_id,createdAt:J.created_at,updatedAt:J.updated_at}});de={...de,entries:[...me,...ut].sort((J,Ne)=>new Date(J.date).getTime()-new Date(Ne.date).getTime())}}catch(ce){console.error("Fallback building property card entries failed:",ce)}return de},z=async()=>{if(T.isPending){console.log("Property card creation already in progress, ignoring duplicate click");return}if(!f.entityName||!f.fundCluster||!f.inventoryItemId){U({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const O=C.find(ee=>ee.id===f.inventoryItemId);if(!O){U({title:"Error",description:"Selected inventory item not found",variant:"destructive"});return}console.log("Creating property card for item:",O.propertyNumber),T.mutate({inventoryItemId:f.inventoryItemId,entityName:f.entityName,fundCluster:f.fundCluster,initialEntry:{date:O.dateAcquired||new Date().toISOString().split("T")[0],reference:"Initial Receipt",receiptQty:O.quantity||1,unitCost:O.unitCost||0,totalCost:O.totalCost||(O.quantity||1)*(O.unitCost||0)}})},ae=async O=>{try{const ee=await K(O.id);ee&&o(ee)}catch{U({title:"Error",description:"Failed to load property card details",variant:"destructive"})}},ge=async O=>{try{const ee=await K(O.id);ee&&(o(ee),c(!0))}catch{U({title:"Error",description:"Failed to load property card for printing",variant:"destructive"})}},W=O=>{if(O.assignmentStatus==="Assigned"){U({title:"Cannot Delete Property Card",description:`This item is currently assigned to ${O.custodian}. Please return the item before deleting the property card.`,variant:"destructive"});return}y(O),E(!0)},M=()=>{v&&re.mutate(v.id)},Y=O=>({entityName:O.entityName,fundCluster:O.fundCluster,semiExpendableProperty:O.semiExpendableProperty,description:O.description,propertyNumber:O.propertyNumber,entries:O.entries||[],remarks:O.remarks||""}),X=$.filter(O=>O.propertyNumber.toLowerCase().includes(t.toLowerCase())||O.description.toLowerCase().includes(t.toLowerCase())||O.entityName.toLowerCase().includes(t.toLowerCase())),ie=X.filter(O=>O.isHighValue===!0),ne=X.filter(O=>O.isHighValue!==!0);return R&&$.length===0?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Gt,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading property cards..."})]}):I&&navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs(Dr,{className:"max-w-md mx-auto",children:[s.jsx(qa,{className:"h-4 w-4"}),s.jsxs(Mr,{children:["Error: ",I.message]})]}),s.jsx(le,{onClick:()=>F.invalidateQueries({queryKey:["annex-property-cards"]}),className:"mt-4",children:"Retry"})]}):I&&!navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs(Dr,{className:"max-w-md mx-auto",children:[s.jsx(qa,{className:"h-4 w-4"}),s.jsx(Mr,{children:"You're offline. Some features may not work until your connection is restored."})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-muted-foreground",children:"Previously loaded property cards will appear when available."})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Semi-Expendable Property Cards (Annex A.1)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(le,{onClick:()=>j(!0),variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Ua,{className:"h-4 w-4"}),"Bulk Create"]}),s.jsxs(le,{onClick:()=>a(!0),className:"flex items-center gap-2",children:[s.jsx(Ua,{className:"h-4 w-4"}),"Create from Inventory"]})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(ke,{placeholder:"Search property cards...",value:t,onChange:O=>r(O.target.value),className:"pl-10"})]})}),s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{children:"Semi-Expendable Property Cards"})}),s.jsx(Ae,{children:s.jsxs(ah,{defaultValue:"high-value",className:"w-full",children:[s.jsxs(id,{className:"grid w-full grid-cols-2",children:[s.jsxs(Cn,{value:"high-value",className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"High Value"}),s.jsx(it,{variant:"secondary",className:"ml-auto",children:R?"...":ie.length})]}),s.jsxs(Cn,{value:"low-value",className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Low Value"}),s.jsx(it,{variant:"secondary",className:"ml-auto",children:R?"...":ne.length})]})]}),(()=>{const O=(ee,de)=>s.jsx("div",{className:"rounded-md border mt-4",children:s.jsxs(Lr,{children:[s.jsx(nn,{children:s.jsxs(ht,{children:[s.jsx(Se,{className:"font-semibold",children:"Property Number"}),s.jsx(Se,{children:"Description"}),s.jsx(Se,{children:"Entity Name"}),s.jsx(Se,{children:"Fund Cluster"}),s.jsx(Se,{children:"Date Acquired"}),s.jsx(Se,{children:"Assignment Status"}),s.jsx(Se,{children:"Actions"})]})}),s.jsx(sn,{children:de?s.jsx(ht,{children:s.jsx(xe,{colSpan:7,className:"text-center py-8",children:s.jsx(Gt,{className:"h-6 w-6 animate-spin mx-auto"})})}):ee.length===0?s.jsx(ht,{children:s.jsx(xe,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No property cards found."})}):ee.map(ce=>s.jsxs(ht,{children:[s.jsx(xe,{className:"font-medium font-mono",children:ce.propertyNumber}),s.jsx(xe,{className:"max-w-xs",children:s.jsx("div",{className:"truncate",title:ce.description,children:ce.description})}),s.jsx(xe,{children:ce.entityName}),s.jsx(xe,{children:ce.fundCluster}),s.jsx(xe,{children:ce.dateAcquired}),s.jsx(xe,{children:ce.assignmentStatus==="Assigned"&&ce.custodian?s.jsxs(it,{variant:"secondary",className:"text-xs",children:["Assigned to: ",ce.custodian]}):s.jsx(it,{variant:"outline",className:"text-xs",children:"Available"})}),s.jsx(xe,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(le,{variant:"ghost",size:"sm",onClick:()=>ae(ce),title:"View Details",disabled:re.isPending,children:s.jsx(Kc,{className:"h-4 w-4"})}),s.jsx(le,{variant:"ghost",size:"sm",onClick:()=>ge(ce),title:"Print",disabled:re.isPending,children:s.jsx($r,{className:"h-4 w-4"})}),s.jsx(le,{variant:"ghost",size:"sm",onClick:()=>W(ce),title:ce.assignmentStatus==="Assigned"?`Cannot delete - item is assigned to ${ce.custodian}`:"Delete property card",className:"text-destructive hover:text-destructive",disabled:re.isPending||ce.assignmentStatus==="Assigned",children:re.isPending&&(v==null?void 0:v.id)===ce.id?s.jsx(Gt,{className:"h-4 w-4 animate-spin"}):s.jsx(Sc,{className:"h-4 w-4"})})]})})]},ce.id))})]})});return s.jsxs(s.Fragment,{children:[s.jsxs(En,{value:"high-value",className:"mt-4",children:[s.jsx("div",{className:"mb-4 text-sm text-muted-foreground",children:"Items above 5,000 - High Value Expendable (SPHV)"}),O(ie,R)]}),s.jsxs(En,{value:"low-value",className:"mt-4",children:[s.jsx("div",{className:"mb-4 text-sm text-muted-foreground",children:"Items 5,000 or less - Small Value Expendable (SPLV)"}),O(ne,R)]})]})})()]})})]}),s.jsx(fn,{open:n,onOpenChange:a,children:s.jsxs(Zr,{className:"max-w-2xl",children:[s.jsxs(pn,{children:[s.jsx(gn,{children:"Create Property Card from Inventory"}),s.jsx(bs,{children:"Select an inventory item to create a Semi-Expendable Property Card (Annex A.1)"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{htmlFor:"entityName",children:"Entity Name *"}),s.jsx(ke,{id:"entityName",value:f.entityName,onChange:O=>m(ee=>({...ee,entityName:O.target.value})),placeholder:"PROVINCIAL GOVERNMENT OF APAYAO",disabled:p})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"fundCluster",children:"Fund Cluster *"}),s.jsx(ke,{id:"fundCluster",value:f.fundCluster,onChange:O=>m(ee=>({...ee,fundCluster:O.target.value})),placeholder:"Enter fund cluster",disabled:g})]})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"inventoryItem",children:"Select Inventory Item *"}),s.jsxs(Dt,{value:f.inventoryItemId,onValueChange:async O=>{const ee=C.find(de=>de.id===O);if(m(de=>({...de,inventoryItemId:O,entityName:(ee==null?void 0:ee.entityName)||de.entityName})),x(!!(ee!=null&&ee.entityName)),ee!=null&&ee.fundSource){const de=await _(ee.fundSource);de?(m(ce=>({...ce,fundCluster:de})),w(!0)):w(!1)}else w(!1)},children:[s.jsx(kt,{children:s.jsx(Mt,{placeholder:"Choose an inventory item"})}),s.jsx(Pt,{children:C.map(O=>s.jsxs(we,{value:O.id,children:[O.propertyNumber," - ",O.description]},O.id))})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(le,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsxs(le,{onClick:z,disabled:T.isPending,children:[T.isPending&&s.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Property Card"]})]})]})]})}),s.jsx(fn,{open:l,onOpenChange:c,children:s.jsx(Zr,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:s.jsx("div",{ref:L,children:i&&s.jsx(dk,{data:Y(i)})})})}),s.jsx(fn,{open:!!i&&!l,onOpenChange:()=>o(null),children:s.jsxs(Zr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(pn,{children:[s.jsx(gn,{children:"Property Card Details"}),s.jsxs(bs,{children:[i==null?void 0:i.propertyNumber," - ",i==null?void 0:i.description]})]}),i&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Entity Name"}),s.jsx("p",{className:"text-sm",children:i.entityName})]}),s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Fund Cluster"}),s.jsx("p",{className:"text-sm",children:i.fundCluster})]}),s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Property Number"}),s.jsx("p",{className:"font-mono font-semibold",children:i.propertyNumber})]}),s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Date Acquired"}),s.jsx("p",{className:"text-sm",children:i.dateAcquired})]})]}),i.brand||i.model||i.serialNumber?s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-semibold",children:"Item Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[i.brand&&s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Brand"}),s.jsx("p",{className:"text-sm",children:i.brand})]}),i.model&&s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Model"}),s.jsx("p",{className:"text-sm",children:i.model})]}),i.serialNumber&&s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Serial Number"}),s.jsx("p",{className:"font-mono text-sm",children:i.serialNumber})]}),i.quantity&&s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Quantity"}),s.jsxs("p",{className:"text-sm",children:[i.quantity," ",i.unitOfMeasure]})]})]})]}):null,i.unitCost!==void 0?s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-semibold",children:"Financial Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Unit Cost"}),s.jsxs("p",{className:"font-semibold text-sm",children:["",(i.unitCost||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:"Total Cost"}),s.jsxs("p",{className:"font-semibold text-sm",children:["",(i.totalCost||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}):null,i.entries&&i.entries.length>0&&s.jsxs("div",{children:[s.jsx(he,{className:"text-sm font-semibold",children:"Property Card Entries"}),s.jsx("div",{className:"mt-2 rounded-md border",children:s.jsxs(Lr,{children:[s.jsx(nn,{children:s.jsxs(ht,{children:[s.jsx(Se,{children:"Date"}),s.jsx(Se,{children:"Reference"}),s.jsx(Se,{children:"Receipt Qty"}),s.jsx(Se,{children:"Issue Qty"}),s.jsx(Se,{children:"Office/Officer"}),s.jsx(Se,{children:"Balance"})]})}),s.jsx(sn,{children:i.entries.map(O=>s.jsxs(ht,{children:[s.jsx(xe,{children:O.date}),s.jsx(xe,{children:O.reference}),s.jsx(xe,{children:O.receiptQty||"-"}),s.jsx(xe,{children:O.issueQty||"-"}),s.jsx(xe,{children:O.officeOfficer||"-"}),s.jsx(xe,{children:O.balanceQty})]},O.id))})]})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(le,{variant:"outline",onClick:()=>o(null),children:"Close"}),s.jsxs(le,{onClick:()=>c(!0),children:[s.jsx($r,{className:"mr-2 h-4 w-4"}),"Print"]})]})]})]})}),s.jsx(fn,{open:S,onOpenChange:E,children:s.jsxs(Zr,{children:[s.jsxs(pn,{children:[s.jsx(gn,{children:"Delete Property Card"}),s.jsxs(bs,{children:["Are you sure you want to delete this property card? This action cannot be undone.",v&&s.jsxs("div",{className:"mt-2 p-2 bg-muted rounded",children:[s.jsx("strong",{children:"Property Card:"})," ",v.propertyNumber,s.jsx("br",{}),s.jsx("strong",{children:"Description:"})," ",v.description]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(le,{variant:"outline",onClick:()=>{E(!1),y(null)},disabled:re.isPending,children:"Cancel"}),s.jsx(le,{variant:"destructive",onClick:M,disabled:re.isPending,children:re.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Sc,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]})}),s.jsx(ZU,{isOpen:b,onClose:()=>j(!1),onSuccess:()=>{F.invalidateQueries({queryKey:["annex-property-cards"]}),F.invalidateQueries({queryKey:["available-inventory-for-cards"]}),F.invalidateQueries({queryKey:["available-inventory-for-slips"]}),F.invalidateQueries({queryKey:["dashboard-stats"]}),U({title:"Success",description:"Property cards created successfully!"})},inventoryItems:C})]})},tB=({data:e})=>{const r=Math.max(0,15-e.items.length);return s.jsxs("div",{className:"max-w-4xl mx-auto bg-white",children:[s.jsx("div",{className:"flex justify-end mb-4 print:hidden",children:s.jsxs(le,{onClick:()=>window.print(),className:"flex items-center gap-2",children:[s.jsx($r,{className:"h-4 w-4"}),"Print"]})}),s.jsxs("div",{className:"border-2 border-black print:border-black min-h-[11in] font-mono text-sm",children:[s.jsx("div",{className:"text-center py-3 border-b border-black",children:s.jsx("h1",{className:"text-lg font-bold",children:"INVENTORY CUSTODIAN SLIP"})}),s.jsxs("div",{className:"grid grid-cols-2 border-b border-black",children:[s.jsxs("div",{className:"p-2 border-r border-black",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs font-semibold",children:"Entity Name:"}),s.jsx("div",{className:"border-b border-black flex-1 min-h-[20px] px-1",children:e.entityName})]}),s.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[s.jsx("span",{className:"text-xs font-semibold",children:"Fund Cluster:"}),s.jsx("div",{className:"border-b border-black flex-1 min-h-[20px] px-1",children:e.fundCluster})]})]}),s.jsx("div",{className:"p-2 flex items-start justify-end",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs font-semibold",children:"ICS No.:"}),s.jsx("div",{className:"border-b border-black min-w-[120px] min-h-[20px] px-1",children:e.slipNumber})]})})]}),s.jsxs("table",{className:"w-full border-collapse text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"border-r border-black p-2 w-16 text-center font-semibold",children:"Quantity"}),s.jsx("th",{className:"border-r border-black p-2 w-12 text-center font-semibold",children:"Units of Measure"}),s.jsxs("th",{className:"border-r border-black p-2 text-center font-semibold",children:[s.jsx("div",{children:"Amount"}),s.jsxs("div",{className:"grid grid-cols-2 border-t border-black mt-1",children:[s.jsx("div",{className:"border-r border-black p-1",children:"Unit Cost"}),s.jsx("div",{className:"p-1",children:"Total Cost"})]})]}),s.jsx("th",{className:"border-r border-black p-2 text-center font-semibold",children:"Description"}),s.jsx("th",{className:"border-r border-black p-2 w-16 text-center font-semibold",children:"Item No."}),s.jsxs("th",{className:"p-2 w-20 text-center font-semibold",children:[s.jsx("div",{children:"Estimated"}),s.jsx("div",{children:"Useful Life"})]})]})}),s.jsxs("tbody",{children:[e.items.map((n,a)=>s.jsxs("tr",{className:"border-b border-black",children:[s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.quantity}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.unit}),s.jsx("td",{className:"border-r border-black p-0 align-top",children:s.jsxs("div",{className:"grid grid-cols-2 h-full",children:[s.jsxs("div",{className:"border-r border-black p-2 text-right",children:["",n.unitCost.toFixed(2)]}),s.jsxs("div",{className:"p-2 text-right",children:["",n.totalCost.toFixed(2)]})]})}),s.jsx("td",{className:"border-r border-black p-2 align-top",children:n.description}),s.jsx("td",{className:"border-r border-black p-2 text-center align-top",children:n.itemNumber}),s.jsx("td",{className:"p-2 text-center align-top",children:n.estimatedUsefulLife})]},a)),Array.from({length:r}).map((n,a)=>s.jsxs("tr",{className:"border-b border-black",children:[s.jsx("td",{className:"border-r border-black p-2 h-8",children:""}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"border-r border-black p-0",children:s.jsxs("div",{className:"grid grid-cols-2 h-8",children:[s.jsx("div",{className:"border-r border-black",children:""}),s.jsx("div",{children:""})]})}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"p-2",children:""})]},`empty-${a}`))]})]}),s.jsxs("div",{className:"grid grid-cols-2 border-t border-black",children:[s.jsxs("div",{className:"border-r border-black p-4",children:[s.jsx("div",{className:"text-xs font-semibold mb-1",children:"Received from:"}),s.jsxs("div",{className:"mt-12 pt-8",children:[s.jsx("div",{className:"border-b border-black mb-1 text-center px-1 min-h-[20px]",children:e.issuedBy||""}),s.jsx("div",{className:"text-center text-[10px]",children:"Signature Over Printed Name"}),s.jsx("div",{className:"border-b border-black mb-1 mt-4 text-center px-1 min-h-[20px]",children:e.office||""}),s.jsx("div",{className:"text-center text-[10px]",children:"Position/Office"}),s.jsx("div",{className:"border-b border-black mb-1 mt-4 text-center px-1 min-h-[20px]",children:e.dateIssued||""}),s.jsx("div",{className:"text-center text-[10px]",children:"Date"})]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"text-xs font-semibold mb-1",children:"Received by:"}),s.jsxs("div",{className:"mt-12 pt-8",children:[s.jsx("div",{className:"border-b border-black mb-1 text-center px-1 min-h-[20px]",children:e.receivedBy||e.custodianName||""}),s.jsx("div",{className:"text-center text-[10px]",children:"Signature Over Printed Name"}),s.jsx("div",{className:"border-b border-black mb-1 mt-4 text-center px-1 min-h-[20px]",children:e.designation||e.office||""}),s.jsx("div",{className:"text-center text-[10px]",children:"Position/Office"}),s.jsx("div",{className:"border-b border-black mb-1 mt-4 text-center px-1 min-h-[20px]",children:e.dateIssued||""}),s.jsx("div",{className:"text-center text-[10px]",children:"Date"})]})]})]})]})]})},ms={async getAll(e={}){let t=H.from("custodians").select(`
        *,
        departments!custodians_department_id_fkey (
          id,
          name
        )
      `).order("name",{ascending:!0});e.search&&(t=t.or(`name.ilike.%${e.search}%,custodian_no.ilike.%${e.search}%`)),e.department_id&&(t=t.eq("department_id",e.department_id)),e.is_active!==void 0&&(t=t.eq("is_active",e.is_active)),e.limit&&(t=t.limit(e.limit)),e.offset&&(t=t.range(e.offset,e.offset+(e.limit||10)-1));const{data:r,error:n}=await t;if(n)throw n;return(r==null?void 0:r.map(a=>{var i;return{...a,department_name:(i=a.departments)==null?void 0:i.name}}))||[]},async getById(e){var n;const{data:t,error:r}=await H.from("custodians").select(`
        *,
        departments!custodians_department_id_fkey (
          id,
          name
        )
      `).eq("id",e).single();if(r)throw r;return t?{...t,department_name:(n=t.departments)==null?void 0:n.name}:null},async getSummary(e){const t=await this.getById(e);if(!t)return null;const{data:r,error:n}=await H.from("custodian_slips").select("id, slip_number, custodian_name, date_issued").eq("custodian_name",t.name);if(n)throw n;const a=(r==null?void 0:r.map(g=>g.id))||[];let i=[];if(a.length>0){const{data:g,error:w}=await H.from("custodian_slip_items").select(`
          *,
          inventory_items (
            property_number,
            description,
            category,
            sub_category,
            unit_cost,
            total_cost,
            condition,
            status,
            assignment_status,
            assigned_date
          )
        `).in("slip_id",a);if(w)throw w;i=g||[]}const{data:o,error:l}=await H.from("inventory_items").select("*").eq("custodian",t.name).eq("assignment_status","Assigned").eq("status","Active");if(l)throw l;const c=(i==null?void 0:i.length)||0,d=(i==null?void 0:i.reduce((g,w)=>{var v;return g+(((v=w.inventory_items)==null?void 0:v.total_cost)||0)},0))||0,u=(o==null?void 0:o.length)||0,f=(o==null?void 0:o.reduce((g,w)=>g+(w.total_cost||0),0))||0,m=c-u,p=d-f,x=r!=null&&r.length?Math.max(...r.map(g=>new Date(g.date_issued||0).getTime())):void 0;return{custodian:t,total_items_assigned:c,total_value_assigned:d,currently_assigned_items:u,currently_assigned_value:f,historical_items:m,historical_value:p,last_activity_date:x?new Date(x).toISOString():void 0}},async getItemHistory(e,t={}){const r=await this.getById(e);if(!r)return[];const{data:n,error:a}=await H.from("custodian_slips").select("id, slip_number, custodian_name, date_issued").eq("custodian_name",r.name);if(a)throw a;if(!n||n.length===0)return[];const i=n.map(u=>u.id);let o=H.from("custodian_slip_items").select(`
        *,
        custodian_slips!inner (id, slip_number, custodian_name, date_issued),
        inventory_items (
          property_number,
          description,
          brand,
          model,
          category,
          sub_category,
          unit_cost,
          total_cost,
          condition,
          status,
          assignment_status,
          assigned_date
        )
      `).in("slip_id",i).order("created_at",{ascending:!1});t.includeReturned,t.limit&&(o=o.limit(t.limit)),t.offset&&(o=o.range(t.offset,t.offset+(t.limit||10)-1));const{data:l,error:c}=await o;if(c)throw c;let d=l||[];return t.includeReturned||(d=d.filter(u=>{var f;return((f=u.inventory_items)==null?void 0:f.assignment_status)==="Assigned"})),d.map(u=>{const f=n.find(x=>x.id===u.slip_id),m=u.inventory_items,p=(m==null?void 0:m.description)||(m!=null&&m.model?`${(m==null?void 0:m.brand)||""} ${m==null?void 0:m.model}`.trim():m==null?void 0:m.brand)||"No description available";return{id:u.id,property_number:(m==null?void 0:m.property_number)||"",description:p,category:(m==null?void 0:m.category)||"Semi-Expendable",sub_category:m==null?void 0:m.sub_category,unit_cost:Number(m==null?void 0:m.unit_cost)||0,total_cost:Number(m==null?void 0:m.total_cost)||0,condition:(m==null?void 0:m.condition)||"",status:(m==null?void 0:m.status)||"",assignment_status:(m==null?void 0:m.assignment_status)||"",assigned_date:m==null?void 0:m.assigned_date,custodian_slip_id:u.slip_id,custodian_slip_number:(f==null?void 0:f.slip_number)||"",date_issued:(f==null?void 0:f.date_issued)||"",date_returned:(m==null?void 0:m.assignment_status)==="Available"?m==null?void 0:m.assigned_date:void 0,is_currently_assigned:(m==null?void 0:m.assignment_status)==="Assigned"}})},async getCurrentItems(e){const t=await this.getById(e);if(!t)return[];const{data:r,error:n}=await H.from("inventory_items").select("*").eq("custodian",t.name).eq("assignment_status","Assigned").eq("status","Active").order("assigned_date",{ascending:!1});if(n)throw n;return(r==null?void 0:r.map(a=>{const i=a.description||(a.model?`${a.brand||""} ${a.model}`.trim():a.brand)||"No description available";return{id:a.id,property_number:a.property_number,description:i,category:a.category||"Semi-Expendable",sub_category:a.sub_category,unit_cost:Number(a.unit_cost)||0,total_cost:Number(a.total_cost)||0,condition:a.condition,status:a.status,assignment_status:a.assignment_status,assigned_date:a.assigned_date,custodian_slip_id:"",custodian_slip_number:"",date_issued:a.assigned_date||"",date_returned:void 0,is_currently_assigned:!0}}))||[]},async create(e){var n;const{data:t,error:r}=await H.from("custodians").insert([e]).select(`
        *,
        departments!custodians_department_id_fkey (
          id,
          name
        )
      `).single();if(r)throw r;return{...t,department_name:(n=t.departments)==null?void 0:n.name}},async update(e,t){var a;const{data:r,error:n}=await H.from("custodians").update(t).eq("id",e).select(`
        *,
        departments!custodians_department_id_fkey (
          id,
          name
        )
      `).single();if(n)throw n;return{...r,department_name:(a=r.departments)==null?void 0:a.name}},async delete(e){const{error:t}=await H.from("custodians").delete().eq("id",e);if(t)throw t},async getAllSummaries(e={}){const t=await this.getAll(e),r=[];for(const n of t){const a=await this.getSummary(n.id);a&&r.push(a)}return r}},gg=({value:e,onChange:t,placeholder:r="Search for custodian...",label:n="Custodian Name",required:a=!1,className:i})=>{const[o,l]=h.useState(!1),[c,d]=h.useState(""),[u,f]=h.useState(null),m=h.useRef(null),p=h.useRef(null),{data:x=[],isLoading:g}=rr({queryKey:["custodians-search",c],queryFn:()=>ms.getAll({search:c,is_active:!0,limit:20}),enabled:o,staleTime:5*60*1e3}),w=x.filter(_=>_.name.toLowerCase().includes(c.toLowerCase())||_.custodian_no.toLowerCase().includes(c.toLowerCase())||_.department_name&&_.department_name.toLowerCase().includes(c.toLowerCase())),v=_=>{f(_),d(_.name),l(!1),t(_.name,_)},y=_=>{const S=_.target.value;d(S),S?u&&S!==u.name&&(f(null),t(S)):(f(null),t("")),l(!0)},b=()=>{l(!0),!c&&u&&d(u.name)},j=()=>{setTimeout(()=>{l(!1)},200)};return h.useEffect(()=>{const _=S=>{m.current&&!m.current.contains(S.target)&&l(!1)};return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[]),h.useEffect(()=>{e&&!u&&d(e)},[e,u]),s.jsxs("div",{className:Ee("relative",i),ref:m,children:[n&&s.jsxs(he,{htmlFor:"custodian-selector",className:"text-sm font-medium",children:[n," ",a&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(ke,{ref:p,id:"custodian-selector",value:c,onChange:y,onFocus:b,onBlur:j,placeholder:r,className:"pl-10 pr-10",autoComplete:"off"}),s.jsx(le,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:()=>l(!o),children:s.jsx(Tf,{className:Ee("h-4 w-4 transition-transform",o&&"rotate-180")})})]}),o&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-card border border-border rounded-md shadow-lg max-h-60 overflow-auto",children:g?s.jsx("div",{className:"p-3 text-center text-sm text-muted-foreground",children:"Loading custodians..."}):w.length===0?s.jsx("div",{className:"p-3 text-center text-sm text-muted-foreground",children:c?"No custodians found":"Start typing to search custodians"}):s.jsx("div",{className:"py-1",children:w.map(_=>s.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-secondary focus:bg-secondary focus:outline-none",onClick:()=>v(_),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Cc,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:_.name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[_.custodian_no,_.department_name&&s.jsxs(s.Fragment,{children:["  ",s.jsx(by,{className:"inline h-3 w-3 mr-1"}),_.department_name]})]})]})]}),(u==null?void 0:u.id)===_.id&&s.jsx(Qs,{className:"h-4 w-4 text-green-600"})]})},_.id))})})]}),u&&s.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qs,{className:"h-4 w-4 text-green-600"}),s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"font-medium text-green-800",children:["Selected: ",u.name]}),s.jsxs("div",{className:"text-green-600",children:[u.custodian_no,u.department_name&&`  ${u.department_name}`]})]})]})})]})},gk=({value:e,onChange:t,placeholder:r="Search for department...",label:n="Office/Department",required:a=!1,className:i})=>{const[o,l]=h.useState(!1),[c,d]=h.useState(""),[u,f]=h.useState(null),m=h.useRef(null),p=h.useRef(null),{data:x=[],isLoading:g}=rr({queryKey:["departments-search",c],queryFn:()=>Gr.getDepartments(),enabled:o,staleTime:5*60*1e3}),w=x.filter(_=>_.name.toLowerCase().includes(c.toLowerCase())||_.code&&_.code.toLowerCase().includes(c.toLowerCase())),v=_=>{f(_),d(_.name),l(!1),t(_.name,_)},y=_=>{const S=_.target.value;d(S),S?u&&S!==u.name&&(f(null),t(S)):(f(null),t("")),l(!0)},b=()=>{l(!0),!c&&u&&d(u.name)},j=()=>{setTimeout(()=>{l(!1)},200)};return h.useEffect(()=>{const _=S=>{m.current&&!m.current.contains(S.target)&&l(!1)};return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[]),h.useEffect(()=>{e&&!u&&d(e)},[e,u]),s.jsxs("div",{className:Ee("relative",i),ref:m,children:[n&&s.jsxs(he,{htmlFor:"department-selector",className:"text-sm font-medium",children:[n," ",a&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(ke,{ref:p,id:"department-selector",value:c,onChange:y,onFocus:b,onBlur:j,placeholder:r,className:"pl-10 pr-10",autoComplete:"off"}),s.jsx(le,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:()=>l(!o),children:s.jsx(Tf,{className:Ee("h-4 w-4 transition-transform",o&&"rotate-180")})})]}),o&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto",children:g?s.jsx("div",{className:"p-3 text-center text-sm text-muted-foreground",children:"Loading departments..."}):w.length===0?s.jsx("div",{className:"p-3 text-center text-sm text-muted-foreground",children:c?"No departments found":"Start typing to search departments"}):s.jsx("div",{className:"py-1",children:w.map(_=>s.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-secondary focus:bg-secondary focus:outline-none",onClick:()=>v(_),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(by,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:_.name}),_.code&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx(eb,{className:"inline h-3 w-3 mr-1"}),_.code]})]})]}),(u==null?void 0:u.id)===_.id&&s.jsx(Qs,{className:"h-4 w-4 text-green-600"})]})},_.id))})})]}),u&&s.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qs,{className:"h-4 w-4 text-green-600"}),s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"font-medium text-green-800",children:["Selected: ",u.name]}),u.code&&s.jsxs("div",{className:"text-green-600",children:[s.jsx(eb,{className:"inline h-3 w-3 mr-1"}),u.code]})]})]})})]})},rB=({value:e,onChange:t,placeholder:r="Search for custodian or enter manually...",label:n="Received By",required:a=!1,className:i})=>{const[o,l]=h.useState(!1),[c,d]=h.useState(!1),[u,f]=h.useState(e),{data:m=[],isLoading:p,error:x}=rr({queryKey:["custodians-for-received-by"],queryFn:async()=>{try{return await ms.getAll()||[]}catch(b){return console.error("Error fetching custodians:",b),[]}},staleTime:5*60*1e3}),g=h.useMemo(()=>!e||e.length<2?m:m.filter(b=>{var j,_;return b.name.toLowerCase().includes(e.toLowerCase())||((j=b.position)==null?void 0:j.toLowerCase().includes(e.toLowerCase()))||((_=b.department_name)==null?void 0:_.toLowerCase().includes(e.toLowerCase()))}),[m,e]),w=()=>{d(!c),c?f(""):(f(""),t(""))},v=b=>{t(b),l(!1),d(!1)},y=b=>{f(b),t(b)};return h.useEffect(()=>{c&&f(e)},[e,c]),s.jsxs("div",{className:Ee("space-y-2",i),children:[s.jsxs(he,{htmlFor:"received-by-selector",children:[n,a&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1",children:c?s.jsx(ke,{id:"received-by-manual",value:u,onChange:b=>y(b.target.value),placeholder:"Enter receiver name manually...",className:"w-full"}):s.jsxs(yE,{open:o,onOpenChange:l,children:[s.jsx(vE,{asChild:!0,children:s.jsxs(le,{variant:"outline",role:"combobox","aria-expanded":o,className:"w-full justify-between",children:[e?s.jsx("span",{className:"truncate",children:e}):s.jsx("span",{className:"text-muted-foreground",children:r}),s.jsx(z_,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(hv,{className:"w-full p-0",align:"start",children:s.jsxs(pv,{children:[s.jsx(gv,{placeholder:"Search custodians..."}),s.jsxs(yv,{children:[s.jsx(vv,{children:p?"Loading custodians...":"No custodians found."}),s.jsx(xv,{children:g.map(b=>s.jsxs(bv,{value:b.name,onSelect:()=>v(b.name),children:[s.jsx(Qs,{className:Ee("mr-2 h-4 w-4",e===b.name?"opacity-100":"opacity-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:b.name}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[b.position,"  ",b.department_name]})]})]},b.id))})]})]})})]})}),s.jsx(le,{type:"button",variant:"outline",size:"sm",onClick:w,className:"px-3",title:c?"Switch to dropdown selection":"Switch to manual input",children:s.jsx(Cc,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:c?"Manual input mode - type the receiver's name directly":"Dropdown mode - search and select from existing custodians"})]})},nB=()=>{ts(),es();const[e,t]=h.useState(""),[r,n]=h.useState(!1),[a,i]=h.useState(null),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState({custodianName:"",designation:"",office:"",dateIssued:new Date().toISOString().split("T")[0],issuedBy:"",receivedBy:""}),[m,p]=h.useState(null),[x,g]=h.useState(null),[w,v]=h.useState(null),y=h.useRef(!1),b=(M,Y)=>{f(X=>({...X,custodianName:M})),p(Y||null),Y&&f(X=>({...X,custodianName:M,designation:Y.position||X.designation,office:Y.department_name||X.office}))},j=(M,Y)=>{f(X=>({...X,office:M})),g(Y||null)},{toast:_}=Zn(),S=Xs(),E=h.useRef(null);h.useEffect(()=>{const M=H.channel("realtime:custodian-slips-annex").on("postgres_changes",{event:"*",schema:"public",table:"custodian_slips"},()=>{console.log("[Realtime] Custodian slip changed, refreshing..."),S.invalidateQueries({queryKey:["annex-custodian-slips"]})}).on("postgres_changes",{event:"*",schema:"public",table:"custodian_slip_items"},()=>{console.log("[Realtime] Custodian slip items changed, refreshing..."),S.invalidateQueries({queryKey:["annex-custodian-slips"]})}).on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},()=>{console.log("[Realtime] Inventory items changed, refreshing available items..."),S.invalidateQueries({queryKey:["available-inventory-for-slips"]})}).subscribe();return()=>{H.removeChannel(M)}},[S]);const{data:D=[],isLoading:U,error:F}=rr({queryKey:["annex-custodian-slips"],queryFn:async()=>{const{data:M,error:Y}=await H.from("custodian_slips").select(`
          *,
          custodian_slip_items(
            *,
            inventory_items (
              estimated_useful_life,
              sub_category,
              category
            )
          )
        `).order("created_at",{ascending:!1});if(Y)throw Y;return M.map(X=>({id:X.id,slipNumber:X.slip_number,custodianName:X.custodian_name,designation:X.designation,office:X.office,dateIssued:X.date_issued,issuedBy:X.issued_by,receivedBy:X.received_by,slipStatus:X.slip_status,items:X.custodian_slip_items.map(ie=>({id:ie.id,slipId:ie.slip_id,inventoryItemId:ie.inventory_item_id,propertyNumber:ie.property_number,description:ie.description,quantity:ie.quantity,unit:ie.unit,unitCost:ie.unit_cost||0,totalCost:ie.total_cost||0,amount:ie.amount||ie.total_cost||0,itemNumber:ie.item_number||"",estimatedUsefulLife:ie.estimated_useful_life||ie.inventory_items&&ie.inventory_items.estimated_useful_life||"",dateIssued:ie.date_issued,propertyCardEntryId:ie.property_card_entry_id,createdAt:ie.created_at,updatedAt:ie.updated_at})),createdAt:X.created_at,updatedAt:X.updated_at}))},staleTime:5*60*1e3,retry:(M,Y)=>navigator.onLine?M<2:!1}),{data:L=[]}=rr({queryKey:["available-inventory-for-slips"],queryFn:async()=>{const{data:M,error:Y}=await H.from("available_inventory_items_with_property_cards").select("*").order("created_at",{ascending:!1});if(Y){console.error("Error fetching available inventory:",Y);const X=await Kr.getAll();if(X.success){const ie=[];for(const ne of X.data){const{data:O}=await H.from("property_cards").select("id").eq("inventory_item_id",ne.id).single();if(O){const ee=ne.condition==="Serviceable",de=ne.status==="Active",ce=!ne.custodian||ne.custodian==="",me=!ne.assignmentStatus||ne.assignmentStatus==="Available",He=ne.assignmentStatus!=="Assigned";ee&&de&&ce&&me&&He&&ie.push(ne)}}return ie}return[]}return M.map(X=>({id:X.id,propertyNumber:X.property_number,description:X.description,brand:X.brand,model:X.model,serialNumber:X.serial_number,unitOfMeasure:X.unit_of_measure,quantity:X.quantity,unitCost:X.unit_cost,totalCost:X.total_cost,dateAcquired:X.date_acquired,supplier:X.supplier,condition:X.condition,location:X.location,fundSource:X.fund_source_id,remarks:X.remarks,lastInventoryDate:X.last_inventory_date,semiExpandableCategory:X.semi_expandable_category,status:X.status,assignmentStatus:X.assignment_status,assignedDate:X.assigned_date,createdAt:X.created_at,updatedAt:X.updated_at}))},enabled:r,staleTime:2*60*1e3}),$=$s({mutationKey:["create-custodian-slip"],mutationFn:async M=>(console.log("[mutationFn] Executing - calling annexService.createCustodianSlip"),await Do.createCustodianSlip(M)),retry:!1,onSuccess:M=>{y.current=!1;const Y=Array.isArray(M)?M.length:1;Y>1?_({title:"Success",description:`${Y} custodian slips created (separated by value)! ${c.length} item(s) assigned to ${u.custodianName}`}):_({title:"Success",description:`Custodian slip created successfully! ${c.length} item(s) assigned to ${u.custodianName}`}),S.invalidateQueries({queryKey:["annex-custodian-slips"]}),S.invalidateQueries({queryKey:["available-inventory-for-slips"]}),S.invalidateQueries({queryKey:["inventory-items"]}),S.invalidateQueries({queryKey:["custodian-summaries"]}),S.invalidateQueries({queryKey:["custodian-summary"]}),S.invalidateQueries({queryKey:["custodian-item-history"]}),S.invalidateQueries({queryKey:["custodian-current-items"]}),S.refetchQueries({queryKey:["annex-custodian-slips"]}),n(!1),f({custodianName:"",designation:"",office:"",dateIssued:new Date().toISOString().split("T")[0],issuedBy:"",receivedBy:""}),p(null),g(null),d([])},onError:M=>{y.current=!1,console.log("Custodian slip creation error:",M.message),_({title:"Error",description:M.message,variant:"destructive"}),S.invalidateQueries({queryKey:["annex-custodian-slips"]}),S.invalidateQueries({queryKey:["available-inventory-for-slips"]}),S.invalidateQueries({queryKey:["inventory-items"]})}}),R=$s({mutationFn:async M=>{console.log("Attempting to delete custodian slip:",M);const{data:Y,error:X}=await H.from("custodian_slips").select("slip_status, slip_number").eq("id",M).single();if(X)throw new Error(`Failed to get slip data: ${X.message}`);if(!Y)throw new Error("Custodian slip not found");if(Y.slip_status!=="Draft"&&!window.confirm(`ICS ${Y.slip_number||""} is already ${Y.slip_status}. Deleting it will release all items and remove related entries. Continue?`))return{cancelled:!0};const{data:ie,error:ne}=await H.from("custodian_slip_items").select("inventory_item_id").eq("slip_id",M);if(ne)throw new Error(`Failed to get slip items: ${ne.message}`);if(console.log("Found slip items:",ie),ie&&ie.length>0){const ce=ie.map(He=>He.inventory_item_id),{error:me}=await H.from("inventory_items").update({custodian:null,custodian_position:null,assignment_status:"Available",assigned_date:null,ics_number:null,ics_date:null,updated_at:new Date().toISOString()}).in("id",ce);me?console.warn("Could not update inventory items:",me.message):console.log("Successfully released inventory items")}const{error:O}=await H.from("property_card_entries").delete().eq("related_slip_id",M);O?console.warn("Could not delete property card entries:",O.message):console.log("Successfully deleted property card entries");const{error:ee}=await H.from("custodian_slip_items").delete().eq("slip_id",M);if(ee)throw new Error(`Failed to delete slip items: ${ee.message}`);const{error:de}=await H.from("custodian_slips").delete().eq("id",M);if(de)throw console.error("Delete slip error:",de),new Error(`Failed to delete custodian slip: ${de.message} (Code: ${de.code})`);return console.log("Successfully deleted custodian slip"),{cancelled:!1}},onSuccess:M=>{if(M!=null&&M.cancelled){_({title:"Cancelled",description:"Deletion aborted",variant:"default"});return}_({title:"Success",description:"Custodian slip deleted successfully"}),S.invalidateQueries({queryKey:["annex-custodian-slips"]}),S.invalidateQueries({queryKey:["available-inventory-for-slips"]}),S.invalidateQueries({queryKey:["inventory-items"]})},onError:M=>{_({title:"Error",description:M.message,variant:"destructive"})}}),I=$s({mutationFn:async M=>{const{data:Y,error:X}=await H.from("custodian_slips").select(`
          *,
          custodian_slip_items(*)
        `).eq("id",M).single();if(X||!Y)throw new Error(`Failed to get slip details: ${X==null?void 0:X.message}`);const{error:ie}=await H.from("custodian_slips").update({slip_status:"Issued",updated_at:new Date().toISOString()}).eq("id",M);if(ie)throw new Error(`Failed to confirm slip: ${ie.message}`);if(Y.custodian_slip_items&&Y.custodian_slip_items.length>0){const ne=Y.custodian_slip_items.map(ee=>ee.inventory_item_id),{error:O}=await H.from("inventory_items").update({custodian:Y.custodian_name,custodian_position:Y.designation,assignment_status:"Assigned",assigned_date:Y.date_issued,updated_at:new Date().toISOString()}).in("id",ne);O?console.error("Failed to update inventory items:",O):console.log(`Successfully assigned ${ne.length} inventory items to ${Y.custodian_name}`)}},onSuccess:()=>{_({title:"Success",description:"Custodian slip has been officially confirmed and cannot be deleted"}),S.invalidateQueries({queryKey:["annex-custodian-slips"]}),S.invalidateQueries({queryKey:["inventory-items"]}),S.invalidateQueries({queryKey:["available-inventory-for-slips"]}),S.invalidateQueries({queryKey:["custodian-summaries"]}),v(null)},onError:M=>{_({title:"Error",description:M.message,variant:"destructive"})}}),C=async()=>{if(console.log("[handleCreateSlip] Called. Ref:",y.current,"isPending:",$.isPending),y.current||$.isPending){console.log("[handleCreateSlip] BLOCKED - Creation already in progress, ignoring duplicate call");return}if(!u.custodianName||!u.designation||!u.office||!u.issuedBy||!u.receivedBy){_({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(c.length===0){_({title:"Validation Error",description:"Please select at least one inventory item",variant:"destructive"});return}y.current=!0,console.log("[handleCreateSlip] Creating custodian slip with items:",c),console.log("[handleCreateSlip] About to call mutate()"),$.mutate({custodianName:u.custodianName,designation:u.designation,office:u.office,dateIssued:u.dateIssued,issuedBy:u.issuedBy,receivedBy:u.receivedBy,inventoryItemIds:c}),console.log("[handleCreateSlip] mutate() called, returning from handler")},T=async M=>{try{const Y=await Do.getCustodianSlipWithItems(M.id);Y&&i(Y)}catch{_({title:"Error",description:"Failed to load custodian slip details",variant:"destructive"})}},re=async M=>{try{const Y=await Do.getCustodianSlipWithItems(M.id);Y&&(i(Y),l(!0))}catch{_({title:"Error",description:"Failed to load custodian slip for printing",variant:"destructive"})}},K=M=>{confirm("Are you sure you want to delete this custodian slip? This will release all assigned inventory items.")&&R.mutate(M)},z=M=>{confirm("Are you sure you want to officially confirm this custodian slip? Once confirmed, it cannot be deleted and will be marked as an official document.")&&I.mutate(M)},ae=M=>{const Y=M.items.reduce((X,ie)=>X+(ie.amount||0),0);return{slipNumber:M.slipNumber,entityName:"PROVINCIAL GOVERNMENT OF APAYAO",fundCluster:"General Fund",custodianName:M.custodianName,designation:M.designation,office:M.office,dateIssued:M.dateIssued,issuedBy:M.issuedBy,receivedBy:M.receivedBy,items:M.items.map(X=>({itemNumber:X.propertyNumber,propertyNumber:X.propertyNumber,description:X.description,quantity:X.quantity,unit:X.unit,unitCost:X.unitCost,totalCost:X.totalCost,amount:X.amount,estimatedUsefulLife:X.estimatedUsefulLife,dateIssued:X.dateIssued})),totalAmount:Y}},ge=M=>{d(Y=>Y.includes(M)?Y.filter(X=>X!==M):[...Y,M])},W=D.filter(M=>M.slipNumber.toLowerCase().includes(e.toLowerCase())||M.custodianName.toLowerCase().includes(e.toLowerCase())||M.office.toLowerCase().includes(e.toLowerCase()));return U&&D.length===0?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Gt,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading custodian slips..."})]}):F&&navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs(Dr,{className:"max-w-md mx-auto",children:[s.jsx(qa,{className:"h-4 w-4"}),s.jsxs(Mr,{children:["Error: ",F.message]})]}),s.jsx(le,{onClick:()=>S.invalidateQueries({queryKey:["annex-custodian-slips"]}),className:"mt-4",children:"Retry"})]}):F&&!navigator.onLine?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs(Dr,{className:"max-w-md mx-auto",children:[s.jsx(qa,{className:"h-4 w-4"}),s.jsx(Mr,{children:"You're offline. Some features may not work until your connection is restored."})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-muted-foreground",children:"Previously loaded custodian slips will appear when available."})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Inventory Custodian Slips (ICS)"}),s.jsxs(le,{onClick:()=>n(!0),className:"flex items-center gap-2",children:[s.jsx(Ua,{className:"h-4 w-4"}),"Create New Slip"]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(ke,{placeholder:"Search custodian slips...",value:e,onChange:M=>t(M.target.value),className:"pl-10"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:W.map(M=>s.jsxs(Te,{className:"hover:shadow-lg transition-shadow",children:[s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(et,{className:"text-lg font-mono",children:M.slipNumber}),s.jsx(it,{variant:M.slipStatus==="Issued"?"default":"secondary",className:"ml-2",children:M.slipStatus||"Draft"})]})}),s.jsx(Ae,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Property Numbers:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:M.items.map((Y,X)=>s.jsx(it,{variant:"outline",className:"font-mono text-xs",children:Y.propertyNumber},Y.id||X))}),M.items.length===0&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"No items"})]}),s.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[s.jsxs(le,{variant:"outline",size:"sm",onClick:()=>T(M),className:"flex items-center gap-1 flex-1",children:[s.jsx(Kc,{className:"h-3 w-3"}),"View"]}),s.jsxs(le,{variant:"outline",size:"sm",onClick:()=>re(M),className:"flex items-center gap-1 flex-1",children:[s.jsx($r,{className:"h-3 w-3"}),"Print"]}),(M.slipStatus==="Draft"||!M.slipStatus)&&s.jsxs(le,{variant:"default",size:"sm",onClick:()=>z(M.id),className:"flex items-center gap-1 bg-green-600 hover:bg-green-700 flex-1",disabled:I.isPending,title:"Confirm this slip as official (cannot be deleted after confirmation)",children:[I.isPending?s.jsx(Gt,{className:"h-3 w-3 animate-spin"}):s.jsx(Ra,{className:"h-3 w-3"}),"Confirm"]}),(!M.slipStatus||["Draft","Issued"].includes(M.slipStatus))&&s.jsxs(le,{variant:"outline",size:"sm",onClick:()=>K(M.id),className:"flex items-center gap-1 text-red-600 hover:text-red-700",disabled:R.isPending,title:M.slipStatus==="Issued"?"Delete this issued custodian slip (temporary override)":"Delete this draft custodian slip",children:[s.jsx(Sc,{className:"h-3 w-3"}),"Delete"]})]})]})})]},M.id))}),W.length===0&&!U&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground",children:"No custodian slips found."}),s.jsx(le,{onClick:()=>n(!0),className:"mt-4",children:"Create your first custodian slip"})]}),s.jsx(fn,{open:r,onOpenChange:M=>{n(M),M||(y.current=!1)},children:s.jsxs(Zr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(pn,{children:[s.jsx(gn,{children:"Create Inventory Custodian Slip"}),s.jsx(bs,{children:"Create a new ICS by selecting inventory items and assigning them to a custodian"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx(gg,{value:u.custodianName,onChange:b,placeholder:"Search for custodian...",label:"Custodian Name",required:!0})}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"designation",children:"Designation *"}),s.jsx(ke,{id:"designation",value:u.designation,onChange:M=>f(Y=>({...Y,designation:M.target.value})),placeholder:"Enter designation"})]}),s.jsx("div",{children:s.jsx(gk,{value:u.office,onChange:j,placeholder:"Search for department...",label:"Office/Department",required:!0})}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"dateIssued",children:"Date Issued *"}),s.jsx(ke,{id:"dateIssued",type:"date",value:u.dateIssued,onChange:M=>f(Y=>({...Y,dateIssued:M.target.value}))})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"issuedBy",children:"Issued By *"}),s.jsx(ke,{id:"issuedBy",value:u.issuedBy,onChange:M=>f(Y=>({...Y,issuedBy:M.target.value})),placeholder:"Enter issuer name"})]}),s.jsx("div",{children:s.jsx(rB,{value:u.receivedBy,onChange:M=>f(Y=>({...Y,receivedBy:M})),placeholder:"Search for custodian or enter manually...",label:"Received By",required:!0})})]}),s.jsxs("div",{children:[s.jsx(he,{children:"Select Inventory Items *"}),s.jsx("div",{className:"border rounded-md max-h-64 overflow-y-auto",children:s.jsxs(Lr,{children:[s.jsx(nn,{children:s.jsxs(ht,{children:[s.jsx(Se,{className:"w-12",children:"Select"}),s.jsx(Se,{children:"Property Number"}),s.jsx(Se,{children:"Description"}),s.jsx(Se,{children:"Condition"}),s.jsx(Se,{children:"Quantity"}),s.jsx(Se,{children:"Unit"}),s.jsx(Se,{children:"Unit Cost"}),s.jsx(Se,{children:"Total Cost"})]})}),s.jsx(sn,{children:L.length===0?s.jsx(ht,{children:s.jsx(xe,{colSpan:8,className:"text-center text-muted-foreground py-8",children:"No available inventory items found. All items may be assigned to custodians or marked as unserviceable."})}):L.map(M=>{var Y,X;return s.jsxs(ht,{children:[s.jsx(xe,{children:s.jsx(cd,{checked:c.includes(M.id),onCheckedChange:()=>ge(M.id)})}),s.jsx(xe,{children:M.propertyNumber}),s.jsx(xe,{children:M.description}),s.jsx(xe,{children:s.jsx(it,{variant:M.condition==="Serviceable"?"default":"destructive",children:M.condition})}),s.jsx(xe,{children:M.quantity}),s.jsx(xe,{children:M.unitOfMeasure}),s.jsxs(xe,{children:["",((Y=M.unitCost)==null?void 0:Y.toFixed(2))||"0.00"]}),s.jsxs(xe,{children:["",((X=M.totalCost)==null?void 0:X.toFixed(2))||"0.00"]})]},M.id)})})]})}),L.length===0?s.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[s.jsx("p",{children:"No items available for assignment."}),s.jsx("p",{className:"text-xs mt-1",children:"Items must be in 'Serviceable' condition and not already assigned to be available."})]}):s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Selected: ",c.length," items  Available: ",L.length," items"]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(le,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsxs(le,{onClick:C,disabled:$.isPending||y.current,children:[($.isPending||y.current)&&s.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Custodian Slip"]})]})]})]})}),s.jsx(fn,{open:o,onOpenChange:l,children:s.jsxs(Zr,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(pn,{children:[s.jsx(gn,{children:"Print Custodian Slip"}),s.jsx(bs,{children:"Inventory Custodian Slip (ICS) - Ready for printing"})]}),s.jsx("div",{ref:E,children:a&&s.jsx(tB,{data:ae(a)})})]})}),s.jsx(fn,{open:!!a&&!o,onOpenChange:()=>i(null),children:s.jsxs(Zr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(pn,{children:[s.jsx(gn,{children:"Custodian Slip Details"}),s.jsxs(bs,{children:[a==null?void 0:a.slipNumber," - ",a==null?void 0:a.custodianName]})]}),a&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{children:"Slip Number"}),s.jsx("p",{className:"text-sm",children:a.slipNumber})]}),s.jsxs("div",{children:[s.jsx(he,{children:"Custodian Name"}),s.jsx("p",{className:"text-sm",children:a.custodianName})]}),s.jsxs("div",{children:[s.jsx(he,{children:"Designation"}),s.jsx("p",{className:"text-sm",children:a.designation})]}),s.jsxs("div",{children:[s.jsx(he,{children:"Office"}),s.jsx("p",{className:"text-sm",children:a.office})]}),s.jsxs("div",{children:[s.jsx(he,{children:"Date Issued"}),s.jsx("p",{className:"text-sm",children:a.dateIssued})]}),s.jsxs("div",{children:[s.jsx(he,{children:"Issued By"}),s.jsx("p",{className:"text-sm",children:a.issuedBy})]})]}),a.items&&a.items.length>0&&s.jsxs("div",{children:[s.jsx(he,{children:"Items"}),s.jsx("div",{className:"border rounded-md",children:s.jsxs(Lr,{children:[s.jsx(nn,{children:s.jsxs(ht,{children:[s.jsx(Se,{children:"Item No."}),s.jsx(Se,{children:"Property Number"}),s.jsx(Se,{children:"Description"}),s.jsx(Se,{children:"Quantity"}),s.jsx(Se,{children:"Unit"}),s.jsx(Se,{children:"Unit Cost"}),s.jsx(Se,{children:"Amount"}),s.jsx(Se,{children:"Est. Life"})]})}),s.jsx(sn,{children:a.items.map(M=>{var Y,X;return s.jsxs(ht,{children:[s.jsx(xe,{children:M.itemNumber}),s.jsx(xe,{children:M.propertyNumber}),s.jsx(xe,{children:M.description}),s.jsx(xe,{children:M.quantity}),s.jsx(xe,{children:M.unit}),s.jsxs(xe,{children:["",((Y=M.unitCost)==null?void 0:Y.toFixed(2))||"0.00"]}),s.jsxs(xe,{children:["",((X=M.amount)==null?void 0:X.toFixed(2))||"0.00"]}),s.jsx(xe,{children:M.estimatedUsefulLife||"N/A"})]},M.id)})})]})}),s.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[s.jsx("strong",{children:"Total Items:"})," ",a.items.length," |",s.jsx("strong",{children:" Total Amount:"})," ",a.items.reduce((M,Y)=>M+(Y.amount||0),0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(le,{variant:"outline",onClick:()=>i(null),children:"Close"}),s.jsxs(le,{onClick:()=>l(!0),children:[s.jsx($r,{className:"mr-2 h-4 w-4"}),"Print"]})]})]})]})})]})};function sB(){const e=ts(),[t,r]=h.useState(""),[n,a]=h.useState(null),[i,o]=h.useState(!1);Zn();const l=Xs();h.useEffect(()=>{const v=H.channel("realtime:custodians-page").on("postgres_changes",{event:"*",schema:"public",table:"custodian_slips"},()=>{console.log("[Realtime] Custodian slips changed, refreshing..."),l.invalidateQueries({queryKey:["custodian-summaries"]}),l.invalidateQueries({queryKey:["custodian-summary"]}),l.invalidateQueries({queryKey:["custodian-item-history"]}),l.invalidateQueries({queryKey:["custodian-current-items"]})}).on("postgres_changes",{event:"*",schema:"public",table:"custodian_slip_items"},()=>{console.log("[Realtime] Custodian slip items changed, refreshing..."),l.invalidateQueries({queryKey:["custodian-summaries"]}),l.invalidateQueries({queryKey:["custodian-summary"]}),l.invalidateQueries({queryKey:["custodian-item-history"]}),l.invalidateQueries({queryKey:["custodian-current-items"]})}).on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},()=>{console.log("[Realtime] Inventory items changed, refreshing custodian data..."),l.invalidateQueries({queryKey:["custodian-summaries"]}),l.invalidateQueries({queryKey:["custodian-current-items"]})}).on("postgres_changes",{event:"*",schema:"public",table:"custodians"},()=>{console.log("[Realtime] Custodians changed, refreshing..."),l.invalidateQueries({queryKey:["custodians"]}),l.invalidateQueries({queryKey:["custodian-summaries"]})}).subscribe();return()=>{H.removeChannel(v)}},[l]);const{data:c=[],isLoading:d,error:u}=rr({queryKey:["custodians"],queryFn:()=>ms.getAll({search:t}),enabled:!0}),{data:f=[]}=rr({queryKey:["custodian-summaries"],queryFn:()=>ms.getAllSummaries(),enabled:!0,staleTime:30*1e3,refetchOnWindowFocus:!0}),{data:m}=rr({queryKey:["custodian-summary",n==null?void 0:n.id],queryFn:()=>ms.getSummary(n.id),enabled:!!n,staleTime:30*1e3,refetchOnWindowFocus:!0}),{data:p=[]}=rr({queryKey:["custodian-item-history",n==null?void 0:n.id],queryFn:()=>ms.getItemHistory(n.id,{includeReturned:!0}),enabled:!!n,staleTime:30*1e3,refetchOnWindowFocus:!0}),{data:x=[]}=rr({queryKey:["custodian-current-items",n==null?void 0:n.id],queryFn:()=>ms.getCurrentItems(n.id),enabled:!!n,staleTime:30*1e3,refetchOnWindowFocus:!0}),g=v=>{a(v),o(!0)},w=c.filter(v=>v.name.toLowerCase().includes(t.toLowerCase())||v.custodian_no.toLowerCase().includes(t.toLowerCase())||v.department_name&&v.department_name.toLowerCase().includes(t.toLowerCase()));return u?s.jsx("div",{className:"p-6",children:s.jsx(Te,{children:s.jsx(Ae,{className:"p-6",children:s.jsxs("div",{className:"text-center text-red-600",children:["Error loading custodians: ",u.message]})})})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Custodians"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage and view custodian information and item assignments"})]}),s.jsxs(le,{onClick:()=>e("/settings/lookups#custodians"),children:[s.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Add Custodian"]})]}),s.jsx(Te,{children:s.jsx(Ae,{className:"p-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(ke,{placeholder:"Search custodians by name, number, or department...",value:t,onChange:v=>r(v.target.value),className:"pl-10"})]})})}),s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsxs(et,{className:"flex items-center gap-2",children:[s.jsx(Cc,{className:"h-5 w-5"}),"All Custodians (",w.length,")"]})}),s.jsx(Ae,{children:d?s.jsx("div",{className:"text-center py-8",children:"Loading custodians..."}):s.jsxs(Lr,{children:[s.jsx(nn,{children:s.jsxs(ht,{children:[s.jsx(Se,{children:"Custodian No."}),s.jsx(Se,{children:"Name"}),s.jsx(Se,{children:"Position"}),s.jsx(Se,{children:"Department"}),s.jsx(Se,{children:"Status"}),s.jsx(Se,{children:"Current Items"}),s.jsx(Se,{children:"Total Value"}),s.jsx(Se,{children:"Actions"})]})}),s.jsx(sn,{children:w.map(v=>{const y=f.find(b=>b.custodian.id===v.id);return s.jsxs(ht,{children:[s.jsx(xe,{className:"font-mono",children:v.custodian_no}),s.jsx(xe,{className:"font-medium",children:v.name}),s.jsx(xe,{children:v.position||"-"}),s.jsx(xe,{children:v.department_name||"-"}),s.jsx(xe,{children:s.jsx(it,{variant:v.is_active?"default":"secondary",children:v.is_active?"Active":"Inactive"})}),s.jsx(xe,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(un,{className:"h-4 w-4"}),(y==null?void 0:y.currently_assigned_items)||0]})}),s.jsx(xe,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"inline-flex items-center justify-center h-4 w-4 rounded-sm bg-emerald-600 text-white text-[10px] font-bold",children:""}),"",((y==null?void 0:y.currently_assigned_value)||0).toLocaleString()]})}),s.jsx(xe,{children:s.jsxs(le,{variant:"outline",size:"sm",onClick:()=>g(v),children:[s.jsx(Kc,{className:"h-4 w-4 mr-1"}),"View Details"]})})]},v.id)})})]})})]}),s.jsx(fn,{open:i,onOpenChange:o,children:s.jsxs(Zr,{className:"max-w-6xl max-h-[90vh] overflow-y-auto print:max-w-full print:max-h-none print:overflow-visible",children:[s.jsxs(pn,{className:"print:block pr-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 print:flex-col print:items-start print:gap-2",children:[s.jsxs(gn,{className:"flex items-center gap-2 print:text-2xl",children:[s.jsx(Cc,{className:"h-5 w-5 print:hidden"}),"Custodian Details"]}),s.jsxs(le,{variant:"outline",size:"sm",onClick:()=>window.print(),className:"print:hidden",children:[s.jsx($r,{className:"h-4 w-4 mr-2"}),"Print"]})]}),s.jsx(bs,{className:"print:hidden",children:"View detailed information and item history for this custodian"})]}),n&&m&&s.jsxs("div",{className:"space-y-6 print:space-y-4",children:[s.jsxs(Te,{className:"print:shadow-none print:border print:border-gray-300",children:[s.jsx(ze,{children:s.jsxs(et,{className:"flex items-center justify-between",children:[s.jsx("span",{children:n.name}),s.jsx(it,{variant:n.is_active?"default":"secondary",children:n.is_active?"Active":"Inactive"})]})}),s.jsx(Ae,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Custodian Number"}),s.jsx("p",{className:"font-mono",children:n.custodian_no})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Position"}),s.jsx("p",{children:n.position||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Department"}),s.jsx("p",{children:n.department_name||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Activity"}),s.jsx("p",{children:m.last_activity_date?hs(new Date(m.last_activity_date),"MMM dd, yyyy"):"No activity"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(Te,{children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(un,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Items"}),s.jsx("p",{className:"text-2xl font-bold",children:m.currently_assigned_items})]})]})})}),s.jsx(Te,{children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex items-center justify-center h-5 w-5 rounded-sm bg-emerald-600 text-white text-[11px] font-bold",children:""}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Value"}),s.jsxs("p",{className:"text-2xl font-bold",children:["",m.currently_assigned_value.toLocaleString()]})]})]})})}),s.jsx(Te,{children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hn,{className:"h-5 w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Items"}),s.jsx("p",{className:"text-2xl font-bold",children:m.total_items_assigned})]})]})})}),s.jsx(Te,{children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex items-center justify-center h-5 w-5 rounded-sm bg-purple-600 text-white text-[11px] font-bold",children:""}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Value"}),s.jsxs("p",{className:"text-2xl font-bold",children:["",m.total_value_assigned.toLocaleString()]})]})]})})})]}),s.jsxs(ah,{defaultValue:"current",className:"w-full",children:[s.jsxs(id,{className:"grid w-full grid-cols-2",children:[s.jsxs(Cn,{value:"current",children:["Currently Assigned (",x.length,")"]}),s.jsxs(Cn,{value:"history",children:["All History (",p.length,")"]})]}),s.jsx(En,{value:"current",className:"space-y-4",children:s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{children:"Currently Assigned Items"})}),s.jsx(Ae,{children:x.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No items currently assigned to this custodian."}):s.jsxs(Lr,{className:"print:border print:border-gray-300",children:[s.jsx(nn,{className:"print:bg-gray-100",children:s.jsxs(ht,{className:"print:border-b print:border-gray-300",children:[s.jsx(Se,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Property Number"}),s.jsx(Se,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Description"}),s.jsx(Se,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Condition"}),s.jsx(Se,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Value"}),s.jsx(Se,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Assigned Date"})]})}),s.jsx(sn,{children:x.map(v=>s.jsxs(ht,{className:"print:border-b print:border-gray-300",children:[s.jsx(xe,{className:"font-mono print:border print:border-gray-300 print:px-2 print:py-1",children:v.property_number}),s.jsx(xe,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:v.description}),s.jsx(xe,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:s.jsx(it,{variant:v.condition==="Serviceable"?"default":"destructive",className:"print:bg-transparent print:text-black print:border print:border-gray-400",children:v.condition})}),s.jsxs(xe,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:["",v.total_cost.toLocaleString()]}),s.jsx(xe,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:v.assigned_date?hs(new Date(v.assigned_date),"MMM dd, yyyy"):"-"})]},v.id))})]})})]})}),s.jsx(En,{value:"history",className:"space-y-4",children:s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{children:"All Item History"})}),s.jsx(Ae,{children:p.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No item history found for this custodian."}):s.jsxs(Lr,{className:"print:border print:border-gray-300",children:[s.jsx(nn,{className:"print:bg-gray-100",children:s.jsxs(ht,{className:"print:border-b print:border-gray-300",children:[s.jsx(Se,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Property Number"}),s.jsx(Se,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Description"}),s.jsx(Se,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Condition"}),s.jsx(Se,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Value"}),s.jsx(Se,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Slip Number"}),s.jsx(Se,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Date Issued"}),s.jsx(Se,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:"Status"})]})}),s.jsx(sn,{children:p.map(v=>s.jsxs(ht,{className:"print:border-b print:border-gray-300",children:[s.jsx(xe,{className:"font-mono print:border print:border-gray-300 print:px-2 print:py-1",children:v.property_number}),s.jsx(xe,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:v.description}),s.jsx(xe,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:s.jsx(it,{variant:v.condition==="Serviceable"?"default":"destructive",className:"print:bg-transparent print:text-black print:border print:border-gray-400",children:v.condition})}),s.jsxs(xe,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:["",v.total_cost.toLocaleString()]}),s.jsx(xe,{className:"font-mono print:border print:border-gray-300 print:px-2 print:py-1",children:v.custodian_slip_number}),s.jsx(xe,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:v.date_issued?hs(new Date(v.date_issued),"MMM dd, yyyy"):"-"}),s.jsx(xe,{className:"print:border print:border-gray-300 print:px-2 print:py-1",children:s.jsx(it,{variant:v.is_currently_assigned?"default":"secondary",className:"print:bg-transparent print:text-black print:border print:border-gray-400",children:v.is_currently_assigned?"Currently Assigned":"Returned"})})]},v.id))})]})})]})})]})]})]})})]})}function aB(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var Sv="ScrollArea",[yk,LV]=Br(Sv),[iB,Rn]=yk(Sv),vk=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=h.useState(null),[d,u]=h.useState(null),[f,m]=h.useState(null),[p,x]=h.useState(null),[g,w]=h.useState(null),[v,y]=h.useState(0),[b,j]=h.useState(0),[_,S]=h.useState(!1),[E,D]=h.useState(!1),U=Ke(t,L=>c(L)),F=ed(a);return s.jsx(iB,{scope:r,type:n,dir:F,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:f,onContentChange:m,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:_,onScrollbarXEnabledChange:S,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:E,onScrollbarYEnabledChange:D,onCornerWidthChange:y,onCornerHeightChange:j,children:s.jsx(Oe.div,{dir:F,...o,ref:U,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});vk.displayName=Sv;var xk="ScrollAreaViewport",bk=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,o=Rn(xk,r),l=h.useRef(null),c=Ke(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(Oe.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});bk.displayName=xk;var _s="ScrollAreaScrollbar",Cv=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Rn(_s,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return h.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(oB,{...n,ref:t,forceMount:r}):a.type==="scroll"?s.jsx(lB,{...n,ref:t,forceMount:r}):a.type==="auto"?s.jsx(wk,{...n,ref:t,forceMount:r}):a.type==="always"?s.jsx(Ev,{...n,ref:t}):null});Cv.displayName=_s;var oB=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Rn(_s,e.__scopeScrollArea),[i,o]=h.useState(!1);return h.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(mr,{present:r||i,children:s.jsx(wk,{"data-state":i?"visible":"hidden",...n,ref:t})})}),lB=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Rn(_s,e.__scopeScrollArea),i=e.orientation==="horizontal",o=uh(()=>c("SCROLL_END"),100),[l,c]=aB("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),h.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let f=d[u];const m=()=>{const p=d[u];f!==p&&(c("SCROLL"),o()),f=p};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[a.viewport,i,c,o]),s.jsx(mr,{present:r||l!=="hidden",children:s.jsx(Ev,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:je(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:je(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),wk=h.forwardRef((e,t)=>{const r=Rn(_s,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=h.useState(!1),l=e.orientation==="horizontal",c=uh(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?d:u)}},10);return il(r.viewport,c),il(r.content,c),s.jsx(mr,{present:n||i,children:s.jsx(Ev,{"data-state":i?"visible":"hidden",...a,ref:t})})}),Ev=h.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=Rn(_s,e.__scopeScrollArea),i=h.useRef(null),o=h.useRef(0),[l,c]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Ck(l.viewport,l.content),u={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,p){return mB(m,o.current,l,p)}return r==="horizontal"?s.jsx(cB,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,p=k0(m,l,a.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=f(m,a.dir))}}):r==="vertical"?s.jsx(dB,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,p=k0(m,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=f(m))}}):null}),cB=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=Rn(_s,e.__scopeScrollArea),[o,l]=h.useState(),c=h.useRef(null),d=Ke(t,c,i.onScrollbarXChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(_k,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":dh(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(m),kk(m,f)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:af(o.paddingLeft),paddingEnd:af(o.paddingRight)}})}})}),dB=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=Rn(_s,e.__scopeScrollArea),[o,l]=h.useState(),c=h.useRef(null),d=Ke(t,c,i.onScrollbarYChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(_k,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":dh(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(i.viewport){const m=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(m),kk(m,f)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:af(o.paddingTop),paddingEnd:af(o.paddingBottom)}})}})}),[uB,jk]=yk(_s),_k=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:f,...m}=e,p=Rn(_s,r),[x,g]=h.useState(null),w=Ke(t,U=>g(U)),v=h.useRef(null),y=h.useRef(""),b=p.viewport,j=n.content-n.viewport,_=Kt(u),S=Kt(c),E=uh(f,10);function D(U){if(v.current){const F=U.clientX-v.current.left,L=U.clientY-v.current.top;d({x:F,y:L})}}return h.useEffect(()=>{const U=F=>{const L=F.target;(x==null?void 0:x.contains(L))&&_(F,j)};return document.addEventListener("wheel",U,{passive:!1}),()=>document.removeEventListener("wheel",U,{passive:!1})},[b,x,j,_]),h.useEffect(S,[n,S]),il(x,E),il(p.content,E),s.jsx(uB,{scope:r,scrollbar:x,hasThumb:a,onThumbChange:Kt(i),onThumbPointerUp:Kt(o),onThumbPositionChange:S,onThumbPointerDown:Kt(l),children:s.jsx(Oe.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:je(e.onPointerDown,U=>{U.button===0&&(U.target.setPointerCapture(U.pointerId),v.current=x.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),D(U))}),onPointerMove:je(e.onPointerMove,D),onPointerUp:je(e.onPointerUp,U=>{const F=U.target;F.hasPointerCapture(U.pointerId)&&F.releasePointerCapture(U.pointerId),document.body.style.webkitUserSelect=y.current,p.viewport&&(p.viewport.style.scrollBehavior=""),v.current=null})})})}),sf="ScrollAreaThumb",Nk=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=jk(sf,e.__scopeScrollArea);return s.jsx(mr,{present:r||a.hasThumb,children:s.jsx(fB,{ref:t,...n})})}),fB=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=Rn(sf,r),o=jk(sf,r),{onThumbPositionChange:l}=o,c=Ke(t,f=>o.onThumbChange(f)),d=h.useRef(void 0),u=uh(()=>{d.current&&(d.current(),d.current=void 0)},100);return h.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(u(),!d.current){const p=pB(f,l);d.current=p,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,u,l]),s.jsx(Oe.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:je(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),x=f.clientX-p.left,g=f.clientY-p.top;o.onThumbPointerDown({x,y:g})}),onPointerUp:je(e.onPointerUp,o.onThumbPointerUp)})});Nk.displayName=sf;var kv="ScrollAreaCorner",Sk=h.forwardRef((e,t)=>{const r=Rn(kv,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(hB,{...e,ref:t}):null});Sk.displayName=kv;var hB=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=Rn(kv,r),[i,o]=h.useState(0),[l,c]=h.useState(0),d=!!(i&&l);return il(a.scrollbarX,()=>{var f;const u=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),il(a.scrollbarY,()=>{var f;const u=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(u),o(u)}),d?s.jsx(Oe.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function af(e){return e?parseInt(e,10):0}function Ck(e,t){const r=e/t;return isNaN(r)?0:r}function dh(e){const t=Ck(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function mB(e,t,r,n="ltr"){const a=dh(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,u=r.content-r.viewport,f=n==="ltr"?[0,u]:[u*-1,0];return Ek([c,d],f)(e)}function k0(e,t,r="ltr"){const n=dh(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],d=og(e,c);return Ek([0,o],[0,l])(d)}function Ek(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function kk(e,t){return e>0&&e<t}var pB=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function uh(e,t){const r=Kt(e),n=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),h.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function il(e,t){const r=Kt(t);hr(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var Pk=vk,gB=bk,yB=Sk;const yg=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Pk,{ref:n,className:Ee("relative overflow-hidden",e),...r,children:[s.jsx(gB,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(Tk,{}),s.jsx(yB,{})]}));yg.displayName=Pk.displayName;const Tk=h.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(Cv,{ref:n,orientation:t,className:Ee("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(Nk,{className:"relative flex-1 rounded-full bg-border"})}));Tk.displayName=Cv.displayName;const of=["Donation","Reassignment","Relocate","Others"],wm={Draft:"Draft",Issued:"Issued",Completed:"Completed",Rejected:"Rejected"},P0={Draft:"Draft",Issued:"Issued",Completed:"Completed",Rejected:"Rejected",Pending:"Draft","In Transit":"Issued"},Hd={entityName:"",fromAccountableOfficer:"",fromAccountableOfficerDesignation:"",toAccountableOfficer:"",toAccountableOfficerDesignation:"",fundCluster:"",itrNumber:"",date:"",transferType:"Donation",otherTransferType:"",reason:"",status:"Draft",items:[]},Qd=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"})},vB=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},li=e=>e==null?"":new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e),No=(e,t)=>e?t?`${e} / ${t}`:e:"",Ml=async(e=[],t=[])=>{const r=new Date,n=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),o=t.some(u=>Number(u.amount||0)>5e3||u.subCategory==="High Value Expendable")?"SPHV":"SPLV",l=new RegExp(`^ITR ${n}-${a}-${o}-(\\d{4})$`);let c=0;for(const u of e){const f=l.exec(u.itrNumber);if(f){const m=parseInt(f[1],10);Number.isNaN(m)||(c=Math.max(c,m))}}try{const{data:u}=await H.from("property_transfers").select("transfer_number").like("transfer_number",`ITR ${n}-${a}-${o}-%`).order("transfer_number",{ascending:!1}).limit(100);if(u)for(const f of u){const m=l.exec(f.transfer_number);if(m){const p=parseInt(m[1],10);Number.isNaN(p)||(c=Math.max(c,p))}}}catch(u){console.warn("Could not check database for existing ITR numbers:",u)}const d=String(c+1).padStart(4,"0");return`ITR ${n}-${a}-${o}-${d}`},xB=async e=>{if(!e)return;const{slipIds:t,slipItemIds:r,propertyCardEntryIds:n,inventorySnapshots:a}=e;if(n.length)try{await H.from("property_card_entries").delete().in("id",n)}catch(i){console.error("Rollback: Failed to delete property card entries",i)}if(r.length)try{await H.from("custodian_slip_items").delete().in("id",r)}catch(i){console.error("Rollback: Failed to delete custodian slip items",i)}if(t.length)try{await H.from("custodian_slips").delete().in("id",t)}catch(i){console.error("Rollback: Failed to delete custodian slips",i)}for(const i of a)try{await H.from("inventory_items").update({custodian:i.custodian,custodian_position:i.custodian_position,assignment_status:i.assignment_status,assigned_date:i.assigned_date,ics_number:i.ics_number,ics_date:i.ics_date,updated_at:new Date().toISOString()}).eq("id",i.id)}catch(o){console.error(`Rollback: Failed to restore inventory item ${i.id}`,o)}},bB=e=>{const t=e.transfer_type_choice;if(t&&of.includes(t))return t;const r=(e.reason||"").toLowerCase();if(r.includes("donat"))return"Donation";if(r.includes("reassign"))return"Reassignment";if(r.includes("relocat"))return"Relocate";if(r.includes("loan")||r.includes("borrow"))return"Others";switch(e.transfer_type){case"Temporary":return"Relocate";case"Loan":return"Others";case"Permanent":default:return"Reassignment"}},wB=(e,t)=>{const r=t.map(o=>o.map(l=>`"${l.replace(/"/g,'""')}"`).join(",")).join(`\r
`),n=new Blob([r],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.setAttribute("download",e),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)},jB=e=>({propertyNumber:e.propertyNumber,description:e.description,quantity:e.quantity,condition:e.condition,dateAcquired:e.dateAcquired,amount:e.amount,icsSlipId:e.icsSlipId,icsSlipNumber:e.icsSlipNumber,icsDate:e.icsDate,inventoryItemId:e.inventoryItemId,custodianName:e.custodianName}),_B=(e,t=!1)=>{const r=e.items||[],n=Math.max(7-r.length,0),a=t?"bg-white border border-border rounded-lg shadow-sm text-foreground":"bg-white text-black border border-black",i=t?"p-6":"p-10",o=l=>l.icsSlipNumber&&l.icsDate?`${l.icsSlipNumber} / ${l.icsDate}`:l.icsSlipNumber?l.icsSlipNumber:l.icsDate?l.icsDate:"";return s.jsxs("div",{className:`${a} ${i}`,children:[s.jsx("div",{className:`flex justify-end text-xs mb-2 ${t?"text-muted-foreground":""}`,children:"Annex A.5"}),s.jsx("div",{className:"text-center border-b border-black pb-2 mb-4",children:s.jsx("h1",{className:"text-2xl font-bold tracking-wide",children:"INVENTORY TRANSFER REPORT"})}),s.jsx("table",{className:"w-full text-sm mb-4",children:s.jsx("tbody",{children:s.jsxs("tr",{children:[s.jsxs("td",{className:"pr-4 align-top",children:["Entity Name:",s.jsx("span",{className:"inline-block min-w-[250px] border-b border-black",children:e.entityName||""})]}),s.jsxs("td",{className:"align-top",children:["Fund Cluster:",s.jsx("span",{className:"inline-block min-w-[180px] border-b border-black",children:e.fundCluster||""})]})]})})}),s.jsx("table",{className:"w-full text-sm mb-2",children:s.jsx("tbody",{children:s.jsxs("tr",{children:[s.jsxs("td",{className:"pr-2 align-top w-[55%]",children:[s.jsxs("div",{children:["From Accountable Officer/Agency/Fund Cluster:",s.jsx("span",{className:"inline-block min-w-[230px] border-b border-black",children:No(e.fromAccountableOfficer,e.fromAccountableOfficerDepartment)||""})]}),s.jsxs("div",{className:"mt-2",children:["To Accountable Officer/Agency/Fund Cluster:",s.jsx("span",{className:"inline-block min-w-[230px] border-b border-black",children:No(e.toAccountableOfficer,e.toAccountableOfficerDepartment)||""})]})]}),s.jsxs("td",{className:"align-top",children:[s.jsxs("div",{children:["ITR No.:",s.jsx("span",{className:"inline-block min-w-[160px] border-b border-black",children:e.itrNumber||""})]}),s.jsxs("div",{className:"mt-2",children:["Date:",s.jsx("span",{className:"inline-block min-w-[160px] border-b border-black",children:e.date||""})]})]})]})})}),s.jsxs("div",{className:"border border-black p-2 mb-4",children:[s.jsx("div",{className:"text-sm mb-2 font-semibold",children:"Transfer Type: (check only one)"}),s.jsx("div",{className:"grid grid-cols-2 gap-y-1 text-sm",children:of.map(l=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex h-3.5 w-3.5 items-center justify-center border border-black text-[10px] font-bold",children:e.transferType===l?"":""}),s.jsxs("span",{children:[l==="Others"?"Others (Specify)":l,l==="Others"&&e.transferType==="Others"&&e.otherTransferType?`: ${e.otherTransferType}`:""]})]},l))})]}),s.jsxs("table",{className:"w-full border-collapse border border-black text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"border border-black p-2 text-left w-[12%]",children:"Date Acquired"}),s.jsx("th",{className:"border border-black p-2 text-left w-[10%]",children:"Item No."}),s.jsx("th",{className:"border border-black p-2 text-left w-[15%]",children:"ICS No./Date"}),s.jsx("th",{className:"border border-black p-2 text-left",children:"Description"}),s.jsx("th",{className:"border border-black p-2 text-right w-[12%]",children:"Amount"}),s.jsx("th",{className:"border border-black p-2 text-center w-[15%]",children:"Condition of Inventory"})]})}),s.jsxs("tbody",{children:[r.map((l,c)=>s.jsxs("tr",{className:"h-6 align-top",children:[s.jsx("td",{className:"border border-black p-1",children:l.dateAcquired||""}),s.jsx("td",{className:"border border-black p-1",children:l.propertyNumber||""}),s.jsx("td",{className:"border border-black p-1",children:o(l)}),s.jsxs("td",{className:"border border-black p-1",children:[l.description,l.quantity?` (Qty: ${l.quantity})`:""]}),s.jsx("td",{className:"border border-black p-1 text-right",children:l.amount!==void 0?li(l.amount):""}),s.jsx("td",{className:"border border-black p-1 text-center",children:l.condition||""})]},l.propertyNumber??c)),Array.from({length:n}).map((l,c)=>s.jsxs("tr",{className:"h-6",children:[s.jsx("td",{className:"border border-black p-1",children:""}),s.jsx("td",{className:"border border-black p-1",children:""}),s.jsx("td",{className:"border border-black p-1",children:""}),s.jsx("td",{className:"border border-black p-1",children:""}),s.jsx("td",{className:"border border-black p-1",children:""}),s.jsx("td",{className:"border border-black p-1",children:""})]},`blank-${c}`))]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"font-semibold text-sm mb-1",children:"Reasons for Transfer:"}),s.jsx("div",{className:"border border-black h-16 p-2 leading-tight text-xs",children:e.reason||""})]}),s.jsx("div",{className:"grid grid-cols-3 gap-4 text-xs mt-4 signature-section",children:["Approved by","Released/Issued by","Received by"].map(l=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"border-t border-black pt-2 text-center",children:s.jsx("p",{className:"font-semibold uppercase text-xs",children:l})}),s.jsx("div",{className:"space-y-2",children:["Signature:","Printed Name:","Designation:","Date:"].map(c=>{const d=l==="Approved by"?e.approvedBy||"":l==="Released/Issued by"?e.fromAccountableOfficer||e.issuedBy||"":e.toAccountableOfficer||e.receivedBy||"",u=l==="Released/Issued by"?e.fromAccountableOfficerDesignation||e.fromAccountableOfficerDepartment||"":l==="Received by"&&(e.toAccountableOfficerDesignation||e.toAccountableOfficerDepartment)||"";return s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"whitespace-nowrap",children:c}),c==="Printed Name:"?s.jsx("span",{className:"flex-1 border-b border-black h-4",children:d}):c==="Designation:"?s.jsx("span",{className:"flex-1 border-b border-black h-4",children:u}):s.jsx("span",{className:"flex-1 border-b border-black h-4"})]},c)})})]},l))})]})},NB=()=>{const[e,t]=h.useState([]),[r,n]=h.useState(!0),[a,i]=h.useState(null),[o,l]=h.useState(!1),[c,d]=h.useState(""),[u,f]=h.useState("All"),[m,p]=h.useState("All"),[x,g]=h.useState(""),[w,v]=h.useState(""),[y,b]=h.useState({}),[j,_]=h.useState(!1),[S,E]=h.useState([]),[D,U]=h.useState(""),{toast:F}=Zn(),L=ts(),$=Xs(),[R,I]=h.useState(Hd),[C,T]=h.useState(!1);h.useEffect(()=>{(async()=>{var P,V,se,te,oe,fe,De;try{n(!0);let Be,Qe;const jt=`
          id,
          transfer_number,
          from_department,
          to_department,
          transfer_type,
          transfer_type_choice,
          status,
          requested_by,
          approved_by,
          date_requested,
          date_approved,
          date_completed,
          reason,
          remarks,
          created_at,
          entity_name,
          fund_cluster,
          transfer_items (
            id,
            property_number,
            description,
            quantity,
            condition,
            inventory_item_id,
            from_custodian,
            to_custodian
          )
        `,bt=`
          id,
          transfer_number,
          from_department,
          to_department,
          transfer_type,
          status,
          requested_by,
          approved_by,
          date_requested,
          date_approved,
          date_completed,
          reason,
          remarks,
          created_at,
          transfer_items (
            id,
            property_number,
            description,
            quantity,
            condition
          )
        `,Wt=await H.from("property_transfers").select(jt).order("date_requested",{ascending:!1});if(Be=Wt.data,Qe=Wt.error,Qe&&((P=Qe.message)!=null&&P.includes("inventory_item_id")||(V=Qe.message)!=null&&V.includes("entity_name")||(se=Qe.message)!=null&&se.includes("fund_cluster")||(te=Qe.message)!=null&&te.includes("from_custodian")||(oe=Qe.message)!=null&&oe.includes("to_custodian")||(fe=Qe.message)!=null&&fe.includes("transfer_type_choice")||(De=Qe.message)!=null&&De.includes("column"))){console.warn("Optional transfer columns missing, falling back to legacy select:",Qe.message);const $e=await H.from("property_transfers").select(bt).order("date_requested",{ascending:!1});Be=$e.data,Qe=$e.error}if(Qe)throw console.error("Failed to load transfers",Qe),Qe;const lt=Array.from(new Set((Be||[]).flatMap($e=>[$e.from_department,$e.to_department]).filter($e=>!!$e))),st=new Map;if(lt.length){const{data:$e,error:St}=await H.from("custodians").select(`
              name,
              position,
              departments!custodians_department_id_fkey (
                name
              )
            `).in("name",lt);St?console.warn("Failed to load custodian metadata for transfers:",St.message):($e||[]).forEach(ft=>{var Lt,Ft;const Pr=(Lt=ft==null?void 0:ft.name)==null?void 0:Lt.toLowerCase();if(!Pr)return;const Ue=((Ft=ft==null?void 0:ft.departments)==null?void 0:Ft.name)||(ft==null?void 0:ft.department_name)||"";st.set(Pr,{department:Ue||void 0,designation:(ft==null?void 0:ft.position)||void 0})})}const on=await Promise.all((Be||[]).map(async $e=>{const St=$e.from_department?st.get($e.from_department.toLowerCase()):void 0,ft=$e.to_department?st.get($e.to_department.toLowerCase()):void 0,Pr=await Promise.all(($e.transfer_items||[]).map(async Ue=>{let Lt=null,Ft=null,At=null,bn=null;if(Ue.inventory_item_id){const{data:Ie}=await H.from("inventory_items").select("date_acquired, unit_cost, total_cost, property_number").eq("id",Ue.inventory_item_id).single();Ie&&(bn=Ie.date_acquired,At=Ie.total_cost||Ie.unit_cost||null);const{data:We}=await H.from("custodian_slip_items").select(`
                  custodian_slips!inner (
                    slip_number,
                    date_issued
                  )
                `).eq("inventory_item_id",Ue.inventory_item_id).order("created_at",{ascending:!1}).limit(1).single();if(We!=null&&We.custodian_slips){const Xe=Array.isArray(We.custodian_slips)?We.custodian_slips[0]:We.custodian_slips;Xe&&(Lt=Xe.slip_number,Ft=Xe.date_issued)}}if(!Lt&&Ue.from_custodian){const{data:Ie}=await H.from("custodian_slips").select("slip_number, date_issued").eq("custodian_name",Ue.from_custodian).order("date_issued",{ascending:!1}).limit(1).single();Ie&&(Lt=Ie.slip_number,Ft=Ie.date_issued)}if(!bn||At===null){const{data:Ie}=await H.from("inventory_items").select("date_acquired, unit_cost, total_cost").eq("property_number",Ue.property_number).limit(1).maybeSingle();Ie&&(bn=Ie.date_acquired,At=Ie.total_cost||Ie.unit_cost||null)}if(!Lt||!Ft){const{data:Ie}=await H.from("custodian_slip_items").select(`
                  date_issued,
                  custodian_slips!inner (
                    slip_number,
                    date_issued
                  )
                `).eq("property_number",Ue.property_number).order("date_issued",{ascending:!1}).limit(1).maybeSingle();if(Ie){const We=Ie,Xe=We.custodian_slips,It=Array.isArray(Xe)?Xe[0]:Xe;It&&It.slip_number&&(Lt=It.slip_number);const wt=We.date_issued||It&&It.date_issued||null;wt&&(Ft=wt)}}return{propertyNumber:Ue.property_number,description:Ue.description,quantity:Ue.quantity,condition:Ue.condition,inventoryItemId:Ue.inventory_item_id,icsSlipNumber:Lt,icsDate:Ft,amount:At,dateAcquired:bn}}));return{id:$e.id,entityName:$e.entity_name||"PROVINCIAL GOVERNMENT OF APAYAO",fromAccountableOfficer:$e.from_department,fromAccountableOfficerDepartment:St==null?void 0:St.department,fromAccountableOfficerDesignation:St==null?void 0:St.designation,toAccountableOfficer:$e.to_department,toAccountableOfficerDepartment:ft==null?void 0:ft.department,toAccountableOfficerDesignation:ft==null?void 0:ft.designation,fundCluster:$e.fund_cluster||"",itrNumber:$e.transfer_number,date:$e.date_requested,transferType:bB($e),reason:$e.reason,status:P0[$e.status]||"Draft",dateCompleted:$e.date_completed,items:Pr,history:[{timestamp:$e.created_at,status:P0[$e.status]||"Draft",action:"Transfer created",details:`Created ${$e.transfer_number}`}],approvedBy:$e.approved_by||"",issuedBy:$e.requested_by||"",receivedBy:$e.to_department||""}}));t(on)}catch(Be){console.error("Error loading transfers:",Be),F({title:"Error loading transfers",description:"Could not load transfers from database",variant:"destructive"})}finally{n(!1)}})()},[F]);const re=h.useMemo(()=>["PROVINCIAL GOVERNMENT OF APAYAO","CITY OF LUNA","MUNICIPALITY OF FLORA","PROVINCIAL ACCOUNTING OFFICE"],[]),{data:K=[],isLoading:z}=rr({queryKey:["transfer-ics-options"],queryFn:async()=>{const{data:N,error:P}=await H.from("custodian_slip_items").select(`
          id,
          property_number,
          description,
          quantity,
          unit,
          date_issued,
          inventory_item_id,
          inventory_items (
            id,
            date_acquired,
            property_number,
            total_cost,
            condition,
            assignment_status,
            custodian,
            custodian_position,
            ics_number,
            ics_date,
            status
          ),
          custodian_slips!inner (
            id,
            slip_number,
            date_issued,
            custodian_name
          )
        `).order("date_issued",{ascending:!1}).limit(500);if(P)throw console.error("Failed to load custodian slip items for transfers",P),P;const V=[];for(const se of N||[]){const te=Array.isArray(se.inventory_items)?se.inventory_items[0]:se.inventory_items,oe=Array.isArray(se.custodian_slips)?se.custodian_slips[0]:se.custodian_slips;if(!te||!oe)continue;const fe=(oe.custodian_name||"").toLowerCase().trim(),De=(te.custodian||"").toLowerCase().trim(),Be=te.assignment_status||"";!fe||fe!==De||Be&&Be!=="Assigned"||V.push({id:se.id,propertyNumber:se.property_number||"",description:se.description||(te==null?void 0:te.description)||"",quantity:se.quantity||0,condition:(te==null?void 0:te.condition)||"",amount:Number((te==null?void 0:te.total_cost)??0),dateAcquired:(te==null?void 0:te.date_acquired)||"",custodianName:(oe==null?void 0:oe.custodian_name)||"",currentCustodian:(te==null?void 0:te.custodian)||"",assignmentStatus:Be||"",icsSlipId:(oe==null?void 0:oe.id)||"",icsSlipNumber:(oe==null?void 0:oe.slip_number)||"",icsDate:se.date_issued||(oe==null?void 0:oe.date_issued)||"",inventoryItemId:se.inventory_item_id||(te==null?void 0:te.id)||""})}return console.log("Loaded ICS options for transfer (items join):",{totalItems:V.length,custodians:[...new Set(V.map(se=>se.custodianName))],sampleItems:V.slice(0,3)}),V},staleTime:5*60*1e3}),{data:ae=[]}=rr({queryKey:["current-assigned-items",R.fromAccountableOfficer],enabled:!!R.fromAccountableOfficer,queryFn:async()=>{if(!R.fromAccountableOfficer)return[];const{data:N,error:P}=await H.from("inventory_items").select("id, property_number, description, quantity, condition, total_cost, date_acquired, assignment_status, custodian").eq("custodian",R.fromAccountableOfficer).eq("assignment_status","Assigned").eq("status","Active").limit(500);if(P)throw P;return(N||[]).map(V=>({id:V.id,propertyNumber:V.property_number,description:V.description||"",quantity:V.quantity||1,condition:V.condition||"",amount:Number(V.total_cost??0),dateAcquired:V.date_acquired||"",custodianName:R.fromAccountableOfficer,currentCustodian:V.custodian||R.fromAccountableOfficer,assignmentStatus:V.assignment_status||"Assigned",icsSlipId:"",icsSlipNumber:"",icsDate:"",inventoryItemId:V.id}))},staleTime:60*1e3}),ge=h.useMemo(()=>{const N=R.fromAccountableOfficer?R.fromAccountableOfficer.toLowerCase().trim():"",P=new Set(R.items.map(fe=>fe.propertyNumber));if(!N)return[];const V=K.filter(fe=>P.has(fe.propertyNumber)||!N||fe.assignmentStatus&&fe.assignmentStatus!=="Assigned"?!1:(fe.currentCustodian||fe.custodianName||"").toLowerCase().trim()===N),se=(ae||[]).filter(fe=>!P.has(fe.propertyNumber)&&fe.assignmentStatus==="Assigned"&&N&&(fe.currentCustodian||"").toLowerCase().trim()===N),te=new Map;[...V,...se].forEach(fe=>{te.has(fe.propertyNumber)||te.set(fe.propertyNumber,fe)});let oe=Array.from(te.values());return D&&(oe=oe.filter(fe=>`${fe.propertyNumber} ${fe.description} ${fe.icsSlipNumber} ${fe.custodianName||""}`.toLowerCase().includes(D.toLowerCase()))),console.log("Filtered ICS items:",{fromOfficer:R.fromAccountableOfficer,totalOptions:K.length+((ae==null?void 0:ae.length)||0),filteredCount:oe.length,items:oe.map(fe=>({custodian:fe.custodianName,propertyNumber:fe.propertyNumber}))}),oe},[K,ae,R.fromAccountableOfficer,R.items,D]),W=h.useMemo(()=>{const N=c.toLowerCase();return e.filter(P=>{const se=[P.itrNumber,P.entityName,P.fromAccountableOfficer,P.toAccountableOfficer,P.reason,P.items.map(Be=>`${Be.propertyNumber} ${Be.description}`).join(" ")].join(" ").toLowerCase().includes(N),te=u==="All"||P.status===u,oe=m==="All"||P.transferType===m,fe=!x||P.date>=x,De=!w||P.date<=w;return se&&te&&oe&&fe&&De})},[e,c,u,m,x,w]);h.useEffect(()=>{o?(Ml(e,[]).then(N=>{I(P=>({...Hd,...P,itrNumber:P.itrNumber||N,status:"Draft"}))}),b({})):(I(Hd),E([]),_(!1))},[o,e]);const M=N=>{const P={};return N.entityName.trim()||(P.entityName="Entity name is required."),N.fundCluster.trim()||(P.fundCluster="Fund cluster is required."),N.itrNumber.trim()||(P.itrNumber="ITR number is required."),N.date.trim()||(P.date="Date is required."),N.fromAccountableOfficer.trim()||(P.fromOfficer="Select the releasing accountable officer."),N.toAccountableOfficer.trim()||(P.toOfficer="Select the receiving accountable officer."),N.reason.trim()||(P.reason="Please provide the reason for transfer."),N.items.length||(P.items="Select at least one item from the ICS list."),P},Y=async()=>{const N=await Ml(e,R.items||[]);I(P=>({...P,itrNumber:N}))},X=async()=>{var P,V,se,te,oe,fe,De,Be,Qe,jt,bt,Wt;const N=M(R);if(Object.keys(N).length>0){b(N),F({title:"Missing information",description:"Please fill in the required fields before saving the transfer.",variant:"destructive"});return}try{T(!0);const lt=new Date().toISOString();let st=R.itrNumber;st||(st=await Ml(e,R.items||[]));const{data:on,error:$e}=await H.from("property_transfers").select("id").eq("transfer_number",st).maybeSingle();if($e)throw console.error("Error checking existing transfer number:",$e),$e;on&&(st=await Ml(e));const St=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}`,Pr={Donation:"Permanent",Reassignment:"Permanent",Relocate:"Temporary",Others:"Temporary"}[R.transferType]??"Permanent",{data:Ue}=await H.auth.getUser(),Lt=(P=Ue==null?void 0:Ue.user)==null?void 0:P.id;if(!Lt){F({title:"Authentication required",description:"You must be signed in to create transfers.",variant:"destructive"});return}let Ft,At=0;const bn=3;for(;At<bn;){Ft=null;const Ve={id:St,transfer_number:st,from_department:R.fromAccountableOfficer,to_department:R.toAccountableOfficer,transfer_type:Pr,transfer_type_choice:R.transferType,status:wm[R.status]||"Pending",date_requested:R.date,reason:R.reason,requested_by:Lt},rt={...Ve,entity_name:R.entityName.trim(),fund_cluster:R.fundCluster.trim()};let jr=await H.from("property_transfers").insert(rt),$t=jr.error;if($t&&((V=$t.message)!=null&&V.includes("entity_name")||(se=$t.message)!=null&&se.includes("fund_cluster")||(te=$t.message)!=null&&te.includes("transfer_type_choice"))&&(jr=await H.from("property_transfers").insert(Ve),$t=jr.error),$t){if($t.code==="23505"&&((oe=$t.message)!=null&&oe.includes("transfer_number"))){console.warn(`Duplicate ITR number ${st} detected, generating new number...`),st=await Ml(e,R.items||[]),At++;continue}Ft=$t;break}else break}if(Ft)throw Ft;const Ie=R.items.map(Ve=>{var rt;return{id:((rt=crypto.randomUUID)==null?void 0:rt.call(crypto))||`${Date.now()}-${Math.random()}`,transfer_id:St,property_number:Ve.propertyNumber,description:Ve.description,quantity:Ve.quantity,condition:Ve.condition,inventory_item_id:Ve.inventoryItemId||null,ics_slip_id:Ve.icsSlipId||null,custodian_slip_item_id:Ve.icsSlipId||null,from_custodian:R.fromAccountableOfficer,to_custodian:R.toAccountableOfficer}}),We=R.items.map(Ve=>{var rt;return{id:((rt=crypto.randomUUID)==null?void 0:rt.call(crypto))||`${Date.now()}-${Math.random()}`,transfer_id:St,property_number:Ve.propertyNumber,description:Ve.description,quantity:Ve.quantity,condition:Ve.condition}});if(Ie.length>0){let rt=(await H.from("transfer_items").insert(Ie)).error;if(rt&&(rt.code==="PGRST204"||(fe=rt.message)!=null&&fe.includes("inventory_item_id")||(De=rt.message)!=null&&De.includes("ics_slip_id")||(Be=rt.message)!=null&&Be.includes("custodian_slip_item_id")||(Qe=rt.message)!=null&&Qe.includes("from_custodian")||(jt=rt.message)!=null&&jt.includes("to_custodian"))&&(rt=(await H.from("transfer_items").insert(We)).error),rt)throw rt}let Xe=R.toAccountableOfficerDesignation||"";if(!Xe&&R.toAccountableOfficer){const{data:Ve}=R.toAccountableOfficerId?await H.from("custodians").select("position").eq("id",R.toAccountableOfficerId).single():await H.from("custodians").select("position").eq("name",R.toAccountableOfficer).single();Xe=(Ve==null?void 0:Ve.position)||""}for(const Ve of R.items){let rt=Ve.inventoryItemId;if(!rt&&Ve.propertyNumber){const{data:$t}=await H.from("inventory_items").select("id").eq("property_number",Ve.propertyNumber).single();$t&&(rt=$t.id)}rt&&(await H.from("inventory_items").update({custodian:R.toAccountableOfficer,custodian_position:Xe,assignment_status:"Assigned",assigned_date:new Date().toISOString().split("T")[0],updated_at:new Date().toISOString()}).eq("id",rt)).error&&await H.from("inventory_items").update({custodian:R.toAccountableOfficer}).eq("id",rt);const{data:jr}=await H.from("property_cards").select("id").eq("property_number",Ve.propertyNumber).single();if(jr){let $t=0;const{data:xl}=await H.from("property_card_entries").select("balance_qty").eq("property_card_id",jr.id).order("date",{ascending:!1}).limit(1).single();xl&&typeof xl.balance_qty=="number"&&($t=xl.balance_qty);const ud=Ve.quantity||1,hh=Math.max(0,($t||0)-ud);await H.from("property_card_entries").insert({property_card_id:jr.id,date:new Date().toISOString().split("T")[0],reference:`ITR ${st}`,receipt_qty:0,unit_cost:0,total_cost:0,issue_item_no:Ve.propertyNumber||"",issue_qty:ud,office_officer:`${R.toAccountableOfficer}${Xe?` (${Xe})`:""}`,balance_qty:hh,amount:0,remarks:`Transferred from ${R.fromAccountableOfficer} to ${R.toAccountableOfficer}`,related_transfer_id:St})}}$.invalidateQueries({queryKey:["inventory-items"]}),$.invalidateQueries({queryKey:["custodian-summaries"]}),$.invalidateQueries({queryKey:["custodian-summary"]}),$.invalidateQueries({queryKey:["custodian-current-items"]}),$.invalidateQueries({queryKey:["custodian-item-history"]}),$.refetchQueries({queryKey:["inventory-items"]}),$.refetchQueries({queryKey:["custodian-summaries"]});let It,wt;const pr=await H.from("property_transfers").select(`
          id,
          transfer_number,
          entity_name,
          fund_cluster,
          from_department,
          to_department,
          transfer_type,
          transfer_type_choice,
          status,
          requested_by,
          approved_by,
          date_requested,
          date_approved,
          date_completed,
          reason,
          remarks,
          created_at,
          transfer_items (
            id,
            property_number,
            description,
            quantity,
            condition,
            inventory_item_id
          )
        `).order("date_requested",{ascending:!1});if(It=pr.data,wt=pr.error,wt&&((bt=wt.message)!=null&&bt.includes("column")||(Wt=wt.message)!=null&&Wt.includes("inventory_item_id"))){console.warn("inventory_item_id column not found in reload, loading without it");const Ve=await H.from("property_transfers").select(`
            id,
            transfer_number,
            from_department,
            to_department,
            transfer_type,
            status,
            requested_by,
            approved_by,
            date_requested,
            date_approved,
            date_completed,
            reason,
            remarks,
            created_at,
            transfer_items (
              id,
              property_number,
              description,
              quantity,
              condition
            )
          `).order("date_requested",{ascending:!1});It=Ve.data,wt=Ve.error}wt&&console.error("Failed to reload transfers after creation:",wt);const wr={id:St,entityName:R.entityName.trim(),fromAccountableOfficer:R.fromAccountableOfficer.trim(),fromAccountableOfficerDepartment:R.fromAccountableOfficerDepartment,fromAccountableOfficerDesignation:R.fromAccountableOfficerDesignation,fromAccountableOfficerId:R.fromAccountableOfficerId,toAccountableOfficer:R.toAccountableOfficer.trim(),toAccountableOfficerDepartment:R.toAccountableOfficerDepartment,toAccountableOfficerDesignation:R.toAccountableOfficerDesignation,toAccountableOfficerId:R.toAccountableOfficerId,fundCluster:R.fundCluster.trim(),itrNumber:st,date:R.date,transferType:R.transferType,otherTransferType:R.otherTransferType,reason:R.reason.trim(),status:R.status,items:R.items,history:[{timestamp:new Date().toISOString(),status:R.status,action:"Transfer created",details:`Created ITR ${st}`}]};t(Ve=>[wr,...Ve]),I(Hd),l(!1),b({}),E([]),F({title:"Transfer saved",description:`Transfer ${st} has been saved and related records updated.`}),T(!1)}catch(lt){console.error("Error creating transfer:",lt),T(!1),F({title:"Error saving transfer",description:lt instanceof Error?lt.message:"Failed to save transfer",variant:"destructive"})}},ie=async(N,P)=>{var V;try{T(!0);const se=P==="Completed"?new Date().toISOString().split("T")[0]:null,te=e.find(fe=>fe.id===N);if(!te)throw new Error("Transfer not found");const{error:oe}=await H.from("property_transfers").update({status:wm[P]||"Pending",...se&&{date_completed:se}}).eq("id",N);if(oe)throw oe;if(P==="Completed"&&te.items&&te.items.length>0){console.log(` Completing transfer ${te.itrNumber}: Creating new ICS for receiving custodian ${te.toAccountableOfficer}`);let fe=te.toAccountableOfficerDesignation||"";if(!fe&&te.toAccountableOfficer){const{data:jt}=te.toAccountableOfficerId?await H.from("custodians").select("position").eq("id",te.toAccountableOfficerId).single():await H.from("custodians").select("position").eq("name",te.toAccountableOfficer).single();fe=(jt==null?void 0:jt.position)||""}const De={},Be=[],Qe={slipIds:[],slipItemIds:[],propertyCardEntryIds:[],inventorySnapshots:[]};try{for(const bt of te.items){let Wt=bt.inventoryItemId;if(!Wt&&bt.propertyNumber){const{data:st}=await H.from("inventory_items").select("id").eq("property_number",bt.propertyNumber).single();st&&(Wt=st.id)}if(!Wt)throw new Error(`Inventory item not found for property number ${bt.propertyNumber}`);const{data:lt}=await H.from("inventory_items").select("*").eq("id",Wt).single();if(!lt)throw new Error(`Inventory data missing for property number ${bt.propertyNumber}`);De[lt.sub_category||"Small Value Expendable"]||(De[lt.sub_category||"Small Value Expendable"]=[]),De[lt.sub_category||"Small Value Expendable"].push(lt),Be.push(lt),Qe.inventorySnapshots.some(st=>st.id===lt.id)||Qe.inventorySnapshots.push({id:lt.id,custodian:lt.custodian,custodian_position:lt.custodian_position,assignment_status:lt.assignment_status,assigned_date:lt.assigned_date,ics_number:lt.ics_number,ics_date:lt.ics_date})}console.log(` Grouped ${Be.length} items into ${Object.keys(De).length} sub-category(ies):`,Object.keys(De));const jt=[];for(const bt of Object.keys(De)){const Wt=De[bt];console.log(` Creating new ICS for ${bt} with ${Wt.length} item(s) for ${te.toAccountableOfficer}`);const lt=bt==="Small Value Expendable"?"SPLV":"SPHV",{data:st,error:on}=await H.rpc("generate_ics_number",{sub_category_prefix:lt});let $e=st;if(on){console.error("Error generating ICS number for transfer:",on);const{data:Ue}=await H.rpc("generate_ics_number",{sub_category_prefix:null});$e=Ue||`TRANSFER-${Date.now()}`}const St={slip_number:$e,custodian_name:te.toAccountableOfficer,designation:fe||"Staff",office:te.toAccountableOfficerDepartment||"Administration",date_issued:se||new Date().toISOString().split("T")[0],issued_by:"System Transfer",received_by:te.toAccountableOfficer,slip_status:"Issued"},{data:ft,error:Pr}=await H.from("custodian_slips").insert(St).select().single();if(Pr)throw console.error("Error creating new ICS for transfer:",Pr),new Error(`Failed to create new ICS for ${te.toAccountableOfficer}: ${Pr.message}`);Qe.slipIds.push(ft.id),console.log(` Created new ICS ${$e} for ${te.toAccountableOfficer}`),jt.push(ft.id);for(const Ue of Wt){const Lt=Ue.quantity||1,Ft=Ue.unit_cost||0,At=Lt*Ft,bn=Ue.unit_of_measure||Ue.unit||Ue.uom||"unit",Ie=(Ue.description||(Ue.model?`${Ue.brand?Ue.brand+" ":""}${Ue.model}`:Ue.brand)||"").trim(),{error:We}=await H.from("inventory_items").update({custodian:null,custodian_position:null,assignment_status:"Available",assigned_date:null,ics_number:null,ics_date:null,updated_at:new Date().toISOString()}).eq("id",Ue.id);if(We)throw We;const Xe={slip_id:ft.id,inventory_item_id:Ue.id,property_number:Ue.property_number,description:Ie,quantity:Lt,unit:bn,unit_cost:Ft,total_cost:At,amount:At,date_issued:se||new Date().toISOString().split("T")[0]},{data:It,error:wt}=await H.from("custodian_slip_items").insert(Xe).select("id").single();if(wt)throw console.error(`Failed to create slip item for ${Ue.property_number}:`,wt),new Error(`Failed to add ${Ue.property_number} to new ICS: ${wt.message}`);Qe.slipItemIds.push(It.id);const{error:pr}=await H.from("inventory_items").update({ics_number:$e,ics_date:se||new Date().toISOString().split("T")[0],updated_at:new Date().toISOString()}).eq("id",Ue.id);if(pr)throw console.error(`Failed to update inventory item ${Ue.property_number}:`,pr),pr;console.log(` Updated inventory item ${Ue.property_number} to custodian ${te.toAccountableOfficer} with ICS ${$e}`);const{data:wr}=await H.from("property_cards").select("id").eq("inventory_item_id",Ue.id).single();if(wr){let Ve=0;const{data:rt}=await H.from("property_card_entries").select("balance_qty").eq("property_card_id",wr.id).order("date",{ascending:!1}).limit(1).single();rt&&typeof rt.balance_qty=="number"&&(Ve=rt.balance_qty);const{data:jr}=await H.from("property_card_entries").insert({property_card_id:wr.id,date:se||new Date().toISOString().split("T")[0],reference:`ITR ${te.itrNumber}`,receipt_qty:0,unit_cost:0,total_cost:0,issue_item_no:Ue.property_number,issue_qty:Lt,office_officer:`Transfer to ${te.toAccountableOfficer}`,balance_qty:Math.max(0,Ve-Lt),amount:0,remarks:`Transferred to ${te.toAccountableOfficer} via ITR ${te.itrNumber}`,related_transfer_id:N}).select("id").single();jr!=null&&jr.id&&Qe.propertyCardEntryIds.push(jr.id);const{data:$t}=await H.from("property_card_entries").insert({property_card_id:wr.id,date:se||new Date().toISOString().split("T")[0],reference:`ICS ${$e}`,receipt_qty:Lt,unit_cost:Ft,total_cost:At,issue_item_no:"",issue_qty:0,office_officer:`${te.toAccountableOfficer}${fe?` (${fe})`:""}`,balance_qty:Lt,amount:At,remarks:`Received from ${te.fromAccountableOfficer} via ITR ${te.itrNumber}, assigned ICS ${$e}`,related_slip_id:ft.id,related_transfer_id:N}).select("id").single();$t!=null&&$t.id&&Qe.propertyCardEntryIds.push($t.id),console.log(` Created property card entries for ${Ue.property_number}`)}}}console.log(` Transfer completed: Created ${jt.length} new ICS slip(s) for ${te.toAccountableOfficer}`)}catch(jt){throw await xB(Qe),jt}$.invalidateQueries({queryKey:["inventory-items"]}),$.invalidateQueries({queryKey:["custodian-summaries"]}),$.invalidateQueries({queryKey:["custodian-summary"]}),$.invalidateQueries({queryKey:["custodian-current-items"]}),$.invalidateQueries({queryKey:["custodian-item-history"]}),$.invalidateQueries({queryKey:["annex-custodian-slips"]}),$.invalidateQueries({queryKey:["annex-property-cards"]}),$.invalidateQueries({queryKey:["available-inventory-for-slips"]}),$.invalidateQueries({queryKey:["transfer-ics-options"]}),$.invalidateQueries({queryKey:["current-assigned-items"]}),$.refetchQueries({queryKey:["inventory-items"]}),$.refetchQueries({queryKey:["custodian-summaries"]}),$.refetchQueries({queryKey:["annex-custodian-slips"]}),$.refetchQueries({queryKey:["current-assigned-items"]}),$.refetchQueries({queryKey:["transfer-ics-options"]})}t(fe=>fe.map(De=>{if(De.id!==N)return De;const Be=new Date().toISOString();return{...De,status:P,dateCompleted:P==="Completed"?se:De.dateCompleted,history:[...De.history,{timestamp:Be,status:P,action:`Status changed to ${P}`,details:P==="Completed"?"Transfer marked as completed. Items have been reassigned to the new custodian.":P==="Rejected"?"Transfer was rejected.":void 0}]}})),F({title:"Transfer completed",description:P==="Completed"?`Transfer completed successfully! ${((V=te.items)==null?void 0:V.length)||0} item(s) have been transferred to ${te.toAccountableOfficer} with new ICS slip(s) created.`:`Transfer marked as ${P}.`}),T(!1)}catch(se){console.error("Error updating transfer status:",se),F({title:"Error updating status",description:se instanceof Error?se.message:"Failed to update transfer status",variant:"destructive"}),T(!1)}},ne=$s({mutationFn:async N=>{const{error:P}=await H.from("property_transfers").update({status:wm.Issued,updated_at:new Date().toISOString()}).eq("id",N);if(P)throw new Error(`Failed to confirm transfer: ${P.message}`)},onSuccess:(N,P)=>{F({title:"Success",description:"Transfer has been officially confirmed and cannot be deleted"}),T(!1),t(V=>V.map(se=>{if(se.id!==P)return se;const te=new Date().toISOString();return{...se,status:"Issued",history:[...se.history,{timestamp:te,status:"Issued",action:"Transfer confirmed",details:`Confirmed ${se.itrNumber}`}]}})),$.invalidateQueries({queryKey:["property-transfers"]}),$.invalidateQueries({queryKey:["inventory-items"]}),$.invalidateQueries({queryKey:["custodian-summaries"]})},onError:N=>{T(!1),F({title:"Error",description:N.message,variant:"destructive"})}}),O=N=>{confirm("Are you sure you want to officially confirm this transfer? Once confirmed, it cannot be deleted and will be marked as an official document.")&&(T(!0),ne.mutate(N))},ee=async N=>{T(!0);const P=e.find(V=>V.id===N);if((P==null?void 0:P.status)==="Issued"){F({title:"Cannot delete",description:"Issued transfers cannot be deleted. Only Draft transfers can be deleted.",variant:"destructive"}),T(!1);return}if(!window.confirm("Are you sure you want to delete this transfer? This action cannot be undone.")){T(!1);return}try{const{error:V}=await H.from("transfer_items").delete().eq("transfer_id",N);if(V)throw V;const{error:se}=await H.from("property_transfers").delete().eq("id",N);if(se)throw se;t(te=>te.filter(oe=>oe.id!==N)),F({title:"Transfer deleted",description:"The transfer has been permanently removed."}),T(!1)}catch(V){console.error("Error deleting transfer:",V),T(!1),F({title:"Error deleting transfer",description:V instanceof Error?V.message:"Failed to delete transfer",variant:"destructive"})}},de=N=>{i(N),setTimeout(()=>{window.print()},300)},ce=()=>{if(!W.length){F({title:"Nothing to export",description:"Adjust the filters to include at least one transfer before exporting.",variant:"destructive"});return}const N=[["ITR No.","Entity","Fund Cluster","From Officer","To Officer","Date","Transfer Type","Status","Reason","Item Count","Items","Total Amount"]];W.forEach(P=>{const V=P.items.reduce((te,oe)=>te+(oe.amount??0),0),se=P.items.map(te=>`${te.propertyNumber} - ${te.description}`).join("; ");N.push([P.itrNumber,P.entityName,P.fundCluster,No(P.fromAccountableOfficer,P.fromAccountableOfficerDepartment),No(P.toAccountableOfficer,P.toAccountableOfficerDepartment),P.date,P.transferType==="Others"&&P.otherTransferType?`${P.transferType} (${P.otherTransferType})`:P.transferType,P.status,P.reason,P.items.length.toString(),se,V?li(V):""])}),wB(`inventory-transfers-${Date.now()}.csv`,N)},me=N=>{I(P=>({...P,items:P.items.filter(V=>V.propertyNumber!==N)}))},He=()=>{if(!R.fromAccountableOfficer){F({title:"Select an accountable officer first",description:"Please choose the releasing accountable officer to filter the ICS items.",variant:"destructive"});return}_(!0)},ut=N=>{E(P=>P.includes(N)?P.filter(V=>V!==N):[...P,N])},J=()=>{const N=ge.filter(P=>S.includes(P.id));if(!N.length){F({title:"No items selected",description:"Choose at least one item from the list before confirming.",variant:"destructive"});return}I(P=>{const V=new Map;return P.items.forEach(se=>V.set(se.propertyNumber,se)),N.map(jB).forEach(se=>V.set(se.propertyNumber,se)),{...P,items:Array.from(V.values())}}),E([]),_(!1)},Ne=(N,P,V)=>{I(se=>({...se,items:se.items.map(te=>te.propertyNumber===N?{...te,[P]:V}:te)}))};h.useMemo(()=>({id:"preview",entityName:R.entityName,fromAccountableOfficer:R.fromAccountableOfficer,fromAccountableOfficerDepartment:R.fromAccountableOfficerDepartment,fromAccountableOfficerDesignation:R.fromAccountableOfficerDesignation,toAccountableOfficer:R.toAccountableOfficer,toAccountableOfficerDepartment:R.toAccountableOfficerDepartment,toAccountableOfficerDesignation:R.toAccountableOfficerDesignation,fundCluster:R.fundCluster,itrNumber:R.itrNumber,date:R.date,transferType:R.transferType,otherTransferType:R.otherTransferType,reason:R.reason,status:R.status,items:R.items,history:[]}),[R]);const[Ye,Me]=h.useState(!1),dt=R.items.reduce((N,P)=>N+(P.amount??0),0);return o&&(R.entityName||R.fundCluster||R.itrNumber||R.items.length>0||R.reason),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Property Transfers"}),s.jsxs(le,{onClick:()=>l(!0),className:"flex items-center gap-2",children:[s.jsx(Ua,{className:"h-4 w-4"}),"Create Transfer"]})]}),s.jsxs("div",{className:"grid gap-4 lg:grid-cols-2 xl:grid-cols-3",children:[s.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[s.jsx(Yn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(ke,{placeholder:"Search by ITR no., officer, reason, or item",value:c,onChange:N=>d(N.target.value),className:"pl-10"})]}),s.jsxs(Dt,{value:u,onValueChange:f,children:[s.jsx(kt,{children:s.jsx(Mt,{placeholder:"Filter by status"})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"All",children:"All status"}),s.jsx(we,{value:"Draft",children:"Draft"}),s.jsx(we,{value:"Issued",children:"Issued"}),s.jsx(we,{value:"Completed",children:"Completed"}),s.jsx(we,{value:"Rejected",children:"Rejected"})]})]}),s.jsxs(Dt,{value:m,onValueChange:p,children:[s.jsx(kt,{children:s.jsx(Mt,{placeholder:"Filter by transfer type"})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"All",children:"All types"}),of.map(N=>s.jsx(we,{value:N,children:N},N))]})]}),s.jsx(ke,{type:"date",value:x,onChange:N=>g(N.target.value),placeholder:"From date"}),s.jsx(ke,{type:"date",value:w,onChange:N=>v(N.target.value),placeholder:"To date"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(le,{type:"button",variant:"outline",onClick:ce,className:"flex-1 sm:flex-none",children:[s.jsx(wy,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),s.jsx(le,{type:"button",variant:"ghost",className:"flex-1 sm:flex-none",onClick:()=>{f("All"),p("All"),g(""),v(""),d("")},children:"Clear Filters"})]})]}),o&&s.jsx("div",{className:"grid gap-6 xl:grid-cols-[minmax(0,1fr)_420px]",children:s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{children:"Create Inventory Transfer Report"})}),s.jsxs(Ae,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{htmlFor:"entityName",children:"Entity Name *"}),s.jsx(ke,{id:"entityName",list:"entity-suggestions",value:R.entityName,onChange:N=>I({...R,entityName:N.target.value}),placeholder:"PROVINCIAL GOVERNMENT OF APAYAO"}),s.jsx("datalist",{id:"entity-suggestions",children:re.map(N=>s.jsx("option",{value:N},N))}),y.entityName&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:y.entityName}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Suggested: PROVINCIAL GOVERNMENT OF APAYAO (used across property cards and ICS forms)"})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"fundCluster",children:"Fund Cluster *"}),s.jsx(ke,{id:"fundCluster",value:R.fundCluster,onChange:N=>I({...R,fundCluster:N.target.value}),placeholder:"e.g., 101"}),y.fundCluster&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:y.fundCluster})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{htmlFor:"itrNumber",children:"ITR No. *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ke,{id:"itrNumber",value:R.itrNumber,onChange:N=>I({...R,itrNumber:N.target.value.toUpperCase()}),placeholder:"ITR 2025-11-SPHV-0001"}),s.jsx(le,{type:"button",variant:"outline",onClick:Y,children:"Generate"})]}),y.itrNumber&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:y.itrNumber}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Format: ITR YYYY-MM-SPHV|SPLV-#### (per month and value category)"})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"transferDate",children:"Date *"}),s.jsx(ke,{id:"transferDate",type:"date",value:R.date,onChange:N=>I({...R,date:N.target.value})}),y.date&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:y.date})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(gg,{className:"space-y-1",label:"From Accountable Officer *",value:R.fromAccountableOfficer,onChange:(N,P)=>I(V=>({...V,fromAccountableOfficer:N,fromAccountableOfficerDepartment:P==null?void 0:P.department_name,fromAccountableOfficerDesignation:(P==null?void 0:P.position)||"",fromAccountableOfficerId:P==null?void 0:P.id})),placeholder:"Search custodians...",required:!0}),y.fromOfficer&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:y.fromOfficer})]}),s.jsxs("div",{children:[s.jsx(gg,{className:"space-y-1",label:"To Accountable Officer *",value:R.toAccountableOfficer,onChange:(N,P)=>I(V=>({...V,toAccountableOfficer:N,toAccountableOfficerDepartment:P==null?void 0:P.department_name,toAccountableOfficerDesignation:(P==null?void 0:P.position)||"",toAccountableOfficerId:P==null?void 0:P.id})),placeholder:"Search custodians...",required:!0}),y.toOfficer&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:y.toOfficer})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{children:"Transfer Type *"}),s.jsxs(Dt,{value:R.transferType,onValueChange:N=>I(P=>({...P,transferType:N,otherTransferType:N==="Others"?P.otherTransferType:""})),children:[s.jsx(kt,{children:s.jsx(Mt,{placeholder:"Select transfer type"})}),s.jsx(Pt,{children:of.map(N=>s.jsx(we,{value:N,children:N},N))})]})]}),R.transferType==="Others"&&s.jsxs("div",{children:[s.jsx(he,{htmlFor:"otherTransferType",children:"Specify Other Transfer Type"}),s.jsx(ke,{id:"otherTransferType",value:R.otherTransferType||"",onChange:N=>I({...R,otherTransferType:N.target.value}),placeholder:"Describe the transfer type"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsx(he,{className:"text-base font-semibold",children:"Items to Transfer *"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(le,{type:"button",variant:"outline",size:"sm",onClick:He,children:"Select from ICS"}),s.jsx(le,{type:"button",variant:"secondary",size:"sm",onClick:()=>Me(N=>!N),children:Ye?"Disable Edit":"Enable Edit"}),z&&s.jsx(Gt,{className:"h-4 w-4 animate-spin text-muted-foreground"})]})]}),y.items&&s.jsx("p",{className:"text-sm text-destructive",children:y.items}),R.items.length===0?s.jsx("div",{className:"rounded-md border border-dashed p-4 text-sm text-muted-foreground bg-muted/30",children:"Select items from existing ICS slips. The table will auto-fill Item No., ICS number/date, description, amount, and condition."}):s.jsxs("div",{className:"rounded-md border overflow-hidden",children:[s.jsxs(Lr,{children:[s.jsx(nn,{children:s.jsxs(ht,{children:[s.jsx(Se,{className:"w-[120px]",children:"Item No."}),s.jsx(Se,{children:"ICS No./Date"}),s.jsx(Se,{children:"Description"}),s.jsx(Se,{className:"text-right w-[120px]",children:"Amount"}),s.jsx(Se,{className:"w-[140px]",children:"Condition"}),s.jsx(Se,{className:"w-[160px] text-right",children:"Actions"})]})}),s.jsx(sn,{children:R.items.map(N=>{const P=[N.icsSlipNumber,N.icsDate].filter(Boolean).join(" / ");return s.jsxs(ht,{children:[s.jsx(xe,{className:"font-medium",children:N.propertyNumber}),s.jsx(xe,{children:P||""}),s.jsx(xe,{children:Ye?s.jsxs("div",{className:"space-y-1",children:[s.jsx(ke,{value:N.description,onChange:V=>Ne(N.propertyNumber,"description",V.target.value)}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[Qd(N.dateAcquired),N.quantity?`  Qty: ${N.quantity}`:""]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-medium",children:N.description}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[Qd(N.dateAcquired),N.quantity?`  Qty: ${N.quantity}`:""]})]})}),s.jsx(xe,{className:"text-right",children:Ye?s.jsx(ke,{type:"number",value:N.amount??0,onChange:V=>Ne(N.propertyNumber,"amount",Number(V.target.value)),className:"w-28 text-right"}):N.amount!==void 0?li(N.amount):""}),s.jsx(xe,{children:Ye?s.jsx(ke,{value:N.condition||"",onChange:V=>Ne(N.propertyNumber,"condition",V.target.value)}):N.condition||""}),s.jsx(xe,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(le,{type:"button",variant:"ghost",size:"sm",onClick:()=>L(`/property-cards?search=${encodeURIComponent(N.propertyNumber)}`),children:"Card"}),s.jsx(le,{type:"button",variant:"ghost",size:"sm",onClick:()=>L(`/custodian-slips?slip=${encodeURIComponent(N.icsSlipNumber||"")}`),children:"ICS"}),s.jsx(le,{type:"button",variant:"ghost",size:"sm",onClick:()=>me(N.propertyNumber),children:"Remove"})]})})]},N.propertyNumber)})})]}),s.jsxs("div",{className:"px-4 py-2 text-sm text-right text-muted-foreground border-t",children:["Total amount of selected items: ",s.jsx("span",{className:"font-semibold",children:li(dt)})]})]})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"reason",children:"Reason for Transfer *"}),s.jsx(ki,{id:"reason",value:R.reason,onChange:N=>I({...R,reason:N.target.value}),placeholder:"Provide the justification or remarks for this transfer.",rows:4}),y.reason&&s.jsx("p",{className:"mt-1 text-sm text-destructive",children:y.reason})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(le,{type:"button",variant:"ghost",onClick:()=>l(!1),children:"Cancel"}),s.jsx(le,{type:"button",onClick:X,children:"Save Transfer"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[W.map(N=>{const P=N.items.reduce((V,se)=>V+(se.amount??0),0);return s.jsxs(Te,{className:"flex flex-col",children:[s.jsx(ze,{children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx(et,{className:"text-lg",children:N.itrNumber}),s.jsx("p",{className:"text-sm text-muted-foreground",children:Qd(N.date)})]}),s.jsxs(it,{variant:N.status==="Draft"?"secondary":N.status==="Issued"||N.status==="Completed"?"default":N.status==="Rejected"?"destructive":"secondary",className:"flex items-center gap-1",children:[N.status==="Draft"?s.jsx(tl,{className:"h-3.5 w-3.5"}):N.status==="Issued"?s.jsx(Ra,{className:"h-3.5 w-3.5"}):N.status==="Completed"?s.jsx(Ra,{className:"h-3.5 w-3.5"}):N.status==="Rejected"?s.jsx(qa,{className:"h-3.5 w-3.5"}):s.jsx(tl,{className:"h-3.5 w-3.5"}),N.status]})]})}),s.jsxs(Ae,{className:"flex flex-1 flex-col gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Entity:"})," ",N.entityName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Fund Cluster:"})," ",N.fundCluster]}),s.jsxs("p",{children:[s.jsx("strong",{children:"From:"})," ",No(N.fromAccountableOfficer,N.fromAccountableOfficerDepartment)||""]}),s.jsxs("p",{children:[s.jsx("strong",{children:"To:"})," ",No(N.toAccountableOfficer,N.toAccountableOfficerDepartment)||""]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Transfer Type:"})," ",N.transferType==="Others"&&N.otherTransferType?`${N.transferType}  ${N.otherTransferType}`:N.transferType]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Reason:"})," ",N.reason||""]}),P>0&&s.jsxs("p",{children:[s.jsx("strong",{children:"Total Amount:"})," ",li(P)]})]}),N.items.length>0&&s.jsx("div",{className:"border rounded-md overflow-hidden",children:s.jsxs(Lr,{children:[s.jsx(nn,{children:s.jsxs(ht,{children:[s.jsx(Se,{children:"Item No."}),s.jsx(Se,{children:"ICS"}),s.jsx(Se,{children:"Description"}),s.jsx(Se,{className:"text-right",children:"Amount"})]})}),s.jsx(sn,{children:N.items.map(V=>{const se=[V.icsSlipNumber,V.icsDate].filter(Boolean).join(" / ");return s.jsxs(ht,{children:[s.jsx(xe,{className:"font-medium",children:V.propertyNumber}),s.jsx(xe,{children:se||""}),s.jsxs(xe,{children:[s.jsx("div",{children:V.description}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[V.condition||"",V.quantity?`  Qty: ${V.quantity}`:""]})]}),s.jsx(xe,{className:"text-right",children:V.amount!==void 0?li(V.amount):""})]},V.propertyNumber)})})]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[s.jsx(DI,{className:"h-4 w-4"}),"History"]}),s.jsx(yg,{className:"mt-2 max-h-32 pr-2",children:s.jsx("div",{className:"space-y-1.5 text-xs text-muted-foreground",children:N.history.map((V,se)=>s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-foreground",children:vB(V.timestamp)})," "," ",V.action," (",V.status,")",V.details&&s.jsx("div",{className:"ml-5 text-[11px]",children:V.details})]},`${V.timestamp}-${se}`))})})]}),s.jsxs("div",{className:"mt-auto flex flex-col gap-2",children:[s.jsxs(le,{type:"button",size:"sm",variant:"outline",onClick:()=>de(N),children:[s.jsx($r,{className:"h-4 w-4 mr-2"}),"Print Inventory Transfer Report"]}),N.status==="Rejected"&&s.jsx(le,{type:"button",size:"sm",variant:"destructive",className:"w-full",onClick:()=>ee(N.id),children:"Delete Rejected Transfer"}),(N.status==="Draft"||!N.status)&&s.jsx(le,{type:"button",size:"sm",variant:"default",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:()=>O(N.id),disabled:ne.isPending,title:"Confirm this transfer as official (cannot be deleted after confirmation)",children:ne.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Gt,{className:"h-3.5 w-3.5 mr-2 animate-spin"}),"Confirming..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ra,{className:"h-3.5 w-3.5 mr-2"}),"Confirm"]})}),(N.status==="Draft"||!N.status)&&s.jsx(le,{type:"button",size:"sm",variant:"outline",className:"flex-1 text-red-600 hover:text-red-700",onClick:()=>ee(N.id),title:"Delete this draft transfer",children:"Delete"}),N.status==="Issued"&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsx(le,{type:"button",size:"sm",className:"flex-1",onClick:()=>ie(N.id,"Completed"),children:"Mark Complete"}),s.jsx(le,{type:"button",size:"sm",variant:"destructive",className:"flex-1",onClick:()=>ie(N.id,"Rejected"),children:"Reject"})]})]})]})]},N.id)}),!W.length&&s.jsxs(Te,{className:"col-span-full border-dashed border-muted-foreground/40",children:[s.jsx(ze,{children:s.jsx(et,{className:"text-lg",children:"No transfers found"})}),s.jsx(Ae,{className:"text-muted-foreground",children:"Adjust the filters or create a new transfer to see it listed here."})]})]}),a&&Ka.createPortal(s.jsx("div",{className:"print-only",children:_B(a)}),document.body),s.jsx(fn,{open:j,onOpenChange:_,children:s.jsxs(Zr,{className:"max-w-4xl",children:[s.jsxs(pn,{children:[s.jsx(gn,{children:"Select Items from ICS"}),s.jsxs(bs,{children:["Showing items issued to ",R.fromAccountableOfficer||"the selected accountable officer",". Choose the items that will be transferred."]})]}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx(ke,{placeholder:"Search by item number, description, ICS number",value:D,onChange:N=>U(N.target.value)}),s.jsxs("div",{className:"border rounded-md h-[360px] overflow-hidden",children:[s.jsx(Lr,{className:"table-fixed",children:s.jsx(nn,{children:s.jsxs(ht,{children:[s.jsx(Se,{className:"w-[48px]"}),s.jsx(Se,{className:"w-[160px]",children:"Item No."}),s.jsx(Se,{children:"Description"}),s.jsx(Se,{className:"w-[200px]",children:"ICS No."}),s.jsx(Se,{className:"w-[140px]",children:"Date Issued"}),s.jsx(Se,{className:"w-[140px] text-right",children:"Amount"}),s.jsx(Se,{className:"w-[160px]",children:"Condition"})]})})}),s.jsx(yg,{className:"h-[300px]",children:s.jsx(Lr,{className:"table-fixed",children:s.jsx(sn,{children:z?s.jsx(ht,{children:s.jsx(xe,{colSpan:7,className:"text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-muted-foreground",children:[s.jsx(Gt,{className:"h-4 w-4 animate-spin"}),"Loading ICS items"]})})}):ge.length===0?s.jsx(ht,{children:s.jsx(xe,{colSpan:7,className:"text-center text-muted-foreground py-10",children:"No ICS items found for the selected officer. Adjust your search or confirm the officer selection."})}):ge.map(N=>{const P=S.includes(N.id);return s.jsxs(ht,{className:"cursor-pointer",onClick:()=>ut(N.id),children:[s.jsx(xe,{className:"w-[48px]",children:s.jsx(cd,{checked:P,onCheckedChange:()=>ut(N.id)})}),s.jsx(xe,{className:"w-[160px] font-medium",children:N.propertyNumber}),s.jsx(xe,{className:"truncate",children:N.description||""}),s.jsx(xe,{className:"w-[200px] truncate",children:N.icsSlipNumber||""}),s.jsx(xe,{className:"w-[140px]",children:Qd(N.icsDate)}),s.jsx(xe,{className:"w-[140px] text-right",children:N.amount!==void 0?li(N.amount):""}),s.jsx(xe,{className:"w-[160px]",children:N.condition||""})]},N.id)})})})})]})]}),s.jsxs(z1,{className:"flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:S.length?`${S.length} item(s) selected`:"Select one or more items to add to the transfer."}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(le,{type:"button",variant:"ghost",onClick:()=>_(!1),children:"Cancel"}),s.jsx(le,{type:"button",onClick:J,children:"Add Selected Items"})]})]})]})}),s.jsx("style",{children:`
        @media print {
          body > :not(.print-only) { display: none !important; }
          .print-only { display: block !important; }
          .signature-section { break-inside: avoid; }
        }
        .print-only { display: none; }
      `}),C&&s.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-md p-6 flex items-center gap-3",children:[s.jsx(Gt,{className:"h-5 w-5 animate-spin"}),s.jsx("span",{children:"Updating"})]})})]})},SB=()=>{var $,R;const[e,t]=h.useState([]),[r,n]=h.useState(null),[a,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState("All"),u=h.useRef(null),{toast:f}=Zn(),[m,p]=h.useState({countNumber:"",department:"",countDate:"",countType:"Annual",status:"Planned",conductedBy:[""],witnessedBy:"",approvedBy:"",items:[{propertyNumber:"",description:"",expectedQuantity:0,actualQuantity:0,condition:"Serviceable",location:"",remarks:"",variance:0}],remarks:""}),x=(I,C)=>C-I,g=()=>{var z;if(!m.countNumber||!m.department){f({title:"Error",description:"Please fill in required fields",variant:"destructive"});return}const I=((z=m.items)==null?void 0:z.map(ae=>({...ae,variance:x(ae.expectedQuantity,ae.actualQuantity)})))||[],C=I.reduce((ae,ge)=>ae+ge.expectedQuantity,0),T=I.reduce((ae,ge)=>ae+ge.actualQuantity,0),re=T-C,K={id:Date.now().toString(),...m,items:I,totalExpected:C,totalActual:T,totalVariance:re};t([...e,K]),p({countNumber:"",department:"",countDate:"",countType:"Annual",status:"Planned",conductedBy:[""],witnessedBy:"",approvedBy:"",items:[{propertyNumber:"",description:"",expectedQuantity:0,actualQuantity:0,condition:"Serviceable",location:"",remarks:"",variance:0}],remarks:""}),i(!1),f({title:"Success",description:"Physical count record created successfully"})},w=()=>{p({...m,items:[...m.items||[],{propertyNumber:"",description:"",expectedQuantity:0,actualQuantity:0,condition:"Serviceable",location:"",remarks:"",variance:0}]})},v=(I,C,T)=>{const re=[...m.items||[]];if(re[I]={...re[I],[C]:T},C==="expectedQuantity"||C==="actualQuantity"){const K=C==="expectedQuantity"?T:re[I].expectedQuantity,z=C==="actualQuantity"?T:re[I].actualQuantity;re[I].variance=x(K,z)}p({...m,items:re})},y=I=>{var T;const C=(T=m.items)==null?void 0:T.filter((re,K)=>K!==I);p({...m,items:C})},b=()=>{p({...m,conductedBy:[...m.conductedBy||[],""]})},j=(I,C)=>{const T=[...m.conductedBy||[]];T[I]=C,p({...m,conductedBy:T})},_=I=>{var T;const C=(T=m.conductedBy)==null?void 0:T.filter((re,K)=>K!==I);p({...m,conductedBy:C})},S=(I,C)=>{t(e.map(T=>T.id===I?{...T,status:C}:T)),f({title:"Success",description:`Physical count status updated to ${C}`})},E=I=>{n(I),setTimeout(()=>{window.print()},100)},D=I=>{switch(I){case"Planned":return s.jsx(tl,{className:"h-4 w-4"});case"Completed":return s.jsx(Ra,{className:"h-4 w-4"});case"Under Review":return s.jsx(Uu,{className:"h-4 w-4"});default:return s.jsx(tl,{className:"h-4 w-4"})}},U=I=>{switch(I){case"Planned":return"secondary";case"In Progress":return"warning";case"Completed":return"success";case"Under Review":return"warning";default:return"secondary"}},F=I=>I===0?"success":I>0?"warning":"destructive",L=e.filter(I=>{const C=I.countNumber.toLowerCase().includes(o.toLowerCase())||I.department.toLowerCase().includes(o.toLowerCase()),T=c==="All"||I.status===c;return C&&T});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Physical Count of Semi-Expandable Property"}),s.jsxs(le,{onClick:()=>i(!0),className:"flex items-center gap-2",children:[s.jsx(Ua,{className:"h-4 w-4"}),"Create Physical Count"]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(ke,{placeholder:"Search physical counts...",value:o,onChange:I=>l(I.target.value),className:"pl-10"})]}),s.jsxs(Dt,{value:c,onValueChange:d,children:[s.jsx(kt,{className:"w-48",children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"All",children:"All Status"}),s.jsx(we,{value:"Planned",children:"Planned"}),s.jsx(we,{value:"In Progress",children:"In Progress"}),s.jsx(we,{value:"Completed",children:"Completed"}),s.jsx(we,{value:"Under Review",children:"Under Review"})]})]})]}),a&&s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{children:"Create Physical Count Record"})}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{htmlFor:"countNumber",children:"Count Number *"}),s.jsx(ke,{id:"countNumber",value:m.countNumber,onChange:I=>p({...m,countNumber:I.target.value})})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"countDate",children:"Count Date"}),s.jsx(ke,{id:"countDate",type:"date",value:m.countDate,onChange:I=>p({...m,countDate:I.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{htmlFor:"department",children:"Department *"}),s.jsx(ke,{id:"department",value:m.department,onChange:I=>p({...m,department:I.target.value})})]}),s.jsxs("div",{children:[s.jsx(he,{children:"Count Type"}),s.jsxs(Dt,{value:m.countType,onValueChange:I=>p({...m,countType:I}),children:[s.jsx(kt,{children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"Annual",children:"Annual"}),s.jsx(we,{value:"Quarterly",children:"Quarterly"}),s.jsx(we,{value:"Special",children:"Special"}),s.jsx(we,{value:"Spot Check",children:"Spot Check"})]})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(he,{children:"Conducted By"}),s.jsx(le,{type:"button",onClick:b,size:"sm",variant:"outline",children:"Add Person"})]}),($=m.conductedBy)==null?void 0:$.map((I,C)=>s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx(ke,{placeholder:"Name and Position",value:I,onChange:T=>j(C,T.target.value)}),m.conductedBy&&m.conductedBy.length>1&&s.jsx(le,{type:"button",onClick:()=>_(C),size:"sm",variant:"destructive",children:"Remove"})]},C))]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{htmlFor:"witnessedBy",children:"Witnessed By"}),s.jsx(ke,{id:"witnessedBy",value:m.witnessedBy,onChange:I=>p({...m,witnessedBy:I.target.value})})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"approvedBy",children:"Approved By"}),s.jsx(ke,{id:"approvedBy",value:m.approvedBy,onChange:I=>p({...m,approvedBy:I.target.value})})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(he,{children:"Items"}),s.jsx(le,{type:"button",onClick:w,size:"sm",variant:"outline",children:"Add Item"})]}),s.jsx("div",{className:"space-y-2",children:(R=m.items)==null?void 0:R.map((I,C)=>s.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 border rounded",children:[s.jsx(ke,{placeholder:"Property #",value:I.propertyNumber,onChange:T=>v(C,"propertyNumber",T.target.value)}),s.jsx(ke,{placeholder:"Description",value:I.description,onChange:T=>v(C,"description",T.target.value)}),s.jsx(ke,{placeholder:"Expected",type:"number",value:I.expectedQuantity,onChange:T=>v(C,"expectedQuantity",parseInt(T.target.value)||0)}),s.jsx(ke,{placeholder:"Actual",type:"number",value:I.actualQuantity,onChange:T=>v(C,"actualQuantity",parseInt(T.target.value)||0)}),s.jsx(ke,{placeholder:"Location",value:I.location,onChange:T=>v(C,"location",T.target.value)}),s.jsxs(Dt,{value:I.condition,onValueChange:T=>v(C,"condition",T),children:[s.jsx(kt,{children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"Serviceable",children:"Serviceable"}),s.jsx(we,{value:"For Repair",children:"For Repair"}),s.jsx(we,{value:"Unserviceable",children:"Unserviceable"}),s.jsx(we,{value:"Missing",children:"Missing"})]})]}),s.jsx("div",{className:"text-center py-2",children:s.jsxs(it,{variant:F(I.variance),children:[I.variance>0?"+":"",I.variance]})}),s.jsx(le,{type:"button",onClick:()=>y(C),size:"sm",variant:"destructive",children:""})]},C))})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"remarks",children:"General Remarks"}),s.jsx(ki,{id:"remarks",value:m.remarks,onChange:I=>p({...m,remarks:I.target.value})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(le,{onClick:g,children:"Create Count"}),s.jsx(le,{variant:"outline",onClick:()=>i(!1),children:"Cancel"})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:L.map(I=>s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx(et,{className:"text-lg",children:I.countNumber}),s.jsxs(it,{variant:U(I.status),className:"flex items-center gap-1",children:[D(I.status),I.status]})]})}),s.jsxs(Ae,{children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Department:"})," ",I.department]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Type:"})," ",I.countType]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Date:"})," ",I.countDate]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Items:"})," ",I.items.length]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[s.jsx("strong",{children:"Expected:"})," ",I.totalExpected]}),s.jsxs("span",{children:[s.jsx("strong",{children:"Actual:"})," ",I.totalActual]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("strong",{children:"Variance:"}),s.jsxs(it,{variant:F(I.totalVariance),children:[I.totalVariance>0?"+":"",I.totalVariance]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[s.jsxs(le,{onClick:()=>E(I),size:"sm",variant:"outline",children:[s.jsx($r,{className:"h-4 w-4 mr-2"}),"Print Report"]}),I.status!=="Completed"&&s.jsxs("div",{className:"flex gap-1",children:[I.status==="Planned"&&s.jsx(le,{onClick:()=>S(I.id,"In Progress"),size:"sm",className:"flex-1",children:"Start Count"}),I.status==="In Progress"&&s.jsx(le,{onClick:()=>S(I.id,"Under Review"),size:"sm",className:"flex-1",children:"Submit Review"}),I.status==="Under Review"&&s.jsx(le,{onClick:()=>S(I.id,"Completed"),size:"sm",className:"flex-1",children:"Complete"})]})]})]})]},I.id))}),r&&s.jsx("div",{className:"print-only",children:s.jsxs("div",{ref:u,className:"max-w-4xl mx-auto p-8 bg-white text-black",children:[s.jsxs("div",{className:"text-center border-b-2 border-black pb-4 mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"REPORT ON THE PHYSICAL COUNT OF SEMI-EXPANDABLE PROPERTY"}),s.jsxs("p",{className:"text-lg",children:["Count No: ",r.countNumber]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"COUNT DETAILS"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Department:"})," ",r.department]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Count Type:"})," ",r.countType]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Date:"})," ",r.countDate]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Status:"})," ",r.status]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"SUMMARY"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Total Expected:"})," ",r.totalExpected]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Actual:"})," ",r.totalActual]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Variance:"})," ",r.totalVariance>0?"+":"",r.totalVariance]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"CONDUCTED BY"}),s.jsx("div",{className:"space-y-1",children:r.conductedBy.map((I,C)=>s.jsxs("p",{children:[" ",I]},C))})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"ITEMS COUNTED"}),s.jsxs("table",{className:"w-full border-collapse border border-black text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"border border-black p-1 text-left",children:"Property Number"}),s.jsx("th",{className:"border border-black p-1 text-left",children:"Description"}),s.jsx("th",{className:"border border-black p-1 text-center",children:"Expected"}),s.jsx("th",{className:"border border-black p-1 text-center",children:"Actual"}),s.jsx("th",{className:"border border-black p-1 text-center",children:"Variance"}),s.jsx("th",{className:"border border-black p-1 text-left",children:"Condition"}),s.jsx("th",{className:"border border-black p-1 text-left",children:"Location"})]})}),s.jsx("tbody",{children:r.items.map((I,C)=>s.jsxs("tr",{children:[s.jsx("td",{className:"border border-black p-1",children:I.propertyNumber}),s.jsx("td",{className:"border border-black p-1",children:I.description}),s.jsx("td",{className:"border border-black p-1 text-center",children:I.expectedQuantity}),s.jsx("td",{className:"border border-black p-1 text-center",children:I.actualQuantity}),s.jsxs("td",{className:"border border-black p-1 text-center",children:[I.variance>0?"+":"",I.variance]}),s.jsx("td",{className:"border border-black p-1",children:I.condition}),s.jsx("td",{className:"border border-black p-1",children:I.location})]},C))})]})]}),r.remarks&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"REMARKS"}),s.jsx("p",{children:r.remarks})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-8 text-center mt-12",children:[s.jsx("div",{children:s.jsxs("div",{className:"border-t border-black pt-2",children:[s.jsx("p",{className:"text-sm",children:"Count Team Leader"}),s.jsx("p",{className:"mt-8",children:r.conductedBy[0]})]})}),s.jsx("div",{children:s.jsxs("div",{className:"border-t border-black pt-2",children:[s.jsx("p",{className:"text-sm",children:"Witnessed By"}),s.jsx("p",{className:"mt-8",children:r.witnessedBy})]})}),s.jsx("div",{children:s.jsxs("div",{className:"border-t border-black pt-2",children:[s.jsx("p",{className:"text-sm",children:"Approved By"}),s.jsx("p",{className:"mt-8",children:r.approvedBy})]})})]})]})}),s.jsx("style",{children:`
        @media print {
          .print-only { display: block !important; }
          body * { visibility: hidden; }
          .print-only, .print-only * { visibility: visible; }
          .print-only { position: absolute; left: 0; top: 0; }
        }
        .print-only { display: none; }
      `})]})},CB=()=>{var F;const[e,t]=h.useState([]),[r,n]=h.useState(null),[a,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState("All"),[u,f]=h.useState("All"),m=h.useRef(null),{toast:p}=Zn(),[x,g]=h.useState({reportNumber:"",department:"",reportDate:"",incidentDate:"",reportType:"Lost",status:"Draft",reportedBy:"",investigatedBy:"",approvedBy:"",items:[{propertyNumber:"",description:"",quantity:1,unitCost:0,totalCost:0,dateAcquired:"",condition:"Lost",circumstances:""}],incidentDescription:"",actionsTaken:"",recommendations:"",attachments:[]}),w=()=>{var R;if(!x.reportNumber||!x.department||!x.reportType){p({title:"Error",description:"Please fill in required fields",variant:"destructive"});return}const L=((R=x.items)==null?void 0:R.reduce((I,C)=>I+C.totalCost,0))||0,$={id:Date.now().toString(),...x,totalLossAmount:L};t([...e,$]),g({reportNumber:"",department:"",reportDate:"",incidentDate:"",reportType:"Lost",status:"Draft",reportedBy:"",investigatedBy:"",approvedBy:"",items:[{propertyNumber:"",description:"",quantity:1,unitCost:0,totalCost:0,dateAcquired:"",condition:"Lost",circumstances:""}],incidentDescription:"",actionsTaken:"",recommendations:"",attachments:[]}),i(!1),p({title:"Success",description:"Loss report created successfully"})},v=()=>{g({...x,items:[...x.items||[],{propertyNumber:"",description:"",quantity:1,unitCost:0,totalCost:0,dateAcquired:"",condition:x.reportType||"Lost",circumstances:""}]})},y=(L,$,R)=>{const I=[...x.items||[]];if(I[L]={...I[L],[$]:R},$==="quantity"||$==="unitCost"){const C=$==="quantity"?R:I[L].quantity,T=$==="unitCost"?R:I[L].unitCost;I[L].totalCost=C*T}g({...x,items:I})},b=L=>{var R;const $=(R=x.items)==null?void 0:R.filter((I,C)=>C!==L);g({...x,items:$})},j=(L,$)=>{t(e.map(R=>R.id===L?{...R,status:$}:R)),p({title:"Success",description:`Report status updated to ${$}`})},_=L=>{n(L),setTimeout(()=>{window.print()},100)},S=L=>{switch(L){case"Draft":return s.jsx(tl,{className:"h-4 w-4"});case"Under Investigation":return s.jsx(Uu,{className:"h-4 w-4"});case"Approved":return s.jsx(Ra,{className:"h-4 w-4"});default:return s.jsx(tl,{className:"h-4 w-4"})}},E=L=>{switch(L){case"Draft":return"secondary";case"Submitted":return"warning";case"Under Investigation":return"warning";case"Approved":return"success";case"Rejected":return"destructive";default:return"secondary"}},D=L=>{switch(L){case"Lost":return"warning";case"Stolen":return"destructive";case"Damaged":return"secondary";case"Destroyed":return"destructive";default:return"secondary"}},U=e.filter(L=>{const $=L.reportNumber.toLowerCase().includes(o.toLowerCase())||L.department.toLowerCase().includes(o.toLowerCase()),R=c==="All"||L.status===c,I=u==="All"||L.reportType===u;return $&&R&&I});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Loss/Damage Reports"}),s.jsxs(le,{onClick:()=>i(!0),className:"flex items-center gap-2",children:[s.jsx(Ua,{className:"h-4 w-4"}),"Create New Report"]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(ke,{placeholder:"Search reports...",value:o,onChange:L=>l(L.target.value),className:"pl-10"})]}),s.jsxs(Dt,{value:c,onValueChange:d,children:[s.jsx(kt,{className:"w-48",children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"All",children:"All Status"}),s.jsx(we,{value:"Draft",children:"Draft"}),s.jsx(we,{value:"Submitted",children:"Submitted"}),s.jsx(we,{value:"Under Investigation",children:"Under Investigation"}),s.jsx(we,{value:"Approved",children:"Approved"}),s.jsx(we,{value:"Rejected",children:"Rejected"})]})]}),s.jsxs(Dt,{value:u,onValueChange:f,children:[s.jsx(kt,{className:"w-48",children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"All",children:"All Types"}),s.jsx(we,{value:"Lost",children:"Lost"}),s.jsx(we,{value:"Stolen",children:"Stolen"}),s.jsx(we,{value:"Damaged",children:"Damaged"}),s.jsx(we,{value:"Destroyed",children:"Destroyed"})]})]})]}),a&&s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{children:"Create Loss/Damage Report"})}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{htmlFor:"reportNumber",children:"Report Number *"}),s.jsx(ke,{id:"reportNumber",value:x.reportNumber,onChange:L=>g({...x,reportNumber:L.target.value})})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"reportDate",children:"Report Date"}),s.jsx(ke,{id:"reportDate",type:"date",value:x.reportDate,onChange:L=>g({...x,reportDate:L.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{htmlFor:"department",children:"Department *"}),s.jsx(ke,{id:"department",value:x.department,onChange:L=>g({...x,department:L.target.value})})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"incidentDate",children:"Incident Date"}),s.jsx(ke,{id:"incidentDate",type:"date",value:x.incidentDate,onChange:L=>g({...x,incidentDate:L.target.value})})]}),s.jsxs("div",{children:[s.jsx(he,{children:"Report Type *"}),s.jsxs(Dt,{value:x.reportType,onValueChange:L=>g({...x,reportType:L}),children:[s.jsx(kt,{children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"Lost",children:"Lost"}),s.jsx(we,{value:"Stolen",children:"Stolen"}),s.jsx(we,{value:"Damaged",children:"Damaged"}),s.jsx(we,{value:"Destroyed",children:"Destroyed"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"incidentDescription",children:"Incident Description"}),s.jsx(ki,{id:"incidentDescription",value:x.incidentDescription,onChange:L=>g({...x,incidentDescription:L.target.value}),placeholder:"Describe what happened, when, where, and circumstances"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(he,{children:"Affected Items"}),s.jsx(le,{type:"button",onClick:v,size:"sm",variant:"outline",children:"Add Item"})]}),s.jsx("div",{className:"space-y-2",children:(F=x.items)==null?void 0:F.map((L,$)=>s.jsxs("div",{className:"grid grid-cols-7 gap-2 p-2 border rounded",children:[s.jsx(ke,{placeholder:"Property Number",value:L.propertyNumber,onChange:R=>y($,"propertyNumber",R.target.value)}),s.jsx(ke,{placeholder:"Description",value:L.description,onChange:R=>y($,"description",R.target.value)}),s.jsx(ke,{placeholder:"Qty",type:"number",value:L.quantity,onChange:R=>y($,"quantity",parseInt(R.target.value)||0)}),s.jsx(ke,{placeholder:"Unit Cost",type:"number",step:"0.01",value:L.unitCost,onChange:R=>y($,"unitCost",parseFloat(R.target.value)||0)}),s.jsx(ke,{placeholder:"Total Cost",type:"number",value:L.totalCost,readOnly:!0,className:"bg-muted"}),s.jsxs(Dt,{value:L.condition,onValueChange:R=>y($,"condition",R),children:[s.jsx(kt,{children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"Lost",children:"Lost"}),s.jsx(we,{value:"Stolen",children:"Stolen"}),s.jsx(we,{value:"Damaged",children:"Damaged"}),s.jsx(we,{value:"Destroyed",children:"Destroyed"})]})]}),s.jsx(le,{type:"button",onClick:()=>b($),size:"sm",variant:"destructive",children:""})]},$))})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"actionsTaken",children:"Actions Taken"}),s.jsx(ki,{id:"actionsTaken",value:x.actionsTaken,onChange:L=>g({...x,actionsTaken:L.target.value}),placeholder:"Describe immediate actions taken after the incident"})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"recommendations",children:"Recommendations"}),s.jsx(ki,{id:"recommendations",value:x.recommendations,onChange:L=>g({...x,recommendations:L.target.value}),placeholder:"Recommendations to prevent similar incidents"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{htmlFor:"reportedBy",children:"Reported By"}),s.jsx(ke,{id:"reportedBy",value:x.reportedBy,onChange:L=>g({...x,reportedBy:L.target.value})})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"investigatedBy",children:"Investigated By"}),s.jsx(ke,{id:"investigatedBy",value:x.investigatedBy,onChange:L=>g({...x,investigatedBy:L.target.value})})]}),s.jsxs("div",{children:[s.jsx(he,{htmlFor:"approvedBy",children:"Approved By"}),s.jsx(ke,{id:"approvedBy",value:x.approvedBy,onChange:L=>g({...x,approvedBy:L.target.value})})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(le,{onClick:w,children:"Create Report"}),s.jsx(le,{variant:"outline",onClick:()=>i(!1),children:"Cancel"})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:U.map(L=>s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx(et,{className:"text-lg",children:L.reportNumber}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs(it,{variant:E(L.status),className:"flex items-center gap-1",children:[S(L.status),L.status]}),s.jsx(it,{variant:D(L.reportType),children:L.reportType})]})]})}),s.jsxs(Ae,{children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Department:"})," ",L.department]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Incident Date:"})," ",L.incidentDate]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Items Affected:"})," ",L.items.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Loss:"})," ",L.totalLossAmount.toLocaleString()]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Reported By:"})," ",L.reportedBy]})]}),s.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[s.jsxs(le,{onClick:()=>_(L),size:"sm",variant:"outline",children:[s.jsx($r,{className:"h-4 w-4 mr-2"}),"Print Report"]}),L.status!=="Approved"&&L.status!=="Rejected"&&s.jsxs("div",{className:"flex gap-1",children:[L.status==="Draft"&&s.jsx(le,{onClick:()=>j(L.id,"Submitted"),size:"sm",className:"flex-1",children:"Submit"}),L.status==="Submitted"&&s.jsx(le,{onClick:()=>j(L.id,"Under Investigation"),size:"sm",className:"flex-1",children:"Investigate"}),L.status==="Under Investigation"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx(le,{onClick:()=>j(L.id,"Approved"),size:"sm",className:"flex-1",children:"Approve"}),s.jsx(le,{onClick:()=>j(L.id,"Rejected"),size:"sm",variant:"destructive",className:"flex-1",children:"Reject"})]})]})]})]})]},L.id))}),r&&s.jsx("div",{className:"print-only",children:s.jsxs("div",{ref:m,className:"max-w-4xl mx-auto p-8 bg-white text-black",children:[s.jsxs("div",{className:"text-center border-b-2 border-black pb-4 mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold",children:["REPORT OF ",r.reportType.toUpperCase(),", STOLEN, DAMAGED OR DESTROYED PROPERTY"]}),s.jsxs("p",{className:"text-lg",children:["Report No: ",r.reportNumber]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"REPORT DETAILS"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Department:"})," ",r.department]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Report Type:"})," ",r.reportType]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Report Date:"})," ",r.reportDate]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Incident Date:"})," ",r.incidentDate]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"PERSONNEL"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Reported By:"})," ",r.reportedBy]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Investigated By:"})," ",r.investigatedBy]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Approved By:"})," ",r.approvedBy]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"INCIDENT DESCRIPTION"}),s.jsx("p",{className:"text-justify",children:r.incidentDescription})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"AFFECTED ITEMS"}),s.jsxs("table",{className:"w-full border-collapse border border-black",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"border border-black p-2 text-left",children:"Property Number"}),s.jsx("th",{className:"border border-black p-2 text-left",children:"Description"}),s.jsx("th",{className:"border border-black p-2 text-center",children:"Qty"}),s.jsx("th",{className:"border border-black p-2 text-right",children:"Unit Cost"}),s.jsx("th",{className:"border border-black p-2 text-right",children:"Total Cost"}),s.jsx("th",{className:"border border-black p-2 text-center",children:"Status"})]})}),s.jsxs("tbody",{children:[r.items.map((L,$)=>s.jsxs("tr",{children:[s.jsx("td",{className:"border border-black p-2",children:L.propertyNumber}),s.jsx("td",{className:"border border-black p-2",children:L.description}),s.jsx("td",{className:"border border-black p-2 text-center",children:L.quantity}),s.jsxs("td",{className:"border border-black p-2 text-right",children:["",L.unitCost.toLocaleString()]}),s.jsxs("td",{className:"border border-black p-2 text-right",children:["",L.totalCost.toLocaleString()]}),s.jsx("td",{className:"border border-black p-2 text-center",children:L.condition})]},$)),s.jsxs("tr",{className:"font-bold bg-gray-100",children:[s.jsx("td",{colSpan:4,className:"border border-black p-2 text-right",children:"TOTAL LOSS AMOUNT:"}),s.jsxs("td",{className:"border border-black p-2 text-right",children:["",r.totalLossAmount.toLocaleString()]}),s.jsx("td",{className:"border border-black p-2"})]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"ACTIONS TAKEN"}),s.jsx("p",{className:"text-justify",children:r.actionsTaken})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"font-bold border-b border-black mb-2",children:"RECOMMENDATIONS"}),s.jsx("p",{className:"text-justify",children:r.recommendations})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-8 text-center mt-12",children:[s.jsx("div",{children:s.jsxs("div",{className:"border-t border-black pt-2",children:[s.jsx("p",{className:"text-sm",children:"Reported By"}),s.jsx("p",{className:"mt-8",children:r.reportedBy})]})}),s.jsx("div",{children:s.jsxs("div",{className:"border-t border-black pt-2",children:[s.jsx("p",{className:"text-sm",children:"Investigated By"}),s.jsx("p",{className:"mt-8",children:r.investigatedBy})]})}),s.jsx("div",{children:s.jsxs("div",{className:"border-t border-black pt-2",children:[s.jsx("p",{className:"text-sm",children:"Approved By"}),s.jsx("p",{className:"mt-8",children:r.approvedBy})]})})]})]})}),s.jsx("style",{children:`
        @media print {
          .print-only { display: block !important; }
          body * { visibility: hidden; }
          .print-only, .print-only * { visibility: visible; }
          .print-only { position: absolute; left: 0; top: 0; }
        }
        .print-only { display: none; }
      `})]})},EB=({data:e})=>{const t=()=>{window.print()};return s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 print:hidden",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Semi-Expandable Property Ledger Card"}),s.jsxs(le,{onClick:t,className:"flex items-center gap-2",children:[s.jsx($r,{className:"h-4 w-4"}),"Print"]})]}),s.jsxs(Te,{className:"print:shadow-none print:border-2 print:border-black",children:[s.jsx(ze,{className:"text-center border-b-2 border-black",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-xl font-bold uppercase",children:"SEMI-EXPANDABLE PROPERTY LEDGER CARD"}),s.jsx("p",{className:"text-sm",children:"Republic of the Philippines"}),s.jsx("p",{className:"text-sm font-semibold",children:"[Department/Agency Name]"})]})}),s.jsxs(Ae,{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Property Number:"}),s.jsx("p",{className:"font-mono text-lg",children:e.propertyNumber})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Description:"}),s.jsx("p",{className:"text-sm",children:e.description})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Unit:"}),s.jsx("p",{className:"text-sm",children:e.unit})]})]}),s.jsx("div",{className:"border-2 border-black",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-black",children:[s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Date"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Reference Number"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Received"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Issued"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Balance"}),s.jsx("th",{className:"p-2 text-center",children:"Recipient/Issuer"})]})}),s.jsxs("tbody",{children:[e.entries.map((r,n)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.date}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.referenceNumber}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.received||"-"}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.issued||"-"}),s.jsx("td",{className:"border-r border-black p-2 text-center font-semibold",children:r.balance}),s.jsx("td",{className:"p-2",children:r.recipient})]},n)),Array.from({length:Math.max(0,10-e.entries.length)}).map((r,n)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 h-8",children:""}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"border-r border-black p-2",children:""}),s.jsx("td",{className:"p-2",children:""})]},`empty-${n}`))]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-8 pt-4 border-t-2 border-black",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Supply Officer"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Property Custodian"})]})]})]})]})]})},kB=({data:e})=>{const t=()=>{window.print()};return s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 print:hidden",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Inventory Transfer Report"}),s.jsxs(le,{onClick:t,className:"flex items-center gap-2",children:[s.jsx($r,{className:"h-4 w-4"}),"Print"]})]}),s.jsxs(Te,{className:"print:shadow-none print:border-2 print:border-black",children:[s.jsx(ze,{className:"text-center border-b-2 border-black",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-xl font-bold uppercase",children:"INVENTORY TRANSFER REPORT"}),s.jsx("p",{className:"text-sm",children:"Republic of the Philippines"}),s.jsx("p",{className:"text-sm font-semibold",children:"[Department/Agency Name]"})]})}),s.jsxs(Ae,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Transfer Number:"}),s.jsx("p",{className:"font-mono text-lg",children:e.transferNumber})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Date:"}),s.jsx("p",{className:"text-sm",children:e.date})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"From Department:"}),s.jsx("p",{className:"text-sm",children:e.fromDepartment})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"From Custodian:"}),s.jsx("p",{className:"text-sm",children:e.fromCustodian})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"To Department:"}),s.jsx("p",{className:"text-sm",children:e.toDepartment})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"To Custodian:"}),s.jsx("p",{className:"text-sm",children:e.toCustodian})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Reason for Transfer:"}),s.jsx("p",{className:"text-sm",children:e.reason})]})]})]}),s.jsx("div",{className:"border-2 border-black",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-black bg-gray-100",children:[s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Item No."}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Property Number"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Description"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Qty"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Unit"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Serial Number"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Condition"}),s.jsx("th",{className:"p-2 text-center",children:"Remarks"})]})}),s.jsx("tbody",{children:e.items.map((r,n)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 text-center",children:n+1}),s.jsx("td",{className:"border-r border-black p-2 text-center font-mono",children:r.propertyNumber}),s.jsx("td",{className:"border-r border-black p-2",children:r.description}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.quantity}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.unit}),s.jsx("td",{className:"border-r border-black p-2 text-center font-mono",children:r.serialNumber}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.condition}),s.jsx("td",{className:"p-2",children:r.remarks})]},n))})]})}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-8 pt-4 border-t-2 border-black",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Released by:"}),s.jsx("p",{className:"text-xs",children:"(Signature over Printed Name)"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Received by:"}),s.jsx("p",{className:"text-xs",children:"(Signature over Printed Name)"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Approved by:"}),s.jsx("p",{className:"text-xs",children:"Supply Officer"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Date"})]})]})]})]})]})},PB=({data:e})=>{const t=()=>{window.print()};return s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 print:hidden",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Report on Physical Count of Semi-Expandable Property"}),s.jsxs(le,{onClick:t,className:"flex items-center gap-2",children:[s.jsx($r,{className:"h-4 w-4"}),"Print"]})]}),s.jsxs(Te,{className:"print:shadow-none print:border-2 print:border-black",children:[s.jsx(ze,{className:"text-center border-b-2 border-black",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-lg font-bold uppercase",children:"REPORT ON THE PHYSICAL COUNT OF SEMI-EXPANDABLE PROPERTY"}),s.jsx("p",{className:"text-sm",children:"Republic of the Philippines"}),s.jsx("p",{className:"text-sm font-semibold",children:"[Department/Agency Name]"})]})}),s.jsxs(Ae,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Report Number:"}),s.jsx("p",{className:"font-mono text-lg",children:e.reportNumber})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Count Date:"}),s.jsx("p",{className:"text-sm",children:e.countDate})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Department:"}),s.jsx("p",{className:"text-sm",children:e.department})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Property Custodian:"}),s.jsx("p",{className:"text-sm",children:e.custodian})]})]}),s.jsx("div",{className:"space-y-3",children:s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Counted By:"}),s.jsx("div",{className:"text-sm space-y-1",children:e.countedBy.map((r,n)=>s.jsx("p",{children:r},n))})]})})]}),s.jsx("div",{className:"border-2 border-black",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-black bg-gray-100",children:[s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Item No."}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Property Number"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Description"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Book Qty"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Actual Qty"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Variance"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Condition"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Location"}),s.jsx("th",{className:"p-2 text-center",children:"Remarks"})]})}),s.jsx("tbody",{children:e.items.map((r,n)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 text-center",children:n+1}),s.jsx("td",{className:"border-r border-black p-2 text-center font-mono",children:r.propertyNumber}),s.jsx("td",{className:"border-r border-black p-2",children:r.description}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.bookQuantity}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.actualQuantity}),s.jsxs("td",{className:`border-r border-black p-2 text-center font-semibold ${r.variance!==0?r.variance>0?"text-green-600":"text-red-600":""}`,children:[r.variance>0?"+":"",r.variance]}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.condition}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.location}),s.jsx("td",{className:"p-2",children:r.remarks})]},n))}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"border-t-2 border-black bg-gray-100",children:[s.jsx("td",{colSpan:5,className:"border-r border-black p-2 text-center font-semibold",children:"TOTAL VARIANCE:"}),s.jsxs("td",{className:`border-r border-black p-2 text-center font-bold text-lg ${e.totalVariance!==0?e.totalVariance>0?"text-green-600":"text-red-600":""}`,children:[e.totalVariance>0?"+":"",e.totalVariance]}),s.jsx("td",{colSpan:3,className:"p-2"})]})})]})}),s.jsxs("div",{className:"mt-6 p-4 border border-gray-400",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"SUMMARY OF VARIANCES:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Overage: "}),s.jsxs("span",{className:"text-green-600",children:["+",e.items.filter(r=>r.variance>0).reduce((r,n)=>r+n.variance,0)]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Shortage: "}),s.jsx("span",{className:"text-red-600",children:e.items.filter(r=>r.variance<0).reduce((r,n)=>r+n.variance,0)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Net Variance: "}),s.jsxs("span",{className:e.totalVariance!==0?e.totalVariance>0?"text-green-600":"text-red-600":"",children:[e.totalVariance>0?"+":"",e.totalVariance]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6 mt-8 pt-4 border-t-2 border-black",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Inventory Committee Chairman"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Property Custodian"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Supply Officer"})]})]})]})]})]})},TB=({data:e})=>{const t=()=>{window.print()};return s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 print:hidden",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Report of Lost, Stolen, Damaged or Destroyed Property"}),s.jsxs(le,{onClick:t,className:"flex items-center gap-2",children:[s.jsx($r,{className:"h-4 w-4"}),"Print"]})]}),s.jsxs(Te,{className:"print:shadow-none print:border-2 print:border-black",children:[s.jsx(ze,{className:"text-center border-b-2 border-black",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-lg font-bold uppercase",children:"REPORT OF LOST, STOLEN, DAMAGED OR DESTROYED PROPERTY"}),s.jsx("p",{className:"text-sm",children:"Republic of the Philippines"}),s.jsx("p",{className:"text-sm font-semibold",children:"[Department/Agency Name]"})]})}),s.jsxs(Ae,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Report Number:"}),s.jsx("p",{className:"font-mono text-lg",children:e.reportNumber})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Report Date:"}),s.jsx("p",{className:"text-sm",children:e.reportDate})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Department:"}),s.jsx("p",{className:"text-sm",children:e.department})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Reported By:"}),s.jsx("p",{className:"text-sm",children:e.reportedBy})]})]}),s.jsx("div",{className:"space-y-3",children:s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Investigated By:"}),s.jsx("p",{className:"text-sm",children:e.investigatedBy})]})})]}),s.jsx("div",{className:"border-2 border-black",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-black bg-gray-100",children:[s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Item No."}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Property Number"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Description"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Qty"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Unit Cost"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Total Cost"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Date Acquired"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Date of Loss"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Cause"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Responsible Person"}),s.jsx("th",{className:"p-2 text-center",children:"Action Taken"})]})}),s.jsx("tbody",{children:e.items.map((r,n)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 text-center",children:n+1}),s.jsx("td",{className:"border-r border-black p-2 text-center font-mono",children:r.propertyNumber}),s.jsx("td",{className:"border-r border-black p-2",children:r.description}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.quantity}),s.jsxs("td",{className:"border-r border-black p-2 text-right",children:["",r.unitCost.toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsxs("td",{className:"border-r border-black p-2 text-right font-semibold",children:["",r.totalCost.toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.dateAcquired}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:r.dateOfLoss}),s.jsx("td",{className:"border-r border-black p-2",children:r.cause}),s.jsx("td",{className:"border-r border-black p-2",children:r.responsible}),s.jsx("td",{className:"p-2",children:r.actionTaken})]},n))}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"border-t-2 border-black bg-gray-100",children:[s.jsx("td",{colSpan:5,className:"border-r border-black p-2 text-center font-semibold",children:"TOTAL LOSS VALUE:"}),s.jsxs("td",{className:"border-r border-black p-2 text-right font-bold text-lg text-red-600",children:["",e.totalLoss.toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsx("td",{colSpan:5,className:"p-2"})]})})]})}),s.jsxs("div",{className:"mt-6 p-4 border border-gray-400",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"RECOMMENDATIONS:"}),s.jsx("div",{className:"space-y-2 text-sm",children:s.jsx("div",{className:"border-b border-gray-200 pb-8",children:s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Recommended actions based on investigation findings:"})})})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-8 pt-4 border-t-2 border-black",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Prepared by:"}),s.jsx("p",{className:"text-xs",children:"Supply Officer"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Noted by:"}),s.jsx("p",{className:"text-xs",children:"Property Custodian"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Approved by:"}),s.jsx("p",{className:"text-xs",children:"Head of Office"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Date"})]})]})]})]})]})},AB=({data:e})=>{const t=()=>{window.print()},r=n=>{switch(n){case"Repair":return"text-blue-600";case"Dispose":return"text-orange-600";case"Condemn":return"text-red-600";default:return""}};return s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 print:hidden",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Inventory and Inspection Report of Unserviceable Semi-Expandable Property"}),s.jsxs(le,{onClick:t,className:"flex items-center gap-2",children:[s.jsx($r,{className:"h-4 w-4"}),"Print"]})]}),s.jsxs(Te,{className:"print:shadow-none print:border-2 print:border-black",children:[s.jsx(ze,{className:"text-center border-b-2 border-black",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-lg font-bold uppercase",children:"INVENTORY AND INSPECTION REPORT OF UNSERVICEABLE SEMI-EXPANDABLE PROPERTY"}),s.jsx("p",{className:"text-sm",children:"Republic of the Philippines"}),s.jsx("p",{className:"text-sm font-semibold",children:"[Department/Agency Name]"})]})}),s.jsxs(Ae,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Report Number:"}),s.jsx("p",{className:"font-mono text-lg",children:e.reportNumber})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Report Date:"}),s.jsx("p",{className:"text-sm",children:e.reportDate})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Department:"}),s.jsx("p",{className:"text-sm",children:e.department})]}),s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Review Period:"}),s.jsx("p",{className:"text-sm",children:e.reviewPeriod})]})]}),s.jsx("div",{className:"space-y-3",children:s.jsxs("div",{className:"border-b border-gray-400 pb-1",children:[s.jsx("label",{className:"text-xs font-semibold uppercase",children:"Inspected By:"}),s.jsx("div",{className:"text-sm space-y-1",children:e.inspectedBy.map((n,a)=>s.jsx("p",{children:n},a))})]})})]}),s.jsx("div",{className:"border-2 border-black",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-black bg-gray-100",children:[s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Item No."}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Property Number"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Description"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Qty"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Unit Cost"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Total Cost"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Date Acquired"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Condition"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Defects/Issues"}),s.jsx("th",{className:"border-r border-black p-2 text-center",children:"Recommendation"}),s.jsx("th",{className:"p-2 text-center",children:"Estimated Repair Cost"})]})}),s.jsx("tbody",{children:e.items.map((n,a)=>s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("td",{className:"border-r border-black p-2 text-center",children:a+1}),s.jsx("td",{className:"border-r border-black p-2 text-center font-mono",children:n.propertyNumber}),s.jsx("td",{className:"border-r border-black p-2",children:n.description}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:n.quantity}),s.jsxs("td",{className:"border-r border-black p-2 text-right",children:["",n.unitCost.toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsxs("td",{className:"border-r border-black p-2 text-right",children:["",n.totalCost.toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:n.dateAcquired}),s.jsx("td",{className:"border-r border-black p-2 text-center",children:n.condition}),s.jsx("td",{className:"border-r border-black p-2",children:n.defects}),s.jsx("td",{className:`border-r border-black p-2 text-center font-semibold ${r(n.recommendation)}`,children:n.recommendation}),s.jsx("td",{className:"p-2 text-right",children:n.estimatedRepairCost?`${n.estimatedRepairCost.toLocaleString("en-PH",{minimumFractionDigits:2})}`:"-"})]},a))}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"border-t-2 border-black bg-gray-100",children:[s.jsx("td",{colSpan:5,className:"border-r border-black p-2 text-center font-semibold",children:"TOTAL VALUE OF UNSERVICEABLE PROPERTY:"}),s.jsxs("td",{className:"border-r border-black p-2 text-right font-bold text-lg text-orange-600",children:["",e.totalValue.toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsx("td",{colSpan:5,className:"p-2"})]})})]})}),s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 border border-gray-400",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-semibold text-blue-600",children:"FOR REPAIR"}),s.jsx("p",{className:"text-2xl font-bold",children:e.items.filter(n=>n.recommendation==="Repair").length}),s.jsx("p",{className:"text-sm text-gray-600",children:"items"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-semibold text-orange-600",children:"FOR DISPOSAL"}),s.jsx("p",{className:"text-2xl font-bold",children:e.items.filter(n=>n.recommendation==="Dispose").length}),s.jsx("p",{className:"text-sm text-gray-600",children:"items"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-semibold text-red-600",children:"FOR CONDEMNATION"}),s.jsx("p",{className:"text-2xl font-bold",children:e.items.filter(n=>n.recommendation==="Condemn").length}),s.jsx("p",{className:"text-sm text-gray-600",children:"items"})]})]}),s.jsxs("div",{className:"p-4 border border-gray-400",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"INSPECTOR'S NOTES:"}),s.jsx("div",{className:"space-y-2 text-sm",children:s.jsx("div",{className:"border-b border-gray-200 pb-8",children:s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Additional observations and recommendations:"})})})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6 mt-8 pt-4 border-t-2 border-black",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Inspection Committee Chairman"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Property Custodian"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-black mb-1 pb-8"}),s.jsx("p",{className:"text-xs font-semibold",children:"Supply Officer"})]})]})]})]})]})},IB=({data:e})=>{const[t,r]=h.useState(""),[n,a]=h.useState(!1),{data:i=[],isLoading:o}=rr({queryKey:["custodian-summaries"],queryFn:()=>ms.getAllSummaries(),enabled:!0}),{data:l=[]}=rr({queryKey:["custodian-item-history",t,n],queryFn:()=>ms.getItemHistory(t,{includeReturned:n}),enabled:!!t}),c=i.find(u=>u.custodian.id===t),d=()=>{console.log("Exporting custodian report...")};return o?s.jsx("div",{className:"p-6",children:s.jsx(Te,{children:s.jsx(Ae,{className:"p-6",children:s.jsx("div",{className:"text-center",children:"Loading custodian data..."})})})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Ci,{className:"h-8 w-8"}),"Custodian Information Report"]}),s.jsx("p",{className:"text-muted-foreground",children:"Comprehensive report showing all items and records for each custodian"})]}),s.jsxs(le,{onClick:d,children:[s.jsx(wy,{className:"h-4 w-4 mr-2"}),"Export Report"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Te,{children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ci,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Custodians"}),s.jsx("p",{className:"text-2xl font-bold",children:i.length})]})]})})}),s.jsx(Te,{children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(un,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Items Assigned"}),s.jsx("p",{className:"text-2xl font-bold",children:i.reduce((u,f)=>u+f.total_items_assigned,0)})]})]})})}),s.jsx(Te,{children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(du,{className:"h-5 w-5 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Value Assigned"}),s.jsxs("p",{className:"text-2xl font-bold",children:["",i.reduce((u,f)=>u+f.total_value_assigned,0).toLocaleString()]})]})]})})}),s.jsx(Te,{children:s.jsx(Ae,{className:"p4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(un,{className:"h-5 w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Currently Assigned"}),s.jsx("p",{className:"text-2xl font-bold",children:i.reduce((u,f)=>u+f.currently_assigned_items,0)})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsxs(et,{className:"flex items-center gap-2",children:[s.jsx(Cc,{className:"h-5 w-5"}),"All Custodians"]})}),s.jsx(Ae,{children:s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:i.map(u=>s.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${t===u.custodian.id?"bg-primary text-primary-foreground":"hover:bg-secondary"}`,onClick:()=>r(u.custodian.id),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:u.custodian.name}),s.jsx("p",{className:"text-sm opacity-75",children:u.custodian.custodian_no})]}),s.jsx(it,{variant:u.custodian.is_active?"default":"secondary",children:u.currently_assigned_items})]}),s.jsxs("div",{className:"mt-2 text-xs opacity-75",children:[s.jsx("p",{children:u.custodian.department_name||"No Department"}),s.jsxs("p",{children:["",u.currently_assigned_value.toLocaleString()]})]})]},u.custodian.id))})})]})}),s.jsx("div",{className:"lg:col-span-2",children:c?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsxs(et,{className:"flex items-center justify-between",children:[s.jsx("span",{children:c.custodian.name}),s.jsx(it,{variant:c.custodian.is_active?"default":"secondary",children:c.custodian.is_active?"Active":"Inactive"})]})}),s.jsx(Ae,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Custodian Number"}),s.jsx("p",{className:"font-mono",children:c.custodian.custodian_no})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Position"}),s.jsx("p",{children:c.custodian.position||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Department"}),s.jsx("p",{children:c.custodian.department_name||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Activity"}),s.jsx("p",{children:c.last_activity_date?hs(new Date(c.last_activity_date),"MMM dd, yyyy"):"No activity"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(Te,{children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(un,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Items"}),s.jsx("p",{className:"text-2xl font-bold",children:c.currently_assigned_items})]})]})})}),s.jsx(Te,{children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(du,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Value"}),s.jsxs("p",{className:"text-2xl font-bold",children:["",c.currently_assigned_value.toLocaleString()]})]})]})})}),s.jsx(Te,{children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hn,{className:"h-5 w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Items"}),s.jsx("p",{className:"text-2xl font-bold",children:c.total_items_assigned})]})]})})}),s.jsx(Te,{children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(du,{className:"h-5 w-5 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Value"}),s.jsxs("p",{className:"text-2xl font-bold",children:["",c.total_value_assigned.toLocaleString()]})]})]})})})]}),s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsxs(et,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Item History"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(Dt,{value:n?"all":"current",onValueChange:u=>a(u==="all"),children:[s.jsx(kt,{className:"w-40",children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"current",children:"Current Only"}),s.jsx(we,{value:"all",children:"All History"})]})]})})]})}),s.jsx(Ae,{children:l.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No item history found for this custodian."}):s.jsxs(Lr,{children:[s.jsx(nn,{children:s.jsxs(ht,{children:[s.jsx(Se,{children:"Property Number"}),s.jsx(Se,{children:"Description"}),s.jsx(Se,{children:"Category"}),s.jsx(Se,{children:"Condition"}),s.jsx(Se,{children:"Value"}),s.jsx(Se,{children:"Slip Number"}),s.jsx(Se,{children:"Date Issued"}),s.jsx(Se,{children:"Status"})]})}),s.jsx(sn,{children:l.map(u=>s.jsxs(ht,{children:[s.jsx(xe,{className:"font-mono",children:u.property_number}),s.jsx(xe,{children:u.description}),s.jsx(xe,{children:s.jsx(it,{variant:"outline",children:u.category})}),s.jsx(xe,{children:s.jsx(it,{variant:u.condition==="Serviceable"?"default":"destructive",children:u.condition})}),s.jsxs(xe,{children:["",u.total_cost.toLocaleString()]}),s.jsx(xe,{className:"font-mono",children:u.custodian_slip_number}),s.jsx(xe,{children:u.date_issued?hs(new Date(u.date_issued),"MMM dd, yyyy"):"-"}),s.jsx(xe,{children:s.jsx(it,{variant:u.is_currently_assigned?"default":"secondary",children:u.is_currently_assigned?"Currently Assigned":"Returned"})})]},u.id))})]})})]})]}):s.jsx(Te,{children:s.jsx(Ae,{className:"p-6",children:s.jsx("div",{className:"text-center text-muted-foreground",children:"Select a custodian from the list to view detailed information"})})})})]})]})},RB={async getAll(e={}){const{page:t=1,limit:r=50,category:n,status:a,condition:i,search:o}=e,{from:l,to:c}=Vf(t,r);let d=H.from("inventory_items").select(`
        *,
        suppliers:supplier_id(name),
        locations:location_id(name),
        fund_sources:fund_source_id(name)
      `,{count:"exact"}).range(l,c);n&&(d=d.eq("category",n)),a&&(d=d.eq("status",a)),i&&(d=d.eq("condition",i)),o&&(d=d.or(`property_number.ilike.%${o}%,description.ilike.%${o}%,brand.ilike.%${o}%`));const u=await d.order("created_at",{ascending:!1});if(u.error)return{data:[],pagination:{page:t,limit:r,total:0,totalPages:0},success:!1,error:u.error.message};const f=u.count||0,m=Math.ceil(f/r);return{data:u.data||[],pagination:{page:t,limit:r,total:f,totalPages:m},success:!0}},async getById(e){var r;const t=await H.from("inventory_items").select(`
        *,
        suppliers:supplier_id(name),
        locations:location_id(name),
        fund_sources:fund_source_id(name)
      `).eq("id",e).single();return{data:t.data,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async getByPropertyNumber(e){var r;const t=await H.from("inventory_items").select(`
        *,
        suppliers:supplier_id(name),
        locations:location_id(name),
        fund_sources:fund_source_id(name)
      `).eq("property_number",e).single();return{data:t.data,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async create(e){var r;const t=await H.from("inventory_items").insert({property_number:e.propertyNumber,description:e.description,brand:e.brand,model:e.model,serial_number:e.serialNumber,unit_of_measure:e.unitOfMeasure,quantity:e.quantity,unit_cost:e.unitCost,total_cost:e.totalCost,date_acquired:e.dateAcquired,supplier_id:e.supplier||null,condition:e.condition,location_id:e.location||null,custodian_id:e.custodian||null,custodian_position:e.custodianPosition,accountable_officer:e.accountableOfficer,fund_source_id:e.fundSource||null,remarks:e.remarks,last_inventory_date:e.lastInventoryDate,category:e.category,status:e.status}).select().single();return{data:t.data,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async update(e,t){var a;const r={};t.propertyNumber&&(r.property_number=t.propertyNumber),t.description&&(r.description=t.description),t.brand&&(r.brand=t.brand),t.model&&(r.model=t.model),t.serialNumber&&(r.serial_number=t.serialNumber),t.unitOfMeasure&&(r.unit_of_measure=t.unitOfMeasure),t.quantity!==void 0&&(r.quantity=t.quantity),t.unitCost!==void 0&&(r.unit_cost=t.unitCost),t.totalCost!==void 0&&(r.total_cost=t.totalCost),t.dateAcquired&&(r.date_acquired=t.dateAcquired),t.supplier&&(r.supplier_id=t.supplier),t.condition&&(r.condition=t.condition),t.location&&(r.location_id=t.location),t.custodian&&(r.custodian_id=t.custodian),t.custodianPosition&&(r.custodian_position=t.custodianPosition),t.accountableOfficer&&(r.accountable_officer=t.accountableOfficer),t.fundSource&&(r.fund_source_id=t.fundSource),t.remarks&&(r.remarks=t.remarks),t.lastInventoryDate&&(r.last_inventory_date=t.lastInventoryDate),t.category&&(r.category=t.category),t.status&&(r.status=t.status);const n=await H.from("inventory_items").update(r).eq("id",e).select().single();return{data:n.data,error:((a=n.error)==null?void 0:a.message)||null,success:!n.error}},async delete(e){var r;const t=await H.from("inventory_items").delete().eq("id",e);return{data:t.data,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async getStatistics(){try{const{count:e}=await H.from("inventory_items").select("*",{count:"exact",head:!0}),{data:t}=await H.from("inventory_items").select("total_cost"),r=(t==null?void 0:t.reduce((d,u)=>d+(u.total_cost||0),0))||0,{data:n}=await H.from("inventory_items").select("category").not("category","is",null),a=(n==null?void 0:n.reduce((d,u)=>(d[u.category]=(d[u.category]||0)+1,d),{}))||{},{data:i}=await H.from("inventory_items").select("status").not("status","is",null),o=(i==null?void 0:i.reduce((d,u)=>(d[u.status]=(d[u.status]||0)+1,d),{}))||{},{data:l}=await H.from("inventory_items").select("condition").not("condition","is",null),c=(l==null?void 0:l.reduce((d,u)=>(d[u.condition]=(d[u.condition]||0)+1,d),{}))||{};return{data:{totalItems:e||0,totalValue:r,byCategory:a,byStatus:o,byCondition:c},error:null,success:!0}}catch(e){return{data:null,error:e instanceof Error?e.message:"Unknown error",success:!1}}},async search(e,t={}){return this.getAll({...t,search:e})}},OB={async getAll(e={}){const{page:t=1,limit:r=50,isActive:n,search:a}=e,{from:i,to:o}=Vf(t,r);let l=H.from("departments").select("*",{count:"exact"}).range(i,o);n!==void 0&&(l=l.eq("is_active",n)),a&&(l=l.or(`name.ilike.%${a}%,code.ilike.%${a}%,description.ilike.%${a}%`));const c=await l.order("name",{ascending:!0});if(c.error)return{data:[],pagination:{page:t,limit:r,total:0,totalPages:0},success:!1,error:c.error.message};const d=c.count||0,u=Math.ceil(d/r);return{data:c.data||[],pagination:{page:t,limit:r,total:d,totalPages:u},success:!0}},async getById(e){var r;const t=await H.from("departments").select("*").eq("id",e).single();return{data:t.data||null,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async create(e){var r;const t=await H.from("departments").insert(e).select().single();return{data:t.data||null,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}},async update(e,t){var n;const r=await H.from("departments").update(t).eq("id",e).select().single();return{data:r.data||null,error:((n=r.error)==null?void 0:n.message)||null,success:!r.error}},async delete(e){var r;const t=await H.from("departments").delete().eq("id",e);return{data:t.data,error:((r=t.error)==null?void 0:r.message)||null,success:!t.error}}},jm={inventory:RB,departments:OB,propertyCards:dr},Kd=({reportType:e,reportName:t,trigger:r})=>{const[n,a]=h.useState("live"),[i,o]=h.useState(null),[l,c]=h.useState(!1),[d,u]=h.useState(null),f=async()=>{c(!0),u(null);try{switch(e){case"Inventory Summary":case"Property Card":const p=await jm.propertyCards.getAll({limit:1});if(p.success&&p.data.length>0){const g=p.data[0],w=await jm.propertyCards.getEntries(g.id);o({...g,entries:w.data||[]})}break;case"Property Ledger":const x=await jm.inventory.getAll({limit:1});if(x.success&&x.data.length>0){const g=x.data[0];o({propertyNumber:g.propertyNumber,description:g.description,unit:g.unitOfMeasure,entries:[{date:g.dateAcquired,referenceNumber:"INITIAL",received:g.quantity,issued:0,balance:g.quantity,recipient:"Stock Inventory"}]})}break;case"Custodian Report":u("Custodian reports not available");break;case"Transfer Report":u("Transfer reports not available");break;case"Physical Count Summary":u("Physical count reports not available");break;case"Loss Report Summary":u("Loss reports not available");break;case"Unserviceable Report":u("Unserviceable reports not available");break;case"Custodian Report":o({});break;default:u("Report type not implemented yet")}}catch(p){u(p instanceof Error?p.message:"Failed to fetch report data")}finally{c(!1)}};h.useEffect(()=>{n==="live"&&f()},[n,e]);const m=()=>{if(l)return s.jsxs("div",{className:"flex items-center justify-center p-8",children:[s.jsx(Gt,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading report data..."})]});if(d)return s.jsxs("div",{className:"p-8 text-center",children:[s.jsxs("p",{className:"text-red-600 mb-4",children:["Error: ",d]}),s.jsx(le,{onClick:f,children:"Retry"})]});if(!i)return s.jsx("div",{className:"p-8 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"No data available for this report."})});switch(e){case"Inventory Summary":case"Property Card":return s.jsx(dk,{data:i});case"Property Ledger":return s.jsx(EB,{data:i});case"Custodian Report":return s.jsx(IB,{data:i});case"Transfer Report":return s.jsx(kB,{data:i});case"Physical Count Summary":return s.jsx(PB,{data:i});case"Loss Report Summary":return s.jsx(TB,{data:i});case"Unserviceable Report":return s.jsx(AB,{data:i});default:return s.jsx("div",{className:"p-8 text-center",children:"Report type not implemented yet."})}};return s.jsxs(fn,{children:[s.jsx(_q,{asChild:!0,children:r||s.jsx(le,{variant:"outline",children:t})}),s.jsxs(Zr,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[s.jsx(pn,{children:s.jsx(gn,{children:t})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("label",{className:"text-sm font-medium",children:"Data Source:"}),s.jsxs(Dt,{value:n,onValueChange:a,children:[s.jsx(kt,{className:"w-48",children:s.jsx(Mt,{})}),s.jsx(Pt,{children:s.jsx(we,{value:"live",children:"Live Data"})})]}),n==="live"&&s.jsx(le,{onClick:f,variant:"outline",size:"sm",children:"Refresh"})]}),m()]})]})]})},DB=[{id:"1",name:"Inventory Summary Report",type:"Inventory Summary",description:"Complete overview of all semi-expandable property items with their current status, location, and condition",frequency:"Monthly",status:"Available"},{id:"2",name:"Issued vs Unissued Items Report",type:"Inventory Summary",description:"Detailed breakdown of issued and unissued items with assignment status and custodian information",frequency:"Weekly",status:"Available"},{id:"3",name:"Semi-Expendable Property Ledger",type:"Property Ledger",description:"Detailed ledger showing all property movements, acquisitions, transfers, and disposals",frequency:"Quarterly",status:"Available"},{id:"4",name:"Property Transfer Summary",type:"Transfer Report",description:"Summary of all property transfers between departments including pending and completed transfers",frequency:"Monthly",status:"Available"},{id:"5",name:"Custodian Information Report",type:"Custodian Report",description:"Comprehensive report showing all items and records for each custodian, including current assignments and historical data",frequency:"Weekly",status:"Available"},{id:"6",name:"Physical Count Variance Report",type:"Physical Count Summary",description:"Analysis of physical count results showing variances between expected and actual quantities",frequency:"Annual",status:"Generating"},{id:"5",name:"Loss and Damage Summary",type:"Loss Report Summary",description:"Comprehensive report of lost, stolen, damaged, or destroyed property with financial impact",frequency:"Quarterly",status:"Available"},{id:"6",name:"Unserviceable Property Report",type:"Unserviceable Report",description:"Report on property items that are unserviceable and recommendations for disposal or repair",frequency:"Monthly",status:"Available"},{id:"7",name:"Custodian Accountability Report",type:"Custodian Report",description:"Report showing property assigned to each custodian and their current accountability status",frequency:"Quarterly",status:"Scheduled"}],MB=()=>{const[e]=h.useState(DB),[t,r]=h.useState("All"),[n,a]=h.useState("All"),[i,o]=h.useState({from:"",to:""}),[l,c]=h.useState("All"),{toast:d}=Zn(),u=x=>{d({title:"Download Started",description:`Downloading ${x.name}...`})},f=x=>{switch(x){case"Available":return"success";case"Generating":return"warning";case"Scheduled":return"secondary";default:return"secondary"}},m=x=>{switch(x){case"Inventory Summary":return s.jsx(un,{className:"h-5 w-5"});case"Property Ledger":return s.jsx(Hn,{className:"h-5 w-5"});case"Transfer Report":return s.jsx(jp,{className:"h-5 w-5"});case"Physical Count Summary":return s.jsx(Kh,{className:"h-5 w-5"});case"Loss Report Summary":return s.jsx(Uu,{className:"h-5 w-5"});case"Unserviceable Report":return s.jsx(Uu,{className:"h-5 w-5"});case"Custodian Report":return s.jsx(Hn,{className:"h-5 w-5"});default:return s.jsx(Hn,{className:"h-5 w-5"})}},p=e.filter(x=>{const g=t==="All"||x.type===t,w=n==="All"||x.status===n;return g&&w});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Reports & Analytics"}),s.jsxs(le,{className:"flex items-center gap-2",children:[s.jsx(cu,{className:"h-4 w-4"}),"Schedule Report"]})]}),s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{children:"Report Filters"})}),s.jsx(Ae,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx(he,{children:"Report Type"}),s.jsxs(Dt,{value:t,onValueChange:r,children:[s.jsx(kt,{children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"All",children:"All Types"}),s.jsx(we,{value:"Inventory Summary",children:"Inventory Summary"}),s.jsx(we,{value:"Property Ledger",children:"Property Ledger"}),s.jsx(we,{value:"Transfer Report",children:"Transfer Report"}),s.jsx(we,{value:"Physical Count Summary",children:"Physical Count"}),s.jsx(we,{value:"Loss Report Summary",children:"Loss Report"}),s.jsx(we,{value:"Unserviceable Report",children:"Unserviceable"}),s.jsx(we,{value:"Custodian Report",children:"Custodian Report"})]})]})]}),s.jsxs("div",{children:[s.jsx(he,{children:"Status"}),s.jsxs(Dt,{value:n,onValueChange:a,children:[s.jsx(kt,{children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"All",children:"All Status"}),s.jsx(we,{value:"Available",children:"Available"}),s.jsx(we,{value:"Generating",children:"Generating"}),s.jsx(we,{value:"Scheduled",children:"Scheduled"})]})]})]}),s.jsxs("div",{children:[s.jsx(he,{children:"Department"}),s.jsxs(Dt,{value:l,onValueChange:c,children:[s.jsx(kt,{children:s.jsx(Mt,{})}),s.jsxs(Pt,{children:[s.jsx(we,{value:"All",children:"All Departments"}),s.jsx(we,{value:"IT",children:"IT Department"}),s.jsx(we,{value:"HR",children:"Human Resources"}),s.jsx(we,{value:"Finance",children:"Finance"}),s.jsx(we,{value:"Operations",children:"Operations"})]})]})]}),s.jsxs("div",{children:[s.jsx(he,{children:"Date Range"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ke,{type:"date",value:i.from,onChange:x=>o({...i,from:x.target.value}),className:"flex-1"}),s.jsx(ke,{type:"date",value:i.to,onChange:x=>o({...i,to:x.target.value}),className:"flex-1"})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Te,{children:s.jsx(Ae,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Available Reports"}),s.jsx("p",{className:"text-2xl font-bold",children:e.filter(x=>x.status==="Available").length})]}),s.jsx(Hn,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(Te,{children:s.jsx(Ae,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Generating"}),s.jsx("p",{className:"text-2xl font-bold",children:e.filter(x=>x.status==="Generating").length})]}),s.jsx(Kh,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(Te,{children:s.jsx(Ae,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled"}),s.jsx("p",{className:"text-2xl font-bold",children:e.filter(x=>x.status==="Scheduled").length})]}),s.jsx(cu,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(Te,{children:s.jsx(Ae,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Reports"}),s.jsx("p",{className:"text-2xl font-bold",children:e.length})]}),s.jsx(jp,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:p.map(x=>s.jsxs(Te,{className:"hover:shadow-lg transition-shadow",children:[s.jsx(ze,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[m(x.type),s.jsxs("div",{children:[s.jsx(et,{className:"text-lg",children:x.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:x.type})]})]}),s.jsx(it,{variant:f(x.status),children:x.status})]})}),s.jsxs(Ae,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:x.description}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Frequency:"}),s.jsx("span",{className:"font-medium",children:x.frequency})]}),x.lastGenerated&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Last Generated:"}),s.jsx("span",{className:"font-medium",children:x.lastGenerated})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Kd,{reportType:x.type,reportName:x.name,trigger:s.jsx(le,{className:"flex-1",disabled:x.status==="Generating",children:x.status==="Generating"?"Generating...":"Generate"})}),s.jsx(le,{onClick:()=>u(x),variant:"outline",size:"icon",disabled:x.status!=="Available",children:s.jsx(wy,{className:"h-4 w-4"})})]})]})]},x.id))}),s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsx(et,{children:"Report Templates"})}),s.jsx(Ae,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(Kd,{reportType:"Property Card",reportName:"Custom Property Card",trigger:s.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted cursor-pointer transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(un,{className:"h-5 w-5 text-primary"}),s.jsx("h3",{className:"font-medium",children:"Custom Property Card"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate a semi-expandable property card with specific property details"})]})}),s.jsx(Kd,{reportType:"Property Ledger",reportName:"Property Ledger Card",trigger:s.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted cursor-pointer transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(Kh,{className:"h-5 w-5 text-primary"}),s.jsx("h3",{className:"font-medium",children:"Property Ledger Card"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate detailed property ledger showing all movements and transactions"})]})}),s.jsx(Kd,{reportType:"Custodian Report",reportName:"Inventory Custodian Slip",trigger:s.jsxs("div",{className:"p-4 border border-border rounded-lg hover:bg-muted cursor-pointer transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(cu,{className:"h-5 w-5 text-primary"}),s.jsx("h3",{className:"font-medium",children:"Custodian Slip"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate inventory custodian slip for property accountability"})]})})]})})]})]})};function LB(){const[e,t]=h.useState([]),[r,n]=h.useState(!0),[a,i]=h.useState(""),[o,l]=h.useState(""),[c,d]=h.useState(null),[u,f]=h.useState(null),[m,p]=h.useState(!1),x=async()=>{const S=[];try{S.push({step:"env:VITE_SUPABASE_URL",ok:!0,info:"https://jiusoksloniuozxrdiok.supabase.co"}),S.push({step:"env:VITE_SUPABASE_ANON_KEY",ok:!0,info:"<present>"});const{data:E,error:D}=await H.from("property_cards").select("id").limit(1);D?S.push({step:"db:select property_cards",ok:!1,error:D.message}):S.push({step:"db:select property_cards",ok:!0,info:`${(E==null?void 0:E.length)||0} rows accessible`});const U=(await H.auth.getSession()).data.session;S.push({step:"auth:session",ok:!!U,info:U?`user ${U.user.id}`:"no session"});const F={entity_name:"Debug Entity",fund_cluster:"101",semi_expendable_property:"Debug Item",property_number:`DBG-${Date.now()}`,description:"Debug connectivity",date_acquired:new Date().toISOString().slice(0,10),remarks:"debug"},L=await H.from("property_cards").insert(F).select("id").single();L.error?S.push({step:"db:insert property_cards",ok:!1,error:L.error.message}):(S.push({step:"db:insert property_cards",ok:!0,info:`id ${L.data.id}`}),await H.from("property_cards").delete().eq("id",L.data.id))}catch(E){const D=E instanceof Error?E.message:String(E);S.push({step:"unexpected",ok:!1,error:D})}finally{t(S),n(!1)}};h.useEffect(()=>{x()},[]);const g=async()=>{d(null),n(!0);const{error:S}=await H.auth.signInWithPassword({email:a,password:o});d(S?S.message:"Signed in"),await x()},w=async()=>{d(null),n(!0),await H.auth.signOut(),d("Signed out"),await x()},v=async S=>{let D=0;for(;;){const{data:U,error:F}=await H.from(S).select("id").range(D,D+1e3-1);if(F)throw F;const L=(U||[]).map(R=>R.id);if(!L.length)break;const $=await H.from(S).delete().in("id",L);if($.error)throw $.error;if(L.length<1e3)break;D+=1e3}},y=async()=>{f(null),p(!0);try{await v("transfer_items"),await v("property_transfers"),f("Transfers reset completed")}catch(S){const E=S instanceof Error?S.message:String(S);f(E)}finally{p(!1)}},b=async()=>{f(null),p(!0);try{await v("property_card_entries"),await v("property_cards"),f("Property cards reset completed")}catch(S){const E=S instanceof Error?S.message:String(S);f(E)}finally{p(!1)}},j=async()=>{f(null),p(!0);try{const{data:S}=await H.from("custodian_slip_items").select("inventory_item_id").not("inventory_item_id","is",null),E=S??[],D=Array.from(new Set(E.map(U=>U.inventory_item_id))).filter(U=>!!U);if(D.length>0){const U=await H.from("inventory_items").delete().not("id","in",D);if(U.error&&U.error.code!=="PGRST204")throw U.error}else await v("inventory_items");if(D.length>0){const U=await H.from("inventory_items").update({custodian:null,custodian_position:null,assignment_status:"Available",assigned_date:null,updated_at:new Date().toISOString()}).in("id",D);if(U.error&&U.error.code!=="PGRST204")throw U.error}f("Inventory reset completed (safe mode)")}catch(S){const E=S instanceof Error?S.message:String(S);f(E)}finally{p(!1)}},_=async()=>{f(null),p(!0);try{await v("property_card_entries"),await v("property_cards"),await v("transfer_items"),await v("property_transfers");const{data:S}=await H.from("custodian_slip_items").select("inventory_item_id").not("inventory_item_id","is",null),E=S??[],D=Array.from(new Set(E.map(U=>U.inventory_item_id))).filter(U=>!!U);if(D.length>0){const U=await H.from("inventory_items").delete().not("id","in",D);if(U.error&&U.error.code!=="PGRST204")throw U.error}else await v("inventory_items");if(D.length>0){const U=await H.from("inventory_items").update({custodian:null,custodian_position:null,assignment_status:"Available",assigned_date:null,updated_at:new Date().toISOString()}).in("id",D);if(U.error&&U.error.code!=="PGRST204")throw U.error}f("All resets completed")}catch(S){const E=S instanceof Error?S.message:String(S);f(E)}finally{p(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Supabase Debug"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Visit this page to verify environment, connectivity, auth session, and RLS inserts."}),s.jsxs("div",{className:"rounded border p-4 space-y-3",children:[s.jsx("div",{className:"font-medium",children:"Auth test"}),s.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[s.jsx("input",{className:"border rounded px-2 py-1",placeholder:"email",value:a,onChange:S=>i(S.target.value)}),s.jsx("input",{className:"border rounded px-2 py-1",placeholder:"password",type:"password",value:o,onChange:S=>l(S.target.value)}),s.jsx("button",{className:"border rounded px-3 py-1",onClick:g,children:"Sign in"}),s.jsx("button",{className:"border rounded px-3 py-1",onClick:w,children:"Sign out"})]}),c&&s.jsx("div",{className:"text-xs text-muted-foreground",children:c})]}),s.jsxs("div",{className:"rounded border p-4 space-y-3",children:[s.jsx("div",{className:"font-medium",children:"Reset data"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Destructive actions. Ensure correct environment."}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{className:"border rounded px-3 py-1 bg-red-600 text-white",disabled:m,onClick:y,children:"Clean Transfers"}),s.jsx("button",{className:"border rounded px-3 py-1 bg-red-600 text-white",disabled:m,onClick:b,children:"Clean Property Cards"}),s.jsx("button",{className:"border rounded px-3 py-1 bg-red-600 text-white",disabled:m,onClick:j,children:"Clean Inventory (safe)"}),s.jsx("button",{className:"border rounded px-3 py-1 bg-red-700 text-white",disabled:m,onClick:_,children:"Clean All"})]}),u&&s.jsx("div",{className:"text-xs text-muted-foreground",children:u})]}),r?s.jsx("div",{children:"Running checks"}):s.jsx("div",{className:"space-y-2",children:e.map((S,E)=>s.jsxs("div",{className:`rounded border p-3 ${S.ok?"border-green-500/40 bg-green-500/5":"border-red-500/40 bg-red-500/5"}`,children:[s.jsx("div",{className:"font-medium",children:S.step}),S.info&&s.jsx("div",{className:"text-xs mt-1",children:S.info}),S.error&&s.jsx("div",{className:"text-xs mt-1 text-red-600",children:S.error})]},E))})]})}function FB(){const e=es(),t=ts(),{toast:r}=Zn(),[n,a]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState([]),[f,m]=h.useState([]),[p,x]=h.useState([]),[g,w]=h.useState(""),v=e.hash?e.hash.substring(1):"suppliers",y=E=>{t(`${e.pathname}#${E}`,{replace:!0})},b=async()=>{a(!0);try{const[E,D,U,F,L]=await Promise.all([Gr.getSuppliers(),Gr.getFundSources(),Gr.getDepartments(),Gr.getCustodians(),Gr.getSemiExpandableCategories()]);o(E),c(D),u(U),m(F),x(L)}catch(E){r({title:"Failed to load lookups",description:(E==null?void 0:E.message)||String(E),variant:"destructive"})}finally{a(!1)}};h.useEffect(()=>{b()},[]);const j=E=>E.filter(D=>(D.name||"").toLowerCase().includes(g.toLowerCase())||(D.code||"").toLowerCase().includes(g.toLowerCase())),_=(E,D,U)=>{const[F,L]=h.useState("idle"),[$,R]=h.useState(null),[I,C]=h.useState({name:""}),T=E==="fund_sources"||E==="departments"||E==="custodians"||E==="semi_expandable_categories",re=E==="fund_sources",K=()=>{L("create"),R(null),C(T?E==="custodians"?{name:"",code:"",position:"",department_id:void 0,department_name:""}:{name:"",code:""}:{name:""})},z=async M=>{if(L("edit"),R(M),E==="custodians")try{const Y=await ms.getById(M.id);if(Y){C({name:Y.name,code:M.code,position:Y.position||"",department_id:Y.department_id||void 0,department_name:Y.department_name||""});return}}catch{}C(T?{name:M.name,code:M.code}:{name:M.name})},ae=()=>{L("idle"),R(null),C(E==="custodians"?{name:"",code:"",position:"",department_id:void 0,department_name:""}:{name:"",code:""})};return{mode:F,editing:$,form:I,setForm:C,startCreate:K,startEdit:z,save:async()=>{if(F==="edit"&&$){const M=await Gr.update(E,$.id,I);U(D.map(Y=>Y.id===$.id?M:Y))}else if(F==="create"){const M=await Gr.create(E,I);U([M,...D])}ae()},remove:async M=>{await Gr.remove(E,M),U(D.filter(Y=>Y.id!==M))},cancel:ae,hasCode:T,codeRequired:re}},S=({title:E,items:D,table:U,setItems:F})=>{var X;const{mode:L,editing:$,form:R,setForm:I,startCreate:C,startEdit:T,save:re,remove:K,cancel:z,hasCode:ae,codeRequired:ge}=_(U,D,F),W=h.useMemo(()=>{if(U!=="custodians")return[];const O=(($?D.filter(ee=>ee.id!==$.id):D)||[]).map(ee=>(ee.code||"").trim()).filter(Boolean).map(ee=>({c:ee,n:ee.match(/\d+/)?parseInt(ee.match(/\d+/)[0],10):NaN}));return O.sort((ee,de)=>(isFinite(de.n)?de.n:-1)-(isFinite(ee.n)?ee.n:-1)),O.map(ee=>ee.c)},[U,D,$]),M=h.useMemo(()=>{if(U!=="custodians")return"";const ie=W.map(O=>O.match(/\d+/)?parseInt(O.match(/\d+/)[0],10):NaN).filter(O=>Number.isFinite(O)),ne=ie.length?Math.max(...ie)+1:1;return`CUST-${String(ne).padStart(4,"0")}`},[U,W]),Y=h.useMemo(()=>{if(U!=="custodians")return!1;const ie=(R.code||"").trim();if(!ie)return!1;const O=`CUST-${(ie.match(/\d+/)?ie.match(/\d+/)[0]:ie).padStart(4,"0")}`;return W.includes(ie)||W.includes(O)},[U,R.code,W]);return s.jsxs(Te,{children:[s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(et,{children:E}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ke,{placeholder:"Search",value:g,onChange:ie=>w(ie.target.value)}),s.jsx(le,{variant:"outline",onClick:b,disabled:n,children:"Refresh"}),s.jsx(le,{onClick:C,children:"Add"})]})]})}),s.jsxs(Ae,{children:[L!=="idle"&&s.jsxs("div",{className:"mb-4 p-3 border rounded grid grid-cols-1 md:grid-cols-3 gap-2",children:[s.jsx(ke,{placeholder:"Name",value:R.name,onChange:ie=>I({...R,name:ie.target.value})}),ae&&s.jsx(ke,{placeholder:U==="custodians"?"Custodian No (auto if blank)":ge?"Code (required)":"Code (optional)",value:R.code||"",onChange:ie=>I({...R,code:ie.target.value}),required:ge}),U==="custodians"&&s.jsx(ke,{placeholder:"Position",value:R.position||"",onChange:ie=>I({...R,position:ie.target.value})}),U==="custodians"&&s.jsx(gk,{value:R.department_name||"",onChange:(ie,ne)=>I({...R,department_name:ie,department_id:ne==null?void 0:ne.id})}),U==="custodians"&&L==="create"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(le,{variant:"outline",type:"button",onClick:()=>I({...R,code:M}),children:"Use suggested"}),Y&&s.jsx("span",{className:"text-xs text-red-600",children:"This number already exists"})]}),U==="custodians"&&s.jsx("div",{className:"text-xs text-muted-foreground col-span-1 md:col-span-3",children:s.jsxs("div",{className:"flex flex-wrap gap-2 items-center mt-1",children:[s.jsx("span",{children:"Existing Nos:"}),s.jsxs("span",{className:"max-w-full truncate",children:[W.slice(0,12).join(", ")||"None yet",W.length>12?"":""]}),s.jsx("span",{className:"ml-2",children:"Suggested next:"}),s.jsx("span",{className:"font-medium",children:M})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(le,{onClick:re,disabled:!R.name.trim()||ge&&!((X=R.code)!=null&&X.trim())||U==="custodians"&&Y,children:"Save"}),s.jsx(le,{variant:"outline",onClick:z,children:"Cancel"})]})]}),s.jsxs("div",{className:"rounded border",children:[s.jsxs(Lr,{children:[s.jsx(nn,{children:s.jsxs(ht,{children:[s.jsx(Se,{className:"w-64",children:"Name"}),ae&&s.jsx(Se,{children:"Code"}),s.jsx(Se,{className:"w-40 text-right",children:"Actions"})]})}),s.jsx(sn,{children:j(D).map(ie=>s.jsxs(ht,{children:[s.jsx(xe,{children:ie.name}),ae&&s.jsx(xe,{children:ie.code||""}),s.jsx(xe,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(le,{variant:"outline",size:"sm",onClick:()=>T(ie),children:"Edit"}),s.jsx(le,{variant:"destructive",size:"sm",onClick:()=>K(ie.id),children:"Delete"})]})})]},ie.id))})]}),j(D).length===0&&s.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No records"})]})]})]})};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Settings  Lookups"}),s.jsxs(ah,{value:v,onValueChange:y,children:[s.jsxs(id,{children:[s.jsx(Cn,{value:"suppliers",children:"Suppliers"}),s.jsx(Cn,{value:"fundSources",children:"Fund Sources"}),s.jsx(Cn,{value:"departments",children:"Departments"}),s.jsx(Cn,{value:"custodians",children:"Custodians"}),s.jsx(Cn,{value:"semiExpandableCategories",children:"Semi Expandable Categories"})]}),s.jsx(En,{value:"suppliers",children:s.jsx(S,{title:"Suppliers",items:i,table:"suppliers",setItems:o})}),s.jsx(En,{value:"fundSources",children:s.jsx(S,{title:"Fund Sources",items:l,table:"fund_sources",setItems:c})}),s.jsx(En,{value:"departments",children:s.jsx(S,{title:"Departments",items:d,table:"departments",setItems:u})}),s.jsxs(En,{value:"custodians",children:[s.jsx(S,{title:"Custodians",items:f,table:"custodians",setItems:m}),f.length===0&&s.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Note:"})," If you don't see any custodians, make sure to run the SQL setup script in Supabase first. Check the ",s.jsx("code",{children:"database/custodians-setup.sql"})," file for the complete setup."]})})]}),s.jsx(En,{value:"semiExpandableCategories",children:s.jsx(S,{title:"Semi Expandable Categories",items:p,table:"semi_expandable_categories",setItems:x})})]})]})}var dd=e=>e.type==="checkbox",mi=e=>e instanceof Date,Or=e=>e==null;const Ak=e=>typeof e=="object";var Xt=e=>!Or(e)&&!Array.isArray(e)&&Ak(e)&&!mi(e),$B=e=>Xt(e)&&e.target?dd(e.target)?e.target.checked:e.target.value:e,qB=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,UB=(e,t)=>e.has(qB(t)),BB=e=>{const t=e.constructor&&e.constructor.prototype;return Xt(t)&&t.hasOwnProperty("isPrototypeOf")},Pv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function lr(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Pv&&(e instanceof Blob||n))&&(r||Xt(e)))if(t=r?[]:{},!r&&!BB(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=lr(e[a]));else return e;return t}var fh=e=>/^\w*$/.test(e),er=e=>e===void 0,Tv=e=>Array.isArray(e)?e.filter(Boolean):[],Av=e=>Tv(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Le=(e,t,r)=>{if(!t||!Xt(e))return r;const n=(fh(t)?[t]:Av(t)).reduce((a,i)=>Or(a)?a:a[i],e);return er(n)||n===e?er(e[t])?r:e[t]:n},os=e=>typeof e=="boolean",Rt=(e,t,r)=>{let n=-1;const a=fh(t)?[t]:Av(t),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let c=r;if(n!==o){const d=e[l];c=Xt(d)||Array.isArray(d)?d:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const T0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},zn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ss={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},VB=pe.createContext(null);VB.displayName="HookFormContext";var zB=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==zn.all&&(t._proxyFormState[o]=!n||zn.all),e[o]}});return a};const WB=typeof window<"u"?pe.useLayoutEffect:pe.useEffect;var gs=e=>typeof e=="string",HB=(e,t,r,n,a)=>gs(e)?(n&&t.watch.add(e),Le(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Le(r,i))):(n&&(t.watchAll=!0),r),vg=e=>Or(e)||!Ak(e);function fa(e,t,r=new WeakSet){if(vg(e)||vg(t))return e===t;if(mi(e)&&mi(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const l=t[i];if(mi(o)&&mi(l)||Xt(o)&&Xt(l)||Array.isArray(o)&&Array.isArray(l)?!fa(o,l,r):o!==l)return!1}}return!0}var QB=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},ic=e=>Array.isArray(e)?e:[e],A0=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},Hr=e=>Xt(e)&&!Object.keys(e).length,Iv=e=>e.type==="file",Wn=e=>typeof e=="function",lf=e=>{if(!Pv)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Ik=e=>e.type==="select-multiple",Rv=e=>e.type==="radio",KB=e=>Rv(e)||dd(e),_m=e=>lf(e)&&e.isConnected;function GB(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=er(e)?n++:e[t[n++]];return e}function YB(e){for(const t in e)if(e.hasOwnProperty(t)&&!er(e[t]))return!1;return!0}function Zt(e,t){const r=Array.isArray(t)?t:fh(t)?[t]:Av(t),n=r.length===1?e:GB(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(Xt(n)&&Hr(n)||Array.isArray(n)&&YB(n))&&Zt(e,r.slice(0,-1)),e}var Rk=e=>{for(const t in e)if(Wn(e[t]))return!0;return!1};function cf(e,t={}){const r=Array.isArray(e);if(Xt(e)||r)for(const n in e)Array.isArray(e[n])||Xt(e[n])&&!Rk(e[n])?(t[n]=Array.isArray(e[n])?[]:{},cf(e[n],t[n])):Or(e[n])||(t[n]=!0);return t}function Ok(e,t,r){const n=Array.isArray(e);if(Xt(e)||n)for(const a in e)Array.isArray(e[a])||Xt(e[a])&&!Rk(e[a])?er(t)||vg(r[a])?r[a]=Array.isArray(e[a])?cf(e[a],[]):{...cf(e[a])}:Ok(e[a],Or(t)?{}:t[a],r[a]):r[a]=!fa(e[a],t[a]);return r}var Ll=(e,t)=>Ok(e,t,cf(t));const I0={value:!1,isValid:!1},R0={value:!0,isValid:!0};var Dk=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!er(e[0].attributes.value)?er(e[0].value)||e[0].value===""?R0:{value:e[0].value,isValid:!0}:R0:I0}return I0},Mk=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>er(e)?e:t?e===""?NaN:e&&+e:r&&gs(e)?new Date(e):n?n(e):e;const O0={isValid:!1,value:null};var Lk=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,O0):O0;function D0(e){const t=e.ref;return Iv(t)?t.files:Rv(t)?Lk(e.refs).value:Ik(t)?[...t.selectedOptions].map(({value:r})=>r):dd(t)?Dk(e.refs).value:Mk(er(t.value)?e.ref.value:t.value,e)}var XB=(e,t,r,n)=>{const a={};for(const i of e){const o=Le(t,i);o&&Rt(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},df=e=>e instanceof RegExp,Fl=e=>er(e)?e:df(e)?e.source:Xt(e)?df(e.value)?e.value.source:e.value:e,M0=e=>({isOnSubmit:!e||e===zn.onSubmit,isOnBlur:e===zn.onBlur,isOnChange:e===zn.onChange,isOnAll:e===zn.all,isOnTouch:e===zn.onTouched});const L0="AsyncFunction";var JB=e=>!!e&&!!e.validate&&!!(Wn(e.validate)&&e.validate.constructor.name===L0||Xt(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===L0)),ZB=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),F0=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const oc=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=Le(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(oc(l,t))break}else if(Xt(l)&&oc(l,t))break}}};function $0(e,t,r){const n=Le(e,r);if(n||fh(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=Le(t,i),l=Le(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:r}}var eV=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return Hr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||zn.all))},tV=(e,t,r)=>!e||!t||e===t||ic(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),rV=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,nV=(e,t)=>!Tv(Le(e,t)).length&&Zt(e,t),sV=(e,t,r)=>{const n=ic(Le(e,r));return Rt(n,"root",t[r]),Rt(e,r,n),e},gu=e=>gs(e);function q0(e,t,r="validate"){if(gu(e)||Array.isArray(e)&&e.every(gu)||os(e)&&!e)return{type:r,message:gu(e)?e:"",ref:t}}var io=e=>Xt(e)&&!df(e)?e:{value:e,message:""},U0=async(e,t,r,n,a,i)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:u,min:f,max:m,pattern:p,validate:x,name:g,valueAsNumber:w,mount:v}=e._f,y=Le(r,g);if(!v||t.has(g))return{};const b=l?l[0]:o,j=$=>{a&&b.reportValidity&&(b.setCustomValidity(os($)?"":$||""),b.reportValidity())},_={},S=Rv(o),E=dd(o),D=S||E,U=(w||Iv(o))&&er(o.value)&&er(y)||lf(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,F=QB.bind(null,g,n,_),L=($,R,I,C=Ss.maxLength,T=Ss.minLength)=>{const re=$?R:I;_[g]={type:$?C:T,message:re,ref:o,...F($?C:T,re)}};if(i?!Array.isArray(y)||!y.length:c&&(!D&&(U||Or(y))||os(y)&&!y||E&&!Dk(l).isValid||S&&!Lk(l).isValid)){const{value:$,message:R}=gu(c)?{value:!!c,message:c}:io(c);if($&&(_[g]={type:Ss.required,message:R,ref:b,...F(Ss.required,R)},!n))return j(R),_}if(!U&&(!Or(f)||!Or(m))){let $,R;const I=io(m),C=io(f);if(!Or(y)&&!isNaN(y)){const T=o.valueAsNumber||y&&+y;Or(I.value)||($=T>I.value),Or(C.value)||(R=T<C.value)}else{const T=o.valueAsDate||new Date(y),re=ae=>new Date(new Date().toDateString()+" "+ae),K=o.type=="time",z=o.type=="week";gs(I.value)&&y&&($=K?re(y)>re(I.value):z?y>I.value:T>new Date(I.value)),gs(C.value)&&y&&(R=K?re(y)<re(C.value):z?y<C.value:T<new Date(C.value))}if(($||R)&&(L(!!$,I.message,C.message,Ss.max,Ss.min),!n))return j(_[g].message),_}if((d||u)&&!U&&(gs(y)||i&&Array.isArray(y))){const $=io(d),R=io(u),I=!Or($.value)&&y.length>+$.value,C=!Or(R.value)&&y.length<+R.value;if((I||C)&&(L(I,$.message,R.message),!n))return j(_[g].message),_}if(p&&!U&&gs(y)){const{value:$,message:R}=io(p);if(df($)&&!y.match($)&&(_[g]={type:Ss.pattern,message:R,ref:o,...F(Ss.pattern,R)},!n))return j(R),_}if(x){if(Wn(x)){const $=await x(y,r),R=q0($,b);if(R&&(_[g]={...R,...F(Ss.validate,R.message)},!n))return j(R.message),_}else if(Xt(x)){let $={};for(const R in x){if(!Hr($)&&!n)break;const I=q0(await x[R](y,r),b,R);I&&($={...I,...F(R,I.message)},j(I.message),n&&(_[g]=$))}if(!Hr($)&&(_[g]={ref:b,...$},!n))return _}}return j(!0),_};const aV={mode:zn.onSubmit,reValidateMode:zn.onChange,shouldFocusError:!0};function iV(e={}){let t={...aV,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Wn(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Xt(t.defaultValues)||Xt(t.values)?lr(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:lr(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const m={array:A0(),state:A0()},p=t.criteriaMode===zn.all,x=N=>P=>{clearTimeout(d),d=setTimeout(N,P)},g=async N=>{if(!t.disabled&&(u.isValid||f.isValid||N)){const P=t.resolver?Hr((await E()).errors):await U(n,!0);P!==r.isValid&&m.state.next({isValid:P})}},w=(N,P)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((N||Array.from(l.mount)).forEach(V=>{V&&(P?Rt(r.validatingFields,V,P):Zt(r.validatingFields,V))}),m.state.next({validatingFields:r.validatingFields,isValidating:!Hr(r.validatingFields)}))},v=(N,P=[],V,se,te=!0,oe=!0)=>{if(se&&V&&!t.disabled){if(o.action=!0,oe&&Array.isArray(Le(n,N))){const fe=V(Le(n,N),se.argA,se.argB);te&&Rt(n,N,fe)}if(oe&&Array.isArray(Le(r.errors,N))){const fe=V(Le(r.errors,N),se.argA,se.argB);te&&Rt(r.errors,N,fe),nV(r.errors,N)}if((u.touchedFields||f.touchedFields)&&oe&&Array.isArray(Le(r.touchedFields,N))){const fe=V(Le(r.touchedFields,N),se.argA,se.argB);te&&Rt(r.touchedFields,N,fe)}(u.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Ll(a,i)),m.state.next({name:N,isDirty:L(N,P),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Rt(i,N,P)},y=(N,P)=>{Rt(r.errors,N,P),m.state.next({errors:r.errors})},b=N=>{r.errors=N,m.state.next({errors:r.errors,isValid:!1})},j=(N,P,V,se)=>{const te=Le(n,N);if(te){const oe=Le(i,N,er(V)?Le(a,N):V);er(oe)||se&&se.defaultChecked||P?Rt(i,N,P?oe:D0(te._f)):I(N,oe),o.mount&&g()}},_=(N,P,V,se,te)=>{let oe=!1,fe=!1;const De={name:N};if(!t.disabled){if(!V||se){(u.isDirty||f.isDirty)&&(fe=r.isDirty,r.isDirty=De.isDirty=L(),oe=fe!==De.isDirty);const Be=fa(Le(a,N),P);fe=!!Le(r.dirtyFields,N),Be?Zt(r.dirtyFields,N):Rt(r.dirtyFields,N,!0),De.dirtyFields=r.dirtyFields,oe=oe||(u.dirtyFields||f.dirtyFields)&&fe!==!Be}if(V){const Be=Le(r.touchedFields,N);Be||(Rt(r.touchedFields,N,V),De.touchedFields=r.touchedFields,oe=oe||(u.touchedFields||f.touchedFields)&&Be!==V)}oe&&te&&m.state.next(De)}return oe?De:{}},S=(N,P,V,se)=>{const te=Le(r.errors,N),oe=(u.isValid||f.isValid)&&os(P)&&r.isValid!==P;if(t.delayError&&V?(c=x(()=>y(N,V)),c(t.delayError)):(clearTimeout(d),c=null,V?Rt(r.errors,N,V):Zt(r.errors,N)),(V?!fa(te,V):te)||!Hr(se)||oe){const fe={...se,...oe&&os(P)?{isValid:P}:{},errors:r.errors,name:N};r={...r,...fe},m.state.next(fe)}},E=async N=>{w(N,!0);const P=await t.resolver(i,t.context,XB(N||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return w(N),P},D=async N=>{const{errors:P}=await E(N);if(N)for(const V of N){const se=Le(P,V);se?Rt(r.errors,V,se):Zt(r.errors,V)}else r.errors=P;return P},U=async(N,P,V={valid:!0})=>{for(const se in N){const te=N[se];if(te){const{_f:oe,...fe}=te;if(oe){const De=l.array.has(oe.name),Be=te._f&&JB(te._f);Be&&u.validatingFields&&w([se],!0);const Qe=await U0(te,l.disabled,i,p,t.shouldUseNativeValidation&&!P,De);if(Be&&u.validatingFields&&w([se]),Qe[oe.name]&&(V.valid=!1,P))break;!P&&(Le(Qe,oe.name)?De?sV(r.errors,Qe,oe.name):Rt(r.errors,oe.name,Qe[oe.name]):Zt(r.errors,oe.name))}!Hr(fe)&&await U(fe,P,V)}}return V.valid},F=()=>{for(const N of l.unMount){const P=Le(n,N);P&&(P._f.refs?P._f.refs.every(V=>!_m(V)):!_m(P._f.ref))&&ne(N)}l.unMount=new Set},L=(N,P)=>!t.disabled&&(N&&P&&Rt(i,N,P),!fa(ae(),a)),$=(N,P,V)=>HB(N,l,{...o.mount?i:er(P)?a:gs(N)?{[N]:P}:P},V,P),R=N=>Tv(Le(o.mount?i:a,N,t.shouldUnregister?Le(a,N,[]):[])),I=(N,P,V={})=>{const se=Le(n,N);let te=P;if(se){const oe=se._f;oe&&(!oe.disabled&&Rt(i,N,Mk(P,oe)),te=lf(oe.ref)&&Or(P)?"":P,Ik(oe.ref)?[...oe.ref.options].forEach(fe=>fe.selected=te.includes(fe.value)):oe.refs?dd(oe.ref)?oe.refs.forEach(fe=>{(!fe.defaultChecked||!fe.disabled)&&(Array.isArray(te)?fe.checked=!!te.find(De=>De===fe.value):fe.checked=te===fe.value||!!te)}):oe.refs.forEach(fe=>fe.checked=fe.value===te):Iv(oe.ref)?oe.ref.value="":(oe.ref.value=te,oe.ref.type||m.state.next({name:N,values:lr(i)})))}(V.shouldDirty||V.shouldTouch)&&_(N,te,V.shouldTouch,V.shouldDirty,!0),V.shouldValidate&&z(N)},C=(N,P,V)=>{for(const se in P){if(!P.hasOwnProperty(se))return;const te=P[se],oe=N+"."+se,fe=Le(n,oe);(l.array.has(N)||Xt(te)||fe&&!fe._f)&&!mi(te)?C(oe,te,V):I(oe,te,V)}},T=(N,P,V={})=>{const se=Le(n,N),te=l.array.has(N),oe=lr(P);Rt(i,N,oe),te?(m.array.next({name:N,values:lr(i)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&V.shouldDirty&&m.state.next({name:N,dirtyFields:Ll(a,i),isDirty:L(N,oe)})):se&&!se._f&&!Or(oe)?C(N,oe,V):I(N,oe,V),F0(N,l)&&m.state.next({...r,name:N}),m.state.next({name:o.mount?N:void 0,values:lr(i)})},re=async N=>{o.mount=!0;const P=N.target;let V=P.name,se=!0;const te=Le(n,V),oe=Be=>{se=Number.isNaN(Be)||mi(Be)&&isNaN(Be.getTime())||fa(Be,Le(i,V,Be))},fe=M0(t.mode),De=M0(t.reValidateMode);if(te){let Be,Qe;const jt=P.type?D0(te._f):$B(N),bt=N.type===T0.BLUR||N.type===T0.FOCUS_OUT,Wt=!ZB(te._f)&&!t.resolver&&!Le(r.errors,V)&&!te._f.deps||rV(bt,Le(r.touchedFields,V),r.isSubmitted,De,fe),lt=F0(V,l,bt);Rt(i,V,jt),bt?(te._f.onBlur&&te._f.onBlur(N),c&&c(0)):te._f.onChange&&te._f.onChange(N);const st=_(V,jt,bt),on=!Hr(st)||lt;if(!bt&&m.state.next({name:V,type:N.type,values:lr(i)}),Wt)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?bt&&g():bt||g()),on&&m.state.next({name:V,...lt?{}:st});if(!bt&&lt&&m.state.next({...r}),t.resolver){const{errors:$e}=await E([V]);if(oe(jt),se){const St=$0(r.errors,n,V),ft=$0($e,n,St.name||V);Be=ft.error,V=ft.name,Qe=Hr($e)}}else w([V],!0),Be=(await U0(te,l.disabled,i,p,t.shouldUseNativeValidation))[V],w([V]),oe(jt),se&&(Be?Qe=!1:(u.isValid||f.isValid)&&(Qe=await U(n,!0)));se&&(te._f.deps&&z(te._f.deps),S(V,Qe,Be,st))}},K=(N,P)=>{if(Le(r.errors,P)&&N.focus)return N.focus(),1},z=async(N,P={})=>{let V,se;const te=ic(N);if(t.resolver){const oe=await D(er(N)?N:te);V=Hr(oe),se=N?!te.some(fe=>Le(oe,fe)):V}else N?(se=(await Promise.all(te.map(async oe=>{const fe=Le(n,oe);return await U(fe&&fe._f?{[oe]:fe}:fe)}))).every(Boolean),!(!se&&!r.isValid)&&g()):se=V=await U(n);return m.state.next({...!gs(N)||(u.isValid||f.isValid)&&V!==r.isValid?{}:{name:N},...t.resolver||!N?{isValid:V}:{},errors:r.errors}),P.shouldFocus&&!se&&oc(n,K,N?te:l.mount),se},ae=N=>{const P={...o.mount?i:a};return er(N)?P:gs(N)?Le(P,N):N.map(V=>Le(P,V))},ge=(N,P)=>({invalid:!!Le((P||r).errors,N),isDirty:!!Le((P||r).dirtyFields,N),error:Le((P||r).errors,N),isValidating:!!Le(r.validatingFields,N),isTouched:!!Le((P||r).touchedFields,N)}),W=N=>{N&&ic(N).forEach(P=>Zt(r.errors,P)),m.state.next({errors:N?r.errors:{}})},M=(N,P,V)=>{const se=(Le(n,N,{_f:{}})._f||{}).ref,te=Le(r.errors,N)||{},{ref:oe,message:fe,type:De,...Be}=te;Rt(r.errors,N,{...Be,...P,ref:se}),m.state.next({name:N,errors:r.errors,isValid:!1}),V&&V.shouldFocus&&se&&se.focus&&se.focus()},Y=(N,P)=>Wn(N)?m.state.subscribe({next:V=>"values"in V&&N($(void 0,P),V)}):$(N,P,!0),X=N=>m.state.subscribe({next:P=>{tV(N.name,P.name,N.exact)&&eV(P,N.formState||u,Ye,N.reRenderRoot)&&N.callback({values:{...i},...r,...P,defaultValues:a})}}).unsubscribe,ie=N=>(o.mount=!0,f={...f,...N.formState},X({...N,formState:f})),ne=(N,P={})=>{for(const V of N?ic(N):l.mount)l.mount.delete(V),l.array.delete(V),P.keepValue||(Zt(n,V),Zt(i,V)),!P.keepError&&Zt(r.errors,V),!P.keepDirty&&Zt(r.dirtyFields,V),!P.keepTouched&&Zt(r.touchedFields,V),!P.keepIsValidating&&Zt(r.validatingFields,V),!t.shouldUnregister&&!P.keepDefaultValue&&Zt(a,V);m.state.next({values:lr(i)}),m.state.next({...r,...P.keepDirty?{isDirty:L()}:{}}),!P.keepIsValid&&g()},O=({disabled:N,name:P})=>{(os(N)&&o.mount||N||l.disabled.has(P))&&(N?l.disabled.add(P):l.disabled.delete(P))},ee=(N,P={})=>{let V=Le(n,N);const se=os(P.disabled)||os(t.disabled);return Rt(n,N,{...V||{},_f:{...V&&V._f?V._f:{ref:{name:N}},name:N,mount:!0,...P}}),l.mount.add(N),V?O({disabled:os(P.disabled)?P.disabled:t.disabled,name:N}):j(N,!0,P.value),{...se?{disabled:P.disabled||t.disabled}:{},...t.progressive?{required:!!P.required,min:Fl(P.min),max:Fl(P.max),minLength:Fl(P.minLength),maxLength:Fl(P.maxLength),pattern:Fl(P.pattern)}:{},name:N,onChange:re,onBlur:re,ref:te=>{if(te){ee(N,P),V=Le(n,N);const oe=er(te.value)&&te.querySelectorAll&&te.querySelectorAll("input,select,textarea")[0]||te,fe=KB(oe),De=V._f.refs||[];if(fe?De.find(Be=>Be===oe):oe===V._f.ref)return;Rt(n,N,{_f:{...V._f,...fe?{refs:[...De.filter(_m),oe,...Array.isArray(Le(a,N))?[{}]:[]],ref:{type:oe.type,name:N}}:{ref:oe}}}),j(N,!1,void 0,oe)}else V=Le(n,N,{}),V._f&&(V._f.mount=!1),(t.shouldUnregister||P.shouldUnregister)&&!(UB(l.array,N)&&o.action)&&l.unMount.add(N)}}},de=()=>t.shouldFocusError&&oc(n,K,l.mount),ce=N=>{os(N)&&(m.state.next({disabled:N}),oc(n,(P,V)=>{const se=Le(n,V);se&&(P.disabled=se._f.disabled||N,Array.isArray(se._f.refs)&&se._f.refs.forEach(te=>{te.disabled=se._f.disabled||N}))},0,!1))},me=(N,P)=>async V=>{let se;V&&(V.preventDefault&&V.preventDefault(),V.persist&&V.persist());let te=lr(i);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:oe,values:fe}=await E();r.errors=oe,te=lr(fe)}else await U(n);if(l.disabled.size)for(const oe of l.disabled)Zt(te,oe);if(Zt(r.errors,"root"),Hr(r.errors)){m.state.next({errors:{}});try{await N(te,V)}catch(oe){se=oe}}else P&&await P({...r.errors},V),de(),setTimeout(de);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Hr(r.errors)&&!se,submitCount:r.submitCount+1,errors:r.errors}),se)throw se},He=(N,P={})=>{Le(n,N)&&(er(P.defaultValue)?T(N,lr(Le(a,N))):(T(N,P.defaultValue),Rt(a,N,lr(P.defaultValue))),P.keepTouched||Zt(r.touchedFields,N),P.keepDirty||(Zt(r.dirtyFields,N),r.isDirty=P.defaultValue?L(N,lr(Le(a,N))):L()),P.keepError||(Zt(r.errors,N),u.isValid&&g()),m.state.next({...r}))},ut=(N,P={})=>{const V=N?lr(N):a,se=lr(V),te=Hr(N),oe=te?a:se;if(P.keepDefaultValues||(a=V),!P.keepValues){if(P.keepDirtyValues){const fe=new Set([...l.mount,...Object.keys(Ll(a,i))]);for(const De of Array.from(fe))Le(r.dirtyFields,De)?Rt(oe,De,Le(i,De)):T(De,Le(oe,De))}else{if(Pv&&er(N))for(const fe of l.mount){const De=Le(n,fe);if(De&&De._f){const Be=Array.isArray(De._f.refs)?De._f.refs[0]:De._f.ref;if(lf(Be)){const Qe=Be.closest("form");if(Qe){Qe.reset();break}}}}if(P.keepFieldsRef)for(const fe of l.mount)T(fe,Le(oe,fe));else n={}}i=t.shouldUnregister?P.keepDefaultValues?lr(a):{}:lr(oe),m.array.next({values:{...oe}}),m.state.next({values:{...oe}})}l={mount:P.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!P.keepIsValid||!!P.keepDirtyValues,o.watch=!!t.shouldUnregister,m.state.next({submitCount:P.keepSubmitCount?r.submitCount:0,isDirty:te?!1:P.keepDirty?r.isDirty:!!(P.keepDefaultValues&&!fa(N,a)),isSubmitted:P.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:te?{}:P.keepDirtyValues?P.keepDefaultValues&&i?Ll(a,i):r.dirtyFields:P.keepDefaultValues&&N?Ll(a,N):P.keepDirty?r.dirtyFields:{},touchedFields:P.keepTouched?r.touchedFields:{},errors:P.keepErrors?r.errors:{},isSubmitSuccessful:P.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},J=(N,P)=>ut(Wn(N)?N(i):N,P),Ne=(N,P={})=>{const V=Le(n,N),se=V&&V._f;if(se){const te=se.refs?se.refs[0]:se.ref;te.focus&&(te.focus(),P.shouldSelect&&Wn(te.select)&&te.select())}},Ye=N=>{r={...r,...N}},dt={control:{register:ee,unregister:ne,getFieldState:ge,handleSubmit:me,setError:M,_subscribe:X,_runSchema:E,_focusError:de,_getWatch:$,_getDirty:L,_setValid:g,_setFieldArray:v,_setDisabledField:O,_setErrors:b,_getFieldArray:R,_reset:ut,_resetDefaultValues:()=>Wn(t.defaultValues)&&t.defaultValues().then(N=>{J(N,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:F,_disableForm:ce,_subjects:m,_proxyFormState:u,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(N){o=N},get _defaultValues(){return a},get _names(){return l},set _names(N){l=N},get _formState(){return r},get _options(){return t},set _options(N){t={...t,...N}}},subscribe:ie,trigger:z,register:ee,handleSubmit:me,watch:Y,setValue:T,getValues:ae,reset:J,resetField:He,clearErrors:W,unregister:ne,setError:M,setFocus:Ne,getFieldState:ge};return{...dt,formControl:dt}}function oV(e={}){const t=pe.useRef(void 0),r=pe.useRef(void 0),[n,a]=pe.useState({isDirty:!1,isValidating:!1,isLoading:Wn(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Wn(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Wn(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=iV(e);t.current={...l,formState:n}}const i=t.current.control;return i._options=e,WB(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),pe.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),pe.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),pe.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),pe.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),pe.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),pe.useEffect(()=>{e.values&&!fa(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),pe.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=zB(n,i),t.current}const lV="_blob_18s1g_13",Nm={blob:lV};function cV(){const{register:e,handleSubmit:t,formState:{errors:r},reset:n}=oV(),[a,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),u=ts(),f=async m=>{i(!0),l(null),d(!1);try{const{error:p}=await H.auth.signInWithPassword({email:m.email,password:m.password});p?l(p.message):(d(!0),l(null),n(),setTimeout(()=>u("/"),1500))}catch(p){l(p instanceof Error?p.message:"An error occurred during login")}finally{i(!1)}};return s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4 relative overflow-hidden",children:[s.jsx("div",{className:`absolute top-20 -left-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 ${Nm.blob}`}),s.jsx("div",{className:`absolute top-40 -right-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 ${Nm.blob}`}),s.jsx("div",{className:`absolute -bottom-8 left-20 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 ${Nm.blob}`}),s.jsxs(Te,{className:"w-full max-w-md shadow-lg relative z-10 border-slate-700 bg-slate-800/90 backdrop-blur",children:[s.jsxs(ze,{className:"space-y-1",children:[s.jsx(et,{className:"text-2xl font-bold text-white",children:"Semi-Property Guardian"}),s.jsx(qC,{className:"text-slate-300",children:"Sign in to your account"})]}),s.jsxs(Ae,{children:[o&&s.jsxs(Dr,{variant:"destructive",className:"mb-4",children:[s.jsx(qa,{className:"h-4 w-4"}),s.jsx(Mr,{children:o})]}),c&&s.jsxs(Dr,{className:"mb-4 border-green-600 bg-green-50 dark:bg-green-950",children:[s.jsx(II,{className:"h-4 w-4 text-green-600"}),s.jsx(Mr,{className:"text-green-600",children:"Login successful! Redirecting..."})]}),s.jsxs("form",{onSubmit:t(f),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-slate-200",children:"Email"}),s.jsx(ke,{id:"email",type:"email",placeholder:"your@email.com",...e("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),disabled:a,className:"bg-slate-700 border-slate-600 text-white placeholder:text-slate-400"}),r.email&&s.jsx("p",{className:"text-xs text-destructive",children:r.email.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-slate-200",children:"Password"}),s.jsx(ke,{id:"password",type:"password",placeholder:"",...e("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),disabled:a,className:"bg-slate-700 border-slate-600 text-white placeholder:text-slate-400"}),r.password&&s.jsx("p",{className:"text-xs text-destructive",children:r.password.message})]}),s.jsx(le,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",disabled:a,children:a?"Signing in...":"Sign In"})]})]})]})]})}const dV=()=>{const e=es();return h.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4 text-foreground",children:"404"}),s.jsx("p",{className:"text-xl text-muted-foreground mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-primary hover:text-primary/80 underline",children:"Return to Home"})]})})},Fk=new yD({defaultOptions:{queries:{staleTime:HN,gcTime:LD,retry:1,refetchOnReconnect:!0,refetchOnWindowFocus:!0},mutations:{retry:1}}});RD({queryClient:Fk,persister:MD,maxAge:FD,buster:"v1",hydrateOptions:{defaultOptions:{queries:{staleTime:HN}}},dehydrateOptions:{shouldDehydrateMutation:()=>!1,onDeleteOldestQuery:OD}});const uV=()=>{const[e,t]=pe.useState(null);return pe.useEffect(()=>{const r=async()=>{const{data:a}=await H.auth.getSession();t(!!a.session)};r();const{data:n}=H.auth.onAuthStateChange(()=>{r()});return()=>{var a,i;return(i=(a=n==null?void 0:n.subscription)==null?void 0:a.unsubscribe)==null?void 0:i.call(a)}},[]),e===null?null:s.jsx(j3,{defaultTheme:"system",storageKey:"semi-property-theme",children:s.jsx(vD,{client:Fk,children:s.jsx(T3,{children:s.jsxs(MO,{children:[s.jsx(bR,{}),s.jsx(JR,{}),s.jsx(JF,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsxs("div",{className:"min-h-screen bg-background",children:[e&&s.jsxs(s.Fragment,{children:[s.jsx(N3,{}),s.jsx(qO,{})]}),s.jsxs("div",{className:"flex",children:[e&&s.jsx(C3,{}),s.jsx("main",{className:e?"flex-1 p-6":"w-full",children:s.jsx(zF,{children:e?s.jsxs(s.Fragment,{children:[s.jsx(Sr,{path:"/",element:s.jsx(R3,{})}),s.jsx(Sr,{path:"/inventory",element:s.jsx(WU,{})}),s.jsx(Sr,{path:"/property-cards",element:s.jsx(eB,{})}),s.jsx(Sr,{path:"/custodian-slips",element:s.jsx(nB,{})}),s.jsx(Sr,{path:"/custodians",element:s.jsx(sB,{})}),s.jsx(Sr,{path:"/transfers",element:s.jsx(NB,{})}),s.jsx(Sr,{path:"/physical-count",element:s.jsx(SB,{})}),s.jsx(Sr,{path:"/loss-reports",element:s.jsx(CB,{})}),s.jsx(Sr,{path:"/reports",element:s.jsx(MB,{})}),s.jsx(Sr,{path:"/debug",element:s.jsx(LB,{})}),s.jsx(Sr,{path:"/settings/lookups",element:s.jsx(FB,{})}),s.jsx(Sr,{path:"*",element:s.jsx(dV,{})})]}):s.jsxs(s.Fragment,{children:[s.jsx(Sr,{path:"/login",element:s.jsx(cV,{})}),s.jsx(Sr,{path:"/",element:s.jsx(t0,{to:"/login",replace:!0})}),s.jsx(Sr,{path:"*",element:s.jsx(t0,{to:"/login",replace:!0})})]})})})]})]})})]})})})})};window.addEventListener("online",()=>{$D({"propertyCards.create":async e=>{await dr.create(e.card)},"propertyCards.update":async e=>{await dr.update(e.id,e.updates)},"propertyCards.delete":async e=>{await dr.delete(e.id)},"propertyCards.addEntry":async e=>{await dr.addEntry(e.propertyCardId,e.entry)},"propertyCards.updateEntry":async e=>{await dr.updateEntry(e.propertyCardId,e.entryId,e.updates)},"propertyCards.deleteEntry":async e=>{await dr.deleteEntry(e.propertyCardId,e.entryId)},"inventory.create":async e=>{await Kr.create(e.item)},"inventory.update":async e=>{await Kr.update(e.id,e.updates)},"inventory.delete":async e=>{await Kr.delete(e.id)}}).then(({processed:e,failed:t})=>{(e||t)&&console.log(`[offline-queue] processed=${e} failed=${t}`)})});f_(document.getElementById("root")).render(s.jsx(uV,{}));
